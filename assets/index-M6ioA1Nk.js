(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();function h5(i){if(Object.prototype.hasOwnProperty.call(i,"__esModule"))return i;var t=i.default;if(typeof t=="function"){var e=function n(){var s=!1;try{s=this instanceof n}catch{}return s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(i).forEach(function(n){var s=Object.getOwnPropertyDescriptor(i,n);Object.defineProperty(e,n,s.get?s:{enumerable:!0,get:function(){return i[n]}})}),e}var oy={exports:{}},yc={};var qE;function f5(){if(qE)return yc;qE=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,s,r){var o=null;if(r!==void 0&&(o=""+r),s.key!==void 0&&(o=""+s.key),"key"in s){r={};for(var l in s)l!=="key"&&(r[l]=s[l])}else r=s;return s=r.ref,{$$typeof:i,type:n,key:o,ref:s!==void 0?s:null,props:r}}return yc.Fragment=t,yc.jsx=e,yc.jsxs=e,yc}var VE;function d5(){return VE||(VE=1,oy.exports=f5()),oy.exports}var ot=d5(),ly={exports:{}},Rt={};var YE;function g5(){if(YE)return Rt;YE=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),p=Symbol.iterator;function v(O){return O===null||typeof O!="object"?null:(O=p&&O[p]||O["@@iterator"],typeof O=="function"?O:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,b={};function M(O,N,it){this.props=O,this.context=N,this.refs=b,this.updater=it||x}M.prototype.isReactComponent={},M.prototype.setState=function(O,N){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,N,"setState")},M.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function w(){}w.prototype=M.prototype;function R(O,N,it){this.props=O,this.context=N,this.refs=b,this.updater=it||x}var A=R.prototype=new w;A.constructor=R,E(A,M.prototype),A.isPureReactComponent=!0;var T=Array.isArray;function L(){}var I={H:null,A:null,T:null,S:null},P=Object.prototype.hasOwnProperty;function k(O,N,it){var at=it.ref;return{$$typeof:i,type:O,key:N,ref:at!==void 0?at:null,props:it}}function Y(O,N){return k(O.type,N,O.props)}function F(O){return typeof O=="object"&&O!==null&&O.$$typeof===i}function G(O){var N={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(it){return N[it]})}var K=/\/+/g;function $(O,N){return typeof O=="object"&&O!==null&&O.key!=null?G(""+O.key):N.toString(36)}function q(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(L,L):(O.status="pending",O.then(function(N){O.status==="pending"&&(O.status="fulfilled",O.value=N)},function(N){O.status==="pending"&&(O.status="rejected",O.reason=N)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function D(O,N,it,at,ct){var gt=typeof O;(gt==="undefined"||gt==="boolean")&&(O=null);var yt=!1;if(O===null)yt=!0;else switch(gt){case"bigint":case"string":case"number":yt=!0;break;case"object":switch(O.$$typeof){case i:case t:yt=!0;break;case g:return yt=O._init,D(yt(O._payload),N,it,at,ct)}}if(yt)return ct=ct(O),yt=at===""?"."+$(O,0):at,T(ct)?(it="",yt!=null&&(it=yt.replace(K,"$&/")+"/"),D(ct,N,it,"",function(le){return le})):ct!=null&&(F(ct)&&(ct=Y(ct,it+(ct.key==null||O&&O.key===ct.key?"":(""+ct.key).replace(K,"$&/")+"/")+yt)),N.push(ct)),1;yt=0;var Gt=at===""?".":at+":";if(T(O))for(var Mt=0;Mt<O.length;Mt++)at=O[Mt],gt=Gt+$(at,Mt),yt+=D(at,N,it,gt,ct);else if(Mt=v(O),typeof Mt=="function")for(O=Mt.call(O),Mt=0;!(at=O.next()).done;)at=at.value,gt=Gt+$(at,Mt++),yt+=D(at,N,it,gt,ct);else if(gt==="object"){if(typeof O.then=="function")return D(q(O),N,it,at,ct);throw N=String(O),Error("Objects are not valid as a React child (found: "+(N==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":N)+"). If you meant to render a collection of children, use an array instead.")}return yt}function j(O,N,it){if(O==null)return O;var at=[],ct=0;return D(O,at,"","",function(gt){return N.call(it,gt,ct++)}),at}function U(O){if(O._status===-1){var N=O._result;N=N(),N.then(function(it){(O._status===0||O._status===-1)&&(O._status=1,O._result=it)},function(it){(O._status===0||O._status===-1)&&(O._status=2,O._result=it)}),O._status===-1&&(O._status=0,O._result=N)}if(O._status===1)return O._result.default;throw O._result}var J=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var N=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(N))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},st={map:j,forEach:function(O,N,it){j(O,function(){N.apply(this,arguments)},it)},count:function(O){var N=0;return j(O,function(){N++}),N},toArray:function(O){return j(O,function(N){return N})||[]},only:function(O){if(!F(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return Rt.Activity=m,Rt.Children=st,Rt.Component=M,Rt.Fragment=e,Rt.Profiler=s,Rt.PureComponent=R,Rt.StrictMode=n,Rt.Suspense=c,Rt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Rt.__COMPILER_RUNTIME={__proto__:null,c:function(O){return I.H.useMemoCache(O)}},Rt.cache=function(O){return function(){return O.apply(null,arguments)}},Rt.cacheSignal=function(){return null},Rt.cloneElement=function(O,N,it){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var at=E({},O.props),ct=O.key;if(N!=null)for(gt in N.key!==void 0&&(ct=""+N.key),N)!P.call(N,gt)||gt==="key"||gt==="__self"||gt==="__source"||gt==="ref"&&N.ref===void 0||(at[gt]=N[gt]);var gt=arguments.length-2;if(gt===1)at.children=it;else if(1<gt){for(var yt=Array(gt),Gt=0;Gt<gt;Gt++)yt[Gt]=arguments[Gt+2];at.children=yt}return k(O.type,ct,at)},Rt.createContext=function(O){return O={$$typeof:o,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:r,_context:O},O},Rt.createElement=function(O,N,it){var at,ct={},gt=null;if(N!=null)for(at in N.key!==void 0&&(gt=""+N.key),N)P.call(N,at)&&at!=="key"&&at!=="__self"&&at!=="__source"&&(ct[at]=N[at]);var yt=arguments.length-2;if(yt===1)ct.children=it;else if(1<yt){for(var Gt=Array(yt),Mt=0;Mt<yt;Mt++)Gt[Mt]=arguments[Mt+2];ct.children=Gt}if(O&&O.defaultProps)for(at in yt=O.defaultProps,yt)ct[at]===void 0&&(ct[at]=yt[at]);return k(O,gt,ct)},Rt.createRef=function(){return{current:null}},Rt.forwardRef=function(O){return{$$typeof:l,render:O}},Rt.isValidElement=F,Rt.lazy=function(O){return{$$typeof:g,_payload:{_status:-1,_result:O},_init:U}},Rt.memo=function(O,N){return{$$typeof:f,type:O,compare:N===void 0?null:N}},Rt.startTransition=function(O){var N=I.T,it={};I.T=it;try{var at=O(),ct=I.S;ct!==null&&ct(it,at),typeof at=="object"&&at!==null&&typeof at.then=="function"&&at.then(L,J)}catch(gt){J(gt)}finally{N!==null&&it.types!==null&&(N.types=it.types),I.T=N}},Rt.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Rt.use=function(O){return I.H.use(O)},Rt.useActionState=function(O,N,it){return I.H.useActionState(O,N,it)},Rt.useCallback=function(O,N){return I.H.useCallback(O,N)},Rt.useContext=function(O){return I.H.useContext(O)},Rt.useDebugValue=function(){},Rt.useDeferredValue=function(O,N){return I.H.useDeferredValue(O,N)},Rt.useEffect=function(O,N){return I.H.useEffect(O,N)},Rt.useEffectEvent=function(O){return I.H.useEffectEvent(O)},Rt.useId=function(){return I.H.useId()},Rt.useImperativeHandle=function(O,N,it){return I.H.useImperativeHandle(O,N,it)},Rt.useInsertionEffect=function(O,N){return I.H.useInsertionEffect(O,N)},Rt.useLayoutEffect=function(O,N){return I.H.useLayoutEffect(O,N)},Rt.useMemo=function(O,N){return I.H.useMemo(O,N)},Rt.useOptimistic=function(O,N){return I.H.useOptimistic(O,N)},Rt.useReducer=function(O,N,it){return I.H.useReducer(O,N,it)},Rt.useRef=function(O){return I.H.useRef(O)},Rt.useState=function(O){return I.H.useState(O)},Rt.useSyncExternalStore=function(O,N,it){return I.H.useSyncExternalStore(O,N,it)},Rt.useTransition=function(){return I.H.useTransition()},Rt.version="19.2.0",Rt}var XE;function c1(){return XE||(XE=1,ly.exports=g5()),ly.exports}var ge=c1(),uy={exports:{}},_c={},cy={exports:{}},hy={};var WE;function m5(){return WE||(WE=1,(function(i){function t(D,j){var U=D.length;D.push(j);t:for(;0<U;){var J=U-1>>>1,st=D[J];if(0<s(st,j))D[J]=j,D[U]=st,U=J;else break t}}function e(D){return D.length===0?null:D[0]}function n(D){if(D.length===0)return null;var j=D[0],U=D.pop();if(U!==j){D[0]=U;t:for(var J=0,st=D.length,O=st>>>1;J<O;){var N=2*(J+1)-1,it=D[N],at=N+1,ct=D[at];if(0>s(it,U))at<st&&0>s(ct,it)?(D[J]=ct,D[at]=U,J=at):(D[J]=it,D[N]=U,J=N);else if(at<st&&0>s(ct,U))D[J]=ct,D[at]=U,J=at;else break t}}return j}function s(D,j){var U=D.sortIndex-j.sortIndex;return U!==0?U:D.id-j.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var o=Date,l=o.now();i.unstable_now=function(){return o.now()-l}}var c=[],f=[],g=1,m=null,p=3,v=!1,x=!1,E=!1,b=!1,M=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function A(D){for(var j=e(f);j!==null;){if(j.callback===null)n(f);else if(j.startTime<=D)n(f),j.sortIndex=j.expirationTime,t(c,j);else break;j=e(f)}}function T(D){if(E=!1,A(D),!x)if(e(c)!==null)x=!0,L||(L=!0,G());else{var j=e(f);j!==null&&q(T,j.startTime-D)}}var L=!1,I=-1,P=5,k=-1;function Y(){return b?!0:!(i.unstable_now()-k<P)}function F(){if(b=!1,L){var D=i.unstable_now();k=D;var j=!0;try{t:{x=!1,E&&(E=!1,w(I),I=-1),v=!0;var U=p;try{e:{for(A(D),m=e(c);m!==null&&!(m.expirationTime>D&&Y());){var J=m.callback;if(typeof J=="function"){m.callback=null,p=m.priorityLevel;var st=J(m.expirationTime<=D);if(D=i.unstable_now(),typeof st=="function"){m.callback=st,A(D),j=!0;break e}m===e(c)&&n(c),A(D)}else n(c);m=e(c)}if(m!==null)j=!0;else{var O=e(f);O!==null&&q(T,O.startTime-D),j=!1}}break t}finally{m=null,p=U,v=!1}j=void 0}}finally{j?G():L=!1}}}var G;if(typeof R=="function")G=function(){R(F)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,$=K.port2;K.port1.onmessage=F,G=function(){$.postMessage(null)}}else G=function(){M(F,0)};function q(D,j){I=M(function(){D(i.unstable_now())},j)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(D){D.callback=null},i.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<D?Math.floor(1e3/D):5},i.unstable_getCurrentPriorityLevel=function(){return p},i.unstable_next=function(D){switch(p){case 1:case 2:case 3:var j=3;break;default:j=p}var U=p;p=j;try{return D()}finally{p=U}},i.unstable_requestPaint=function(){b=!0},i.unstable_runWithPriority=function(D,j){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var U=p;p=D;try{return j()}finally{p=U}},i.unstable_scheduleCallback=function(D,j,U){var J=i.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?J+U:J):U=J,D){case 1:var st=-1;break;case 2:st=250;break;case 5:st=1073741823;break;case 4:st=1e4;break;default:st=5e3}return st=U+st,D={id:g++,callback:j,priorityLevel:D,startTime:U,expirationTime:st,sortIndex:-1},U>J?(D.sortIndex=U,t(f,D),e(c)===null&&D===e(f)&&(E?(w(I),I=-1):E=!0,q(T,U-J))):(D.sortIndex=st,t(c,D),x||v||(x=!0,L||(L=!0,G()))),D},i.unstable_shouldYield=Y,i.unstable_wrapCallback=function(D){var j=p;return function(){var U=p;p=j;try{return D.apply(this,arguments)}finally{p=U}}}})(hy)),hy}var KE;function p5(){return KE||(KE=1,cy.exports=m5()),cy.exports}var fy={exports:{}},Pi={};var ZE;function y5(){if(ZE)return Pi;ZE=1;var i=c1();function t(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},s=Symbol.for("react.portal");function r(c,f,g){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:m==null?null:""+m,children:c,containerInfo:f,implementation:g}}var o=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,f){if(c==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Pi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Pi.createPortal=function(c,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return r(c,f,null,g)},Pi.flushSync=function(c){var f=o.T,g=n.p;try{if(o.T=null,n.p=2,c)return c()}finally{o.T=f,n.p=g,n.d.f()}},Pi.preconnect=function(c,f){typeof c=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,n.d.C(c,f))},Pi.prefetchDNS=function(c){typeof c=="string"&&n.d.D(c)},Pi.preinit=function(c,f){if(typeof c=="string"&&f&&typeof f.as=="string"){var g=f.as,m=l(g,f.crossOrigin),p=typeof f.integrity=="string"?f.integrity:void 0,v=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?n.d.S(c,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:m,integrity:p,fetchPriority:v}):g==="script"&&n.d.X(c,{crossOrigin:m,integrity:p,fetchPriority:v,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Pi.preinitModule=function(c,f){if(typeof c=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=l(f.as,f.crossOrigin);n.d.M(c,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&n.d.M(c)},Pi.preload=function(c,f){if(typeof c=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,m=l(g,f.crossOrigin);n.d.L(c,g,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Pi.preloadModule=function(c,f){if(typeof c=="string")if(f){var g=l(f.as,f.crossOrigin);n.d.m(c,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else n.d.m(c)},Pi.requestFormReset=function(c){n.d.r(c)},Pi.unstable_batchedUpdates=function(c,f){return c(f)},Pi.useFormState=function(c,f,g){return o.H.useFormState(c,f,g)},Pi.useFormStatus=function(){return o.H.useHostTransitionStatus()},Pi.version="19.2.0",Pi}var $E;function _5(){if($E)return fy.exports;$E=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),fy.exports=y5(),fy.exports}var QE;function v5(){if(QE)return _c;QE=1;var i=p5(),t=c1(),e=_5();function n(a){var u="https://react.dev/errors/"+a;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)u+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+a+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function r(a){var u=a,h=a;if(a.alternate)for(;u.return;)u=u.return;else{a=u;do u=a,(u.flags&4098)!==0&&(h=u.return),a=u.return;while(a)}return u.tag===3?h:null}function o(a){if(a.tag===13){var u=a.memoizedState;if(u===null&&(a=a.alternate,a!==null&&(u=a.memoizedState)),u!==null)return u.dehydrated}return null}function l(a){if(a.tag===31){var u=a.memoizedState;if(u===null&&(a=a.alternate,a!==null&&(u=a.memoizedState)),u!==null)return u.dehydrated}return null}function c(a){if(r(a)!==a)throw Error(n(188))}function f(a){var u=a.alternate;if(!u){if(u=r(a),u===null)throw Error(n(188));return u!==a?null:a}for(var h=a,d=u;;){var y=h.return;if(y===null)break;var _=y.alternate;if(_===null){if(d=y.return,d!==null){h=d;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===h)return c(y),a;if(_===d)return c(y),u;_=_.sibling}throw Error(n(188))}if(h.return!==d.return)h=y,d=_;else{for(var S=!1,C=y.child;C;){if(C===h){S=!0,h=y,d=_;break}if(C===d){S=!0,d=y,h=_;break}C=C.sibling}if(!S){for(C=_.child;C;){if(C===h){S=!0,h=_,d=y;break}if(C===d){S=!0,d=_,h=y;break}C=C.sibling}if(!S)throw Error(n(189))}}if(h.alternate!==d)throw Error(n(190))}if(h.tag!==3)throw Error(n(188));return h.stateNode.current===h?a:u}function g(a){var u=a.tag;if(u===5||u===26||u===27||u===6)return a;for(a=a.child;a!==null;){if(u=g(a),u!==null)return u;a=a.sibling}return null}var m=Object.assign,p=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),w=Symbol.for("react.consumer"),R=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),Y=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function G(a){return a===null||typeof a!="object"?null:(a=F&&a[F]||a["@@iterator"],typeof a=="function"?a:null)}var K=Symbol.for("react.client.reference");function $(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===K?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case E:return"Fragment";case M:return"Profiler";case b:return"StrictMode";case T:return"Suspense";case L:return"SuspenseList";case k:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case x:return"Portal";case R:return a.displayName||"Context";case w:return(a._context.displayName||"Context")+".Consumer";case A:var u=a.render;return a=a.displayName,a||(a=u.displayName||u.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case I:return u=a.displayName||null,u!==null?u:$(a.type)||"Memo";case P:u=a._payload,a=a._init;try{return $(a(u))}catch{}}return null}var q=Array.isArray,D=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U={pending:!1,data:null,method:null,action:null},J=[],st=-1;function O(a){return{current:a}}function N(a){0>st||(a.current=J[st],J[st]=null,st--)}function it(a,u){st++,J[st]=a.current,a.current=u}var at=O(null),ct=O(null),gt=O(null),yt=O(null);function Gt(a,u){switch(it(gt,u),it(ct,a),it(at,null),u.nodeType){case 9:case 11:a=(a=u.documentElement)&&(a=a.namespaceURI)?dE(a):0;break;default:if(a=u.tagName,u=u.namespaceURI)u=dE(u),a=gE(u,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}N(at),it(at,a)}function Mt(){N(at),N(ct),N(gt)}function le(a){a.memoizedState!==null&&it(yt,a);var u=at.current,h=gE(u,a.type);u!==h&&(it(ct,a),it(at,h))}function ft(a){ct.current===a&&(N(at),N(ct)),yt.current===a&&(N(yt),dc._currentValue=U)}var Xi,mn;function wt(a){if(Xi===void 0)try{throw Error()}catch(h){var u=h.stack.trim().match(/\n( *(at )?)/);Xi=u&&u[1]||"",mn=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Xi+a+mn}var hi=!1;function $e(a,u){if(!a||hi)return"";hi=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(u){var nt=function(){throw Error()};if(Object.defineProperty(nt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(nt,[])}catch(Z){var W=Z}Reflect.construct(a,[],nt)}else{try{nt.call()}catch(Z){W=Z}a.call(nt.prototype)}}else{try{throw Error()}catch(Z){W=Z}(nt=a())&&typeof nt.catch=="function"&&nt.catch(function(){})}}catch(Z){if(Z&&W&&typeof Z.stack=="string")return[Z.stack,W.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=d.DetermineComponentFrameRoot(),S=_[0],C=_[1];if(S&&C){var z=S.split(`
`),X=C.split(`
`);for(y=d=0;d<z.length&&!z[d].includes("DetermineComponentFrameRoot");)d++;for(;y<X.length&&!X[y].includes("DetermineComponentFrameRoot");)y++;if(d===z.length||y===X.length)for(d=z.length-1,y=X.length-1;1<=d&&0<=y&&z[d]!==X[y];)y--;for(;1<=d&&0<=y;d--,y--)if(z[d]!==X[y]){if(d!==1||y!==1)do if(d--,y--,0>y||z[d]!==X[y]){var Q=`
`+z[d].replace(" at new "," at ");return a.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",a.displayName)),Q}while(1<=d&&0<=y);break}}}finally{hi=!1,Error.prepareStackTrace=h}return(h=a?a.displayName||a.name:"")?wt(h):""}function De(a,u){switch(a.tag){case 26:case 27:case 5:return wt(a.type);case 16:return wt("Lazy");case 13:return a.child!==u&&u!==null?wt("Suspense Fallback"):wt("Suspense");case 19:return wt("SuspenseList");case 0:case 15:return $e(a.type,!1);case 11:return $e(a.type.render,!1);case 1:return $e(a.type,!0);case 31:return wt("Activity");default:return""}}function pn(a){try{var u="",h=null;do u+=De(a,h),h=a,a=a.return;while(a);return u}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var _e=Object.prototype.hasOwnProperty,Si=i.unstable_scheduleCallback,Li=i.unstable_cancelCallback,Mi=i.unstable_shouldYield,Ee=i.unstable_requestPaint,Qe=i.unstable_now,ue=i.unstable_getCurrentPriorityLevel,Qt=i.unstable_ImmediatePriority,Xt=i.unstable_UserBlockingPriority,qt=i.unstable_NormalPriority,Ie=i.unstable_LowPriority,Lt=i.unstable_IdlePriority,kt=i.log,He=i.unstable_setDisableYieldValue,we=null,ve=null;function Ge(a){if(typeof kt=="function"&&He(a),ve&&typeof ve.setStrictMode=="function")try{ve.setStrictMode(we,a)}catch{}}var Kt=Math.clz32?Math.clz32:qe,pi=Math.log,Se=Math.LN2;function qe(a){return a>>>=0,a===0?32:31-(pi(a)/Se|0)|0}var ke=256,Zt=262144,fi=4194304;function In(a){var u=a&42;if(u!==0)return u;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Hs(a,u,h){var d=a.pendingLanes;if(d===0)return 0;var y=0,_=a.suspendedLanes,S=a.pingedLanes;a=a.warmLanes;var C=d&134217727;return C!==0?(d=C&~_,d!==0?y=In(d):(S&=C,S!==0?y=In(S):h||(h=C&~a,h!==0&&(y=In(h))))):(C=d&~_,C!==0?y=In(C):S!==0?y=In(S):h||(h=d&~a,h!==0&&(y=In(h)))),y===0?0:u!==0&&u!==y&&(u&_)===0&&(_=y&-y,h=u&-u,_>=h||_===32&&(h&4194048)!==0)?u:y}function Ve(a,u){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&u)===0}function ns(a,u){switch(a){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wi(){var a=fi;return fi<<=1,(fi&62914560)===0&&(fi=4194304),a}function Wi(a){for(var u=[],h=0;31>h;h++)u.push(a);return u}function yi(a,u){a.pendingLanes|=u,u!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function ss(a,u,h,d,y,_){var S=a.pendingLanes;a.pendingLanes=h,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=h,a.entangledLanes&=h,a.errorRecoveryDisabledLanes&=h,a.shellSuspendCounter=0;var C=a.entanglements,z=a.expirationTimes,X=a.hiddenUpdates;for(h=S&~h;0<h;){var Q=31-Kt(h),nt=1<<Q;C[Q]=0,z[Q]=-1;var W=X[Q];if(W!==null)for(X[Q]=null,Q=0;Q<W.length;Q++){var Z=W[Q];Z!==null&&(Z.lane&=-536870913)}h&=~nt}d!==0&&Ln(a,d,0),_!==0&&y===0&&a.tag!==0&&(a.suspendedLanes|=_&~(S&~u))}function Ln(a,u,h){a.pendingLanes|=u,a.suspendedLanes&=~u;var d=31-Kt(u);a.entangledLanes|=u,a.entanglements[d]=a.entanglements[d]|1073741824|h&261930}function Te(a,u){var h=a.entangledLanes|=u;for(a=a.entanglements;h;){var d=31-Kt(h),y=1<<d;y&u|a[d]&u&&(a[d]|=u),h&=~y}}function _i(a,u){var h=u&-u;return h=(h&42)!==0?1:yn(h),(h&(a.suspendedLanes|u))!==0?0:h}function yn(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Cu(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Qv(){var a=j.p;return a!==0?a:(a=window.event,a===void 0?32:GE(a.type))}function Jv(a,u){var h=j.p;try{return j.p=a,u()}finally{j.p=h}}var Dr=Math.random().toString(36).slice(2),Ti="__reactFiber$"+Dr,Ki="__reactProps$"+Dr,Uo="__reactContainer$"+Dr,Q0="__reactEvents$"+Dr,tR="__reactListeners$"+Dr,eR="__reactHandles$"+Dr,tx="__reactResources$"+Dr,Ru="__reactMarker$"+Dr;function J0(a){delete a[Ti],delete a[Ki],delete a[Q0],delete a[tR],delete a[eR]}function Ho(a){var u=a[Ti];if(u)return u;for(var h=a.parentNode;h;){if(u=h[Uo]||h[Ti]){if(h=u.alternate,u.child!==null||h!==null&&h.child!==null)for(a=bE(a);a!==null;){if(h=a[Ti])return h;a=bE(a)}return u}a=h,h=a.parentNode}return null}function qo(a){if(a=a[Ti]||a[Uo]){var u=a.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return a}return null}function Au(a){var u=a.tag;if(u===5||u===26||u===27||u===6)return a.stateNode;throw Error(n(33))}function Vo(a){var u=a[tx];return u||(u=a[tx]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function vi(a){a[Ru]=!0}var ex=new Set,ix={};function Pa(a,u){Yo(a,u),Yo(a+"Capture",u)}function Yo(a,u){for(ix[a]=u,a=0;a<u.length;a++)ex.add(u[a])}var iR=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),nx={},sx={};function nR(a){return _e.call(sx,a)?!0:_e.call(nx,a)?!1:iR.test(a)?sx[a]=!0:(nx[a]=!0,!1)}function lf(a,u,h){if(nR(u))if(h===null)a.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":a.removeAttribute(u);return;case"boolean":var d=u.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){a.removeAttribute(u);return}}a.setAttribute(u,""+h)}}function uf(a,u,h){if(h===null)a.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(u);return}a.setAttribute(u,""+h)}}function qs(a,u,h,d){if(d===null)a.removeAttribute(h);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(h);return}a.setAttributeNS(u,h,""+d)}}function Pn(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function rx(a){var u=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function sR(a,u,h){var d=Object.getOwnPropertyDescriptor(a.constructor.prototype,u);if(!a.hasOwnProperty(u)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var y=d.get,_=d.set;return Object.defineProperty(a,u,{configurable:!0,get:function(){return y.call(this)},set:function(S){h=""+S,_.call(this,S)}}),Object.defineProperty(a,u,{enumerable:d.enumerable}),{getValue:function(){return h},setValue:function(S){h=""+S},stopTracking:function(){a._valueTracker=null,delete a[u]}}}}function tm(a){if(!a._valueTracker){var u=rx(a)?"checked":"value";a._valueTracker=sR(a,u,""+a[u])}}function ax(a){if(!a)return!1;var u=a._valueTracker;if(!u)return!0;var h=u.getValue(),d="";return a&&(d=rx(a)?a.checked?"true":"false":a.value),a=d,a!==h?(u.setValue(a),!0):!1}function cf(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var rR=/[\n"\\]/g;function Nn(a){return a.replace(rR,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function em(a,u,h,d,y,_,S,C){a.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?a.type=S:a.removeAttribute("type"),u!=null?S==="number"?(u===0&&a.value===""||a.value!=u)&&(a.value=""+Pn(u)):a.value!==""+Pn(u)&&(a.value=""+Pn(u)):S!=="submit"&&S!=="reset"||a.removeAttribute("value"),u!=null?im(a,S,Pn(u)):h!=null?im(a,S,Pn(h)):d!=null&&a.removeAttribute("value"),y==null&&_!=null&&(a.defaultChecked=!!_),y!=null&&(a.checked=y&&typeof y!="function"&&typeof y!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?a.name=""+Pn(C):a.removeAttribute("name")}function ox(a,u,h,d,y,_,S,C){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(a.type=_),u!=null||h!=null){if(!(_!=="submit"&&_!=="reset"||u!=null)){tm(a);return}h=h!=null?""+Pn(h):"",u=u!=null?""+Pn(u):h,C||u===a.value||(a.value=u),a.defaultValue=u}d=d??y,d=typeof d!="function"&&typeof d!="symbol"&&!!d,a.checked=C?a.checked:!!d,a.defaultChecked=!!d,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(a.name=S),tm(a)}function im(a,u,h){u==="number"&&cf(a.ownerDocument)===a||a.defaultValue===""+h||(a.defaultValue=""+h)}function Xo(a,u,h,d){if(a=a.options,u){u={};for(var y=0;y<h.length;y++)u["$"+h[y]]=!0;for(h=0;h<a.length;h++)y=u.hasOwnProperty("$"+a[h].value),a[h].selected!==y&&(a[h].selected=y),y&&d&&(a[h].defaultSelected=!0)}else{for(h=""+Pn(h),u=null,y=0;y<a.length;y++){if(a[y].value===h){a[y].selected=!0,d&&(a[y].defaultSelected=!0);return}u!==null||a[y].disabled||(u=a[y])}u!==null&&(u.selected=!0)}}function lx(a,u,h){if(u!=null&&(u=""+Pn(u),u!==a.value&&(a.value=u),h==null)){a.defaultValue!==u&&(a.defaultValue=u);return}a.defaultValue=h!=null?""+Pn(h):""}function ux(a,u,h,d){if(u==null){if(d!=null){if(h!=null)throw Error(n(92));if(q(d)){if(1<d.length)throw Error(n(93));d=d[0]}h=d}h==null&&(h=""),u=h}h=Pn(u),a.defaultValue=h,d=a.textContent,d===h&&d!==""&&d!==null&&(a.value=d),tm(a)}function Wo(a,u){if(u){var h=a.firstChild;if(h&&h===a.lastChild&&h.nodeType===3){h.nodeValue=u;return}}a.textContent=u}var aR=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function cx(a,u,h){var d=u.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?d?a.setProperty(u,""):u==="float"?a.cssFloat="":a[u]="":d?a.setProperty(u,h):typeof h!="number"||h===0||aR.has(u)?u==="float"?a.cssFloat=h:a[u]=(""+h).trim():a[u]=h+"px"}function hx(a,u,h){if(u!=null&&typeof u!="object")throw Error(n(62));if(a=a.style,h!=null){for(var d in h)!h.hasOwnProperty(d)||u!=null&&u.hasOwnProperty(d)||(d.indexOf("--")===0?a.setProperty(d,""):d==="float"?a.cssFloat="":a[d]="");for(var y in u)d=u[y],u.hasOwnProperty(y)&&h[y]!==d&&cx(a,y,d)}else for(var _ in u)u.hasOwnProperty(_)&&cx(a,_,u[_])}function nm(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var oR=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),lR=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function hf(a){return lR.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function Vs(){}var sm=null;function rm(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Ko=null,Zo=null;function fx(a){var u=qo(a);if(u&&(a=u.stateNode)){var h=a[Ki]||null;t:switch(a=u.stateNode,u.type){case"input":if(em(a,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),u=h.name,h.type==="radio"&&u!=null){for(h=a;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+Nn(""+u)+'"][type="radio"]'),u=0;u<h.length;u++){var d=h[u];if(d!==a&&d.form===a.form){var y=d[Ki]||null;if(!y)throw Error(n(90));em(d,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(u=0;u<h.length;u++)d=h[u],d.form===a.form&&ax(d)}break t;case"textarea":lx(a,h.value,h.defaultValue);break t;case"select":u=h.value,u!=null&&Xo(a,!!h.multiple,u,!1)}}}var am=!1;function dx(a,u,h){if(am)return a(u,h);am=!0;try{var d=a(u);return d}finally{if(am=!1,(Ko!==null||Zo!==null)&&(Qf(),Ko&&(u=Ko,a=Zo,Zo=Ko=null,fx(u),a)))for(u=0;u<a.length;u++)fx(a[u])}}function Ou(a,u){var h=a.stateNode;if(h===null)return null;var d=h[Ki]||null;if(d===null)return null;h=d[u];t:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(a=a.type,d=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!d;break t;default:a=!1}if(a)return null;if(h&&typeof h!="function")throw Error(n(231,u,typeof h));return h}var Ys=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),om=!1;if(Ys)try{var Du={};Object.defineProperty(Du,"passive",{get:function(){om=!0}}),window.addEventListener("test",Du,Du),window.removeEventListener("test",Du,Du)}catch{om=!1}var Ir=null,lm=null,ff=null;function gx(){if(ff)return ff;var a,u=lm,h=u.length,d,y="value"in Ir?Ir.value:Ir.textContent,_=y.length;for(a=0;a<h&&u[a]===y[a];a++);var S=h-a;for(d=1;d<=S&&u[h-d]===y[_-d];d++);return ff=y.slice(a,1<d?1-d:void 0)}function df(a){var u=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&u===13&&(a=13)):a=u,a===10&&(a=13),32<=a||a===13?a:0}function gf(){return!0}function mx(){return!1}function Zi(a){function u(h,d,y,_,S){this._reactName=h,this._targetInst=y,this.type=d,this.nativeEvent=_,this.target=S,this.currentTarget=null;for(var C in a)a.hasOwnProperty(C)&&(h=a[C],this[C]=h?h(_):_[C]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?gf:mx,this.isPropagationStopped=mx,this}return m(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=gf)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=gf)},persist:function(){},isPersistent:gf}),u}var Na={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mf=Zi(Na),Iu=m({},Na,{view:0,detail:0}),uR=Zi(Iu),um,cm,Lu,pf=m({},Iu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fm,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Lu&&(Lu&&a.type==="mousemove"?(um=a.screenX-Lu.screenX,cm=a.screenY-Lu.screenY):cm=um=0,Lu=a),um)},movementY:function(a){return"movementY"in a?a.movementY:cm}}),px=Zi(pf),cR=m({},pf,{dataTransfer:0}),hR=Zi(cR),fR=m({},Iu,{relatedTarget:0}),hm=Zi(fR),dR=m({},Na,{animationName:0,elapsedTime:0,pseudoElement:0}),gR=Zi(dR),mR=m({},Na,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),pR=Zi(mR),yR=m({},Na,{data:0}),yx=Zi(yR),_R={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bR(a){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(a):(a=xR[a])?!!u[a]:!1}function fm(){return bR}var ER=m({},Iu,{key:function(a){if(a.key){var u=_R[a.key]||a.key;if(u!=="Unidentified")return u}return a.type==="keypress"?(a=df(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?vR[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fm,charCode:function(a){return a.type==="keypress"?df(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?df(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),SR=Zi(ER),MR=m({},pf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_x=Zi(MR),wR=m({},Iu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fm}),TR=Zi(wR),CR=m({},Na,{propertyName:0,elapsedTime:0,pseudoElement:0}),RR=Zi(CR),AR=m({},pf,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),OR=Zi(AR),DR=m({},Na,{newState:0,oldState:0}),IR=Zi(DR),LR=[9,13,27,32],dm=Ys&&"CompositionEvent"in window,Pu=null;Ys&&"documentMode"in document&&(Pu=document.documentMode);var PR=Ys&&"TextEvent"in window&&!Pu,vx=Ys&&(!dm||Pu&&8<Pu&&11>=Pu),xx=" ",bx=!1;function Ex(a,u){switch(a){case"keyup":return LR.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sx(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var $o=!1;function NR(a,u){switch(a){case"compositionend":return Sx(u);case"keypress":return u.which!==32?null:(bx=!0,xx);case"textInput":return a=u.data,a===xx&&bx?null:a;default:return null}}function zR(a,u){if($o)return a==="compositionend"||!dm&&Ex(a,u)?(a=gx(),ff=lm=Ir=null,$o=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return vx&&u.locale!=="ko"?null:u.data;default:return null}}var GR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mx(a){var u=a&&a.nodeName&&a.nodeName.toLowerCase();return u==="input"?!!GR[a.type]:u==="textarea"}function wx(a,u,h,d){Ko?Zo?Zo.push(d):Zo=[d]:Ko=d,u=rd(u,"onChange"),0<u.length&&(h=new mf("onChange","change",null,h,d),a.push({event:h,listeners:u}))}var Nu=null,zu=null;function kR(a){oE(a,0)}function yf(a){var u=Au(a);if(ax(u))return a}function Tx(a,u){if(a==="change")return u}var Cx=!1;if(Ys){var gm;if(Ys){var mm="oninput"in document;if(!mm){var Rx=document.createElement("div");Rx.setAttribute("oninput","return;"),mm=typeof Rx.oninput=="function"}gm=mm}else gm=!1;Cx=gm&&(!document.documentMode||9<document.documentMode)}function Ax(){Nu&&(Nu.detachEvent("onpropertychange",Ox),zu=Nu=null)}function Ox(a){if(a.propertyName==="value"&&yf(zu)){var u=[];wx(u,zu,a,rm(a)),dx(kR,u)}}function FR(a,u,h){a==="focusin"?(Ax(),Nu=u,zu=h,Nu.attachEvent("onpropertychange",Ox)):a==="focusout"&&Ax()}function jR(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return yf(zu)}function BR(a,u){if(a==="click")return yf(u)}function UR(a,u){if(a==="input"||a==="change")return yf(u)}function HR(a,u){return a===u&&(a!==0||1/a===1/u)||a!==a&&u!==u}var _n=typeof Object.is=="function"?Object.is:HR;function Gu(a,u){if(_n(a,u))return!0;if(typeof a!="object"||a===null||typeof u!="object"||u===null)return!1;var h=Object.keys(a),d=Object.keys(u);if(h.length!==d.length)return!1;for(d=0;d<h.length;d++){var y=h[d];if(!_e.call(u,y)||!_n(a[y],u[y]))return!1}return!0}function Dx(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Ix(a,u){var h=Dx(a);a=0;for(var d;h;){if(h.nodeType===3){if(d=a+h.textContent.length,a<=u&&d>=u)return{node:h,offset:u-a};a=d}t:{for(;h;){if(h.nextSibling){h=h.nextSibling;break t}h=h.parentNode}h=void 0}h=Dx(h)}}function Lx(a,u){return a&&u?a===u?!0:a&&a.nodeType===3?!1:u&&u.nodeType===3?Lx(a,u.parentNode):"contains"in a?a.contains(u):a.compareDocumentPosition?!!(a.compareDocumentPosition(u)&16):!1:!1}function Px(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var u=cf(a.document);u instanceof a.HTMLIFrameElement;){try{var h=typeof u.contentWindow.location.href=="string"}catch{h=!1}if(h)a=u.contentWindow;else break;u=cf(a.document)}return u}function pm(a){var u=a&&a.nodeName&&a.nodeName.toLowerCase();return u&&(u==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||u==="textarea"||a.contentEditable==="true")}var qR=Ys&&"documentMode"in document&&11>=document.documentMode,Qo=null,ym=null,ku=null,_m=!1;function Nx(a,u,h){var d=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;_m||Qo==null||Qo!==cf(d)||(d=Qo,"selectionStart"in d&&pm(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),ku&&Gu(ku,d)||(ku=d,d=rd(ym,"onSelect"),0<d.length&&(u=new mf("onSelect","select",null,u,h),a.push({event:u,listeners:d}),u.target=Qo)))}function za(a,u){var h={};return h[a.toLowerCase()]=u.toLowerCase(),h["Webkit"+a]="webkit"+u,h["Moz"+a]="moz"+u,h}var Jo={animationend:za("Animation","AnimationEnd"),animationiteration:za("Animation","AnimationIteration"),animationstart:za("Animation","AnimationStart"),transitionrun:za("Transition","TransitionRun"),transitionstart:za("Transition","TransitionStart"),transitioncancel:za("Transition","TransitionCancel"),transitionend:za("Transition","TransitionEnd")},vm={},zx={};Ys&&(zx=document.createElement("div").style,"AnimationEvent"in window||(delete Jo.animationend.animation,delete Jo.animationiteration.animation,delete Jo.animationstart.animation),"TransitionEvent"in window||delete Jo.transitionend.transition);function Ga(a){if(vm[a])return vm[a];if(!Jo[a])return a;var u=Jo[a],h;for(h in u)if(u.hasOwnProperty(h)&&h in zx)return vm[a]=u[h];return a}var Gx=Ga("animationend"),kx=Ga("animationiteration"),Fx=Ga("animationstart"),VR=Ga("transitionrun"),YR=Ga("transitionstart"),XR=Ga("transitioncancel"),jx=Ga("transitionend"),Bx=new Map,xm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");xm.push("scrollEnd");function rs(a,u){Bx.set(a,u),Pa(u,[a])}var _f=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},zn=[],tl=0,bm=0;function vf(){for(var a=tl,u=bm=tl=0;u<a;){var h=zn[u];zn[u++]=null;var d=zn[u];zn[u++]=null;var y=zn[u];zn[u++]=null;var _=zn[u];if(zn[u++]=null,d!==null&&y!==null){var S=d.pending;S===null?y.next=y:(y.next=S.next,S.next=y),d.pending=y}_!==0&&Ux(h,y,_)}}function xf(a,u,h,d){zn[tl++]=a,zn[tl++]=u,zn[tl++]=h,zn[tl++]=d,bm|=d,a.lanes|=d,a=a.alternate,a!==null&&(a.lanes|=d)}function Em(a,u,h,d){return xf(a,u,h,d),bf(a)}function ka(a,u){return xf(a,null,null,u),bf(a)}function Ux(a,u,h){a.lanes|=h;var d=a.alternate;d!==null&&(d.lanes|=h);for(var y=!1,_=a.return;_!==null;)_.childLanes|=h,d=_.alternate,d!==null&&(d.childLanes|=h),_.tag===22&&(a=_.stateNode,a===null||a._visibility&1||(y=!0)),a=_,_=_.return;return a.tag===3?(_=a.stateNode,y&&u!==null&&(y=31-Kt(h),a=_.hiddenUpdates,d=a[y],d===null?a[y]=[u]:d.push(u),u.lane=h|536870912),_):null}function bf(a){if(50<ac)throw ac=0,Dp=null,Error(n(185));for(var u=a.return;u!==null;)a=u,u=a.return;return a.tag===3?a.stateNode:null}var el={};function WR(a,u,h,d){this.tag=a,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(a,u,h,d){return new WR(a,u,h,d)}function Sm(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Xs(a,u){var h=a.alternate;return h===null?(h=vn(a.tag,u,a.key,a.mode),h.elementType=a.elementType,h.type=a.type,h.stateNode=a.stateNode,h.alternate=a,a.alternate=h):(h.pendingProps=u,h.type=a.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=a.flags&65011712,h.childLanes=a.childLanes,h.lanes=a.lanes,h.child=a.child,h.memoizedProps=a.memoizedProps,h.memoizedState=a.memoizedState,h.updateQueue=a.updateQueue,u=a.dependencies,h.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},h.sibling=a.sibling,h.index=a.index,h.ref=a.ref,h.refCleanup=a.refCleanup,h}function Hx(a,u){a.flags&=65011714;var h=a.alternate;return h===null?(a.childLanes=0,a.lanes=u,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=h.childLanes,a.lanes=h.lanes,a.child=h.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=h.memoizedProps,a.memoizedState=h.memoizedState,a.updateQueue=h.updateQueue,a.type=h.type,u=h.dependencies,a.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),a}function Ef(a,u,h,d,y,_){var S=0;if(d=a,typeof a=="function")Sm(a)&&(S=1);else if(typeof a=="string")S=JA(a,h,at.current)?26:a==="html"||a==="head"||a==="body"?27:5;else t:switch(a){case k:return a=vn(31,h,u,y),a.elementType=k,a.lanes=_,a;case E:return Fa(h.children,y,_,u);case b:S=8,y|=24;break;case M:return a=vn(12,h,u,y|2),a.elementType=M,a.lanes=_,a;case T:return a=vn(13,h,u,y),a.elementType=T,a.lanes=_,a;case L:return a=vn(19,h,u,y),a.elementType=L,a.lanes=_,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case R:S=10;break t;case w:S=9;break t;case A:S=11;break t;case I:S=14;break t;case P:S=16,d=null;break t}S=29,h=Error(n(130,a===null?"null":typeof a,"")),d=null}return u=vn(S,h,u,y),u.elementType=a,u.type=d,u.lanes=_,u}function Fa(a,u,h,d){return a=vn(7,a,d,u),a.lanes=h,a}function Mm(a,u,h){return a=vn(6,a,null,u),a.lanes=h,a}function qx(a){var u=vn(18,null,null,0);return u.stateNode=a,u}function wm(a,u,h){return u=vn(4,a.children!==null?a.children:[],a.key,u),u.lanes=h,u.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},u}var Vx=new WeakMap;function Gn(a,u){if(typeof a=="object"&&a!==null){var h=Vx.get(a);return h!==void 0?h:(u={value:a,source:u,stack:pn(u)},Vx.set(a,u),u)}return{value:a,source:u,stack:pn(u)}}var il=[],nl=0,Sf=null,Fu=0,kn=[],Fn=0,Lr=null,bs=1,Es="";function Ws(a,u){il[nl++]=Fu,il[nl++]=Sf,Sf=a,Fu=u}function Yx(a,u,h){kn[Fn++]=bs,kn[Fn++]=Es,kn[Fn++]=Lr,Lr=a;var d=bs;a=Es;var y=32-Kt(d)-1;d&=~(1<<y),h+=1;var _=32-Kt(u)+y;if(30<_){var S=y-y%5;_=(d&(1<<S)-1).toString(32),d>>=S,y-=S,bs=1<<32-Kt(u)+y|h<<y|d,Es=_+a}else bs=1<<_|h<<y|d,Es=a}function Tm(a){a.return!==null&&(Ws(a,1),Yx(a,1,0))}function Cm(a){for(;a===Sf;)Sf=il[--nl],il[nl]=null,Fu=il[--nl],il[nl]=null;for(;a===Lr;)Lr=kn[--Fn],kn[Fn]=null,Es=kn[--Fn],kn[Fn]=null,bs=kn[--Fn],kn[Fn]=null}function Xx(a,u){kn[Fn++]=bs,kn[Fn++]=Es,kn[Fn++]=Lr,bs=u.id,Es=u.overflow,Lr=a}var Ci=null,Ce=null,Vt=!1,Pr=null,jn=!1,Rm=Error(n(519));function Nr(a){var u=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ju(Gn(u,a)),Rm}function Wx(a){var u=a.stateNode,h=a.type,d=a.memoizedProps;switch(u[Ti]=a,u[Ki]=d,h){case"dialog":jt("cancel",u),jt("close",u);break;case"iframe":case"object":case"embed":jt("load",u);break;case"video":case"audio":for(h=0;h<lc.length;h++)jt(lc[h],u);break;case"source":jt("error",u);break;case"img":case"image":case"link":jt("error",u),jt("load",u);break;case"details":jt("toggle",u);break;case"input":jt("invalid",u),ox(u,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":jt("invalid",u);break;case"textarea":jt("invalid",u),ux(u,d.value,d.defaultValue,d.children)}h=d.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||u.textContent===""+h||d.suppressHydrationWarning===!0||hE(u.textContent,h)?(d.popover!=null&&(jt("beforetoggle",u),jt("toggle",u)),d.onScroll!=null&&jt("scroll",u),d.onScrollEnd!=null&&jt("scrollend",u),d.onClick!=null&&(u.onclick=Vs),u=!0):u=!1,u||Nr(a,!0)}function Kx(a){for(Ci=a.return;Ci;)switch(Ci.tag){case 5:case 31:case 13:jn=!1;return;case 27:case 3:jn=!0;return;default:Ci=Ci.return}}function sl(a){if(a!==Ci)return!1;if(!Vt)return Kx(a),Vt=!0,!1;var u=a.tag,h;if((h=u!==3&&u!==27)&&((h=u===5)&&(h=a.type,h=!(h!=="form"&&h!=="button")||Yp(a.type,a.memoizedProps)),h=!h),h&&Ce&&Nr(a),Kx(a),u===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));Ce=xE(a)}else if(u===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));Ce=xE(a)}else u===27?(u=Ce,Kr(a.type)?(a=$p,$p=null,Ce=a):Ce=u):Ce=Ci?Un(a.stateNode.nextSibling):null;return!0}function ja(){Ce=Ci=null,Vt=!1}function Am(){var a=Pr;return a!==null&&(tn===null?tn=a:tn.push.apply(tn,a),Pr=null),a}function ju(a){Pr===null?Pr=[a]:Pr.push(a)}var Om=O(null),Ba=null,Ks=null;function zr(a,u,h){it(Om,u._currentValue),u._currentValue=h}function Zs(a){a._currentValue=Om.current,N(Om)}function Dm(a,u,h){for(;a!==null;){var d=a.alternate;if((a.childLanes&u)!==u?(a.childLanes|=u,d!==null&&(d.childLanes|=u)):d!==null&&(d.childLanes&u)!==u&&(d.childLanes|=u),a===h)break;a=a.return}}function Im(a,u,h,d){var y=a.child;for(y!==null&&(y.return=a);y!==null;){var _=y.dependencies;if(_!==null){var S=y.child;_=_.firstContext;t:for(;_!==null;){var C=_;_=y;for(var z=0;z<u.length;z++)if(C.context===u[z]){_.lanes|=h,C=_.alternate,C!==null&&(C.lanes|=h),Dm(_.return,h,a),d||(S=null);break t}_=C.next}}else if(y.tag===18){if(S=y.return,S===null)throw Error(n(341));S.lanes|=h,_=S.alternate,_!==null&&(_.lanes|=h),Dm(S,h,a),S=null}else S=y.child;if(S!==null)S.return=y;else for(S=y;S!==null;){if(S===a){S=null;break}if(y=S.sibling,y!==null){y.return=S.return,S=y;break}S=S.return}y=S}}function rl(a,u,h,d){a=null;for(var y=u,_=!1;y!==null;){if(!_){if((y.flags&524288)!==0)_=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var S=y.alternate;if(S===null)throw Error(n(387));if(S=S.memoizedProps,S!==null){var C=y.type;_n(y.pendingProps.value,S.value)||(a!==null?a.push(C):a=[C])}}else if(y===yt.current){if(S=y.alternate,S===null)throw Error(n(387));S.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(a!==null?a.push(dc):a=[dc])}y=y.return}a!==null&&Im(u,a,h,d),u.flags|=262144}function Mf(a){for(a=a.firstContext;a!==null;){if(!_n(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Ua(a){Ba=a,Ks=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function Ri(a){return Zx(Ba,a)}function wf(a,u){return Ba===null&&Ua(a),Zx(a,u)}function Zx(a,u){var h=u._currentValue;if(u={context:u,memoizedValue:h,next:null},Ks===null){if(a===null)throw Error(n(308));Ks=u,a.dependencies={lanes:0,firstContext:u},a.flags|=524288}else Ks=Ks.next=u;return h}var KR=typeof AbortController<"u"?AbortController:function(){var a=[],u=this.signal={aborted:!1,addEventListener:function(h,d){a.push(d)}};this.abort=function(){u.aborted=!0,a.forEach(function(h){return h()})}},ZR=i.unstable_scheduleCallback,$R=i.unstable_NormalPriority,ni={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Lm(){return{controller:new KR,data:new Map,refCount:0}}function Bu(a){a.refCount--,a.refCount===0&&ZR($R,function(){a.controller.abort()})}var Uu=null,Pm=0,al=0,ol=null;function QR(a,u){if(Uu===null){var h=Uu=[];Pm=0,al=Gp(),ol={status:"pending",value:void 0,then:function(d){h.push(d)}}}return Pm++,u.then($x,$x),u}function $x(){if(--Pm===0&&Uu!==null){ol!==null&&(ol.status="fulfilled");var a=Uu;Uu=null,al=0,ol=null;for(var u=0;u<a.length;u++)(0,a[u])()}}function JR(a,u){var h=[],d={status:"pending",value:null,reason:null,then:function(y){h.push(y)}};return a.then(function(){d.status="fulfilled",d.value=u;for(var y=0;y<h.length;y++)(0,h[y])(u)},function(y){for(d.status="rejected",d.reason=y,y=0;y<h.length;y++)(0,h[y])(void 0)}),d}var Qx=D.S;D.S=function(a,u){Nb=Qe(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&QR(a,u),Qx!==null&&Qx(a,u)};var Ha=O(null);function Nm(){var a=Ha.current;return a!==null?a:xe.pooledCache}function Tf(a,u){u===null?it(Ha,Ha.current):it(Ha,u.pool)}function Jx(){var a=Nm();return a===null?null:{parent:ni._currentValue,pool:a}}var ll=Error(n(460)),zm=Error(n(474)),Cf=Error(n(542)),Rf={then:function(){}};function t2(a){return a=a.status,a==="fulfilled"||a==="rejected"}function e2(a,u,h){switch(h=a[h],h===void 0?a.push(u):h!==u&&(u.then(Vs,Vs),u=h),u.status){case"fulfilled":return u.value;case"rejected":throw a=u.reason,n2(a),a;default:if(typeof u.status=="string")u.then(Vs,Vs);else{if(a=xe,a!==null&&100<a.shellSuspendCounter)throw Error(n(482));a=u,a.status="pending",a.then(function(d){if(u.status==="pending"){var y=u;y.status="fulfilled",y.value=d}},function(d){if(u.status==="pending"){var y=u;y.status="rejected",y.reason=d}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw a=u.reason,n2(a),a}throw Va=u,ll}}function qa(a){try{var u=a._init;return u(a._payload)}catch(h){throw h!==null&&typeof h=="object"&&typeof h.then=="function"?(Va=h,ll):h}}var Va=null;function i2(){if(Va===null)throw Error(n(459));var a=Va;return Va=null,a}function n2(a){if(a===ll||a===Cf)throw Error(n(483))}var ul=null,Hu=0;function Af(a){var u=Hu;return Hu+=1,ul===null&&(ul=[]),e2(ul,a,u)}function qu(a,u){u=u.props.ref,a.ref=u!==void 0?u:null}function Of(a,u){throw u.$$typeof===p?Error(n(525)):(a=Object.prototype.toString.call(u),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":a)))}function s2(a){function u(H,B){if(a){var V=H.deletions;V===null?(H.deletions=[B],H.flags|=16):V.push(B)}}function h(H,B){if(!a)return null;for(;B!==null;)u(H,B),B=B.sibling;return null}function d(H){for(var B=new Map;H!==null;)H.key!==null?B.set(H.key,H):B.set(H.index,H),H=H.sibling;return B}function y(H,B){return H=Xs(H,B),H.index=0,H.sibling=null,H}function _(H,B,V){return H.index=V,a?(V=H.alternate,V!==null?(V=V.index,V<B?(H.flags|=67108866,B):V):(H.flags|=67108866,B)):(H.flags|=1048576,B)}function S(H){return a&&H.alternate===null&&(H.flags|=67108866),H}function C(H,B,V,et){return B===null||B.tag!==6?(B=Mm(V,H.mode,et),B.return=H,B):(B=y(B,V),B.return=H,B)}function z(H,B,V,et){var xt=V.type;return xt===E?Q(H,B,V.props.children,et,V.key):B!==null&&(B.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===P&&qa(xt)===B.type)?(B=y(B,V.props),qu(B,V),B.return=H,B):(B=Ef(V.type,V.key,V.props,null,H.mode,et),qu(B,V),B.return=H,B)}function X(H,B,V,et){return B===null||B.tag!==4||B.stateNode.containerInfo!==V.containerInfo||B.stateNode.implementation!==V.implementation?(B=wm(V,H.mode,et),B.return=H,B):(B=y(B,V.children||[]),B.return=H,B)}function Q(H,B,V,et,xt){return B===null||B.tag!==7?(B=Fa(V,H.mode,et,xt),B.return=H,B):(B=y(B,V),B.return=H,B)}function nt(H,B,V){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=Mm(""+B,H.mode,V),B.return=H,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case v:return V=Ef(B.type,B.key,B.props,null,H.mode,V),qu(V,B),V.return=H,V;case x:return B=wm(B,H.mode,V),B.return=H,B;case P:return B=qa(B),nt(H,B,V)}if(q(B)||G(B))return B=Fa(B,H.mode,V,null),B.return=H,B;if(typeof B.then=="function")return nt(H,Af(B),V);if(B.$$typeof===R)return nt(H,wf(H,B),V);Of(H,B)}return null}function W(H,B,V,et){var xt=B!==null?B.key:null;if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return xt!==null?null:C(H,B,""+V,et);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case v:return V.key===xt?z(H,B,V,et):null;case x:return V.key===xt?X(H,B,V,et):null;case P:return V=qa(V),W(H,B,V,et)}if(q(V)||G(V))return xt!==null?null:Q(H,B,V,et,null);if(typeof V.then=="function")return W(H,B,Af(V),et);if(V.$$typeof===R)return W(H,B,wf(H,V),et);Of(H,V)}return null}function Z(H,B,V,et,xt){if(typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint")return H=H.get(V)||null,C(B,H,""+et,xt);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case v:return H=H.get(et.key===null?V:et.key)||null,z(B,H,et,xt);case x:return H=H.get(et.key===null?V:et.key)||null,X(B,H,et,xt);case P:return et=qa(et),Z(H,B,V,et,xt)}if(q(et)||G(et))return H=H.get(V)||null,Q(B,H,et,xt,null);if(typeof et.then=="function")return Z(H,B,V,Af(et),xt);if(et.$$typeof===R)return Z(H,B,V,wf(B,et),xt);Of(B,et)}return null}function pt(H,B,V,et){for(var xt=null,Jt=null,_t=B,Pt=B=0,Ut=null;_t!==null&&Pt<V.length;Pt++){_t.index>Pt?(Ut=_t,_t=null):Ut=_t.sibling;var te=W(H,_t,V[Pt],et);if(te===null){_t===null&&(_t=Ut);break}a&&_t&&te.alternate===null&&u(H,_t),B=_(te,B,Pt),Jt===null?xt=te:Jt.sibling=te,Jt=te,_t=Ut}if(Pt===V.length)return h(H,_t),Vt&&Ws(H,Pt),xt;if(_t===null){for(;Pt<V.length;Pt++)_t=nt(H,V[Pt],et),_t!==null&&(B=_(_t,B,Pt),Jt===null?xt=_t:Jt.sibling=_t,Jt=_t);return Vt&&Ws(H,Pt),xt}for(_t=d(_t);Pt<V.length;Pt++)Ut=Z(_t,H,Pt,V[Pt],et),Ut!==null&&(a&&Ut.alternate!==null&&_t.delete(Ut.key===null?Pt:Ut.key),B=_(Ut,B,Pt),Jt===null?xt=Ut:Jt.sibling=Ut,Jt=Ut);return a&&_t.forEach(function(ta){return u(H,ta)}),Vt&&Ws(H,Pt),xt}function Et(H,B,V,et){if(V==null)throw Error(n(151));for(var xt=null,Jt=null,_t=B,Pt=B=0,Ut=null,te=V.next();_t!==null&&!te.done;Pt++,te=V.next()){_t.index>Pt?(Ut=_t,_t=null):Ut=_t.sibling;var ta=W(H,_t,te.value,et);if(ta===null){_t===null&&(_t=Ut);break}a&&_t&&ta.alternate===null&&u(H,_t),B=_(ta,B,Pt),Jt===null?xt=ta:Jt.sibling=ta,Jt=ta,_t=Ut}if(te.done)return h(H,_t),Vt&&Ws(H,Pt),xt;if(_t===null){for(;!te.done;Pt++,te=V.next())te=nt(H,te.value,et),te!==null&&(B=_(te,B,Pt),Jt===null?xt=te:Jt.sibling=te,Jt=te);return Vt&&Ws(H,Pt),xt}for(_t=d(_t);!te.done;Pt++,te=V.next())te=Z(_t,H,Pt,te.value,et),te!==null&&(a&&te.alternate!==null&&_t.delete(te.key===null?Pt:te.key),B=_(te,B,Pt),Jt===null?xt=te:Jt.sibling=te,Jt=te);return a&&_t.forEach(function(c5){return u(H,c5)}),Vt&&Ws(H,Pt),xt}function ye(H,B,V,et){if(typeof V=="object"&&V!==null&&V.type===E&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case v:t:{for(var xt=V.key;B!==null;){if(B.key===xt){if(xt=V.type,xt===E){if(B.tag===7){h(H,B.sibling),et=y(B,V.props.children),et.return=H,H=et;break t}}else if(B.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===P&&qa(xt)===B.type){h(H,B.sibling),et=y(B,V.props),qu(et,V),et.return=H,H=et;break t}h(H,B);break}else u(H,B);B=B.sibling}V.type===E?(et=Fa(V.props.children,H.mode,et,V.key),et.return=H,H=et):(et=Ef(V.type,V.key,V.props,null,H.mode,et),qu(et,V),et.return=H,H=et)}return S(H);case x:t:{for(xt=V.key;B!==null;){if(B.key===xt)if(B.tag===4&&B.stateNode.containerInfo===V.containerInfo&&B.stateNode.implementation===V.implementation){h(H,B.sibling),et=y(B,V.children||[]),et.return=H,H=et;break t}else{h(H,B);break}else u(H,B);B=B.sibling}et=wm(V,H.mode,et),et.return=H,H=et}return S(H);case P:return V=qa(V),ye(H,B,V,et)}if(q(V))return pt(H,B,V,et);if(G(V)){if(xt=G(V),typeof xt!="function")throw Error(n(150));return V=xt.call(V),Et(H,B,V,et)}if(typeof V.then=="function")return ye(H,B,Af(V),et);if(V.$$typeof===R)return ye(H,B,wf(H,V),et);Of(H,V)}return typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint"?(V=""+V,B!==null&&B.tag===6?(h(H,B.sibling),et=y(B,V),et.return=H,H=et):(h(H,B),et=Mm(V,H.mode,et),et.return=H,H=et),S(H)):h(H,B)}return function(H,B,V,et){try{Hu=0;var xt=ye(H,B,V,et);return ul=null,xt}catch(_t){if(_t===ll||_t===Cf)throw _t;var Jt=vn(29,_t,null,H.mode);return Jt.lanes=et,Jt.return=H,Jt}finally{}}}var Ya=s2(!0),r2=s2(!1),Gr=!1;function Gm(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function km(a,u){a=a.updateQueue,u.updateQueue===a&&(u.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function kr(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Fr(a,u,h){var d=a.updateQueue;if(d===null)return null;if(d=d.shared,(ie&2)!==0){var y=d.pending;return y===null?u.next=u:(u.next=y.next,y.next=u),d.pending=u,u=bf(a),Ux(a,null,h),u}return xf(a,d,u,h),bf(a)}function Vu(a,u,h){if(u=u.updateQueue,u!==null&&(u=u.shared,(h&4194048)!==0)){var d=u.lanes;d&=a.pendingLanes,h|=d,u.lanes=h,Te(a,h)}}function Fm(a,u){var h=a.updateQueue,d=a.alternate;if(d!==null&&(d=d.updateQueue,h===d)){var y=null,_=null;if(h=h.firstBaseUpdate,h!==null){do{var S={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};_===null?y=_=S:_=_.next=S,h=h.next}while(h!==null);_===null?y=_=u:_=_.next=u}else y=_=u;h={baseState:d.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:d.shared,callbacks:d.callbacks},a.updateQueue=h;return}a=h.lastBaseUpdate,a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=u}var jm=!1;function Yu(){if(jm){var a=ol;if(a!==null)throw a}}function Xu(a,u,h,d){jm=!1;var y=a.updateQueue;Gr=!1;var _=y.firstBaseUpdate,S=y.lastBaseUpdate,C=y.shared.pending;if(C!==null){y.shared.pending=null;var z=C,X=z.next;z.next=null,S===null?_=X:S.next=X,S=z;var Q=a.alternate;Q!==null&&(Q=Q.updateQueue,C=Q.lastBaseUpdate,C!==S&&(C===null?Q.firstBaseUpdate=X:C.next=X,Q.lastBaseUpdate=z))}if(_!==null){var nt=y.baseState;S=0,Q=X=z=null,C=_;do{var W=C.lane&-536870913,Z=W!==C.lane;if(Z?(Bt&W)===W:(d&W)===W){W!==0&&W===al&&(jm=!0),Q!==null&&(Q=Q.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});t:{var pt=a,Et=C;W=u;var ye=h;switch(Et.tag){case 1:if(pt=Et.payload,typeof pt=="function"){nt=pt.call(ye,nt,W);break t}nt=pt;break t;case 3:pt.flags=pt.flags&-65537|128;case 0:if(pt=Et.payload,W=typeof pt=="function"?pt.call(ye,nt,W):pt,W==null)break t;nt=m({},nt,W);break t;case 2:Gr=!0}}W=C.callback,W!==null&&(a.flags|=64,Z&&(a.flags|=8192),Z=y.callbacks,Z===null?y.callbacks=[W]:Z.push(W))}else Z={lane:W,tag:C.tag,payload:C.payload,callback:C.callback,next:null},Q===null?(X=Q=Z,z=nt):Q=Q.next=Z,S|=W;if(C=C.next,C===null){if(C=y.shared.pending,C===null)break;Z=C,C=Z.next,Z.next=null,y.lastBaseUpdate=Z,y.shared.pending=null}}while(!0);Q===null&&(z=nt),y.baseState=z,y.firstBaseUpdate=X,y.lastBaseUpdate=Q,_===null&&(y.shared.lanes=0),qr|=S,a.lanes=S,a.memoizedState=nt}}function a2(a,u){if(typeof a!="function")throw Error(n(191,a));a.call(u)}function o2(a,u){var h=a.callbacks;if(h!==null)for(a.callbacks=null,a=0;a<h.length;a++)a2(h[a],u)}var cl=O(null),Df=O(0);function l2(a,u){a=rr,it(Df,a),it(cl,u),rr=a|u.baseLanes}function Bm(){it(Df,rr),it(cl,cl.current)}function Um(){rr=Df.current,N(cl),N(Df)}var xn=O(null),Bn=null;function jr(a){var u=a.alternate;it(Je,Je.current&1),it(xn,a),Bn===null&&(u===null||cl.current!==null||u.memoizedState!==null)&&(Bn=a)}function Hm(a){it(Je,Je.current),it(xn,a),Bn===null&&(Bn=a)}function u2(a){a.tag===22?(it(Je,Je.current),it(xn,a),Bn===null&&(Bn=a)):Br()}function Br(){it(Je,Je.current),it(xn,xn.current)}function bn(a){N(xn),Bn===a&&(Bn=null),N(Je)}var Je=O(0);function If(a){for(var u=a;u!==null;){if(u.tag===13){var h=u.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||Kp(h)||Zp(h)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var $s=0,Dt=null,me=null,si=null,Lf=!1,hl=!1,Xa=!1,Pf=0,Wu=0,fl=null,tA=0;function Ye(){throw Error(n(321))}function qm(a,u){if(u===null)return!1;for(var h=0;h<u.length&&h<a.length;h++)if(!_n(a[h],u[h]))return!1;return!0}function Vm(a,u,h,d,y,_){return $s=_,Dt=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,D.H=a===null||a.memoizedState===null?Y2:ap,Xa=!1,_=h(d,y),Xa=!1,hl&&(_=h2(u,h,d,y)),c2(a),_}function c2(a){D.H=$u;var u=me!==null&&me.next!==null;if($s=0,si=me=Dt=null,Lf=!1,Wu=0,fl=null,u)throw Error(n(300));a===null||ri||(a=a.dependencies,a!==null&&Mf(a)&&(ri=!0))}function h2(a,u,h,d){Dt=a;var y=0;do{if(hl&&(fl=null),Wu=0,hl=!1,25<=y)throw Error(n(301));if(y+=1,si=me=null,a.updateQueue!=null){var _=a.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}D.H=X2,_=u(h,d)}while(hl);return _}function eA(){var a=D.H,u=a.useState()[0];return u=typeof u.then=="function"?Ku(u):u,a=a.useState()[0],(me!==null?me.memoizedState:null)!==a&&(Dt.flags|=1024),u}function Ym(){var a=Pf!==0;return Pf=0,a}function Xm(a,u,h){u.updateQueue=a.updateQueue,u.flags&=-2053,a.lanes&=~h}function Wm(a){if(Lf){for(a=a.memoizedState;a!==null;){var u=a.queue;u!==null&&(u.pending=null),a=a.next}Lf=!1}$s=0,si=me=Dt=null,hl=!1,Wu=Pf=0,fl=null}function Hi(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return si===null?Dt.memoizedState=si=a:si=si.next=a,si}function ti(){if(me===null){var a=Dt.alternate;a=a!==null?a.memoizedState:null}else a=me.next;var u=si===null?Dt.memoizedState:si.next;if(u!==null)si=u,me=a;else{if(a===null)throw Dt.alternate===null?Error(n(467)):Error(n(310));me=a,a={memoizedState:me.memoizedState,baseState:me.baseState,baseQueue:me.baseQueue,queue:me.queue,next:null},si===null?Dt.memoizedState=si=a:si=si.next=a}return si}function Nf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ku(a){var u=Wu;return Wu+=1,fl===null&&(fl=[]),a=e2(fl,a,u),u=Dt,(si===null?u.memoizedState:si.next)===null&&(u=u.alternate,D.H=u===null||u.memoizedState===null?Y2:ap),a}function zf(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Ku(a);if(a.$$typeof===R)return Ri(a)}throw Error(n(438,String(a)))}function Km(a){var u=null,h=Dt.updateQueue;if(h!==null&&(u=h.memoCache),u==null){var d=Dt.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(u={data:d.data.map(function(y){return y.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),h===null&&(h=Nf(),Dt.updateQueue=h),h.memoCache=u,h=u.data[u.index],h===void 0)for(h=u.data[u.index]=Array(a),d=0;d<a;d++)h[d]=Y;return u.index++,h}function Qs(a,u){return typeof u=="function"?u(a):u}function Gf(a){var u=ti();return Zm(u,me,a)}function Zm(a,u,h){var d=a.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=h;var y=a.baseQueue,_=d.pending;if(_!==null){if(y!==null){var S=y.next;y.next=_.next,_.next=S}u.baseQueue=y=_,d.pending=null}if(_=a.baseState,y===null)a.memoizedState=_;else{u=y.next;var C=S=null,z=null,X=u,Q=!1;do{var nt=X.lane&-536870913;if(nt!==X.lane?(Bt&nt)===nt:($s&nt)===nt){var W=X.revertLane;if(W===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),nt===al&&(Q=!0);else if(($s&W)===W){X=X.next,W===al&&(Q=!0);continue}else nt={lane:0,revertLane:X.revertLane,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},z===null?(C=z=nt,S=_):z=z.next=nt,Dt.lanes|=W,qr|=W;nt=X.action,Xa&&h(_,nt),_=X.hasEagerState?X.eagerState:h(_,nt)}else W={lane:nt,revertLane:X.revertLane,gesture:X.gesture,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},z===null?(C=z=W,S=_):z=z.next=W,Dt.lanes|=nt,qr|=nt;X=X.next}while(X!==null&&X!==u);if(z===null?S=_:z.next=C,!_n(_,a.memoizedState)&&(ri=!0,Q&&(h=ol,h!==null)))throw h;a.memoizedState=_,a.baseState=S,a.baseQueue=z,d.lastRenderedState=_}return y===null&&(d.lanes=0),[a.memoizedState,d.dispatch]}function $m(a){var u=ti(),h=u.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=a;var d=h.dispatch,y=h.pending,_=u.memoizedState;if(y!==null){h.pending=null;var S=y=y.next;do _=a(_,S.action),S=S.next;while(S!==y);_n(_,u.memoizedState)||(ri=!0),u.memoizedState=_,u.baseQueue===null&&(u.baseState=_),h.lastRenderedState=_}return[_,d]}function f2(a,u,h){var d=Dt,y=ti(),_=Vt;if(_){if(h===void 0)throw Error(n(407));h=h()}else h=u();var S=!_n((me||y).memoizedState,h);if(S&&(y.memoizedState=h,ri=!0),y=y.queue,tp(m2.bind(null,d,y,a),[a]),y.getSnapshot!==u||S||si!==null&&si.memoizedState.tag&1){if(d.flags|=2048,dl(9,{destroy:void 0},g2.bind(null,d,y,h,u),null),xe===null)throw Error(n(349));_||($s&127)!==0||d2(d,u,h)}return h}function d2(a,u,h){a.flags|=16384,a={getSnapshot:u,value:h},u=Dt.updateQueue,u===null?(u=Nf(),Dt.updateQueue=u,u.stores=[a]):(h=u.stores,h===null?u.stores=[a]:h.push(a))}function g2(a,u,h,d){u.value=h,u.getSnapshot=d,p2(u)&&y2(a)}function m2(a,u,h){return h(function(){p2(u)&&y2(a)})}function p2(a){var u=a.getSnapshot;a=a.value;try{var h=u();return!_n(a,h)}catch{return!0}}function y2(a){var u=ka(a,2);u!==null&&en(u,a,2)}function Qm(a){var u=Hi();if(typeof a=="function"){var h=a;if(a=h(),Xa){Ge(!0);try{h()}finally{Ge(!1)}}}return u.memoizedState=u.baseState=a,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qs,lastRenderedState:a},u}function _2(a,u,h,d){return a.baseState=h,Zm(a,me,typeof d=="function"?d:Qs)}function iA(a,u,h,d,y){if(jf(a))throw Error(n(485));if(a=u.action,a!==null){var _={payload:y,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){_.listeners.push(S)}};D.T!==null?h(!0):_.isTransition=!1,d(_),h=u.pending,h===null?(_.next=u.pending=_,v2(u,_)):(_.next=h.next,u.pending=h.next=_)}}function v2(a,u){var h=u.action,d=u.payload,y=a.state;if(u.isTransition){var _=D.T,S={};D.T=S;try{var C=h(y,d),z=D.S;z!==null&&z(S,C),x2(a,u,C)}catch(X){Jm(a,u,X)}finally{_!==null&&S.types!==null&&(_.types=S.types),D.T=_}}else try{_=h(y,d),x2(a,u,_)}catch(X){Jm(a,u,X)}}function x2(a,u,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(d){b2(a,u,d)},function(d){return Jm(a,u,d)}):b2(a,u,h)}function b2(a,u,h){u.status="fulfilled",u.value=h,E2(u),a.state=h,u=a.pending,u!==null&&(h=u.next,h===u?a.pending=null:(h=h.next,u.next=h,v2(a,h)))}function Jm(a,u,h){var d=a.pending;if(a.pending=null,d!==null){d=d.next;do u.status="rejected",u.reason=h,E2(u),u=u.next;while(u!==d)}a.action=null}function E2(a){a=a.listeners;for(var u=0;u<a.length;u++)(0,a[u])()}function S2(a,u){return u}function M2(a,u){if(Vt){var h=xe.formState;if(h!==null){t:{var d=Dt;if(Vt){if(Ce){e:{for(var y=Ce,_=jn;y.nodeType!==8;){if(!_){y=null;break e}if(y=Un(y.nextSibling),y===null){y=null;break e}}_=y.data,y=_==="F!"||_==="F"?y:null}if(y){Ce=Un(y.nextSibling),d=y.data==="F!";break t}}Nr(d)}d=!1}d&&(u=h[0])}}return h=Hi(),h.memoizedState=h.baseState=u,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:S2,lastRenderedState:u},h.queue=d,h=H2.bind(null,Dt,d),d.dispatch=h,d=Qm(!1),_=rp.bind(null,Dt,!1,d.queue),d=Hi(),y={state:u,dispatch:null,action:a,pending:null},d.queue=y,h=iA.bind(null,Dt,y,_,h),y.dispatch=h,d.memoizedState=a,[u,h,!1]}function w2(a){var u=ti();return T2(u,me,a)}function T2(a,u,h){if(u=Zm(a,u,S2)[0],a=Gf(Qs)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var d=Ku(u)}catch(S){throw S===ll?Cf:S}else d=u;u=ti();var y=u.queue,_=y.dispatch;return h!==u.memoizedState&&(Dt.flags|=2048,dl(9,{destroy:void 0},nA.bind(null,y,h),null)),[d,_,a]}function nA(a,u){a.action=u}function C2(a){var u=ti(),h=me;if(h!==null)return T2(u,h,a);ti(),u=u.memoizedState,h=ti();var d=h.queue.dispatch;return h.memoizedState=a,[u,d,!1]}function dl(a,u,h,d){return a={tag:a,create:h,deps:d,inst:u,next:null},u=Dt.updateQueue,u===null&&(u=Nf(),Dt.updateQueue=u),h=u.lastEffect,h===null?u.lastEffect=a.next=a:(d=h.next,h.next=a,a.next=d,u.lastEffect=a),a}function R2(){return ti().memoizedState}function kf(a,u,h,d){var y=Hi();Dt.flags|=a,y.memoizedState=dl(1|u,{destroy:void 0},h,d===void 0?null:d)}function Ff(a,u,h,d){var y=ti();d=d===void 0?null:d;var _=y.memoizedState.inst;me!==null&&d!==null&&qm(d,me.memoizedState.deps)?y.memoizedState=dl(u,_,h,d):(Dt.flags|=a,y.memoizedState=dl(1|u,_,h,d))}function A2(a,u){kf(8390656,8,a,u)}function tp(a,u){Ff(2048,8,a,u)}function sA(a){Dt.flags|=4;var u=Dt.updateQueue;if(u===null)u=Nf(),Dt.updateQueue=u,u.events=[a];else{var h=u.events;h===null?u.events=[a]:h.push(a)}}function O2(a){var u=ti().memoizedState;return sA({ref:u,nextImpl:a}),function(){if((ie&2)!==0)throw Error(n(440));return u.impl.apply(void 0,arguments)}}function D2(a,u){return Ff(4,2,a,u)}function I2(a,u){return Ff(4,4,a,u)}function L2(a,u){if(typeof u=="function"){a=a();var h=u(a);return function(){typeof h=="function"?h():u(null)}}if(u!=null)return a=a(),u.current=a,function(){u.current=null}}function P2(a,u,h){h=h!=null?h.concat([a]):null,Ff(4,4,L2.bind(null,u,a),h)}function ep(){}function N2(a,u){var h=ti();u=u===void 0?null:u;var d=h.memoizedState;return u!==null&&qm(u,d[1])?d[0]:(h.memoizedState=[a,u],a)}function z2(a,u){var h=ti();u=u===void 0?null:u;var d=h.memoizedState;if(u!==null&&qm(u,d[1]))return d[0];if(d=a(),Xa){Ge(!0);try{a()}finally{Ge(!1)}}return h.memoizedState=[d,u],d}function ip(a,u,h){return h===void 0||($s&1073741824)!==0&&(Bt&261930)===0?a.memoizedState=u:(a.memoizedState=h,a=Gb(),Dt.lanes|=a,qr|=a,h)}function G2(a,u,h,d){return _n(h,u)?h:cl.current!==null?(a=ip(a,h,d),_n(a,u)||(ri=!0),a):($s&42)===0||($s&1073741824)!==0&&(Bt&261930)===0?(ri=!0,a.memoizedState=h):(a=Gb(),Dt.lanes|=a,qr|=a,u)}function k2(a,u,h,d,y){var _=j.p;j.p=_!==0&&8>_?_:8;var S=D.T,C={};D.T=C,rp(a,!1,u,h);try{var z=y(),X=D.S;if(X!==null&&X(C,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var Q=JR(z,d);Zu(a,u,Q,Mn(a))}else Zu(a,u,d,Mn(a))}catch(nt){Zu(a,u,{then:function(){},status:"rejected",reason:nt},Mn())}finally{j.p=_,S!==null&&C.types!==null&&(S.types=C.types),D.T=S}}function rA(){}function np(a,u,h,d){if(a.tag!==5)throw Error(n(476));var y=F2(a).queue;k2(a,y,u,U,h===null?rA:function(){return j2(a),h(d)})}function F2(a){var u=a.memoizedState;if(u!==null)return u;u={memoizedState:U,baseState:U,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qs,lastRenderedState:U},next:null};var h={};return u.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qs,lastRenderedState:h},next:null},a.memoizedState=u,a=a.alternate,a!==null&&(a.memoizedState=u),u}function j2(a){var u=F2(a);u.next===null&&(u=a.alternate.memoizedState),Zu(a,u.next.queue,{},Mn())}function sp(){return Ri(dc)}function B2(){return ti().memoizedState}function U2(){return ti().memoizedState}function aA(a){for(var u=a.return;u!==null;){switch(u.tag){case 24:case 3:var h=Mn();a=kr(h);var d=Fr(u,a,h);d!==null&&(en(d,u,h),Vu(d,u,h)),u={cache:Lm()},a.payload=u;return}u=u.return}}function oA(a,u,h){var d=Mn();h={lane:d,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},jf(a)?q2(u,h):(h=Em(a,u,h,d),h!==null&&(en(h,a,d),V2(h,u,d)))}function H2(a,u,h){var d=Mn();Zu(a,u,h,d)}function Zu(a,u,h,d){var y={lane:d,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null};if(jf(a))q2(u,y);else{var _=a.alternate;if(a.lanes===0&&(_===null||_.lanes===0)&&(_=u.lastRenderedReducer,_!==null))try{var S=u.lastRenderedState,C=_(S,h);if(y.hasEagerState=!0,y.eagerState=C,_n(C,S))return xf(a,u,y,0),xe===null&&vf(),!1}catch{}finally{}if(h=Em(a,u,y,d),h!==null)return en(h,a,d),V2(h,u,d),!0}return!1}function rp(a,u,h,d){if(d={lane:2,revertLane:Gp(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},jf(a)){if(u)throw Error(n(479))}else u=Em(a,h,d,2),u!==null&&en(u,a,2)}function jf(a){var u=a.alternate;return a===Dt||u!==null&&u===Dt}function q2(a,u){hl=Lf=!0;var h=a.pending;h===null?u.next=u:(u.next=h.next,h.next=u),a.pending=u}function V2(a,u,h){if((h&4194048)!==0){var d=u.lanes;d&=a.pendingLanes,h|=d,u.lanes=h,Te(a,h)}}var $u={readContext:Ri,use:zf,useCallback:Ye,useContext:Ye,useEffect:Ye,useImperativeHandle:Ye,useLayoutEffect:Ye,useInsertionEffect:Ye,useMemo:Ye,useReducer:Ye,useRef:Ye,useState:Ye,useDebugValue:Ye,useDeferredValue:Ye,useTransition:Ye,useSyncExternalStore:Ye,useId:Ye,useHostTransitionStatus:Ye,useFormState:Ye,useActionState:Ye,useOptimistic:Ye,useMemoCache:Ye,useCacheRefresh:Ye};$u.useEffectEvent=Ye;var Y2={readContext:Ri,use:zf,useCallback:function(a,u){return Hi().memoizedState=[a,u===void 0?null:u],a},useContext:Ri,useEffect:A2,useImperativeHandle:function(a,u,h){h=h!=null?h.concat([a]):null,kf(4194308,4,L2.bind(null,u,a),h)},useLayoutEffect:function(a,u){return kf(4194308,4,a,u)},useInsertionEffect:function(a,u){kf(4,2,a,u)},useMemo:function(a,u){var h=Hi();u=u===void 0?null:u;var d=a();if(Xa){Ge(!0);try{a()}finally{Ge(!1)}}return h.memoizedState=[d,u],d},useReducer:function(a,u,h){var d=Hi();if(h!==void 0){var y=h(u);if(Xa){Ge(!0);try{h(u)}finally{Ge(!1)}}}else y=u;return d.memoizedState=d.baseState=y,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:y},d.queue=a,a=a.dispatch=oA.bind(null,Dt,a),[d.memoizedState,a]},useRef:function(a){var u=Hi();return a={current:a},u.memoizedState=a},useState:function(a){a=Qm(a);var u=a.queue,h=H2.bind(null,Dt,u);return u.dispatch=h,[a.memoizedState,h]},useDebugValue:ep,useDeferredValue:function(a,u){var h=Hi();return ip(h,a,u)},useTransition:function(){var a=Qm(!1);return a=k2.bind(null,Dt,a.queue,!0,!1),Hi().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,u,h){var d=Dt,y=Hi();if(Vt){if(h===void 0)throw Error(n(407));h=h()}else{if(h=u(),xe===null)throw Error(n(349));(Bt&127)!==0||d2(d,u,h)}y.memoizedState=h;var _={value:h,getSnapshot:u};return y.queue=_,A2(m2.bind(null,d,_,a),[a]),d.flags|=2048,dl(9,{destroy:void 0},g2.bind(null,d,_,h,u),null),h},useId:function(){var a=Hi(),u=xe.identifierPrefix;if(Vt){var h=Es,d=bs;h=(d&~(1<<32-Kt(d)-1)).toString(32)+h,u="_"+u+"R_"+h,h=Pf++,0<h&&(u+="H"+h.toString(32)),u+="_"}else h=tA++,u="_"+u+"r_"+h.toString(32)+"_";return a.memoizedState=u},useHostTransitionStatus:sp,useFormState:M2,useActionState:M2,useOptimistic:function(a){var u=Hi();u.memoizedState=u.baseState=a;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=h,u=rp.bind(null,Dt,!0,h),h.dispatch=u,[a,u]},useMemoCache:Km,useCacheRefresh:function(){return Hi().memoizedState=aA.bind(null,Dt)},useEffectEvent:function(a){var u=Hi(),h={impl:a};return u.memoizedState=h,function(){if((ie&2)!==0)throw Error(n(440));return h.impl.apply(void 0,arguments)}}},ap={readContext:Ri,use:zf,useCallback:N2,useContext:Ri,useEffect:tp,useImperativeHandle:P2,useInsertionEffect:D2,useLayoutEffect:I2,useMemo:z2,useReducer:Gf,useRef:R2,useState:function(){return Gf(Qs)},useDebugValue:ep,useDeferredValue:function(a,u){var h=ti();return G2(h,me.memoizedState,a,u)},useTransition:function(){var a=Gf(Qs)[0],u=ti().memoizedState;return[typeof a=="boolean"?a:Ku(a),u]},useSyncExternalStore:f2,useId:B2,useHostTransitionStatus:sp,useFormState:w2,useActionState:w2,useOptimistic:function(a,u){var h=ti();return _2(h,me,a,u)},useMemoCache:Km,useCacheRefresh:U2};ap.useEffectEvent=O2;var X2={readContext:Ri,use:zf,useCallback:N2,useContext:Ri,useEffect:tp,useImperativeHandle:P2,useInsertionEffect:D2,useLayoutEffect:I2,useMemo:z2,useReducer:$m,useRef:R2,useState:function(){return $m(Qs)},useDebugValue:ep,useDeferredValue:function(a,u){var h=ti();return me===null?ip(h,a,u):G2(h,me.memoizedState,a,u)},useTransition:function(){var a=$m(Qs)[0],u=ti().memoizedState;return[typeof a=="boolean"?a:Ku(a),u]},useSyncExternalStore:f2,useId:B2,useHostTransitionStatus:sp,useFormState:C2,useActionState:C2,useOptimistic:function(a,u){var h=ti();return me!==null?_2(h,me,a,u):(h.baseState=a,[a,h.queue.dispatch])},useMemoCache:Km,useCacheRefresh:U2};X2.useEffectEvent=O2;function op(a,u,h,d){u=a.memoizedState,h=h(d,u),h=h==null?u:m({},u,h),a.memoizedState=h,a.lanes===0&&(a.updateQueue.baseState=h)}var lp={enqueueSetState:function(a,u,h){a=a._reactInternals;var d=Mn(),y=kr(d);y.payload=u,h!=null&&(y.callback=h),u=Fr(a,y,d),u!==null&&(en(u,a,d),Vu(u,a,d))},enqueueReplaceState:function(a,u,h){a=a._reactInternals;var d=Mn(),y=kr(d);y.tag=1,y.payload=u,h!=null&&(y.callback=h),u=Fr(a,y,d),u!==null&&(en(u,a,d),Vu(u,a,d))},enqueueForceUpdate:function(a,u){a=a._reactInternals;var h=Mn(),d=kr(h);d.tag=2,u!=null&&(d.callback=u),u=Fr(a,d,h),u!==null&&(en(u,a,h),Vu(u,a,h))}};function W2(a,u,h,d,y,_,S){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(d,_,S):u.prototype&&u.prototype.isPureReactComponent?!Gu(h,d)||!Gu(y,_):!0}function K2(a,u,h,d){a=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(h,d),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(h,d),u.state!==a&&lp.enqueueReplaceState(u,u.state,null)}function Wa(a,u){var h=u;if("ref"in u){h={};for(var d in u)d!=="ref"&&(h[d]=u[d])}if(a=a.defaultProps){h===u&&(h=m({},h));for(var y in a)h[y]===void 0&&(h[y]=a[y])}return h}function Z2(a){_f(a)}function $2(a){console.error(a)}function Q2(a){_f(a)}function Bf(a,u){try{var h=a.onUncaughtError;h(u.value,{componentStack:u.stack})}catch(d){setTimeout(function(){throw d})}}function J2(a,u,h){try{var d=a.onCaughtError;d(h.value,{componentStack:h.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function up(a,u,h){return h=kr(h),h.tag=3,h.payload={element:null},h.callback=function(){Bf(a,u)},h}function tb(a){return a=kr(a),a.tag=3,a}function eb(a,u,h,d){var y=h.type.getDerivedStateFromError;if(typeof y=="function"){var _=d.value;a.payload=function(){return y(_)},a.callback=function(){J2(u,h,d)}}var S=h.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(a.callback=function(){J2(u,h,d),typeof y!="function"&&(Vr===null?Vr=new Set([this]):Vr.add(this));var C=d.stack;this.componentDidCatch(d.value,{componentStack:C!==null?C:""})})}function lA(a,u,h,d,y){if(h.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(u=h.alternate,u!==null&&rl(u,h,y,!0),h=xn.current,h!==null){switch(h.tag){case 31:case 13:return Bn===null?Jf():h.alternate===null&&Xe===0&&(Xe=3),h.flags&=-257,h.flags|=65536,h.lanes=y,d===Rf?h.flags|=16384:(u=h.updateQueue,u===null?h.updateQueue=new Set([d]):u.add(d),Pp(a,d,y)),!1;case 22:return h.flags|=65536,d===Rf?h.flags|=16384:(u=h.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([d])},h.updateQueue=u):(h=u.retryQueue,h===null?u.retryQueue=new Set([d]):h.add(d)),Pp(a,d,y)),!1}throw Error(n(435,h.tag))}return Pp(a,d,y),Jf(),!1}if(Vt)return u=xn.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=y,d!==Rm&&(a=Error(n(422),{cause:d}),ju(Gn(a,h)))):(d!==Rm&&(u=Error(n(423),{cause:d}),ju(Gn(u,h))),a=a.current.alternate,a.flags|=65536,y&=-y,a.lanes|=y,d=Gn(d,h),y=up(a.stateNode,d,y),Fm(a,y),Xe!==4&&(Xe=2)),!1;var _=Error(n(520),{cause:d});if(_=Gn(_,h),rc===null?rc=[_]:rc.push(_),Xe!==4&&(Xe=2),u===null)return!0;d=Gn(d,h),h=u;do{switch(h.tag){case 3:return h.flags|=65536,a=y&-y,h.lanes|=a,a=up(h.stateNode,d,a),Fm(h,a),!1;case 1:if(u=h.type,_=h.stateNode,(h.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Vr===null||!Vr.has(_))))return h.flags|=65536,y&=-y,h.lanes|=y,y=tb(y),eb(y,a,h,d),Fm(h,y),!1}h=h.return}while(h!==null);return!1}var cp=Error(n(461)),ri=!1;function Ai(a,u,h,d){u.child=a===null?r2(u,null,h,d):Ya(u,a.child,h,d)}function ib(a,u,h,d,y){h=h.render;var _=u.ref;if("ref"in d){var S={};for(var C in d)C!=="ref"&&(S[C]=d[C])}else S=d;return Ua(u),d=Vm(a,u,h,S,_,y),C=Ym(),a!==null&&!ri?(Xm(a,u,y),Js(a,u,y)):(Vt&&C&&Tm(u),u.flags|=1,Ai(a,u,d,y),u.child)}function nb(a,u,h,d,y){if(a===null){var _=h.type;return typeof _=="function"&&!Sm(_)&&_.defaultProps===void 0&&h.compare===null?(u.tag=15,u.type=_,sb(a,u,_,d,y)):(a=Ef(h.type,null,d,u,u.mode,y),a.ref=u.ref,a.return=u,u.child=a)}if(_=a.child,!_p(a,y)){var S=_.memoizedProps;if(h=h.compare,h=h!==null?h:Gu,h(S,d)&&a.ref===u.ref)return Js(a,u,y)}return u.flags|=1,a=Xs(_,d),a.ref=u.ref,a.return=u,u.child=a}function sb(a,u,h,d,y){if(a!==null){var _=a.memoizedProps;if(Gu(_,d)&&a.ref===u.ref)if(ri=!1,u.pendingProps=d=_,_p(a,y))(a.flags&131072)!==0&&(ri=!0);else return u.lanes=a.lanes,Js(a,u,y)}return hp(a,u,h,d,y)}function rb(a,u,h,d){var y=d.children,_=a!==null?a.memoizedState:null;if(a===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((u.flags&128)!==0){if(_=_!==null?_.baseLanes|h:h,a!==null){for(d=u.child=a.child,y=0;d!==null;)y=y|d.lanes|d.childLanes,d=d.sibling;d=y&~_}else d=0,u.child=null;return ab(a,u,_,h,d)}if((h&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},a!==null&&Tf(u,_!==null?_.cachePool:null),_!==null?l2(u,_):Bm(),u2(u);else return d=u.lanes=536870912,ab(a,u,_!==null?_.baseLanes|h:h,h,d)}else _!==null?(Tf(u,_.cachePool),l2(u,_),Br(),u.memoizedState=null):(a!==null&&Tf(u,null),Bm(),Br());return Ai(a,u,y,h),u.child}function Qu(a,u){return a!==null&&a.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function ab(a,u,h,d,y){var _=Nm();return _=_===null?null:{parent:ni._currentValue,pool:_},u.memoizedState={baseLanes:h,cachePool:_},a!==null&&Tf(u,null),Bm(),u2(u),a!==null&&rl(a,u,d,!0),u.childLanes=y,null}function Uf(a,u){return u=qf({mode:u.mode,children:u.children},a.mode),u.ref=a.ref,a.child=u,u.return=a,u}function ob(a,u,h){return Ya(u,a.child,null,h),a=Uf(u,u.pendingProps),a.flags|=2,bn(u),u.memoizedState=null,a}function uA(a,u,h){var d=u.pendingProps,y=(u.flags&128)!==0;if(u.flags&=-129,a===null){if(Vt){if(d.mode==="hidden")return a=Uf(u,d),u.lanes=536870912,Qu(null,a);if(Hm(u),(a=Ce)?(a=vE(a,jn),a=a!==null&&a.data==="&"?a:null,a!==null&&(u.memoizedState={dehydrated:a,treeContext:Lr!==null?{id:bs,overflow:Es}:null,retryLane:536870912,hydrationErrors:null},h=qx(a),h.return=u,u.child=h,Ci=u,Ce=null)):a=null,a===null)throw Nr(u);return u.lanes=536870912,null}return Uf(u,d)}var _=a.memoizedState;if(_!==null){var S=_.dehydrated;if(Hm(u),y)if(u.flags&256)u.flags&=-257,u=ob(a,u,h);else if(u.memoizedState!==null)u.child=a.child,u.flags|=128,u=null;else throw Error(n(558));else if(ri||rl(a,u,h,!1),y=(h&a.childLanes)!==0,ri||y){if(d=xe,d!==null&&(S=_i(d,h),S!==0&&S!==_.retryLane))throw _.retryLane=S,ka(a,S),en(d,a,S),cp;Jf(),u=ob(a,u,h)}else a=_.treeContext,Ce=Un(S.nextSibling),Ci=u,Vt=!0,Pr=null,jn=!1,a!==null&&Xx(u,a),u=Uf(u,d),u.flags|=4096;return u}return a=Xs(a.child,{mode:d.mode,children:d.children}),a.ref=u.ref,u.child=a,a.return=u,a}function Hf(a,u){var h=u.ref;if(h===null)a!==null&&a.ref!==null&&(u.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(n(284));(a===null||a.ref!==h)&&(u.flags|=4194816)}}function hp(a,u,h,d,y){return Ua(u),h=Vm(a,u,h,d,void 0,y),d=Ym(),a!==null&&!ri?(Xm(a,u,y),Js(a,u,y)):(Vt&&d&&Tm(u),u.flags|=1,Ai(a,u,h,y),u.child)}function lb(a,u,h,d,y,_){return Ua(u),u.updateQueue=null,h=h2(u,d,h,y),c2(a),d=Ym(),a!==null&&!ri?(Xm(a,u,_),Js(a,u,_)):(Vt&&d&&Tm(u),u.flags|=1,Ai(a,u,h,_),u.child)}function ub(a,u,h,d,y){if(Ua(u),u.stateNode===null){var _=el,S=h.contextType;typeof S=="object"&&S!==null&&(_=Ri(S)),_=new h(d,_),u.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=lp,u.stateNode=_,_._reactInternals=u,_=u.stateNode,_.props=d,_.state=u.memoizedState,_.refs={},Gm(u),S=h.contextType,_.context=typeof S=="object"&&S!==null?Ri(S):el,_.state=u.memoizedState,S=h.getDerivedStateFromProps,typeof S=="function"&&(op(u,h,S,d),_.state=u.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(S=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),S!==_.state&&lp.enqueueReplaceState(_,_.state,null),Xu(u,d,_,y),Yu(),_.state=u.memoizedState),typeof _.componentDidMount=="function"&&(u.flags|=4194308),d=!0}else if(a===null){_=u.stateNode;var C=u.memoizedProps,z=Wa(h,C);_.props=z;var X=_.context,Q=h.contextType;S=el,typeof Q=="object"&&Q!==null&&(S=Ri(Q));var nt=h.getDerivedStateFromProps;Q=typeof nt=="function"||typeof _.getSnapshotBeforeUpdate=="function",C=u.pendingProps!==C,Q||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(C||X!==S)&&K2(u,_,d,S),Gr=!1;var W=u.memoizedState;_.state=W,Xu(u,d,_,y),Yu(),X=u.memoizedState,C||W!==X||Gr?(typeof nt=="function"&&(op(u,h,nt,d),X=u.memoizedState),(z=Gr||W2(u,h,z,d,W,X,S))?(Q||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(u.flags|=4194308)):(typeof _.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=d,u.memoizedState=X),_.props=d,_.state=X,_.context=S,d=z):(typeof _.componentDidMount=="function"&&(u.flags|=4194308),d=!1)}else{_=u.stateNode,km(a,u),S=u.memoizedProps,Q=Wa(h,S),_.props=Q,nt=u.pendingProps,W=_.context,X=h.contextType,z=el,typeof X=="object"&&X!==null&&(z=Ri(X)),C=h.getDerivedStateFromProps,(X=typeof C=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(S!==nt||W!==z)&&K2(u,_,d,z),Gr=!1,W=u.memoizedState,_.state=W,Xu(u,d,_,y),Yu();var Z=u.memoizedState;S!==nt||W!==Z||Gr||a!==null&&a.dependencies!==null&&Mf(a.dependencies)?(typeof C=="function"&&(op(u,h,C,d),Z=u.memoizedState),(Q=Gr||W2(u,h,Q,d,W,Z,z)||a!==null&&a.dependencies!==null&&Mf(a.dependencies))?(X||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(d,Z,z),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(d,Z,z)),typeof _.componentDidUpdate=="function"&&(u.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof _.componentDidUpdate!="function"||S===a.memoizedProps&&W===a.memoizedState||(u.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||S===a.memoizedProps&&W===a.memoizedState||(u.flags|=1024),u.memoizedProps=d,u.memoizedState=Z),_.props=d,_.state=Z,_.context=z,d=Q):(typeof _.componentDidUpdate!="function"||S===a.memoizedProps&&W===a.memoizedState||(u.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||S===a.memoizedProps&&W===a.memoizedState||(u.flags|=1024),d=!1)}return _=d,Hf(a,u),d=(u.flags&128)!==0,_||d?(_=u.stateNode,h=d&&typeof h.getDerivedStateFromError!="function"?null:_.render(),u.flags|=1,a!==null&&d?(u.child=Ya(u,a.child,null,y),u.child=Ya(u,null,h,y)):Ai(a,u,h,y),u.memoizedState=_.state,a=u.child):a=Js(a,u,y),a}function cb(a,u,h,d){return ja(),u.flags|=256,Ai(a,u,h,d),u.child}var fp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function dp(a){return{baseLanes:a,cachePool:Jx()}}function gp(a,u,h){return a=a!==null?a.childLanes&~h:0,u&&(a|=Sn),a}function hb(a,u,h){var d=u.pendingProps,y=!1,_=(u.flags&128)!==0,S;if((S=_)||(S=a!==null&&a.memoizedState===null?!1:(Je.current&2)!==0),S&&(y=!0,u.flags&=-129),S=(u.flags&32)!==0,u.flags&=-33,a===null){if(Vt){if(y?jr(u):Br(),(a=Ce)?(a=vE(a,jn),a=a!==null&&a.data!=="&"?a:null,a!==null&&(u.memoizedState={dehydrated:a,treeContext:Lr!==null?{id:bs,overflow:Es}:null,retryLane:536870912,hydrationErrors:null},h=qx(a),h.return=u,u.child=h,Ci=u,Ce=null)):a=null,a===null)throw Nr(u);return Zp(a)?u.lanes=32:u.lanes=536870912,null}var C=d.children;return d=d.fallback,y?(Br(),y=u.mode,C=qf({mode:"hidden",children:C},y),d=Fa(d,y,h,null),C.return=u,d.return=u,C.sibling=d,u.child=C,d=u.child,d.memoizedState=dp(h),d.childLanes=gp(a,S,h),u.memoizedState=fp,Qu(null,d)):(jr(u),mp(u,C))}var z=a.memoizedState;if(z!==null&&(C=z.dehydrated,C!==null)){if(_)u.flags&256?(jr(u),u.flags&=-257,u=pp(a,u,h)):u.memoizedState!==null?(Br(),u.child=a.child,u.flags|=128,u=null):(Br(),C=d.fallback,y=u.mode,d=qf({mode:"visible",children:d.children},y),C=Fa(C,y,h,null),C.flags|=2,d.return=u,C.return=u,d.sibling=C,u.child=d,Ya(u,a.child,null,h),d=u.child,d.memoizedState=dp(h),d.childLanes=gp(a,S,h),u.memoizedState=fp,u=Qu(null,d));else if(jr(u),Zp(C)){if(S=C.nextSibling&&C.nextSibling.dataset,S)var X=S.dgst;S=X,d=Error(n(419)),d.stack="",d.digest=S,ju({value:d,source:null,stack:null}),u=pp(a,u,h)}else if(ri||rl(a,u,h,!1),S=(h&a.childLanes)!==0,ri||S){if(S=xe,S!==null&&(d=_i(S,h),d!==0&&d!==z.retryLane))throw z.retryLane=d,ka(a,d),en(S,a,d),cp;Kp(C)||Jf(),u=pp(a,u,h)}else Kp(C)?(u.flags|=192,u.child=a.child,u=null):(a=z.treeContext,Ce=Un(C.nextSibling),Ci=u,Vt=!0,Pr=null,jn=!1,a!==null&&Xx(u,a),u=mp(u,d.children),u.flags|=4096);return u}return y?(Br(),C=d.fallback,y=u.mode,z=a.child,X=z.sibling,d=Xs(z,{mode:"hidden",children:d.children}),d.subtreeFlags=z.subtreeFlags&65011712,X!==null?C=Xs(X,C):(C=Fa(C,y,h,null),C.flags|=2),C.return=u,d.return=u,d.sibling=C,u.child=d,Qu(null,d),d=u.child,C=a.child.memoizedState,C===null?C=dp(h):(y=C.cachePool,y!==null?(z=ni._currentValue,y=y.parent!==z?{parent:z,pool:z}:y):y=Jx(),C={baseLanes:C.baseLanes|h,cachePool:y}),d.memoizedState=C,d.childLanes=gp(a,S,h),u.memoizedState=fp,Qu(a.child,d)):(jr(u),h=a.child,a=h.sibling,h=Xs(h,{mode:"visible",children:d.children}),h.return=u,h.sibling=null,a!==null&&(S=u.deletions,S===null?(u.deletions=[a],u.flags|=16):S.push(a)),u.child=h,u.memoizedState=null,h)}function mp(a,u){return u=qf({mode:"visible",children:u},a.mode),u.return=a,a.child=u}function qf(a,u){return a=vn(22,a,null,u),a.lanes=0,a}function pp(a,u,h){return Ya(u,a.child,null,h),a=mp(u,u.pendingProps.children),a.flags|=2,u.memoizedState=null,a}function fb(a,u,h){a.lanes|=u;var d=a.alternate;d!==null&&(d.lanes|=u),Dm(a.return,u,h)}function yp(a,u,h,d,y,_){var S=a.memoizedState;S===null?a.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:d,tail:h,tailMode:y,treeForkCount:_}:(S.isBackwards=u,S.rendering=null,S.renderingStartTime=0,S.last=d,S.tail=h,S.tailMode=y,S.treeForkCount=_)}function db(a,u,h){var d=u.pendingProps,y=d.revealOrder,_=d.tail;d=d.children;var S=Je.current,C=(S&2)!==0;if(C?(S=S&1|2,u.flags|=128):S&=1,it(Je,S),Ai(a,u,d,h),d=Vt?Fu:0,!C&&a!==null&&(a.flags&128)!==0)t:for(a=u.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&fb(a,h,u);else if(a.tag===19)fb(a,h,u);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===u)break t;for(;a.sibling===null;){if(a.return===null||a.return===u)break t;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(y){case"forwards":for(h=u.child,y=null;h!==null;)a=h.alternate,a!==null&&If(a)===null&&(y=h),h=h.sibling;h=y,h===null?(y=u.child,u.child=null):(y=h.sibling,h.sibling=null),yp(u,!1,y,h,_,d);break;case"backwards":case"unstable_legacy-backwards":for(h=null,y=u.child,u.child=null;y!==null;){if(a=y.alternate,a!==null&&If(a)===null){u.child=y;break}a=y.sibling,y.sibling=h,h=y,y=a}yp(u,!0,h,null,_,d);break;case"together":yp(u,!1,null,null,void 0,d);break;default:u.memoizedState=null}return u.child}function Js(a,u,h){if(a!==null&&(u.dependencies=a.dependencies),qr|=u.lanes,(h&u.childLanes)===0)if(a!==null){if(rl(a,u,h,!1),(h&u.childLanes)===0)return null}else return null;if(a!==null&&u.child!==a.child)throw Error(n(153));if(u.child!==null){for(a=u.child,h=Xs(a,a.pendingProps),u.child=h,h.return=u;a.sibling!==null;)a=a.sibling,h=h.sibling=Xs(a,a.pendingProps),h.return=u;h.sibling=null}return u.child}function _p(a,u){return(a.lanes&u)!==0?!0:(a=a.dependencies,!!(a!==null&&Mf(a)))}function cA(a,u,h){switch(u.tag){case 3:Gt(u,u.stateNode.containerInfo),zr(u,ni,a.memoizedState.cache),ja();break;case 27:case 5:le(u);break;case 4:Gt(u,u.stateNode.containerInfo);break;case 10:zr(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,Hm(u),null;break;case 13:var d=u.memoizedState;if(d!==null)return d.dehydrated!==null?(jr(u),u.flags|=128,null):(h&u.child.childLanes)!==0?hb(a,u,h):(jr(u),a=Js(a,u,h),a!==null?a.sibling:null);jr(u);break;case 19:var y=(a.flags&128)!==0;if(d=(h&u.childLanes)!==0,d||(rl(a,u,h,!1),d=(h&u.childLanes)!==0),y){if(d)return db(a,u,h);u.flags|=128}if(y=u.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),it(Je,Je.current),d)break;return null;case 22:return u.lanes=0,rb(a,u,h,u.pendingProps);case 24:zr(u,ni,a.memoizedState.cache)}return Js(a,u,h)}function gb(a,u,h){if(a!==null)if(a.memoizedProps!==u.pendingProps)ri=!0;else{if(!_p(a,h)&&(u.flags&128)===0)return ri=!1,cA(a,u,h);ri=(a.flags&131072)!==0}else ri=!1,Vt&&(u.flags&1048576)!==0&&Yx(u,Fu,u.index);switch(u.lanes=0,u.tag){case 16:t:{var d=u.pendingProps;if(a=qa(u.elementType),u.type=a,typeof a=="function")Sm(a)?(d=Wa(a,d),u.tag=1,u=ub(null,u,a,d,h)):(u.tag=0,u=hp(null,u,a,d,h));else{if(a!=null){var y=a.$$typeof;if(y===A){u.tag=11,u=ib(null,u,a,d,h);break t}else if(y===I){u.tag=14,u=nb(null,u,a,d,h);break t}}throw u=$(a)||a,Error(n(306,u,""))}}return u;case 0:return hp(a,u,u.type,u.pendingProps,h);case 1:return d=u.type,y=Wa(d,u.pendingProps),ub(a,u,d,y,h);case 3:t:{if(Gt(u,u.stateNode.containerInfo),a===null)throw Error(n(387));d=u.pendingProps;var _=u.memoizedState;y=_.element,km(a,u),Xu(u,d,null,h);var S=u.memoizedState;if(d=S.cache,zr(u,ni,d),d!==_.cache&&Im(u,[ni],h,!0),Yu(),d=S.element,_.isDehydrated)if(_={element:d,isDehydrated:!1,cache:S.cache},u.updateQueue.baseState=_,u.memoizedState=_,u.flags&256){u=cb(a,u,d,h);break t}else if(d!==y){y=Gn(Error(n(424)),u),ju(y),u=cb(a,u,d,h);break t}else{switch(a=u.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(Ce=Un(a.firstChild),Ci=u,Vt=!0,Pr=null,jn=!0,h=r2(u,null,d,h),u.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(ja(),d===y){u=Js(a,u,h);break t}Ai(a,u,d,h)}u=u.child}return u;case 26:return Hf(a,u),a===null?(h=wE(u.type,null,u.pendingProps,null))?u.memoizedState=h:Vt||(h=u.type,a=u.pendingProps,d=ad(gt.current).createElement(h),d[Ti]=u,d[Ki]=a,Oi(d,h,a),vi(d),u.stateNode=d):u.memoizedState=wE(u.type,a.memoizedProps,u.pendingProps,a.memoizedState),null;case 27:return le(u),a===null&&Vt&&(d=u.stateNode=EE(u.type,u.pendingProps,gt.current),Ci=u,jn=!0,y=Ce,Kr(u.type)?($p=y,Ce=Un(d.firstChild)):Ce=y),Ai(a,u,u.pendingProps.children,h),Hf(a,u),a===null&&(u.flags|=4194304),u.child;case 5:return a===null&&Vt&&((y=d=Ce)&&(d=jA(d,u.type,u.pendingProps,jn),d!==null?(u.stateNode=d,Ci=u,Ce=Un(d.firstChild),jn=!1,y=!0):y=!1),y||Nr(u)),le(u),y=u.type,_=u.pendingProps,S=a!==null?a.memoizedProps:null,d=_.children,Yp(y,_)?d=null:S!==null&&Yp(y,S)&&(u.flags|=32),u.memoizedState!==null&&(y=Vm(a,u,eA,null,null,h),dc._currentValue=y),Hf(a,u),Ai(a,u,d,h),u.child;case 6:return a===null&&Vt&&((a=h=Ce)&&(h=BA(h,u.pendingProps,jn),h!==null?(u.stateNode=h,Ci=u,Ce=null,a=!0):a=!1),a||Nr(u)),null;case 13:return hb(a,u,h);case 4:return Gt(u,u.stateNode.containerInfo),d=u.pendingProps,a===null?u.child=Ya(u,null,d,h):Ai(a,u,d,h),u.child;case 11:return ib(a,u,u.type,u.pendingProps,h);case 7:return Ai(a,u,u.pendingProps,h),u.child;case 8:return Ai(a,u,u.pendingProps.children,h),u.child;case 12:return Ai(a,u,u.pendingProps.children,h),u.child;case 10:return d=u.pendingProps,zr(u,u.type,d.value),Ai(a,u,d.children,h),u.child;case 9:return y=u.type._context,d=u.pendingProps.children,Ua(u),y=Ri(y),d=d(y),u.flags|=1,Ai(a,u,d,h),u.child;case 14:return nb(a,u,u.type,u.pendingProps,h);case 15:return sb(a,u,u.type,u.pendingProps,h);case 19:return db(a,u,h);case 31:return uA(a,u,h);case 22:return rb(a,u,h,u.pendingProps);case 24:return Ua(u),d=Ri(ni),a===null?(y=Nm(),y===null&&(y=xe,_=Lm(),y.pooledCache=_,_.refCount++,_!==null&&(y.pooledCacheLanes|=h),y=_),u.memoizedState={parent:d,cache:y},Gm(u),zr(u,ni,y)):((a.lanes&h)!==0&&(km(a,u),Xu(u,null,null,h),Yu()),y=a.memoizedState,_=u.memoizedState,y.parent!==d?(y={parent:d,cache:d},u.memoizedState=y,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=y),zr(u,ni,d)):(d=_.cache,zr(u,ni,d),d!==y.cache&&Im(u,[ni],h,!0))),Ai(a,u,u.pendingProps.children,h),u.child;case 29:throw u.pendingProps}throw Error(n(156,u.tag))}function tr(a){a.flags|=4}function vp(a,u,h,d,y){if((u=(a.mode&32)!==0)&&(u=!1),u){if(a.flags|=16777216,(y&335544128)===y)if(a.stateNode.complete)a.flags|=8192;else if(Bb())a.flags|=8192;else throw Va=Rf,zm}else a.flags&=-16777217}function mb(a,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!OE(u))if(Bb())a.flags|=8192;else throw Va=Rf,zm}function Vf(a,u){u!==null&&(a.flags|=4),a.flags&16384&&(u=a.tag!==22?wi():536870912,a.lanes|=u,yl|=u)}function Ju(a,u){if(!Vt)switch(a.tailMode){case"hidden":u=a.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?a.tail=null:h.sibling=null;break;case"collapsed":h=a.tail;for(var d=null;h!==null;)h.alternate!==null&&(d=h),h=h.sibling;d===null?u||a.tail===null?a.tail=null:a.tail.sibling=null:d.sibling=null}}function Re(a){var u=a.alternate!==null&&a.alternate.child===a.child,h=0,d=0;if(u)for(var y=a.child;y!==null;)h|=y.lanes|y.childLanes,d|=y.subtreeFlags&65011712,d|=y.flags&65011712,y.return=a,y=y.sibling;else for(y=a.child;y!==null;)h|=y.lanes|y.childLanes,d|=y.subtreeFlags,d|=y.flags,y.return=a,y=y.sibling;return a.subtreeFlags|=d,a.childLanes=h,u}function hA(a,u,h){var d=u.pendingProps;switch(Cm(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Re(u),null;case 1:return Re(u),null;case 3:return h=u.stateNode,d=null,a!==null&&(d=a.memoizedState.cache),u.memoizedState.cache!==d&&(u.flags|=2048),Zs(ni),Mt(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(a===null||a.child===null)&&(sl(u)?tr(u):a===null||a.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,Am())),Re(u),null;case 26:var y=u.type,_=u.memoizedState;return a===null?(tr(u),_!==null?(Re(u),mb(u,_)):(Re(u),vp(u,y,null,d,h))):_?_!==a.memoizedState?(tr(u),Re(u),mb(u,_)):(Re(u),u.flags&=-16777217):(a=a.memoizedProps,a!==d&&tr(u),Re(u),vp(u,y,a,d,h)),null;case 27:if(ft(u),h=gt.current,y=u.type,a!==null&&u.stateNode!=null)a.memoizedProps!==d&&tr(u);else{if(!d){if(u.stateNode===null)throw Error(n(166));return Re(u),null}a=at.current,sl(u)?Wx(u):(a=EE(y,d,h),u.stateNode=a,tr(u))}return Re(u),null;case 5:if(ft(u),y=u.type,a!==null&&u.stateNode!=null)a.memoizedProps!==d&&tr(u);else{if(!d){if(u.stateNode===null)throw Error(n(166));return Re(u),null}if(_=at.current,sl(u))Wx(u);else{var S=ad(gt.current);switch(_){case 1:_=S.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:_=S.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":_=S.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":_=S.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":_=S.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof d.is=="string"?S.createElement("select",{is:d.is}):S.createElement("select"),d.multiple?_.multiple=!0:d.size&&(_.size=d.size);break;default:_=typeof d.is=="string"?S.createElement(y,{is:d.is}):S.createElement(y)}}_[Ti]=u,_[Ki]=d;t:for(S=u.child;S!==null;){if(S.tag===5||S.tag===6)_.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===u)break t;for(;S.sibling===null;){if(S.return===null||S.return===u)break t;S=S.return}S.sibling.return=S.return,S=S.sibling}u.stateNode=_;t:switch(Oi(_,y,d),y){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break t;case"img":d=!0;break t;default:d=!1}d&&tr(u)}}return Re(u),vp(u,u.type,a===null?null:a.memoizedProps,u.pendingProps,h),null;case 6:if(a&&u.stateNode!=null)a.memoizedProps!==d&&tr(u);else{if(typeof d!="string"&&u.stateNode===null)throw Error(n(166));if(a=gt.current,sl(u)){if(a=u.stateNode,h=u.memoizedProps,d=null,y=Ci,y!==null)switch(y.tag){case 27:case 5:d=y.memoizedProps}a[Ti]=u,a=!!(a.nodeValue===h||d!==null&&d.suppressHydrationWarning===!0||hE(a.nodeValue,h)),a||Nr(u,!0)}else a=ad(a).createTextNode(d),a[Ti]=u,u.stateNode=a}return Re(u),null;case 31:if(h=u.memoizedState,a===null||a.memoizedState!==null){if(d=sl(u),h!==null){if(a===null){if(!d)throw Error(n(318));if(a=u.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(557));a[Ti]=u}else ja(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Re(u),a=!1}else h=Am(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=h),a=!0;if(!a)return u.flags&256?(bn(u),u):(bn(u),null);if((u.flags&128)!==0)throw Error(n(558))}return Re(u),null;case 13:if(d=u.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(y=sl(u),d!==null&&d.dehydrated!==null){if(a===null){if(!y)throw Error(n(318));if(y=u.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(n(317));y[Ti]=u}else ja(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Re(u),y=!1}else y=Am(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=y),y=!0;if(!y)return u.flags&256?(bn(u),u):(bn(u),null)}return bn(u),(u.flags&128)!==0?(u.lanes=h,u):(h=d!==null,a=a!==null&&a.memoizedState!==null,h&&(d=u.child,y=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(y=d.alternate.memoizedState.cachePool.pool),_=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(_=d.memoizedState.cachePool.pool),_!==y&&(d.flags|=2048)),h!==a&&h&&(u.child.flags|=8192),Vf(u,u.updateQueue),Re(u),null);case 4:return Mt(),a===null&&Bp(u.stateNode.containerInfo),Re(u),null;case 10:return Zs(u.type),Re(u),null;case 19:if(N(Je),d=u.memoizedState,d===null)return Re(u),null;if(y=(u.flags&128)!==0,_=d.rendering,_===null)if(y)Ju(d,!1);else{if(Xe!==0||a!==null&&(a.flags&128)!==0)for(a=u.child;a!==null;){if(_=If(a),_!==null){for(u.flags|=128,Ju(d,!1),a=_.updateQueue,u.updateQueue=a,Vf(u,a),u.subtreeFlags=0,a=h,h=u.child;h!==null;)Hx(h,a),h=h.sibling;return it(Je,Je.current&1|2),Vt&&Ws(u,d.treeForkCount),u.child}a=a.sibling}d.tail!==null&&Qe()>Zf&&(u.flags|=128,y=!0,Ju(d,!1),u.lanes=4194304)}else{if(!y)if(a=If(_),a!==null){if(u.flags|=128,y=!0,a=a.updateQueue,u.updateQueue=a,Vf(u,a),Ju(d,!0),d.tail===null&&d.tailMode==="hidden"&&!_.alternate&&!Vt)return Re(u),null}else 2*Qe()-d.renderingStartTime>Zf&&h!==536870912&&(u.flags|=128,y=!0,Ju(d,!1),u.lanes=4194304);d.isBackwards?(_.sibling=u.child,u.child=_):(a=d.last,a!==null?a.sibling=_:u.child=_,d.last=_)}return d.tail!==null?(a=d.tail,d.rendering=a,d.tail=a.sibling,d.renderingStartTime=Qe(),a.sibling=null,h=Je.current,it(Je,y?h&1|2:h&1),Vt&&Ws(u,d.treeForkCount),a):(Re(u),null);case 22:case 23:return bn(u),Um(),d=u.memoizedState!==null,a!==null?a.memoizedState!==null!==d&&(u.flags|=8192):d&&(u.flags|=8192),d?(h&536870912)!==0&&(u.flags&128)===0&&(Re(u),u.subtreeFlags&6&&(u.flags|=8192)):Re(u),h=u.updateQueue,h!==null&&Vf(u,h.retryQueue),h=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),d=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(d=u.memoizedState.cachePool.pool),d!==h&&(u.flags|=2048),a!==null&&N(Ha),null;case 24:return h=null,a!==null&&(h=a.memoizedState.cache),u.memoizedState.cache!==h&&(u.flags|=2048),Zs(ni),Re(u),null;case 25:return null;case 30:return null}throw Error(n(156,u.tag))}function fA(a,u){switch(Cm(u),u.tag){case 1:return a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 3:return Zs(ni),Mt(),a=u.flags,(a&65536)!==0&&(a&128)===0?(u.flags=a&-65537|128,u):null;case 26:case 27:case 5:return ft(u),null;case 31:if(u.memoizedState!==null){if(bn(u),u.alternate===null)throw Error(n(340));ja()}return a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 13:if(bn(u),a=u.memoizedState,a!==null&&a.dehydrated!==null){if(u.alternate===null)throw Error(n(340));ja()}return a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 19:return N(Je),null;case 4:return Mt(),null;case 10:return Zs(u.type),null;case 22:case 23:return bn(u),Um(),a!==null&&N(Ha),a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 24:return Zs(ni),null;case 25:return null;default:return null}}function pb(a,u){switch(Cm(u),u.tag){case 3:Zs(ni),Mt();break;case 26:case 27:case 5:ft(u);break;case 4:Mt();break;case 31:u.memoizedState!==null&&bn(u);break;case 13:bn(u);break;case 19:N(Je);break;case 10:Zs(u.type);break;case 22:case 23:bn(u),Um(),a!==null&&N(Ha);break;case 24:Zs(ni)}}function tc(a,u){try{var h=u.updateQueue,d=h!==null?h.lastEffect:null;if(d!==null){var y=d.next;h=y;do{if((h.tag&a)===a){d=void 0;var _=h.create,S=h.inst;d=_(),S.destroy=d}h=h.next}while(h!==y)}}catch(C){he(u,u.return,C)}}function Ur(a,u,h){try{var d=u.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var _=y.next;d=_;do{if((d.tag&a)===a){var S=d.inst,C=S.destroy;if(C!==void 0){S.destroy=void 0,y=u;var z=h,X=C;try{X()}catch(Q){he(y,z,Q)}}}d=d.next}while(d!==_)}}catch(Q){he(u,u.return,Q)}}function yb(a){var u=a.updateQueue;if(u!==null){var h=a.stateNode;try{o2(u,h)}catch(d){he(a,a.return,d)}}}function _b(a,u,h){h.props=Wa(a.type,a.memoizedProps),h.state=a.memoizedState;try{h.componentWillUnmount()}catch(d){he(a,u,d)}}function ec(a,u){try{var h=a.ref;if(h!==null){switch(a.tag){case 26:case 27:case 5:var d=a.stateNode;break;case 30:d=a.stateNode;break;default:d=a.stateNode}typeof h=="function"?a.refCleanup=h(d):h.current=d}}catch(y){he(a,u,y)}}function Ss(a,u){var h=a.ref,d=a.refCleanup;if(h!==null)if(typeof d=="function")try{d()}catch(y){he(a,u,y)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(y){he(a,u,y)}else h.current=null}function vb(a){var u=a.type,h=a.memoizedProps,d=a.stateNode;try{t:switch(u){case"button":case"input":case"select":case"textarea":h.autoFocus&&d.focus();break t;case"img":h.src?d.src=h.src:h.srcSet&&(d.srcset=h.srcSet)}}catch(y){he(a,a.return,y)}}function xp(a,u,h){try{var d=a.stateNode;PA(d,a.type,h,u),d[Ki]=u}catch(y){he(a,a.return,y)}}function xb(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Kr(a.type)||a.tag===4}function bp(a){t:for(;;){for(;a.sibling===null;){if(a.return===null||xb(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Kr(a.type)||a.flags&2||a.child===null||a.tag===4)continue t;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Ep(a,u,h){var d=a.tag;if(d===5||d===6)a=a.stateNode,u?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(a,u):(u=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,u.appendChild(a),h=h._reactRootContainer,h!=null||u.onclick!==null||(u.onclick=Vs));else if(d!==4&&(d===27&&Kr(a.type)&&(h=a.stateNode,u=null),a=a.child,a!==null))for(Ep(a,u,h),a=a.sibling;a!==null;)Ep(a,u,h),a=a.sibling}function Yf(a,u,h){var d=a.tag;if(d===5||d===6)a=a.stateNode,u?h.insertBefore(a,u):h.appendChild(a);else if(d!==4&&(d===27&&Kr(a.type)&&(h=a.stateNode),a=a.child,a!==null))for(Yf(a,u,h),a=a.sibling;a!==null;)Yf(a,u,h),a=a.sibling}function bb(a){var u=a.stateNode,h=a.memoizedProps;try{for(var d=a.type,y=u.attributes;y.length;)u.removeAttributeNode(y[0]);Oi(u,d,h),u[Ti]=a,u[Ki]=h}catch(_){he(a,a.return,_)}}var er=!1,ai=!1,Sp=!1,Eb=typeof WeakSet=="function"?WeakSet:Set,xi=null;function dA(a,u){if(a=a.containerInfo,qp=dd,a=Px(a),pm(a)){if("selectionStart"in a)var h={start:a.selectionStart,end:a.selectionEnd};else t:{h=(h=a.ownerDocument)&&h.defaultView||window;var d=h.getSelection&&h.getSelection();if(d&&d.rangeCount!==0){h=d.anchorNode;var y=d.anchorOffset,_=d.focusNode;d=d.focusOffset;try{h.nodeType,_.nodeType}catch{h=null;break t}var S=0,C=-1,z=-1,X=0,Q=0,nt=a,W=null;e:for(;;){for(var Z;nt!==h||y!==0&&nt.nodeType!==3||(C=S+y),nt!==_||d!==0&&nt.nodeType!==3||(z=S+d),nt.nodeType===3&&(S+=nt.nodeValue.length),(Z=nt.firstChild)!==null;)W=nt,nt=Z;for(;;){if(nt===a)break e;if(W===h&&++X===y&&(C=S),W===_&&++Q===d&&(z=S),(Z=nt.nextSibling)!==null)break;nt=W,W=nt.parentNode}nt=Z}h=C===-1||z===-1?null:{start:C,end:z}}else h=null}h=h||{start:0,end:0}}else h=null;for(Vp={focusedElem:a,selectionRange:h},dd=!1,xi=u;xi!==null;)if(u=xi,a=u.child,(u.subtreeFlags&1028)!==0&&a!==null)a.return=u,xi=a;else for(;xi!==null;){switch(u=xi,_=u.alternate,a=u.flags,u.tag){case 0:if((a&4)!==0&&(a=u.updateQueue,a=a!==null?a.events:null,a!==null))for(h=0;h<a.length;h++)y=a[h],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&_!==null){a=void 0,h=u,y=_.memoizedProps,_=_.memoizedState,d=h.stateNode;try{var pt=Wa(h.type,y);a=d.getSnapshotBeforeUpdate(pt,_),d.__reactInternalSnapshotBeforeUpdate=a}catch(Et){he(h,h.return,Et)}}break;case 3:if((a&1024)!==0){if(a=u.stateNode.containerInfo,h=a.nodeType,h===9)Wp(a);else if(h===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Wp(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(n(163))}if(a=u.sibling,a!==null){a.return=u.return,xi=a;break}xi=u.return}}function Sb(a,u,h){var d=h.flags;switch(h.tag){case 0:case 11:case 15:nr(a,h),d&4&&tc(5,h);break;case 1:if(nr(a,h),d&4)if(a=h.stateNode,u===null)try{a.componentDidMount()}catch(S){he(h,h.return,S)}else{var y=Wa(h.type,u.memoizedProps);u=u.memoizedState;try{a.componentDidUpdate(y,u,a.__reactInternalSnapshotBeforeUpdate)}catch(S){he(h,h.return,S)}}d&64&&yb(h),d&512&&ec(h,h.return);break;case 3:if(nr(a,h),d&64&&(a=h.updateQueue,a!==null)){if(u=null,h.child!==null)switch(h.child.tag){case 27:case 5:u=h.child.stateNode;break;case 1:u=h.child.stateNode}try{o2(a,u)}catch(S){he(h,h.return,S)}}break;case 27:u===null&&d&4&&bb(h);case 26:case 5:nr(a,h),u===null&&d&4&&vb(h),d&512&&ec(h,h.return);break;case 12:nr(a,h);break;case 31:nr(a,h),d&4&&Tb(a,h);break;case 13:nr(a,h),d&4&&Cb(a,h),d&64&&(a=h.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(h=EA.bind(null,h),UA(a,h))));break;case 22:if(d=h.memoizedState!==null||er,!d){u=u!==null&&u.memoizedState!==null||ai,y=er;var _=ai;er=d,(ai=u)&&!_?sr(a,h,(h.subtreeFlags&8772)!==0):nr(a,h),er=y,ai=_}break;case 30:break;default:nr(a,h)}}function Mb(a){var u=a.alternate;u!==null&&(a.alternate=null,Mb(u)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(u=a.stateNode,u!==null&&J0(u)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Le=null,$i=!1;function ir(a,u,h){for(h=h.child;h!==null;)wb(a,u,h),h=h.sibling}function wb(a,u,h){if(ve&&typeof ve.onCommitFiberUnmount=="function")try{ve.onCommitFiberUnmount(we,h)}catch{}switch(h.tag){case 26:ai||Ss(h,u),ir(a,u,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:ai||Ss(h,u);var d=Le,y=$i;Kr(h.type)&&(Le=h.stateNode,$i=!1),ir(a,u,h),cc(h.stateNode),Le=d,$i=y;break;case 5:ai||Ss(h,u);case 6:if(d=Le,y=$i,Le=null,ir(a,u,h),Le=d,$i=y,Le!==null)if($i)try{(Le.nodeType===9?Le.body:Le.nodeName==="HTML"?Le.ownerDocument.body:Le).removeChild(h.stateNode)}catch(_){he(h,u,_)}else try{Le.removeChild(h.stateNode)}catch(_){he(h,u,_)}break;case 18:Le!==null&&($i?(a=Le,yE(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,h.stateNode),wl(a)):yE(Le,h.stateNode));break;case 4:d=Le,y=$i,Le=h.stateNode.containerInfo,$i=!0,ir(a,u,h),Le=d,$i=y;break;case 0:case 11:case 14:case 15:Ur(2,h,u),ai||Ur(4,h,u),ir(a,u,h);break;case 1:ai||(Ss(h,u),d=h.stateNode,typeof d.componentWillUnmount=="function"&&_b(h,u,d)),ir(a,u,h);break;case 21:ir(a,u,h);break;case 22:ai=(d=ai)||h.memoizedState!==null,ir(a,u,h),ai=d;break;default:ir(a,u,h)}}function Tb(a,u){if(u.memoizedState===null&&(a=u.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{wl(a)}catch(h){he(u,u.return,h)}}}function Cb(a,u){if(u.memoizedState===null&&(a=u.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{wl(a)}catch(h){he(u,u.return,h)}}function gA(a){switch(a.tag){case 31:case 13:case 19:var u=a.stateNode;return u===null&&(u=a.stateNode=new Eb),u;case 22:return a=a.stateNode,u=a._retryCache,u===null&&(u=a._retryCache=new Eb),u;default:throw Error(n(435,a.tag))}}function Xf(a,u){var h=gA(a);u.forEach(function(d){if(!h.has(d)){h.add(d);var y=SA.bind(null,a,d);d.then(y,y)}})}function Qi(a,u){var h=u.deletions;if(h!==null)for(var d=0;d<h.length;d++){var y=h[d],_=a,S=u,C=S;t:for(;C!==null;){switch(C.tag){case 27:if(Kr(C.type)){Le=C.stateNode,$i=!1;break t}break;case 5:Le=C.stateNode,$i=!1;break t;case 3:case 4:Le=C.stateNode.containerInfo,$i=!0;break t}C=C.return}if(Le===null)throw Error(n(160));wb(_,S,y),Le=null,$i=!1,_=y.alternate,_!==null&&(_.return=null),y.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)Rb(u,a),u=u.sibling}var as=null;function Rb(a,u){var h=a.alternate,d=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Qi(u,a),Ji(a),d&4&&(Ur(3,a,a.return),tc(3,a),Ur(5,a,a.return));break;case 1:Qi(u,a),Ji(a),d&512&&(ai||h===null||Ss(h,h.return)),d&64&&er&&(a=a.updateQueue,a!==null&&(d=a.callbacks,d!==null&&(h=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=h===null?d:h.concat(d))));break;case 26:var y=as;if(Qi(u,a),Ji(a),d&512&&(ai||h===null||Ss(h,h.return)),d&4){var _=h!==null?h.memoizedState:null;if(d=a.memoizedState,h===null)if(d===null)if(a.stateNode===null){t:{d=a.type,h=a.memoizedProps,y=y.ownerDocument||y;e:switch(d){case"title":_=y.getElementsByTagName("title")[0],(!_||_[Ru]||_[Ti]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=y.createElement(d),y.head.insertBefore(_,y.querySelector("head > title"))),Oi(_,d,h),_[Ti]=a,vi(_),d=_;break t;case"link":var S=RE("link","href",y).get(d+(h.href||""));if(S){for(var C=0;C<S.length;C++)if(_=S[C],_.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&_.getAttribute("rel")===(h.rel==null?null:h.rel)&&_.getAttribute("title")===(h.title==null?null:h.title)&&_.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){S.splice(C,1);break e}}_=y.createElement(d),Oi(_,d,h),y.head.appendChild(_);break;case"meta":if(S=RE("meta","content",y).get(d+(h.content||""))){for(C=0;C<S.length;C++)if(_=S[C],_.getAttribute("content")===(h.content==null?null:""+h.content)&&_.getAttribute("name")===(h.name==null?null:h.name)&&_.getAttribute("property")===(h.property==null?null:h.property)&&_.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&_.getAttribute("charset")===(h.charSet==null?null:h.charSet)){S.splice(C,1);break e}}_=y.createElement(d),Oi(_,d,h),y.head.appendChild(_);break;default:throw Error(n(468,d))}_[Ti]=a,vi(_),d=_}a.stateNode=d}else AE(y,a.type,a.stateNode);else a.stateNode=CE(y,d,a.memoizedProps);else _!==d?(_===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):_.count--,d===null?AE(y,a.type,a.stateNode):CE(y,d,a.memoizedProps)):d===null&&a.stateNode!==null&&xp(a,a.memoizedProps,h.memoizedProps)}break;case 27:Qi(u,a),Ji(a),d&512&&(ai||h===null||Ss(h,h.return)),h!==null&&d&4&&xp(a,a.memoizedProps,h.memoizedProps);break;case 5:if(Qi(u,a),Ji(a),d&512&&(ai||h===null||Ss(h,h.return)),a.flags&32){y=a.stateNode;try{Wo(y,"")}catch(pt){he(a,a.return,pt)}}d&4&&a.stateNode!=null&&(y=a.memoizedProps,xp(a,y,h!==null?h.memoizedProps:y)),d&1024&&(Sp=!0);break;case 6:if(Qi(u,a),Ji(a),d&4){if(a.stateNode===null)throw Error(n(162));d=a.memoizedProps,h=a.stateNode;try{h.nodeValue=d}catch(pt){he(a,a.return,pt)}}break;case 3:if(ud=null,y=as,as=od(u.containerInfo),Qi(u,a),as=y,Ji(a),d&4&&h!==null&&h.memoizedState.isDehydrated)try{wl(u.containerInfo)}catch(pt){he(a,a.return,pt)}Sp&&(Sp=!1,Ab(a));break;case 4:d=as,as=od(a.stateNode.containerInfo),Qi(u,a),Ji(a),as=d;break;case 12:Qi(u,a),Ji(a);break;case 31:Qi(u,a),Ji(a),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,Xf(a,d)));break;case 13:Qi(u,a),Ji(a),a.child.flags&8192&&a.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(Kf=Qe()),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,Xf(a,d)));break;case 22:y=a.memoizedState!==null;var z=h!==null&&h.memoizedState!==null,X=er,Q=ai;if(er=X||y,ai=Q||z,Qi(u,a),ai=Q,er=X,Ji(a),d&8192)t:for(u=a.stateNode,u._visibility=y?u._visibility&-2:u._visibility|1,y&&(h===null||z||er||ai||Ka(a)),h=null,u=a;;){if(u.tag===5||u.tag===26){if(h===null){z=h=u;try{if(_=z.stateNode,y)S=_.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{C=z.stateNode;var nt=z.memoizedProps.style,W=nt!=null&&nt.hasOwnProperty("display")?nt.display:null;C.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(pt){he(z,z.return,pt)}}}else if(u.tag===6){if(h===null){z=u;try{z.stateNode.nodeValue=y?"":z.memoizedProps}catch(pt){he(z,z.return,pt)}}}else if(u.tag===18){if(h===null){z=u;try{var Z=z.stateNode;y?_E(Z,!0):_E(z.stateNode,!1)}catch(pt){he(z,z.return,pt)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===a)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break t;for(;u.sibling===null;){if(u.return===null||u.return===a)break t;h===u&&(h=null),u=u.return}h===u&&(h=null),u.sibling.return=u.return,u=u.sibling}d&4&&(d=a.updateQueue,d!==null&&(h=d.retryQueue,h!==null&&(d.retryQueue=null,Xf(a,h))));break;case 19:Qi(u,a),Ji(a),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,Xf(a,d)));break;case 30:break;case 21:break;default:Qi(u,a),Ji(a)}}function Ji(a){var u=a.flags;if(u&2){try{for(var h,d=a.return;d!==null;){if(xb(d)){h=d;break}d=d.return}if(h==null)throw Error(n(160));switch(h.tag){case 27:var y=h.stateNode,_=bp(a);Yf(a,_,y);break;case 5:var S=h.stateNode;h.flags&32&&(Wo(S,""),h.flags&=-33);var C=bp(a);Yf(a,C,S);break;case 3:case 4:var z=h.stateNode.containerInfo,X=bp(a);Ep(a,X,z);break;default:throw Error(n(161))}}catch(Q){he(a,a.return,Q)}a.flags&=-3}u&4096&&(a.flags&=-4097)}function Ab(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var u=a;Ab(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),a=a.sibling}}function nr(a,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)Sb(a,u.alternate,u),u=u.sibling}function Ka(a){for(a=a.child;a!==null;){var u=a;switch(u.tag){case 0:case 11:case 14:case 15:Ur(4,u,u.return),Ka(u);break;case 1:Ss(u,u.return);var h=u.stateNode;typeof h.componentWillUnmount=="function"&&_b(u,u.return,h),Ka(u);break;case 27:cc(u.stateNode);case 26:case 5:Ss(u,u.return),Ka(u);break;case 22:u.memoizedState===null&&Ka(u);break;case 30:Ka(u);break;default:Ka(u)}a=a.sibling}}function sr(a,u,h){for(h=h&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var d=u.alternate,y=a,_=u,S=_.flags;switch(_.tag){case 0:case 11:case 15:sr(y,_,h),tc(4,_);break;case 1:if(sr(y,_,h),d=_,y=d.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(X){he(d,d.return,X)}if(d=_,y=d.updateQueue,y!==null){var C=d.stateNode;try{var z=y.shared.hiddenCallbacks;if(z!==null)for(y.shared.hiddenCallbacks=null,y=0;y<z.length;y++)a2(z[y],C)}catch(X){he(d,d.return,X)}}h&&S&64&&yb(_),ec(_,_.return);break;case 27:bb(_);case 26:case 5:sr(y,_,h),h&&d===null&&S&4&&vb(_),ec(_,_.return);break;case 12:sr(y,_,h);break;case 31:sr(y,_,h),h&&S&4&&Tb(y,_);break;case 13:sr(y,_,h),h&&S&4&&Cb(y,_);break;case 22:_.memoizedState===null&&sr(y,_,h),ec(_,_.return);break;case 30:break;default:sr(y,_,h)}u=u.sibling}}function Mp(a,u){var h=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),a=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(a=u.memoizedState.cachePool.pool),a!==h&&(a!=null&&a.refCount++,h!=null&&Bu(h))}function wp(a,u){a=null,u.alternate!==null&&(a=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==a&&(u.refCount++,a!=null&&Bu(a))}function os(a,u,h,d){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)Ob(a,u,h,d),u=u.sibling}function Ob(a,u,h,d){var y=u.flags;switch(u.tag){case 0:case 11:case 15:os(a,u,h,d),y&2048&&tc(9,u);break;case 1:os(a,u,h,d);break;case 3:os(a,u,h,d),y&2048&&(a=null,u.alternate!==null&&(a=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==a&&(u.refCount++,a!=null&&Bu(a)));break;case 12:if(y&2048){os(a,u,h,d),a=u.stateNode;try{var _=u.memoizedProps,S=_.id,C=_.onPostCommit;typeof C=="function"&&C(S,u.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(z){he(u,u.return,z)}}else os(a,u,h,d);break;case 31:os(a,u,h,d);break;case 13:os(a,u,h,d);break;case 23:break;case 22:_=u.stateNode,S=u.alternate,u.memoizedState!==null?_._visibility&2?os(a,u,h,d):ic(a,u):_._visibility&2?os(a,u,h,d):(_._visibility|=2,gl(a,u,h,d,(u.subtreeFlags&10256)!==0||!1)),y&2048&&Mp(S,u);break;case 24:os(a,u,h,d),y&2048&&wp(u.alternate,u);break;default:os(a,u,h,d)}}function gl(a,u,h,d,y){for(y=y&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var _=a,S=u,C=h,z=d,X=S.flags;switch(S.tag){case 0:case 11:case 15:gl(_,S,C,z,y),tc(8,S);break;case 23:break;case 22:var Q=S.stateNode;S.memoizedState!==null?Q._visibility&2?gl(_,S,C,z,y):ic(_,S):(Q._visibility|=2,gl(_,S,C,z,y)),y&&X&2048&&Mp(S.alternate,S);break;case 24:gl(_,S,C,z,y),y&&X&2048&&wp(S.alternate,S);break;default:gl(_,S,C,z,y)}u=u.sibling}}function ic(a,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var h=a,d=u,y=d.flags;switch(d.tag){case 22:ic(h,d),y&2048&&Mp(d.alternate,d);break;case 24:ic(h,d),y&2048&&wp(d.alternate,d);break;default:ic(h,d)}u=u.sibling}}var nc=8192;function ml(a,u,h){if(a.subtreeFlags&nc)for(a=a.child;a!==null;)Db(a,u,h),a=a.sibling}function Db(a,u,h){switch(a.tag){case 26:ml(a,u,h),a.flags&nc&&a.memoizedState!==null&&t5(h,as,a.memoizedState,a.memoizedProps);break;case 5:ml(a,u,h);break;case 3:case 4:var d=as;as=od(a.stateNode.containerInfo),ml(a,u,h),as=d;break;case 22:a.memoizedState===null&&(d=a.alternate,d!==null&&d.memoizedState!==null?(d=nc,nc=16777216,ml(a,u,h),nc=d):ml(a,u,h));break;default:ml(a,u,h)}}function Ib(a){var u=a.alternate;if(u!==null&&(a=u.child,a!==null)){u.child=null;do u=a.sibling,a.sibling=null,a=u;while(a!==null)}}function sc(a){var u=a.deletions;if((a.flags&16)!==0){if(u!==null)for(var h=0;h<u.length;h++){var d=u[h];xi=d,Pb(d,a)}Ib(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Lb(a),a=a.sibling}function Lb(a){switch(a.tag){case 0:case 11:case 15:sc(a),a.flags&2048&&Ur(9,a,a.return);break;case 3:sc(a);break;case 12:sc(a);break;case 22:var u=a.stateNode;a.memoizedState!==null&&u._visibility&2&&(a.return===null||a.return.tag!==13)?(u._visibility&=-3,Wf(a)):sc(a);break;default:sc(a)}}function Wf(a){var u=a.deletions;if((a.flags&16)!==0){if(u!==null)for(var h=0;h<u.length;h++){var d=u[h];xi=d,Pb(d,a)}Ib(a)}for(a=a.child;a!==null;){switch(u=a,u.tag){case 0:case 11:case 15:Ur(8,u,u.return),Wf(u);break;case 22:h=u.stateNode,h._visibility&2&&(h._visibility&=-3,Wf(u));break;default:Wf(u)}a=a.sibling}}function Pb(a,u){for(;xi!==null;){var h=xi;switch(h.tag){case 0:case 11:case 15:Ur(8,h,u);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var d=h.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Bu(h.memoizedState.cache)}if(d=h.child,d!==null)d.return=h,xi=d;else t:for(h=a;xi!==null;){d=xi;var y=d.sibling,_=d.return;if(Mb(d),d===h){xi=null;break t}if(y!==null){y.return=_,xi=y;break t}xi=_}}}var mA={getCacheForType:function(a){var u=Ri(ni),h=u.data.get(a);return h===void 0&&(h=a(),u.data.set(a,h)),h},cacheSignal:function(){return Ri(ni).controller.signal}},pA=typeof WeakMap=="function"?WeakMap:Map,ie=0,xe=null,Ft=null,Bt=0,ce=0,En=null,Hr=!1,pl=!1,Tp=!1,rr=0,Xe=0,qr=0,Za=0,Cp=0,Sn=0,yl=0,rc=null,tn=null,Rp=!1,Kf=0,Nb=0,Zf=1/0,$f=null,Vr=null,di=0,Yr=null,_l=null,ar=0,Ap=0,Op=null,zb=null,ac=0,Dp=null;function Mn(){return(ie&2)!==0&&Bt!==0?Bt&-Bt:D.T!==null?Gp():Qv()}function Gb(){if(Sn===0)if((Bt&536870912)===0||Vt){var a=Zt;Zt<<=1,(Zt&3932160)===0&&(Zt=262144),Sn=a}else Sn=536870912;return a=xn.current,a!==null&&(a.flags|=32),Sn}function en(a,u,h){(a===xe&&(ce===2||ce===9)||a.cancelPendingCommit!==null)&&(vl(a,0),Xr(a,Bt,Sn,!1)),yi(a,h),((ie&2)===0||a!==xe)&&(a===xe&&((ie&2)===0&&(Za|=h),Xe===4&&Xr(a,Bt,Sn,!1)),Ms(a))}function kb(a,u,h){if((ie&6)!==0)throw Error(n(327));var d=!h&&(u&127)===0&&(u&a.expiredLanes)===0||Ve(a,u),y=d?vA(a,u):Lp(a,u,!0),_=d;do{if(y===0){pl&&!d&&Xr(a,u,0,!1);break}else{if(h=a.current.alternate,_&&!yA(h)){y=Lp(a,u,!1),_=!1;continue}if(y===2){if(_=u,a.errorRecoveryDisabledLanes&_)var S=0;else S=a.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){u=S;t:{var C=a;y=rc;var z=C.current.memoizedState.isDehydrated;if(z&&(vl(C,S).flags|=256),S=Lp(C,S,!1),S!==2){if(Tp&&!z){C.errorRecoveryDisabledLanes|=_,Za|=_,y=4;break t}_=tn,tn=y,_!==null&&(tn===null?tn=_:tn.push.apply(tn,_))}y=S}if(_=!1,y!==2)continue}}if(y===1){vl(a,0),Xr(a,u,0,!0);break}t:{switch(d=a,_=y,_){case 0:case 1:throw Error(n(345));case 4:if((u&4194048)!==u)break;case 6:Xr(d,u,Sn,!Hr);break t;case 2:tn=null;break;case 3:case 5:break;default:throw Error(n(329))}if((u&62914560)===u&&(y=Kf+300-Qe(),10<y)){if(Xr(d,u,Sn,!Hr),Hs(d,0,!0)!==0)break t;ar=u,d.timeoutHandle=mE(Fb.bind(null,d,h,tn,$f,Rp,u,Sn,Za,yl,Hr,_,"Throttled",-0,0),y);break t}Fb(d,h,tn,$f,Rp,u,Sn,Za,yl,Hr,_,null,-0,0)}}break}while(!0);Ms(a)}function Fb(a,u,h,d,y,_,S,C,z,X,Q,nt,W,Z){if(a.timeoutHandle=-1,nt=u.subtreeFlags,nt&8192||(nt&16785408)===16785408){nt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Vs},Db(u,_,nt);var pt=(_&62914560)===_?Kf-Qe():(_&4194048)===_?Nb-Qe():0;if(pt=e5(nt,pt),pt!==null){ar=_,a.cancelPendingCommit=pt(Xb.bind(null,a,u,_,h,d,y,S,C,z,Q,nt,null,W,Z)),Xr(a,_,S,!X);return}}Xb(a,u,_,h,d,y,S,C,z)}function yA(a){for(var u=a;;){var h=u.tag;if((h===0||h===11||h===15)&&u.flags&16384&&(h=u.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var d=0;d<h.length;d++){var y=h[d],_=y.getSnapshot;y=y.value;try{if(!_n(_(),y))return!1}catch{return!1}}if(h=u.child,u.subtreeFlags&16384&&h!==null)h.return=u,u=h;else{if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Xr(a,u,h,d){u&=~Cp,u&=~Za,a.suspendedLanes|=u,a.pingedLanes&=~u,d&&(a.warmLanes|=u),d=a.expirationTimes;for(var y=u;0<y;){var _=31-Kt(y),S=1<<_;d[_]=-1,y&=~S}h!==0&&Ln(a,h,u)}function Qf(){return(ie&6)===0?(oc(0),!1):!0}function Ip(){if(Ft!==null){if(ce===0)var a=Ft.return;else a=Ft,Ks=Ba=null,Wm(a),ul=null,Hu=0,a=Ft;for(;a!==null;)pb(a.alternate,a),a=a.return;Ft=null}}function vl(a,u){var h=a.timeoutHandle;h!==-1&&(a.timeoutHandle=-1,GA(h)),h=a.cancelPendingCommit,h!==null&&(a.cancelPendingCommit=null,h()),ar=0,Ip(),xe=a,Ft=h=Xs(a.current,null),Bt=u,ce=0,En=null,Hr=!1,pl=Ve(a,u),Tp=!1,yl=Sn=Cp=Za=qr=Xe=0,tn=rc=null,Rp=!1,(u&8)!==0&&(u|=u&32);var d=a.entangledLanes;if(d!==0)for(a=a.entanglements,d&=u;0<d;){var y=31-Kt(d),_=1<<y;u|=a[y],d&=~_}return rr=u,vf(),h}function jb(a,u){Dt=null,D.H=$u,u===ll||u===Cf?(u=i2(),ce=3):u===zm?(u=i2(),ce=4):ce=u===cp?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,En=u,Ft===null&&(Xe=1,Bf(a,Gn(u,a.current)))}function Bb(){var a=xn.current;return a===null?!0:(Bt&4194048)===Bt?Bn===null:(Bt&62914560)===Bt||(Bt&536870912)!==0?a===Bn:!1}function Ub(){var a=D.H;return D.H=$u,a===null?$u:a}function Hb(){var a=D.A;return D.A=mA,a}function Jf(){Xe=4,Hr||(Bt&4194048)!==Bt&&xn.current!==null||(pl=!0),(qr&134217727)===0&&(Za&134217727)===0||xe===null||Xr(xe,Bt,Sn,!1)}function Lp(a,u,h){var d=ie;ie|=2;var y=Ub(),_=Hb();(xe!==a||Bt!==u)&&($f=null,vl(a,u)),u=!1;var S=Xe;t:do try{if(ce!==0&&Ft!==null){var C=Ft,z=En;switch(ce){case 8:Ip(),S=6;break t;case 3:case 2:case 9:case 6:xn.current===null&&(u=!0);var X=ce;if(ce=0,En=null,xl(a,C,z,X),h&&pl){S=0;break t}break;default:X=ce,ce=0,En=null,xl(a,C,z,X)}}_A(),S=Xe;break}catch(Q){jb(a,Q)}while(!0);return u&&a.shellSuspendCounter++,Ks=Ba=null,ie=d,D.H=y,D.A=_,Ft===null&&(xe=null,Bt=0,vf()),S}function _A(){for(;Ft!==null;)qb(Ft)}function vA(a,u){var h=ie;ie|=2;var d=Ub(),y=Hb();xe!==a||Bt!==u?($f=null,Zf=Qe()+500,vl(a,u)):pl=Ve(a,u);t:do try{if(ce!==0&&Ft!==null){u=Ft;var _=En;e:switch(ce){case 1:ce=0,En=null,xl(a,u,_,1);break;case 2:case 9:if(t2(_)){ce=0,En=null,Vb(u);break}u=function(){ce!==2&&ce!==9||xe!==a||(ce=7),Ms(a)},_.then(u,u);break t;case 3:ce=7;break t;case 4:ce=5;break t;case 7:t2(_)?(ce=0,En=null,Vb(u)):(ce=0,En=null,xl(a,u,_,7));break;case 5:var S=null;switch(Ft.tag){case 26:S=Ft.memoizedState;case 5:case 27:var C=Ft;if(S?OE(S):C.stateNode.complete){ce=0,En=null;var z=C.sibling;if(z!==null)Ft=z;else{var X=C.return;X!==null?(Ft=X,td(X)):Ft=null}break e}}ce=0,En=null,xl(a,u,_,5);break;case 6:ce=0,En=null,xl(a,u,_,6);break;case 8:Ip(),Xe=6;break t;default:throw Error(n(462))}}xA();break}catch(Q){jb(a,Q)}while(!0);return Ks=Ba=null,D.H=d,D.A=y,ie=h,Ft!==null?0:(xe=null,Bt=0,vf(),Xe)}function xA(){for(;Ft!==null&&!Mi();)qb(Ft)}function qb(a){var u=gb(a.alternate,a,rr);a.memoizedProps=a.pendingProps,u===null?td(a):Ft=u}function Vb(a){var u=a,h=u.alternate;switch(u.tag){case 15:case 0:u=lb(h,u,u.pendingProps,u.type,void 0,Bt);break;case 11:u=lb(h,u,u.pendingProps,u.type.render,u.ref,Bt);break;case 5:Wm(u);default:pb(h,u),u=Ft=Hx(u,rr),u=gb(h,u,rr)}a.memoizedProps=a.pendingProps,u===null?td(a):Ft=u}function xl(a,u,h,d){Ks=Ba=null,Wm(u),ul=null,Hu=0;var y=u.return;try{if(lA(a,y,u,h,Bt)){Xe=1,Bf(a,Gn(h,a.current)),Ft=null;return}}catch(_){if(y!==null)throw Ft=y,_;Xe=1,Bf(a,Gn(h,a.current)),Ft=null;return}u.flags&32768?(Vt||d===1?a=!0:pl||(Bt&536870912)!==0?a=!1:(Hr=a=!0,(d===2||d===9||d===3||d===6)&&(d=xn.current,d!==null&&d.tag===13&&(d.flags|=16384))),Yb(u,a)):td(u)}function td(a){var u=a;do{if((u.flags&32768)!==0){Yb(u,Hr);return}a=u.return;var h=hA(u.alternate,u,rr);if(h!==null){Ft=h;return}if(u=u.sibling,u!==null){Ft=u;return}Ft=u=a}while(u!==null);Xe===0&&(Xe=5)}function Yb(a,u){do{var h=fA(a.alternate,a);if(h!==null){h.flags&=32767,Ft=h;return}if(h=a.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!u&&(a=a.sibling,a!==null)){Ft=a;return}Ft=a=h}while(a!==null);Xe=6,Ft=null}function Xb(a,u,h,d,y,_,S,C,z){a.cancelPendingCommit=null;do ed();while(di!==0);if((ie&6)!==0)throw Error(n(327));if(u!==null){if(u===a.current)throw Error(n(177));if(_=u.lanes|u.childLanes,_|=bm,ss(a,h,_,S,C,z),a===xe&&(Ft=xe=null,Bt=0),_l=u,Yr=a,ar=h,Ap=_,Op=y,zb=d,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,MA(qt,function(){return Qb(),null})):(a.callbackNode=null,a.callbackPriority=0),d=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||d){d=D.T,D.T=null,y=j.p,j.p=2,S=ie,ie|=4;try{dA(a,u,h)}finally{ie=S,j.p=y,D.T=d}}di=1,Wb(),Kb(),Zb()}}function Wb(){if(di===1){di=0;var a=Yr,u=_l,h=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||h){h=D.T,D.T=null;var d=j.p;j.p=2;var y=ie;ie|=4;try{Rb(u,a);var _=Vp,S=Px(a.containerInfo),C=_.focusedElem,z=_.selectionRange;if(S!==C&&C&&C.ownerDocument&&Lx(C.ownerDocument.documentElement,C)){if(z!==null&&pm(C)){var X=z.start,Q=z.end;if(Q===void 0&&(Q=X),"selectionStart"in C)C.selectionStart=X,C.selectionEnd=Math.min(Q,C.value.length);else{var nt=C.ownerDocument||document,W=nt&&nt.defaultView||window;if(W.getSelection){var Z=W.getSelection(),pt=C.textContent.length,Et=Math.min(z.start,pt),ye=z.end===void 0?Et:Math.min(z.end,pt);!Z.extend&&Et>ye&&(S=ye,ye=Et,Et=S);var H=Ix(C,Et),B=Ix(C,ye);if(H&&B&&(Z.rangeCount!==1||Z.anchorNode!==H.node||Z.anchorOffset!==H.offset||Z.focusNode!==B.node||Z.focusOffset!==B.offset)){var V=nt.createRange();V.setStart(H.node,H.offset),Z.removeAllRanges(),Et>ye?(Z.addRange(V),Z.extend(B.node,B.offset)):(V.setEnd(B.node,B.offset),Z.addRange(V))}}}}for(nt=[],Z=C;Z=Z.parentNode;)Z.nodeType===1&&nt.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<nt.length;C++){var et=nt[C];et.element.scrollLeft=et.left,et.element.scrollTop=et.top}}dd=!!qp,Vp=qp=null}finally{ie=y,j.p=d,D.T=h}}a.current=u,di=2}}function Kb(){if(di===2){di=0;var a=Yr,u=_l,h=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||h){h=D.T,D.T=null;var d=j.p;j.p=2;var y=ie;ie|=4;try{Sb(a,u.alternate,u)}finally{ie=y,j.p=d,D.T=h}}di=3}}function Zb(){if(di===4||di===3){di=0,Ee();var a=Yr,u=_l,h=ar,d=zb;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?di=5:(di=0,_l=Yr=null,$b(a,a.pendingLanes));var y=a.pendingLanes;if(y===0&&(Vr=null),Cu(h),u=u.stateNode,ve&&typeof ve.onCommitFiberRoot=="function")try{ve.onCommitFiberRoot(we,u,void 0,(u.current.flags&128)===128)}catch{}if(d!==null){u=D.T,y=j.p,j.p=2,D.T=null;try{for(var _=a.onRecoverableError,S=0;S<d.length;S++){var C=d[S];_(C.value,{componentStack:C.stack})}}finally{D.T=u,j.p=y}}(ar&3)!==0&&ed(),Ms(a),y=a.pendingLanes,(h&261930)!==0&&(y&42)!==0?a===Dp?ac++:(ac=0,Dp=a):ac=0,oc(0)}}function $b(a,u){(a.pooledCacheLanes&=u)===0&&(u=a.pooledCache,u!=null&&(a.pooledCache=null,Bu(u)))}function ed(){return Wb(),Kb(),Zb(),Qb()}function Qb(){if(di!==5)return!1;var a=Yr,u=Ap;Ap=0;var h=Cu(ar),d=D.T,y=j.p;try{j.p=32>h?32:h,D.T=null,h=Op,Op=null;var _=Yr,S=ar;if(di=0,_l=Yr=null,ar=0,(ie&6)!==0)throw Error(n(331));var C=ie;if(ie|=4,Lb(_.current),Ob(_,_.current,S,h),ie=C,oc(0,!1),ve&&typeof ve.onPostCommitFiberRoot=="function")try{ve.onPostCommitFiberRoot(we,_)}catch{}return!0}finally{j.p=y,D.T=d,$b(a,u)}}function Jb(a,u,h){u=Gn(h,u),u=up(a.stateNode,u,2),a=Fr(a,u,2),a!==null&&(yi(a,2),Ms(a))}function he(a,u,h){if(a.tag===3)Jb(a,a,h);else for(;u!==null;){if(u.tag===3){Jb(u,a,h);break}else if(u.tag===1){var d=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Vr===null||!Vr.has(d))){a=Gn(h,a),h=tb(2),d=Fr(u,h,2),d!==null&&(eb(h,d,u,a),yi(d,2),Ms(d));break}}u=u.return}}function Pp(a,u,h){var d=a.pingCache;if(d===null){d=a.pingCache=new pA;var y=new Set;d.set(u,y)}else y=d.get(u),y===void 0&&(y=new Set,d.set(u,y));y.has(h)||(Tp=!0,y.add(h),a=bA.bind(null,a,u,h),u.then(a,a))}function bA(a,u,h){var d=a.pingCache;d!==null&&d.delete(u),a.pingedLanes|=a.suspendedLanes&h,a.warmLanes&=~h,xe===a&&(Bt&h)===h&&(Xe===4||Xe===3&&(Bt&62914560)===Bt&&300>Qe()-Kf?(ie&2)===0&&vl(a,0):Cp|=h,yl===Bt&&(yl=0)),Ms(a)}function tE(a,u){u===0&&(u=wi()),a=ka(a,u),a!==null&&(yi(a,u),Ms(a))}function EA(a){var u=a.memoizedState,h=0;u!==null&&(h=u.retryLane),tE(a,h)}function SA(a,u){var h=0;switch(a.tag){case 31:case 13:var d=a.stateNode,y=a.memoizedState;y!==null&&(h=y.retryLane);break;case 19:d=a.stateNode;break;case 22:d=a.stateNode._retryCache;break;default:throw Error(n(314))}d!==null&&d.delete(u),tE(a,h)}function MA(a,u){return Si(a,u)}var id=null,bl=null,Np=!1,nd=!1,zp=!1,Wr=0;function Ms(a){a!==bl&&a.next===null&&(bl===null?id=bl=a:bl=bl.next=a),nd=!0,Np||(Np=!0,TA())}function oc(a,u){if(!zp&&nd){zp=!0;do for(var h=!1,d=id;d!==null;){if(a!==0){var y=d.pendingLanes;if(y===0)var _=0;else{var S=d.suspendedLanes,C=d.pingedLanes;_=(1<<31-Kt(42|a)+1)-1,_&=y&~(S&~C),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(h=!0,sE(d,_))}else _=Bt,_=Hs(d,d===xe?_:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(_&3)===0||Ve(d,_)||(h=!0,sE(d,_));d=d.next}while(h);zp=!1}}function wA(){eE()}function eE(){nd=Np=!1;var a=0;Wr!==0&&zA()&&(a=Wr);for(var u=Qe(),h=null,d=id;d!==null;){var y=d.next,_=iE(d,u);_===0?(d.next=null,h===null?id=y:h.next=y,y===null&&(bl=h)):(h=d,(a!==0||(_&3)!==0)&&(nd=!0)),d=y}di!==0&&di!==5||oc(a),Wr!==0&&(Wr=0)}function iE(a,u){for(var h=a.suspendedLanes,d=a.pingedLanes,y=a.expirationTimes,_=a.pendingLanes&-62914561;0<_;){var S=31-Kt(_),C=1<<S,z=y[S];z===-1?((C&h)===0||(C&d)!==0)&&(y[S]=ns(C,u)):z<=u&&(a.expiredLanes|=C),_&=~C}if(u=xe,h=Bt,h=Hs(a,a===u?h:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d=a.callbackNode,h===0||a===u&&(ce===2||ce===9)||a.cancelPendingCommit!==null)return d!==null&&d!==null&&Li(d),a.callbackNode=null,a.callbackPriority=0;if((h&3)===0||Ve(a,h)){if(u=h&-h,u===a.callbackPriority)return u;switch(d!==null&&Li(d),Cu(h)){case 2:case 8:h=Xt;break;case 32:h=qt;break;case 268435456:h=Lt;break;default:h=qt}return d=nE.bind(null,a),h=Si(h,d),a.callbackPriority=u,a.callbackNode=h,u}return d!==null&&d!==null&&Li(d),a.callbackPriority=2,a.callbackNode=null,2}function nE(a,u){if(di!==0&&di!==5)return a.callbackNode=null,a.callbackPriority=0,null;var h=a.callbackNode;if(ed()&&a.callbackNode!==h)return null;var d=Bt;return d=Hs(a,a===xe?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d===0?null:(kb(a,d,u),iE(a,Qe()),a.callbackNode!=null&&a.callbackNode===h?nE.bind(null,a):null)}function sE(a,u){if(ed())return null;kb(a,u,!0)}function TA(){kA(function(){(ie&6)!==0?Si(Qt,wA):eE()})}function Gp(){if(Wr===0){var a=al;a===0&&(a=ke,ke<<=1,(ke&261888)===0&&(ke=256)),Wr=a}return Wr}function rE(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:hf(""+a)}function aE(a,u){var h=u.ownerDocument.createElement("input");return h.name=u.name,h.value=u.value,a.id&&h.setAttribute("form",a.id),u.parentNode.insertBefore(h,u),a=new FormData(a),h.parentNode.removeChild(h),a}function CA(a,u,h,d,y){if(u==="submit"&&h&&h.stateNode===y){var _=rE((y[Ki]||null).action),S=d.submitter;S&&(u=(u=S[Ki]||null)?rE(u.formAction):S.getAttribute("formAction"),u!==null&&(_=u,S=null));var C=new mf("action","action",null,d,y);a.push({event:C,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Wr!==0){var z=S?aE(y,S):new FormData(y);np(h,{pending:!0,data:z,method:y.method,action:_},null,z)}}else typeof _=="function"&&(C.preventDefault(),z=S?aE(y,S):new FormData(y),np(h,{pending:!0,data:z,method:y.method,action:_},_,z))},currentTarget:y}]})}}for(var kp=0;kp<xm.length;kp++){var Fp=xm[kp],RA=Fp.toLowerCase(),AA=Fp[0].toUpperCase()+Fp.slice(1);rs(RA,"on"+AA)}rs(Gx,"onAnimationEnd"),rs(kx,"onAnimationIteration"),rs(Fx,"onAnimationStart"),rs("dblclick","onDoubleClick"),rs("focusin","onFocus"),rs("focusout","onBlur"),rs(VR,"onTransitionRun"),rs(YR,"onTransitionStart"),rs(XR,"onTransitionCancel"),rs(jx,"onTransitionEnd"),Yo("onMouseEnter",["mouseout","mouseover"]),Yo("onMouseLeave",["mouseout","mouseover"]),Yo("onPointerEnter",["pointerout","pointerover"]),Yo("onPointerLeave",["pointerout","pointerover"]),Pa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Pa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Pa("onBeforeInput",["compositionend","keypress","textInput","paste"]),Pa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Pa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Pa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(lc));function oE(a,u){u=(u&4)!==0;for(var h=0;h<a.length;h++){var d=a[h],y=d.event;d=d.listeners;t:{var _=void 0;if(u)for(var S=d.length-1;0<=S;S--){var C=d[S],z=C.instance,X=C.currentTarget;if(C=C.listener,z!==_&&y.isPropagationStopped())break t;_=C,y.currentTarget=X;try{_(y)}catch(Q){_f(Q)}y.currentTarget=null,_=z}else for(S=0;S<d.length;S++){if(C=d[S],z=C.instance,X=C.currentTarget,C=C.listener,z!==_&&y.isPropagationStopped())break t;_=C,y.currentTarget=X;try{_(y)}catch(Q){_f(Q)}y.currentTarget=null,_=z}}}}function jt(a,u){var h=u[Q0];h===void 0&&(h=u[Q0]=new Set);var d=a+"__bubble";h.has(d)||(lE(u,a,2,!1),h.add(d))}function jp(a,u,h){var d=0;u&&(d|=4),lE(h,a,d,u)}var sd="_reactListening"+Math.random().toString(36).slice(2);function Bp(a){if(!a[sd]){a[sd]=!0,ex.forEach(function(h){h!=="selectionchange"&&(OA.has(h)||jp(h,!1,a),jp(h,!0,a))});var u=a.nodeType===9?a:a.ownerDocument;u===null||u[sd]||(u[sd]=!0,jp("selectionchange",!1,u))}}function lE(a,u,h,d){switch(GE(u)){case 2:var y=s5;break;case 8:y=r5;break;default:y=iy}h=y.bind(null,u,h,a),y=void 0,!om||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(y=!0),d?y!==void 0?a.addEventListener(u,h,{capture:!0,passive:y}):a.addEventListener(u,h,!0):y!==void 0?a.addEventListener(u,h,{passive:y}):a.addEventListener(u,h,!1)}function Up(a,u,h,d,y){var _=d;if((u&1)===0&&(u&2)===0&&d!==null)t:for(;;){if(d===null)return;var S=d.tag;if(S===3||S===4){var C=d.stateNode.containerInfo;if(C===y)break;if(S===4)for(S=d.return;S!==null;){var z=S.tag;if((z===3||z===4)&&S.stateNode.containerInfo===y)return;S=S.return}for(;C!==null;){if(S=Ho(C),S===null)return;if(z=S.tag,z===5||z===6||z===26||z===27){d=_=S;continue t}C=C.parentNode}}d=d.return}dx(function(){var X=_,Q=rm(h),nt=[];t:{var W=Bx.get(a);if(W!==void 0){var Z=mf,pt=a;switch(a){case"keypress":if(df(h)===0)break t;case"keydown":case"keyup":Z=SR;break;case"focusin":pt="focus",Z=hm;break;case"focusout":pt="blur",Z=hm;break;case"beforeblur":case"afterblur":Z=hm;break;case"click":if(h.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=px;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=hR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=TR;break;case Gx:case kx:case Fx:Z=gR;break;case jx:Z=RR;break;case"scroll":case"scrollend":Z=uR;break;case"wheel":Z=OR;break;case"copy":case"cut":case"paste":Z=pR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=_x;break;case"toggle":case"beforetoggle":Z=IR}var Et=(u&4)!==0,ye=!Et&&(a==="scroll"||a==="scrollend"),H=Et?W!==null?W+"Capture":null:W;Et=[];for(var B=X,V;B!==null;){var et=B;if(V=et.stateNode,et=et.tag,et!==5&&et!==26&&et!==27||V===null||H===null||(et=Ou(B,H),et!=null&&Et.push(uc(B,et,V))),ye)break;B=B.return}0<Et.length&&(W=new Z(W,pt,null,h,Q),nt.push({event:W,listeners:Et}))}}if((u&7)===0){t:{if(W=a==="mouseover"||a==="pointerover",Z=a==="mouseout"||a==="pointerout",W&&h!==sm&&(pt=h.relatedTarget||h.fromElement)&&(Ho(pt)||pt[Uo]))break t;if((Z||W)&&(W=Q.window===Q?Q:(W=Q.ownerDocument)?W.defaultView||W.parentWindow:window,Z?(pt=h.relatedTarget||h.toElement,Z=X,pt=pt?Ho(pt):null,pt!==null&&(ye=r(pt),Et=pt.tag,pt!==ye||Et!==5&&Et!==27&&Et!==6)&&(pt=null)):(Z=null,pt=X),Z!==pt)){if(Et=px,et="onMouseLeave",H="onMouseEnter",B="mouse",(a==="pointerout"||a==="pointerover")&&(Et=_x,et="onPointerLeave",H="onPointerEnter",B="pointer"),ye=Z==null?W:Au(Z),V=pt==null?W:Au(pt),W=new Et(et,B+"leave",Z,h,Q),W.target=ye,W.relatedTarget=V,et=null,Ho(Q)===X&&(Et=new Et(H,B+"enter",pt,h,Q),Et.target=V,Et.relatedTarget=ye,et=Et),ye=et,Z&&pt)e:{for(Et=DA,H=Z,B=pt,V=0,et=H;et;et=Et(et))V++;et=0;for(var xt=B;xt;xt=Et(xt))et++;for(;0<V-et;)H=Et(H),V--;for(;0<et-V;)B=Et(B),et--;for(;V--;){if(H===B||B!==null&&H===B.alternate){Et=H;break e}H=Et(H),B=Et(B)}Et=null}else Et=null;Z!==null&&uE(nt,W,Z,Et,!1),pt!==null&&ye!==null&&uE(nt,ye,pt,Et,!0)}}t:{if(W=X?Au(X):window,Z=W.nodeName&&W.nodeName.toLowerCase(),Z==="select"||Z==="input"&&W.type==="file")var Jt=Tx;else if(Mx(W))if(Cx)Jt=UR;else{Jt=jR;var _t=FR}else Z=W.nodeName,!Z||Z.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?X&&nm(X.elementType)&&(Jt=Tx):Jt=BR;if(Jt&&(Jt=Jt(a,X))){wx(nt,Jt,h,Q);break t}_t&&_t(a,W,X),a==="focusout"&&X&&W.type==="number"&&X.memoizedProps.value!=null&&im(W,"number",W.value)}switch(_t=X?Au(X):window,a){case"focusin":(Mx(_t)||_t.contentEditable==="true")&&(Qo=_t,ym=X,ku=null);break;case"focusout":ku=ym=Qo=null;break;case"mousedown":_m=!0;break;case"contextmenu":case"mouseup":case"dragend":_m=!1,Nx(nt,h,Q);break;case"selectionchange":if(qR)break;case"keydown":case"keyup":Nx(nt,h,Q)}var Pt;if(dm)t:{switch(a){case"compositionstart":var Ut="onCompositionStart";break t;case"compositionend":Ut="onCompositionEnd";break t;case"compositionupdate":Ut="onCompositionUpdate";break t}Ut=void 0}else $o?Ex(a,h)&&(Ut="onCompositionEnd"):a==="keydown"&&h.keyCode===229&&(Ut="onCompositionStart");Ut&&(vx&&h.locale!=="ko"&&($o||Ut!=="onCompositionStart"?Ut==="onCompositionEnd"&&$o&&(Pt=gx()):(Ir=Q,lm="value"in Ir?Ir.value:Ir.textContent,$o=!0)),_t=rd(X,Ut),0<_t.length&&(Ut=new yx(Ut,a,null,h,Q),nt.push({event:Ut,listeners:_t}),Pt?Ut.data=Pt:(Pt=Sx(h),Pt!==null&&(Ut.data=Pt)))),(Pt=PR?NR(a,h):zR(a,h))&&(Ut=rd(X,"onBeforeInput"),0<Ut.length&&(_t=new yx("onBeforeInput","beforeinput",null,h,Q),nt.push({event:_t,listeners:Ut}),_t.data=Pt)),CA(nt,a,X,h,Q)}oE(nt,u)})}function uc(a,u,h){return{instance:a,listener:u,currentTarget:h}}function rd(a,u){for(var h=u+"Capture",d=[];a!==null;){var y=a,_=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||_===null||(y=Ou(a,h),y!=null&&d.unshift(uc(a,y,_)),y=Ou(a,u),y!=null&&d.push(uc(a,y,_))),a.tag===3)return d;a=a.return}return[]}function DA(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function uE(a,u,h,d,y){for(var _=u._reactName,S=[];h!==null&&h!==d;){var C=h,z=C.alternate,X=C.stateNode;if(C=C.tag,z!==null&&z===d)break;C!==5&&C!==26&&C!==27||X===null||(z=X,y?(X=Ou(h,_),X!=null&&S.unshift(uc(h,X,z))):y||(X=Ou(h,_),X!=null&&S.push(uc(h,X,z)))),h=h.return}S.length!==0&&a.push({event:u,listeners:S})}var IA=/\r\n?/g,LA=/\u0000|\uFFFD/g;function cE(a){return(typeof a=="string"?a:""+a).replace(IA,`
`).replace(LA,"")}function hE(a,u){return u=cE(u),cE(a)===u}function pe(a,u,h,d,y,_){switch(h){case"children":typeof d=="string"?u==="body"||u==="textarea"&&d===""||Wo(a,d):(typeof d=="number"||typeof d=="bigint")&&u!=="body"&&Wo(a,""+d);break;case"className":uf(a,"class",d);break;case"tabIndex":uf(a,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":uf(a,h,d);break;case"style":hx(a,d,_);break;case"data":if(u!=="object"){uf(a,"data",d);break}case"src":case"href":if(d===""&&(u!=="a"||h!=="href")){a.removeAttribute(h);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(h);break}d=hf(""+d),a.setAttribute(h,d);break;case"action":case"formAction":if(typeof d=="function"){a.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(h==="formAction"?(u!=="input"&&pe(a,u,"name",y.name,y,null),pe(a,u,"formEncType",y.formEncType,y,null),pe(a,u,"formMethod",y.formMethod,y,null),pe(a,u,"formTarget",y.formTarget,y,null)):(pe(a,u,"encType",y.encType,y,null),pe(a,u,"method",y.method,y,null),pe(a,u,"target",y.target,y,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(h);break}d=hf(""+d),a.setAttribute(h,d);break;case"onClick":d!=null&&(a.onclick=Vs);break;case"onScroll":d!=null&&jt("scroll",a);break;case"onScrollEnd":d!=null&&jt("scrollend",a);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(n(61));if(h=d.__html,h!=null){if(y.children!=null)throw Error(n(60));a.innerHTML=h}}break;case"multiple":a.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":a.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){a.removeAttribute("xlink:href");break}h=hf(""+d),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(h,""+d):a.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(h,""):a.removeAttribute(h);break;case"capture":case"download":d===!0?a.setAttribute(h,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(h,d):a.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?a.setAttribute(h,d):a.removeAttribute(h);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?a.removeAttribute(h):a.setAttribute(h,d);break;case"popover":jt("beforetoggle",a),jt("toggle",a),lf(a,"popover",d);break;case"xlinkActuate":qs(a,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":qs(a,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":qs(a,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":qs(a,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":qs(a,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":qs(a,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":qs(a,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":qs(a,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":qs(a,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":lf(a,"is",d);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=oR.get(h)||h,lf(a,h,d))}}function Hp(a,u,h,d,y,_){switch(h){case"style":hx(a,d,_);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(n(61));if(h=d.__html,h!=null){if(y.children!=null)throw Error(n(60));a.innerHTML=h}}break;case"children":typeof d=="string"?Wo(a,d):(typeof d=="number"||typeof d=="bigint")&&Wo(a,""+d);break;case"onScroll":d!=null&&jt("scroll",a);break;case"onScrollEnd":d!=null&&jt("scrollend",a);break;case"onClick":d!=null&&(a.onclick=Vs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ix.hasOwnProperty(h))t:{if(h[0]==="o"&&h[1]==="n"&&(y=h.endsWith("Capture"),u=h.slice(2,y?h.length-7:void 0),_=a[Ki]||null,_=_!=null?_[h]:null,typeof _=="function"&&a.removeEventListener(u,_,y),typeof d=="function")){typeof _!="function"&&_!==null&&(h in a?a[h]=null:a.hasAttribute(h)&&a.removeAttribute(h)),a.addEventListener(u,d,y);break t}h in a?a[h]=d:d===!0?a.setAttribute(h,""):lf(a,h,d)}}}function Oi(a,u,h){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":jt("error",a),jt("load",a);var d=!1,y=!1,_;for(_ in h)if(h.hasOwnProperty(_)){var S=h[_];if(S!=null)switch(_){case"src":d=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:pe(a,u,_,S,h,null)}}y&&pe(a,u,"srcSet",h.srcSet,h,null),d&&pe(a,u,"src",h.src,h,null);return;case"input":jt("invalid",a);var C=_=S=y=null,z=null,X=null;for(d in h)if(h.hasOwnProperty(d)){var Q=h[d];if(Q!=null)switch(d){case"name":y=Q;break;case"type":S=Q;break;case"checked":z=Q;break;case"defaultChecked":X=Q;break;case"value":_=Q;break;case"defaultValue":C=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(n(137,u));break;default:pe(a,u,d,Q,h,null)}}ox(a,_,C,z,X,S,y,!1);return;case"select":jt("invalid",a),d=S=_=null;for(y in h)if(h.hasOwnProperty(y)&&(C=h[y],C!=null))switch(y){case"value":_=C;break;case"defaultValue":S=C;break;case"multiple":d=C;default:pe(a,u,y,C,h,null)}u=_,h=S,a.multiple=!!d,u!=null?Xo(a,!!d,u,!1):h!=null&&Xo(a,!!d,h,!0);return;case"textarea":jt("invalid",a),_=y=d=null;for(S in h)if(h.hasOwnProperty(S)&&(C=h[S],C!=null))switch(S){case"value":d=C;break;case"defaultValue":y=C;break;case"children":_=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(n(91));break;default:pe(a,u,S,C,h,null)}ux(a,d,y,_);return;case"option":for(z in h)if(h.hasOwnProperty(z)&&(d=h[z],d!=null))switch(z){case"selected":a.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:pe(a,u,z,d,h,null)}return;case"dialog":jt("beforetoggle",a),jt("toggle",a),jt("cancel",a),jt("close",a);break;case"iframe":case"object":jt("load",a);break;case"video":case"audio":for(d=0;d<lc.length;d++)jt(lc[d],a);break;case"image":jt("error",a),jt("load",a);break;case"details":jt("toggle",a);break;case"embed":case"source":case"link":jt("error",a),jt("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in h)if(h.hasOwnProperty(X)&&(d=h[X],d!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:pe(a,u,X,d,h,null)}return;default:if(nm(u)){for(Q in h)h.hasOwnProperty(Q)&&(d=h[Q],d!==void 0&&Hp(a,u,Q,d,h,void 0));return}}for(C in h)h.hasOwnProperty(C)&&(d=h[C],d!=null&&pe(a,u,C,d,h,null))}function PA(a,u,h,d){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,_=null,S=null,C=null,z=null,X=null,Q=null;for(Z in h){var nt=h[Z];if(h.hasOwnProperty(Z)&&nt!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":z=nt;default:d.hasOwnProperty(Z)||pe(a,u,Z,null,d,nt)}}for(var W in d){var Z=d[W];if(nt=h[W],d.hasOwnProperty(W)&&(Z!=null||nt!=null))switch(W){case"type":_=Z;break;case"name":y=Z;break;case"checked":X=Z;break;case"defaultChecked":Q=Z;break;case"value":S=Z;break;case"defaultValue":C=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(n(137,u));break;default:Z!==nt&&pe(a,u,W,Z,d,nt)}}em(a,S,C,z,X,Q,_,y);return;case"select":Z=S=C=W=null;for(_ in h)if(z=h[_],h.hasOwnProperty(_)&&z!=null)switch(_){case"value":break;case"multiple":Z=z;default:d.hasOwnProperty(_)||pe(a,u,_,null,d,z)}for(y in d)if(_=d[y],z=h[y],d.hasOwnProperty(y)&&(_!=null||z!=null))switch(y){case"value":W=_;break;case"defaultValue":C=_;break;case"multiple":S=_;default:_!==z&&pe(a,u,y,_,d,z)}u=C,h=S,d=Z,W!=null?Xo(a,!!h,W,!1):!!d!=!!h&&(u!=null?Xo(a,!!h,u,!0):Xo(a,!!h,h?[]:"",!1));return;case"textarea":Z=W=null;for(C in h)if(y=h[C],h.hasOwnProperty(C)&&y!=null&&!d.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:pe(a,u,C,null,d,y)}for(S in d)if(y=d[S],_=h[S],d.hasOwnProperty(S)&&(y!=null||_!=null))switch(S){case"value":W=y;break;case"defaultValue":Z=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(n(91));break;default:y!==_&&pe(a,u,S,y,d,_)}lx(a,W,Z);return;case"option":for(var pt in h)if(W=h[pt],h.hasOwnProperty(pt)&&W!=null&&!d.hasOwnProperty(pt))switch(pt){case"selected":a.selected=!1;break;default:pe(a,u,pt,null,d,W)}for(z in d)if(W=d[z],Z=h[z],d.hasOwnProperty(z)&&W!==Z&&(W!=null||Z!=null))switch(z){case"selected":a.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:pe(a,u,z,W,d,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Et in h)W=h[Et],h.hasOwnProperty(Et)&&W!=null&&!d.hasOwnProperty(Et)&&pe(a,u,Et,null,d,W);for(X in d)if(W=d[X],Z=h[X],d.hasOwnProperty(X)&&W!==Z&&(W!=null||Z!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(n(137,u));break;default:pe(a,u,X,W,d,Z)}return;default:if(nm(u)){for(var ye in h)W=h[ye],h.hasOwnProperty(ye)&&W!==void 0&&!d.hasOwnProperty(ye)&&Hp(a,u,ye,void 0,d,W);for(Q in d)W=d[Q],Z=h[Q],!d.hasOwnProperty(Q)||W===Z||W===void 0&&Z===void 0||Hp(a,u,Q,W,d,Z);return}}for(var H in h)W=h[H],h.hasOwnProperty(H)&&W!=null&&!d.hasOwnProperty(H)&&pe(a,u,H,null,d,W);for(nt in d)W=d[nt],Z=h[nt],!d.hasOwnProperty(nt)||W===Z||W==null&&Z==null||pe(a,u,nt,W,d,Z)}function fE(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function NA(){if(typeof performance.getEntriesByType=="function"){for(var a=0,u=0,h=performance.getEntriesByType("resource"),d=0;d<h.length;d++){var y=h[d],_=y.transferSize,S=y.initiatorType,C=y.duration;if(_&&C&&fE(S)){for(S=0,C=y.responseEnd,d+=1;d<h.length;d++){var z=h[d],X=z.startTime;if(X>C)break;var Q=z.transferSize,nt=z.initiatorType;Q&&fE(nt)&&(z=z.responseEnd,S+=Q*(z<C?1:(C-X)/(z-X)))}if(--d,u+=8*(_+S)/(y.duration/1e3),a++,10<a)break}}if(0<a)return u/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var qp=null,Vp=null;function ad(a){return a.nodeType===9?a:a.ownerDocument}function dE(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function gE(a,u){if(a===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&u==="foreignObject"?0:a}function Yp(a,u){return a==="textarea"||a==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var Xp=null;function zA(){var a=window.event;return a&&a.type==="popstate"?a===Xp?!1:(Xp=a,!0):(Xp=null,!1)}var mE=typeof setTimeout=="function"?setTimeout:void 0,GA=typeof clearTimeout=="function"?clearTimeout:void 0,pE=typeof Promise=="function"?Promise:void 0,kA=typeof queueMicrotask=="function"?queueMicrotask:typeof pE<"u"?function(a){return pE.resolve(null).then(a).catch(FA)}:mE;function FA(a){setTimeout(function(){throw a})}function Kr(a){return a==="head"}function yE(a,u){var h=u,d=0;do{var y=h.nextSibling;if(a.removeChild(h),y&&y.nodeType===8)if(h=y.data,h==="/$"||h==="/&"){if(d===0){a.removeChild(y),wl(u);return}d--}else if(h==="$"||h==="$?"||h==="$~"||h==="$!"||h==="&")d++;else if(h==="html")cc(a.ownerDocument.documentElement);else if(h==="head"){h=a.ownerDocument.head,cc(h);for(var _=h.firstChild;_;){var S=_.nextSibling,C=_.nodeName;_[Ru]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&_.rel.toLowerCase()==="stylesheet"||h.removeChild(_),_=S}}else h==="body"&&cc(a.ownerDocument.body);h=y}while(h);wl(u)}function _E(a,u){var h=a;a=0;do{var d=h.nextSibling;if(h.nodeType===1?u?(h._stashedDisplay=h.style.display,h.style.display="none"):(h.style.display=h._stashedDisplay||"",h.getAttribute("style")===""&&h.removeAttribute("style")):h.nodeType===3&&(u?(h._stashedText=h.nodeValue,h.nodeValue=""):h.nodeValue=h._stashedText||""),d&&d.nodeType===8)if(h=d.data,h==="/$"){if(a===0)break;a--}else h!=="$"&&h!=="$?"&&h!=="$~"&&h!=="$!"||a++;h=d}while(h)}function Wp(a){var u=a.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var h=u;switch(u=u.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":Wp(h),J0(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}a.removeChild(h)}}function jA(a,u,h,d){for(;a.nodeType===1;){var y=h;if(a.nodeName.toLowerCase()!==u.toLowerCase()){if(!d&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(d){if(!a[Ru])switch(u){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(_=a.getAttribute("rel"),_==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(_!==y.rel||a.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||a.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||a.getAttribute("title")!==(y.title==null?null:y.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(_=a.getAttribute("src"),(_!==(y.src==null?null:y.src)||a.getAttribute("type")!==(y.type==null?null:y.type)||a.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&_&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(u==="input"&&a.type==="hidden"){var _=y.name==null?null:""+y.name;if(y.type==="hidden"&&a.getAttribute("name")===_)return a}else return a;if(a=Un(a.nextSibling),a===null)break}return null}function BA(a,u,h){if(u==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!h||(a=Un(a.nextSibling),a===null))return null;return a}function vE(a,u){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!u||(a=Un(a.nextSibling),a===null))return null;return a}function Kp(a){return a.data==="$?"||a.data==="$~"}function Zp(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function UA(a,u){var h=a.ownerDocument;if(a.data==="$~")a._reactRetry=u;else if(a.data!=="$?"||h.readyState!=="loading")u();else{var d=function(){u(),h.removeEventListener("DOMContentLoaded",d)};h.addEventListener("DOMContentLoaded",d),a._reactRetry=d}}function Un(a){for(;a!=null;a=a.nextSibling){var u=a.nodeType;if(u===1||u===3)break;if(u===8){if(u=a.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return a}var $p=null;function xE(a){a=a.nextSibling;for(var u=0;a;){if(a.nodeType===8){var h=a.data;if(h==="/$"||h==="/&"){if(u===0)return Un(a.nextSibling);u--}else h!=="$"&&h!=="$!"&&h!=="$?"&&h!=="$~"&&h!=="&"||u++}a=a.nextSibling}return null}function bE(a){a=a.previousSibling;for(var u=0;a;){if(a.nodeType===8){var h=a.data;if(h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"){if(u===0)return a;u--}else h!=="/$"&&h!=="/&"||u++}a=a.previousSibling}return null}function EE(a,u,h){switch(u=ad(h),a){case"html":if(a=u.documentElement,!a)throw Error(n(452));return a;case"head":if(a=u.head,!a)throw Error(n(453));return a;case"body":if(a=u.body,!a)throw Error(n(454));return a;default:throw Error(n(451))}}function cc(a){for(var u=a.attributes;u.length;)a.removeAttributeNode(u[0]);J0(a)}var Hn=new Map,SE=new Set;function od(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var or=j.d;j.d={f:HA,r:qA,D:VA,C:YA,L:XA,m:WA,X:ZA,S:KA,M:$A};function HA(){var a=or.f(),u=Qf();return a||u}function qA(a){var u=qo(a);u!==null&&u.tag===5&&u.type==="form"?j2(u):or.r(a)}var El=typeof document>"u"?null:document;function ME(a,u,h){var d=El;if(d&&typeof u=="string"&&u){var y=Nn(u);y='link[rel="'+a+'"][href="'+y+'"]',typeof h=="string"&&(y+='[crossorigin="'+h+'"]'),SE.has(y)||(SE.add(y),a={rel:a,crossOrigin:h,href:u},d.querySelector(y)===null&&(u=d.createElement("link"),Oi(u,"link",a),vi(u),d.head.appendChild(u)))}}function VA(a){or.D(a),ME("dns-prefetch",a,null)}function YA(a,u){or.C(a,u),ME("preconnect",a,u)}function XA(a,u,h){or.L(a,u,h);var d=El;if(d&&a&&u){var y='link[rel="preload"][as="'+Nn(u)+'"]';u==="image"&&h&&h.imageSrcSet?(y+='[imagesrcset="'+Nn(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(y+='[imagesizes="'+Nn(h.imageSizes)+'"]')):y+='[href="'+Nn(a)+'"]';var _=y;switch(u){case"style":_=Sl(a);break;case"script":_=Ml(a)}Hn.has(_)||(a=m({rel:"preload",href:u==="image"&&h&&h.imageSrcSet?void 0:a,as:u},h),Hn.set(_,a),d.querySelector(y)!==null||u==="style"&&d.querySelector(hc(_))||u==="script"&&d.querySelector(fc(_))||(u=d.createElement("link"),Oi(u,"link",a),vi(u),d.head.appendChild(u)))}}function WA(a,u){or.m(a,u);var h=El;if(h&&a){var d=u&&typeof u.as=="string"?u.as:"script",y='link[rel="modulepreload"][as="'+Nn(d)+'"][href="'+Nn(a)+'"]',_=y;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Ml(a)}if(!Hn.has(_)&&(a=m({rel:"modulepreload",href:a},u),Hn.set(_,a),h.querySelector(y)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(fc(_)))return}d=h.createElement("link"),Oi(d,"link",a),vi(d),h.head.appendChild(d)}}}function KA(a,u,h){or.S(a,u,h);var d=El;if(d&&a){var y=Vo(d).hoistableStyles,_=Sl(a);u=u||"default";var S=y.get(_);if(!S){var C={loading:0,preload:null};if(S=d.querySelector(hc(_)))C.loading=5;else{a=m({rel:"stylesheet",href:a,"data-precedence":u},h),(h=Hn.get(_))&&Qp(a,h);var z=S=d.createElement("link");vi(z),Oi(z,"link",a),z._p=new Promise(function(X,Q){z.onload=X,z.onerror=Q}),z.addEventListener("load",function(){C.loading|=1}),z.addEventListener("error",function(){C.loading|=2}),C.loading|=4,ld(S,u,d)}S={type:"stylesheet",instance:S,count:1,state:C},y.set(_,S)}}}function ZA(a,u){or.X(a,u);var h=El;if(h&&a){var d=Vo(h).hoistableScripts,y=Ml(a),_=d.get(y);_||(_=h.querySelector(fc(y)),_||(a=m({src:a,async:!0},u),(u=Hn.get(y))&&Jp(a,u),_=h.createElement("script"),vi(_),Oi(_,"link",a),h.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},d.set(y,_))}}function $A(a,u){or.M(a,u);var h=El;if(h&&a){var d=Vo(h).hoistableScripts,y=Ml(a),_=d.get(y);_||(_=h.querySelector(fc(y)),_||(a=m({src:a,async:!0,type:"module"},u),(u=Hn.get(y))&&Jp(a,u),_=h.createElement("script"),vi(_),Oi(_,"link",a),h.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},d.set(y,_))}}function wE(a,u,h,d){var y=(y=gt.current)?od(y):null;if(!y)throw Error(n(446));switch(a){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(u=Sl(h.href),h=Vo(y).hoistableStyles,d=h.get(u),d||(d={type:"style",instance:null,count:0,state:null},h.set(u,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){a=Sl(h.href);var _=Vo(y).hoistableStyles,S=_.get(a);if(S||(y=y.ownerDocument||y,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(a,S),(_=y.querySelector(hc(a)))&&!_._p&&(S.instance=_,S.state.loading=5),Hn.has(a)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},Hn.set(a,h),_||QA(y,a,h,S.state))),u&&d===null)throw Error(n(528,""));return S}if(u&&d!==null)throw Error(n(529,""));return null;case"script":return u=h.async,h=h.src,typeof h=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=Ml(h),h=Vo(y).hoistableScripts,d=h.get(u),d||(d={type:"script",instance:null,count:0,state:null},h.set(u,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,a))}}function Sl(a){return'href="'+Nn(a)+'"'}function hc(a){return'link[rel="stylesheet"]['+a+"]"}function TE(a){return m({},a,{"data-precedence":a.precedence,precedence:null})}function QA(a,u,h,d){a.querySelector('link[rel="preload"][as="style"]['+u+"]")?d.loading=1:(u=a.createElement("link"),d.preload=u,u.addEventListener("load",function(){return d.loading|=1}),u.addEventListener("error",function(){return d.loading|=2}),Oi(u,"link",h),vi(u),a.head.appendChild(u))}function Ml(a){return'[src="'+Nn(a)+'"]'}function fc(a){return"script[async]"+a}function CE(a,u,h){if(u.count++,u.instance===null)switch(u.type){case"style":var d=a.querySelector('style[data-href~="'+Nn(h.href)+'"]');if(d)return u.instance=d,vi(d),d;var y=m({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return d=(a.ownerDocument||a).createElement("style"),vi(d),Oi(d,"style",y),ld(d,h.precedence,a),u.instance=d;case"stylesheet":y=Sl(h.href);var _=a.querySelector(hc(y));if(_)return u.state.loading|=4,u.instance=_,vi(_),_;d=TE(h),(y=Hn.get(y))&&Qp(d,y),_=(a.ownerDocument||a).createElement("link"),vi(_);var S=_;return S._p=new Promise(function(C,z){S.onload=C,S.onerror=z}),Oi(_,"link",d),u.state.loading|=4,ld(_,h.precedence,a),u.instance=_;case"script":return _=Ml(h.src),(y=a.querySelector(fc(_)))?(u.instance=y,vi(y),y):(d=h,(y=Hn.get(_))&&(d=m({},h),Jp(d,y)),a=a.ownerDocument||a,y=a.createElement("script"),vi(y),Oi(y,"link",d),a.head.appendChild(y),u.instance=y);case"void":return null;default:throw Error(n(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(d=u.instance,u.state.loading|=4,ld(d,h.precedence,a));return u.instance}function ld(a,u,h){for(var d=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=d.length?d[d.length-1]:null,_=y,S=0;S<d.length;S++){var C=d[S];if(C.dataset.precedence===u)_=C;else if(_!==y)break}_?_.parentNode.insertBefore(a,_.nextSibling):(u=h.nodeType===9?h.head:h,u.insertBefore(a,u.firstChild))}function Qp(a,u){a.crossOrigin==null&&(a.crossOrigin=u.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=u.referrerPolicy),a.title==null&&(a.title=u.title)}function Jp(a,u){a.crossOrigin==null&&(a.crossOrigin=u.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=u.referrerPolicy),a.integrity==null&&(a.integrity=u.integrity)}var ud=null;function RE(a,u,h){if(ud===null){var d=new Map,y=ud=new Map;y.set(h,d)}else y=ud,d=y.get(h),d||(d=new Map,y.set(h,d));if(d.has(a))return d;for(d.set(a,null),h=h.getElementsByTagName(a),y=0;y<h.length;y++){var _=h[y];if(!(_[Ru]||_[Ti]||a==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var S=_.getAttribute(u)||"";S=a+S;var C=d.get(S);C?C.push(_):d.set(S,[_])}}return d}function AE(a,u,h){a=a.ownerDocument||a,a.head.insertBefore(h,u==="title"?a.querySelector("head > title"):null)}function JA(a,u,h){if(h===1||u.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return a=u.disabled,typeof u.precedence=="string"&&a==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function OE(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function t5(a,u,h,d){if(h.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var y=Sl(d.href),_=u.querySelector(hc(y));if(_){u=_._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(a.count++,a=cd.bind(a),u.then(a,a)),h.state.loading|=4,h.instance=_,vi(_);return}_=u.ownerDocument||u,d=TE(d),(y=Hn.get(y))&&Qp(d,y),_=_.createElement("link"),vi(_);var S=_;S._p=new Promise(function(C,z){S.onload=C,S.onerror=z}),Oi(_,"link",d),h.instance=_}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(h,u),(u=h.state.preload)&&(h.state.loading&3)===0&&(a.count++,h=cd.bind(a),u.addEventListener("load",h),u.addEventListener("error",h))}}var ty=0;function e5(a,u){return a.stylesheets&&a.count===0&&fd(a,a.stylesheets),0<a.count||0<a.imgCount?function(h){var d=setTimeout(function(){if(a.stylesheets&&fd(a,a.stylesheets),a.unsuspend){var _=a.unsuspend;a.unsuspend=null,_()}},6e4+u);0<a.imgBytes&&ty===0&&(ty=62500*NA());var y=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&fd(a,a.stylesheets),a.unsuspend)){var _=a.unsuspend;a.unsuspend=null,_()}},(a.imgBytes>ty?50:800)+u);return a.unsuspend=h,function(){a.unsuspend=null,clearTimeout(d),clearTimeout(y)}}:null}function cd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)fd(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var hd=null;function fd(a,u){a.stylesheets=null,a.unsuspend!==null&&(a.count++,hd=new Map,u.forEach(i5,a),hd=null,cd.call(a))}function i5(a,u){if(!(u.state.loading&4)){var h=hd.get(a);if(h)var d=h.get(null);else{h=new Map,hd.set(a,h);for(var y=a.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<y.length;_++){var S=y[_];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(h.set(S.dataset.precedence,S),d=S)}d&&h.set(null,d)}y=u.instance,S=y.getAttribute("data-precedence"),_=h.get(S)||d,_===d&&h.set(null,y),h.set(S,y),this.count++,d=cd.bind(this),y.addEventListener("load",d),y.addEventListener("error",d),_?_.parentNode.insertBefore(y,_.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(y,a.firstChild)),u.state.loading|=4}}var dc={$$typeof:R,Provider:null,Consumer:null,_currentValue:U,_currentValue2:U,_threadCount:0};function n5(a,u,h,d,y,_,S,C,z){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Wi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wi(0),this.hiddenUpdates=Wi(null),this.identifierPrefix=d,this.onUncaughtError=y,this.onCaughtError=_,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function DE(a,u,h,d,y,_,S,C,z,X,Q,nt){return a=new n5(a,u,h,S,z,X,Q,nt,C),u=1,_===!0&&(u|=24),_=vn(3,null,null,u),a.current=_,_.stateNode=a,u=Lm(),u.refCount++,a.pooledCache=u,u.refCount++,_.memoizedState={element:d,isDehydrated:h,cache:u},Gm(_),a}function IE(a){return a?(a=el,a):el}function LE(a,u,h,d,y,_){y=IE(y),d.context===null?d.context=y:d.pendingContext=y,d=kr(u),d.payload={element:h},_=_===void 0?null:_,_!==null&&(d.callback=_),h=Fr(a,d,u),h!==null&&(en(h,a,u),Vu(h,a,u))}function PE(a,u){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var h=a.retryLane;a.retryLane=h!==0&&h<u?h:u}}function ey(a,u){PE(a,u),(a=a.alternate)&&PE(a,u)}function NE(a){if(a.tag===13||a.tag===31){var u=ka(a,67108864);u!==null&&en(u,a,67108864),ey(a,67108864)}}function zE(a){if(a.tag===13||a.tag===31){var u=Mn();u=yn(u);var h=ka(a,u);h!==null&&en(h,a,u),ey(a,u)}}var dd=!0;function s5(a,u,h,d){var y=D.T;D.T=null;var _=j.p;try{j.p=2,iy(a,u,h,d)}finally{j.p=_,D.T=y}}function r5(a,u,h,d){var y=D.T;D.T=null;var _=j.p;try{j.p=8,iy(a,u,h,d)}finally{j.p=_,D.T=y}}function iy(a,u,h,d){if(dd){var y=ny(d);if(y===null)Up(a,u,d,gd,h),kE(a,d);else if(o5(y,a,u,h,d))d.stopPropagation();else if(kE(a,d),u&4&&-1<a5.indexOf(a)){for(;y!==null;){var _=qo(y);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var S=In(_.pendingLanes);if(S!==0){var C=_;for(C.pendingLanes|=2,C.entangledLanes|=2;S;){var z=1<<31-Kt(S);C.entanglements[1]|=z,S&=~z}Ms(_),(ie&6)===0&&(Zf=Qe()+500,oc(0))}}break;case 31:case 13:C=ka(_,2),C!==null&&en(C,_,2),Qf(),ey(_,2)}if(_=ny(d),_===null&&Up(a,u,d,gd,h),_===y)break;y=_}y!==null&&d.stopPropagation()}else Up(a,u,d,null,h)}}function ny(a){return a=rm(a),sy(a)}var gd=null;function sy(a){if(gd=null,a=Ho(a),a!==null){var u=r(a);if(u===null)a=null;else{var h=u.tag;if(h===13){if(a=o(u),a!==null)return a;a=null}else if(h===31){if(a=l(u),a!==null)return a;a=null}else if(h===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;a=null}else u!==a&&(a=null)}}return gd=a,null}function GE(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ue()){case Qt:return 2;case Xt:return 8;case qt:case Ie:return 32;case Lt:return 268435456;default:return 32}default:return 32}}var ry=!1,Zr=null,$r=null,Qr=null,gc=new Map,mc=new Map,Jr=[],a5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function kE(a,u){switch(a){case"focusin":case"focusout":Zr=null;break;case"dragenter":case"dragleave":$r=null;break;case"mouseover":case"mouseout":Qr=null;break;case"pointerover":case"pointerout":gc.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":mc.delete(u.pointerId)}}function pc(a,u,h,d,y,_){return a===null||a.nativeEvent!==_?(a={blockedOn:u,domEventName:h,eventSystemFlags:d,nativeEvent:_,targetContainers:[y]},u!==null&&(u=qo(u),u!==null&&NE(u)),a):(a.eventSystemFlags|=d,u=a.targetContainers,y!==null&&u.indexOf(y)===-1&&u.push(y),a)}function o5(a,u,h,d,y){switch(u){case"focusin":return Zr=pc(Zr,a,u,h,d,y),!0;case"dragenter":return $r=pc($r,a,u,h,d,y),!0;case"mouseover":return Qr=pc(Qr,a,u,h,d,y),!0;case"pointerover":var _=y.pointerId;return gc.set(_,pc(gc.get(_)||null,a,u,h,d,y)),!0;case"gotpointercapture":return _=y.pointerId,mc.set(_,pc(mc.get(_)||null,a,u,h,d,y)),!0}return!1}function FE(a){var u=Ho(a.target);if(u!==null){var h=r(u);if(h!==null){if(u=h.tag,u===13){if(u=o(h),u!==null){a.blockedOn=u,Jv(a.priority,function(){zE(h)});return}}else if(u===31){if(u=l(h),u!==null){a.blockedOn=u,Jv(a.priority,function(){zE(h)});return}}else if(u===3&&h.stateNode.current.memoizedState.isDehydrated){a.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}a.blockedOn=null}function md(a){if(a.blockedOn!==null)return!1;for(var u=a.targetContainers;0<u.length;){var h=ny(a.nativeEvent);if(h===null){h=a.nativeEvent;var d=new h.constructor(h.type,h);sm=d,h.target.dispatchEvent(d),sm=null}else return u=qo(h),u!==null&&NE(u),a.blockedOn=h,!1;u.shift()}return!0}function jE(a,u,h){md(a)&&h.delete(u)}function l5(){ry=!1,Zr!==null&&md(Zr)&&(Zr=null),$r!==null&&md($r)&&($r=null),Qr!==null&&md(Qr)&&(Qr=null),gc.forEach(jE),mc.forEach(jE)}function pd(a,u){a.blockedOn===u&&(a.blockedOn=null,ry||(ry=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,l5)))}var yd=null;function BE(a){yd!==a&&(yd=a,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){yd===a&&(yd=null);for(var u=0;u<a.length;u+=3){var h=a[u],d=a[u+1],y=a[u+2];if(typeof d!="function"){if(sy(d||h)===null)continue;break}var _=qo(h);_!==null&&(a.splice(u,3),u-=3,np(_,{pending:!0,data:y,method:h.method,action:d},d,y))}}))}function wl(a){function u(z){return pd(z,a)}Zr!==null&&pd(Zr,a),$r!==null&&pd($r,a),Qr!==null&&pd(Qr,a),gc.forEach(u),mc.forEach(u);for(var h=0;h<Jr.length;h++){var d=Jr[h];d.blockedOn===a&&(d.blockedOn=null)}for(;0<Jr.length&&(h=Jr[0],h.blockedOn===null);)FE(h),h.blockedOn===null&&Jr.shift();if(h=(a.ownerDocument||a).$$reactFormReplay,h!=null)for(d=0;d<h.length;d+=3){var y=h[d],_=h[d+1],S=y[Ki]||null;if(typeof _=="function")S||BE(h);else if(S){var C=null;if(_&&_.hasAttribute("formAction")){if(y=_,S=_[Ki]||null)C=S.formAction;else if(sy(y)!==null)continue}else C=S.action;typeof C=="function"?h[d+1]=C:(h.splice(d,3),d-=3),BE(h)}}}function UE(){function a(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(S){return y=S})},focusReset:"manual",scroll:"manual"})}function u(){y!==null&&(y(),y=null),d||setTimeout(h,20)}function h(){if(!d&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,y=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(h,100),function(){d=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),y!==null&&(y(),y=null)}}}function ay(a){this._internalRoot=a}_d.prototype.render=ay.prototype.render=function(a){var u=this._internalRoot;if(u===null)throw Error(n(409));var h=u.current,d=Mn();LE(h,d,a,u,null,null)},_d.prototype.unmount=ay.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var u=a.containerInfo;LE(a.current,2,null,a,null,null),Qf(),u[Uo]=null}};function _d(a){this._internalRoot=a}_d.prototype.unstable_scheduleHydration=function(a){if(a){var u=Qv();a={blockedOn:null,target:a,priority:u};for(var h=0;h<Jr.length&&u!==0&&u<Jr[h].priority;h++);Jr.splice(h,0,a),h===0&&FE(a)}};var HE=t.version;if(HE!=="19.2.0")throw Error(n(527,HE,"19.2.0"));j.findDOMNode=function(a){var u=a._reactInternals;if(u===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=f(u),a=a!==null?g(a):null,a=a===null?null:a.stateNode,a};var u5={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vd.isDisabled&&vd.supportsFiber)try{we=vd.inject(u5),ve=vd}catch{}}return _c.createRoot=function(a,u){if(!s(a))throw Error(n(299));var h=!1,d="",y=Z2,_=$2,S=Q2;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(d=u.identifierPrefix),u.onUncaughtError!==void 0&&(y=u.onUncaughtError),u.onCaughtError!==void 0&&(_=u.onCaughtError),u.onRecoverableError!==void 0&&(S=u.onRecoverableError)),u=DE(a,1,!1,null,null,h,d,null,y,_,S,UE),a[Uo]=u.current,Bp(a),new ay(u)},_c.hydrateRoot=function(a,u,h){if(!s(a))throw Error(n(299));var d=!1,y="",_=Z2,S=$2,C=Q2,z=null;return h!=null&&(h.unstable_strictMode===!0&&(d=!0),h.identifierPrefix!==void 0&&(y=h.identifierPrefix),h.onUncaughtError!==void 0&&(_=h.onUncaughtError),h.onCaughtError!==void 0&&(S=h.onCaughtError),h.onRecoverableError!==void 0&&(C=h.onRecoverableError),h.formState!==void 0&&(z=h.formState)),u=DE(a,1,!0,u,h??null,d,y,z,_,S,C,UE),u.context=IE(null),h=u.current,d=Mn(),d=yn(d),y=kr(d),y.callback=null,Fr(h,y,d),h=d,u.current.lanes=h,yi(u,h),Ms(u),a[Uo]=u.current,Bp(a),new _d(u)},_c.version="19.2.0",_c}var JE;function x5(){if(JE)return uy.exports;JE=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),uy.exports=v5(),uy.exports}var b5=x5();function E5(i){i("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),i("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),i("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var t=1;t<=60;++t)i("EPSG:"+(32600+t),"+proj=utm +zone="+t+" +datum=WGS84 +units=m"),i("EPSG:"+(32700+t),"+proj=utm +zone="+t+" +south +datum=WGS84 +units=m");i("EPSG:5041","+title=WGS 84 / UPS North (E,N) +proj=stere +lat_0=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),i("EPSG:5042","+title=WGS 84 / UPS South (E,N) +proj=stere +lat_0=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),i.WGS84=i["EPSG:4326"],i["EPSG:3785"]=i["EPSG:3857"],i.GOOGLE=i["EPSG:3857"],i["EPSG:900913"]=i["EPSG:3857"],i["EPSG:102113"]=i["EPSG:3857"]}var wo=1,To=2,Kl=3,S5=4,m_=5,tS=6378137,M5=6356752314e-3,eS=.0066943799901413165,Yc=484813681109536e-20,rt=Math.PI/2,w5=.16666666666666666,T5=.04722222222222222,C5=.022156084656084655,ut=1e-10,Ke=.017453292519943295,hn=57.29577951308232,re=Math.PI/4,sh=Math.PI*2,ei=3.14159265359,gn={};gn.greenwich=0;gn.lisbon=-9.131906111111;gn.paris=2.337229166667;gn.bogota=-74.080916666667;gn.madrid=-3.687938888889;gn.rome=12.452333333333;gn.bern=7.439583333333;gn.jakarta=106.807719444444;gn.ferro=-17.666666666667;gn.brussels=4.367975;gn.stockholm=18.058277777778;gn.athens=23.7163375;gn.oslo=10.722916666667;const R5={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.1},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var iS=/[\s_\-\/\(\)]/g;function Ca(i,t){if(i[t])return i[t];for(var e=Object.keys(i),n=t.toLowerCase().replace(iS,""),s=-1,r,o;++s<e.length;)if(r=e[s],o=r.toLowerCase().replace(iS,""),o===n)return i[r]}function p_(i){var t={},e=i.split("+").map(function(l){return l.trim()}).filter(function(l){return l}).reduce(function(l,c){var f=c.split("=");return f.push(!0),l[f[0].toLowerCase()]=f[1],l},{}),n,s,r,o={proj:"projName",datum:"datumCode",rf:function(l){t.rf=parseFloat(l)},lat_0:function(l){t.lat0=l*Ke},lat_1:function(l){t.lat1=l*Ke},lat_2:function(l){t.lat2=l*Ke},lat_ts:function(l){t.lat_ts=l*Ke},lon_0:function(l){t.long0=l*Ke},lon_1:function(l){t.long1=l*Ke},lon_2:function(l){t.long2=l*Ke},alpha:function(l){t.alpha=parseFloat(l)*Ke},gamma:function(l){t.rectified_grid_angle=parseFloat(l)*Ke},lonc:function(l){t.longc=l*Ke},x_0:function(l){t.x0=parseFloat(l)},y_0:function(l){t.y0=parseFloat(l)},k_0:function(l){t.k0=parseFloat(l)},k:function(l){t.k0=parseFloat(l)},a:function(l){t.a=parseFloat(l)},b:function(l){t.b=parseFloat(l)},r:function(l){t.a=t.b=parseFloat(l)},r_a:function(){t.R_A=!0},zone:function(l){t.zone=parseInt(l,10)},south:function(){t.utmSouth=!0},towgs84:function(l){t.datum_params=l.split(",").map(function(c){return parseFloat(c)})},to_meter:function(l){t.to_meter=parseFloat(l)},units:function(l){t.units=l;var c=Ca(R5,l);c&&(t.to_meter=c.to_meter)},from_greenwich:function(l){t.from_greenwich=l*Ke},pm:function(l){var c=Ca(gn,l);t.from_greenwich=(c||parseFloat(l))*Ke},nadgrids:function(l){l==="@null"?t.datumCode="none":t.nadgrids=l},axis:function(l){var c="ewnsud";l.length===3&&c.indexOf(l.substr(0,1))!==-1&&c.indexOf(l.substr(1,1))!==-1&&c.indexOf(l.substr(2,1))!==-1&&(t.axis=l)},approx:function(){t.approx=!0},over:function(){t.over=!0}};for(n in e)s=e[n],n in o?(r=o[n],typeof r=="function"?r(s):t[r]=s):t[n]=s;return typeof t.datumCode=="string"&&t.datumCode!=="WGS84"&&(t.datumCode=t.datumCode.toLowerCase()),t.projStr=i,t}class x4{static getId(t){const e=t.find(n=>Array.isArray(n)&&n[0]==="ID");return e&&e.length>=3?{authority:e[1],code:parseInt(e[2],10)}:null}static convertUnit(t,e="unit"){if(!t||t.length<3)return{type:e,name:"unknown",conversion_factor:null};const n=t[1],s=parseFloat(t[2])||null,r=t.find(l=>Array.isArray(l)&&l[0]==="ID"),o=r?{authority:r[1],code:parseInt(r[2],10)}:null;return{type:e,name:n,conversion_factor:s,id:o}}static convertAxis(t){const e=t[1]||"Unknown";let n;const s=e.match(/^\((.)\)$/);if(s){const f=s[1].toUpperCase();if(f==="E")n="east";else if(f==="N")n="north";else if(f==="U")n="up";else throw new Error(`Unknown axis abbreviation: ${f}`)}else n=t[2]?t[2].toLowerCase():"unknown";const r=t.find(f=>Array.isArray(f)&&f[0]==="ORDER"),o=r?parseInt(r[1],10):null,l=t.find(f=>Array.isArray(f)&&(f[0]==="LENGTHUNIT"||f[0]==="ANGLEUNIT"||f[0]==="SCALEUNIT")),c=this.convertUnit(l);return{name:e,direction:n,unit:c,order:o}}static extractAxes(t){return t.filter(e=>Array.isArray(e)&&e[0]==="AXIS").map(e=>this.convertAxis(e)).sort((e,n)=>(e.order||0)-(n.order||0))}static convert(t,e={}){switch(t[0]){case"PROJCRS":e.type="ProjectedCRS",e.name=t[1],e.base_crs=t.find(p=>Array.isArray(p)&&p[0]==="BASEGEOGCRS")?this.convert(t.find(p=>Array.isArray(p)&&p[0]==="BASEGEOGCRS")):null,e.conversion=t.find(p=>Array.isArray(p)&&p[0]==="CONVERSION")?this.convert(t.find(p=>Array.isArray(p)&&p[0]==="CONVERSION")):null;const n=t.find(p=>Array.isArray(p)&&p[0]==="CS");n&&(e.coordinate_system={type:n[1],axis:this.extractAxes(t)});const s=t.find(p=>Array.isArray(p)&&p[0]==="LENGTHUNIT");if(s){const p=this.convertUnit(s);e.coordinate_system.unit=p}e.id=this.getId(t);break;case"BASEGEOGCRS":case"GEOGCRS":e.type="GeographicCRS",e.name=t[1];const r=t.find(p=>Array.isArray(p)&&(p[0]==="DATUM"||p[0]==="ENSEMBLE"));if(r){const p=this.convert(r);r[0]==="ENSEMBLE"?e.datum_ensemble=p:e.datum=p;const v=t.find(x=>Array.isArray(x)&&x[0]==="PRIMEM");v&&v[1]!=="Greenwich"&&(p.prime_meridian={name:v[1],longitude:parseFloat(v[2])})}e.coordinate_system={type:"ellipsoidal",axis:this.extractAxes(t)},e.id=this.getId(t);break;case"DATUM":e.type="GeodeticReferenceFrame",e.name=t[1],e.ellipsoid=t.find(p=>Array.isArray(p)&&p[0]==="ELLIPSOID")?this.convert(t.find(p=>Array.isArray(p)&&p[0]==="ELLIPSOID")):null;break;case"ENSEMBLE":e.type="DatumEnsemble",e.name=t[1],e.members=t.filter(p=>Array.isArray(p)&&p[0]==="MEMBER").map(p=>({type:"DatumEnsembleMember",name:p[1],id:this.getId(p)}));const o=t.find(p=>Array.isArray(p)&&p[0]==="ENSEMBLEACCURACY");o&&(e.accuracy=parseFloat(o[1]));const l=t.find(p=>Array.isArray(p)&&p[0]==="ELLIPSOID");l&&(e.ellipsoid=this.convert(l)),e.id=this.getId(t);break;case"ELLIPSOID":e.type="Ellipsoid",e.name=t[1],e.semi_major_axis=parseFloat(t[2]),e.inverse_flattening=parseFloat(t[3]),t.find(p=>Array.isArray(p)&&p[0]==="LENGTHUNIT")&&this.convert(t.find(p=>Array.isArray(p)&&p[0]==="LENGTHUNIT"),e);break;case"CONVERSION":e.type="Conversion",e.name=t[1],e.method=t.find(p=>Array.isArray(p)&&p[0]==="METHOD")?this.convert(t.find(p=>Array.isArray(p)&&p[0]==="METHOD")):null,e.parameters=t.filter(p=>Array.isArray(p)&&p[0]==="PARAMETER").map(p=>this.convert(p));break;case"METHOD":e.type="Method",e.name=t[1],e.id=this.getId(t);break;case"PARAMETER":e.type="Parameter",e.name=t[1],e.value=parseFloat(t[2]),e.unit=this.convertUnit(t.find(p=>Array.isArray(p)&&(p[0]==="LENGTHUNIT"||p[0]==="ANGLEUNIT"||p[0]==="SCALEUNIT"))),e.id=this.getId(t);break;case"BOUNDCRS":e.type="BoundCRS";const c=t.find(p=>Array.isArray(p)&&p[0]==="SOURCECRS");if(c){const p=c.find(v=>Array.isArray(v));e.source_crs=p?this.convert(p):null}const f=t.find(p=>Array.isArray(p)&&p[0]==="TARGETCRS");if(f){const p=f.find(v=>Array.isArray(v));e.target_crs=p?this.convert(p):null}const g=t.find(p=>Array.isArray(p)&&p[0]==="ABRIDGEDTRANSFORMATION");g?e.transformation=this.convert(g):e.transformation=null;break;case"ABRIDGEDTRANSFORMATION":if(e.type="Transformation",e.name=t[1],e.method=t.find(p=>Array.isArray(p)&&p[0]==="METHOD")?this.convert(t.find(p=>Array.isArray(p)&&p[0]==="METHOD")):null,e.parameters=t.filter(p=>Array.isArray(p)&&(p[0]==="PARAMETER"||p[0]==="PARAMETERFILE")).map(p=>{if(p[0]==="PARAMETER")return this.convert(p);if(p[0]==="PARAMETERFILE")return{name:p[1],value:p[2],id:{authority:"EPSG",code:8656}}}),e.parameters.length===7){const p=e.parameters[6];p.name==="Scale difference"&&(p.value=Math.round((p.value-1)*1e12)/1e6)}e.id=this.getId(t);break;case"AXIS":e.coordinate_system||(e.coordinate_system={type:"unspecified",axis:[]}),e.coordinate_system.axis.push(this.convertAxis(t));break;case"LENGTHUNIT":const m=this.convertUnit(t,"LinearUnit");e.coordinate_system&&e.coordinate_system.axis&&e.coordinate_system.axis.forEach(p=>{p.unit||(p.unit=m)}),m.conversion_factor&&m.conversion_factor!==1&&e.semi_major_axis&&(e.semi_major_axis={value:e.semi_major_axis,unit:m});break;default:e.keyword=t[0];break}return e}}class A5 extends x4{static convert(t,e={}){return super.convert(t,e),e.coordinate_system&&e.coordinate_system.subtype==="Cartesian"&&delete e.coordinate_system,e.usage&&delete e.usage,e}}class O5 extends x4{static convert(t,e={}){super.convert(t,e);const n=t.find(r=>Array.isArray(r)&&r[0]==="CS");n&&(e.coordinate_system={subtype:n[1],axis:this.extractAxes(t)});const s=t.find(r=>Array.isArray(r)&&r[0]==="USAGE");if(s){const r=s.find(c=>Array.isArray(c)&&c[0]==="SCOPE"),o=s.find(c=>Array.isArray(c)&&c[0]==="AREA"),l=s.find(c=>Array.isArray(c)&&c[0]==="BBOX");e.usage={},r&&(e.usage.scope=r[1]),o&&(e.usage.area=o[1]),l&&(e.usage.bbox=l.slice(1))}return e}}function D5(i){return i.find(t=>Array.isArray(t)&&t[0]==="USAGE")?"2019":(i.find(t=>Array.isArray(t)&&t[0]==="CS")||i[0]==="BOUNDCRS"||i[0]==="PROJCRS"||i[0]==="GEOGCRS","2015")}function I5(i){return(D5(i)==="2019"?O5:A5).convert(i)}function L5(i){const t=i.toUpperCase();return t.includes("PROJCRS")||t.includes("GEOGCRS")||t.includes("BOUNDCRS")||t.includes("VERTCRS")||t.includes("LENGTHUNIT")||t.includes("ANGLEUNIT")||t.includes("SCALEUNIT")?"WKT2":(t.includes("PROJCS")||t.includes("GEOGCS")||t.includes("LOCAL_CS")||t.includes("VERT_CS")||t.includes("UNIT"),"WKT1")}var rh=1,b4=2,E4=3,gg=4,S4=5,h1=-1,P5=/\s/,N5=/[A-Za-z]/,z5=/[A-Za-z84_]/,u0=/[,\]]/,M4=/[\d\.E\-\+]/;function Rr(i){if(typeof i!="string")throw new Error("not a string");this.text=i.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=rh}Rr.prototype.readCharicter=function(){var i=this.text[this.place++];if(this.state!==gg)for(;P5.test(i);){if(this.place>=this.text.length)return;i=this.text[this.place++]}switch(this.state){case rh:return this.neutral(i);case b4:return this.keyword(i);case gg:return this.quoted(i);case S4:return this.afterquote(i);case E4:return this.number(i);case h1:return}};Rr.prototype.afterquote=function(i){if(i==='"'){this.word+='"',this.state=gg;return}if(u0.test(i)){this.word=this.word.trim(),this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in afterquote yet, index '+this.place)};Rr.prototype.afterItem=function(i){if(i===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=rh;return}if(i==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=rh,this.currentObject=this.stack.pop(),this.currentObject||(this.state=h1);return}};Rr.prototype.number=function(i){if(M4.test(i)){this.word+=i;return}if(u0.test(i)){this.word=parseFloat(this.word),this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in number yet, index '+this.place)};Rr.prototype.quoted=function(i){if(i==='"'){this.state=S4;return}this.word+=i};Rr.prototype.keyword=function(i){if(z5.test(i)){this.word+=i;return}if(i==="["){var t=[];t.push(this.word),this.level++,this.root===null?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,this.state=rh;return}if(u0.test(i)){this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in keyword yet, index '+this.place)};Rr.prototype.neutral=function(i){if(N5.test(i)){this.word=i,this.state=b4;return}if(i==='"'){this.word="",this.state=gg;return}if(M4.test(i)){this.word=i,this.state=E4;return}if(u0.test(i)){this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in neutral yet, index '+this.place)};Rr.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===h1)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function G5(i){var t=new Rr(i);return t.output()}function dy(i,t,e){Array.isArray(t)&&(e.unshift(t),t=null);var n=t?{}:i,s=e.reduce(function(r,o){return ql(o,r),r},n);t&&(i[t]=s)}function ql(i,t){if(!Array.isArray(i)){t[i]=!0;return}var e=i.shift();if(e==="PARAMETER"&&(e=i.shift()),i.length===1){if(Array.isArray(i[0])){t[e]={},ql(i[0],t[e]);return}t[e]=i[0];return}if(!i.length){t[e]=!0;return}if(e==="TOWGS84"){t[e]=i;return}if(e==="AXIS"){e in t||(t[e]=[]),t[e].push(i);return}Array.isArray(e)||(t[e]={});var n;switch(e){case"UNIT":case"PRIMEM":case"VERT_DATUM":t[e]={name:i[0].toLowerCase(),convert:i[1]},i.length===3&&ql(i[2],t[e]);return;case"SPHEROID":case"ELLIPSOID":t[e]={name:i[0],a:i[1],rf:i[2]},i.length===4&&ql(i[3],t[e]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":i[0]=["name",i[0]],dy(t,e,i);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":i[0]=["name",i[0]],dy(t,e,i),t[e].type=e;return;default:for(n=-1;++n<i.length;)if(!Array.isArray(i[n]))return ql(i,t[e]);return dy(t,e,i)}}var k5=.017453292519943295;function us(i){return i*k5}function w4(i){const t=(i.projName||"").toLowerCase().replace(/_/g," ");!i.long0&&i.longc&&(t==="albers conic equal area"||t==="lambert azimuthal equal area")&&(i.long0=i.longc),!i.lat_ts&&i.lat1&&(t==="stereographic south pole"||t==="polar stereographic (variant b)")?(i.lat0=us(i.lat1>0?90:-90),i.lat_ts=i.lat1,delete i.lat1):!i.lat_ts&&i.lat0&&(t==="polar stereographic"||t==="polar stereographic (variant a)")&&(i.lat_ts=i.lat0,i.lat0=us(i.lat0>0?90:-90),delete i.lat1)}function nS(i){let t={units:null,to_meter:void 0};return typeof i=="string"?(t.units=i.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.units==="meter"&&(t.to_meter=1)):i&&i.name&&(t.units=i.name.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.to_meter=i.conversion_factor),t}function sS(i){return typeof i=="object"?i.value*i.unit.conversion_factor:i}function rS(i,t){i.ellipsoid.radius?(t.a=i.ellipsoid.radius,t.rf=0):(t.a=sS(i.ellipsoid.semi_major_axis),i.ellipsoid.inverse_flattening!==void 0?t.rf=i.ellipsoid.inverse_flattening:i.ellipsoid.semi_major_axis!==void 0&&i.ellipsoid.semi_minor_axis!==void 0&&(t.rf=t.a/(t.a-sS(i.ellipsoid.semi_minor_axis))))}function mg(i,t={}){return!i||typeof i!="object"?i:i.type==="BoundCRS"?(mg(i.source_crs,t),i.transformation&&(i.transformation.method&&i.transformation.method.name==="NTv2"?t.nadgrids=i.transformation.parameters[0].value:t.datum_params=i.transformation.parameters.map(e=>e.value)),t):(Object.keys(i).forEach(e=>{const n=i[e];if(n!==null)switch(e){case"name":if(t.srsCode)break;t.name=n,t.srsCode=n;break;case"type":n==="GeographicCRS"?t.projName="longlat":n==="ProjectedCRS"&&i.conversion&&i.conversion.method&&(t.projName=i.conversion.method.name);break;case"datum":case"datum_ensemble":n.ellipsoid&&(t.ellps=n.ellipsoid.name,rS(n,t)),n.prime_meridian&&(t.from_greenwich=n.prime_meridian.longitude*Math.PI/180);break;case"ellipsoid":t.ellps=n.name,rS(n,t);break;case"prime_meridian":t.long0=(n.longitude||0)*Math.PI/180;break;case"coordinate_system":if(n.axis){if(t.axis=n.axis.map(s=>{const r=s.direction;if(r==="east")return"e";if(r==="north")return"n";if(r==="west")return"w";if(r==="south")return"s";throw new Error(`Unknown axis direction: ${r}`)}).join("")+"u",n.unit){const{units:s,to_meter:r}=nS(n.unit);t.units=s,t.to_meter=r}else if(n.axis[0]&&n.axis[0].unit){const{units:s,to_meter:r}=nS(n.axis[0].unit);t.units=s,t.to_meter=r}}break;case"id":n.authority&&n.code&&(t.title=n.authority+":"+n.code);break;case"conversion":n.method&&n.method.name&&(t.projName=n.method.name),n.parameters&&n.parameters.forEach(s=>{const r=s.name.toLowerCase().replace(/\s+/g,"_"),o=s.value;s.unit&&s.unit.conversion_factor?t[r]=o*s.unit.conversion_factor:s.unit==="degree"?t[r]=o*Math.PI/180:t[r]=o});break;case"unit":n.name&&(t.units=n.name.toLowerCase(),t.units==="metre"&&(t.units="meter")),n.conversion_factor&&(t.to_meter=n.conversion_factor);break;case"base_crs":mg(n,t),t.datumCode=n.id?n.id.authority+"_"+n.id.code:n.name;break}}),t.latitude_of_false_origin!==void 0&&(t.lat0=t.latitude_of_false_origin),t.longitude_of_false_origin!==void 0&&(t.long0=t.longitude_of_false_origin),t.latitude_of_standard_parallel!==void 0&&(t.lat0=t.latitude_of_standard_parallel,t.lat1=t.latitude_of_standard_parallel),t.latitude_of_1st_standard_parallel!==void 0&&(t.lat1=t.latitude_of_1st_standard_parallel),t.latitude_of_2nd_standard_parallel!==void 0&&(t.lat2=t.latitude_of_2nd_standard_parallel),t.latitude_of_projection_centre!==void 0&&(t.lat0=t.latitude_of_projection_centre),t.longitude_of_projection_centre!==void 0&&(t.longc=t.longitude_of_projection_centre),t.easting_at_false_origin!==void 0&&(t.x0=t.easting_at_false_origin),t.northing_at_false_origin!==void 0&&(t.y0=t.northing_at_false_origin),t.latitude_of_natural_origin!==void 0&&(t.lat0=t.latitude_of_natural_origin),t.longitude_of_natural_origin!==void 0&&(t.long0=t.longitude_of_natural_origin),t.longitude_of_origin!==void 0&&(t.long0=t.longitude_of_origin),t.false_easting!==void 0&&(t.x0=t.false_easting),t.easting_at_projection_centre&&(t.x0=t.easting_at_projection_centre),t.false_northing!==void 0&&(t.y0=t.false_northing),t.northing_at_projection_centre&&(t.y0=t.northing_at_projection_centre),t.standard_parallel_1!==void 0&&(t.lat1=t.standard_parallel_1),t.standard_parallel_2!==void 0&&(t.lat2=t.standard_parallel_2),t.scale_factor_at_natural_origin!==void 0&&(t.k0=t.scale_factor_at_natural_origin),t.scale_factor_at_projection_centre!==void 0&&(t.k0=t.scale_factor_at_projection_centre),t.scale_factor_on_pseudo_standard_parallel!==void 0&&(t.k0=t.scale_factor_on_pseudo_standard_parallel),t.azimuth!==void 0&&(t.alpha=t.azimuth),t.azimuth_at_projection_centre!==void 0&&(t.alpha=t.azimuth_at_projection_centre),t.angle_from_rectified_to_skew_grid&&(t.rectified_grid_angle=t.angle_from_rectified_to_skew_grid),w4(t),t)}var F5=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function j5(i,t){var e=t[0],n=t[1];!(e in i)&&n in i&&(i[e]=i[n],t.length===3&&(i[e]=t[2](i[e])))}function T4(i){for(var t=Object.keys(i),e=0,n=t.length;e<n;++e){var s=t[e];F5.indexOf(s)!==-1&&B5(i[s]),typeof i[s]=="object"&&T4(i[s])}}function B5(i){if(i.AUTHORITY){var t=Object.keys(i.AUTHORITY)[0];t&&t in i.AUTHORITY&&(i.title=t+":"+i.AUTHORITY[t])}if(i.type==="GEOGCS"?i.projName="longlat":i.type==="LOCAL_CS"?(i.projName="identity",i.local=!0):typeof i.PROJECTION=="object"?i.projName=Object.keys(i.PROJECTION)[0]:i.projName=i.PROJECTION,i.AXIS){for(var e="",n=0,s=i.AXIS.length;n<s;++n){var r=[i.AXIS[n][0].toLowerCase(),i.AXIS[n][1].toLowerCase()];r[0].indexOf("north")!==-1||(r[0]==="y"||r[0]==="lat")&&r[1]==="north"?e+="n":r[0].indexOf("south")!==-1||(r[0]==="y"||r[0]==="lat")&&r[1]==="south"?e+="s":r[0].indexOf("east")!==-1||(r[0]==="x"||r[0]==="lon")&&r[1]==="east"?e+="e":(r[0].indexOf("west")!==-1||(r[0]==="x"||r[0]==="lon")&&r[1]==="west")&&(e+="w")}e.length===2&&(e+="u"),e.length===3&&(i.axis=e)}i.UNIT&&(i.units=i.UNIT.name.toLowerCase(),i.units==="metre"&&(i.units="meter"),i.UNIT.convert&&(i.type==="GEOGCS"?i.DATUM&&i.DATUM.SPHEROID&&(i.to_meter=i.UNIT.convert*i.DATUM.SPHEROID.a):i.to_meter=i.UNIT.convert));var o=i.GEOGCS;i.type==="GEOGCS"&&(o=i),o&&(o.DATUM?i.datumCode=o.DATUM.name.toLowerCase():i.datumCode=o.name.toLowerCase(),i.datumCode.slice(0,2)==="d_"&&(i.datumCode=i.datumCode.slice(2)),i.datumCode==="new_zealand_1949"&&(i.datumCode="nzgd49"),(i.datumCode==="wgs_1984"||i.datumCode==="world_geodetic_system_1984")&&(i.PROJECTION==="Mercator_Auxiliary_Sphere"&&(i.sphere=!0),i.datumCode="wgs84"),i.datumCode==="belge_1972"&&(i.datumCode="rnb72"),o.DATUM&&o.DATUM.SPHEROID&&(i.ellps=o.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),i.ellps.toLowerCase().slice(0,13)==="international"&&(i.ellps="intl"),i.a=o.DATUM.SPHEROID.a,i.rf=parseFloat(o.DATUM.SPHEROID.rf,10)),o.DATUM&&o.DATUM.TOWGS84&&(i.datum_params=o.DATUM.TOWGS84),~i.datumCode.indexOf("osgb_1936")&&(i.datumCode="osgb36"),~i.datumCode.indexOf("osni_1952")&&(i.datumCode="osni52"),(~i.datumCode.indexOf("tm65")||~i.datumCode.indexOf("geodetic_datum_of_1965"))&&(i.datumCode="ire65"),i.datumCode==="ch1903+"&&(i.datumCode="ch1903"),~i.datumCode.indexOf("israel")&&(i.datumCode="isr93")),i.b&&!isFinite(i.b)&&(i.b=i.a),i.rectified_grid_angle&&(i.rectified_grid_angle=us(i.rectified_grid_angle));function l(g){var m=i.to_meter||1;return g*m}var c=function(g){return j5(i,g)},f=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",us],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",us],["x0","false_easting",l],["y0","false_northing",l],["long0","central_meridian",us],["lat0","latitude_of_origin",us],["lat0","standard_parallel_1",us],["lat1","standard_parallel_1",us],["lat2","standard_parallel_2",us],["azimuth","Azimuth"],["alpha","azimuth",us],["srsCode","name"]];f.forEach(c),w4(i)}function pg(i){if(typeof i=="object")return mg(i);const t=L5(i);var e=G5(i);if(t==="WKT2"){const r=I5(e);return mg(r)}var n=e[0],s={};return ql(e,s),T4(s),s[n]}function Di(i){var t=this;if(arguments.length===2){var e=arguments[1];typeof e=="string"?e.charAt(0)==="+"?Di[i]=p_(arguments[1]):Di[i]=pg(arguments[1]):e&&typeof e=="object"&&!("projName"in e)?Di[i]=pg(arguments[1]):(Di[i]=e,e||delete Di[i])}else if(arguments.length===1){if(Array.isArray(i))return i.map(function(n){return Array.isArray(n)?Di.apply(t,n):Di(n)});if(typeof i=="string"){if(i in Di)return Di[i]}else"EPSG"in i?Di["EPSG:"+i.EPSG]=i:"ESRI"in i?Di["ESRI:"+i.ESRI]=i:"IAU2000"in i?Di["IAU2000:"+i.IAU2000]=i:console.log(i);return}}E5(Di);function U5(i){return typeof i=="string"}function H5(i){return i in Di}function q5(i){return i.indexOf("+")!==0&&i.indexOf("[")!==-1||typeof i=="object"&&!("srsCode"in i)}var V5=["3857","900913","3785","102113"];function Y5(i){var t=Ca(i,"authority");if(t){var e=Ca(t,"epsg");return e&&V5.indexOf(e)>-1}}function X5(i){var t=Ca(i,"extension");if(t)return Ca(t,"proj4")}function W5(i){return i[0]==="+"}function K5(i){if(U5(i)){if(H5(i))return Di[i];if(q5(i)){var t=pg(i);if(Y5(t))return Di["EPSG:3857"];var e=X5(t);return e?p_(e):t}if(W5(i))return p_(i)}else return"projName"in i?i:pg(i)}function aS(i,t){i=i||{};var e,n;if(!t)return i;for(n in t)e=t[n],e!==void 0&&(i[n]=e);return i}function js(i,t,e){var n=i*t;return e/Math.sqrt(1-n*n)}function Nh(i){return i<0?-1:1}function dt(i,t){return t||Math.abs(i)<=ei?i:i-Nh(i)*sh}function ys(i,t,e){var n=i*e,s=.5*i;return n=Math.pow((1-n)/(1+n),s),Math.tan(.5*(rt-t))/n}function ah(i,t){for(var e=.5*i,n,s,r=rt-2*Math.atan(t),o=0;o<=15;o++)if(n=i*Math.sin(r),s=rt-2*Math.atan(t*Math.pow((1-n)/(1+n),e))-r,r+=s,Math.abs(s)<=1e-10)return r;return-9999}function Z5(){var i=this.b/this.a;this.es=1-i*i,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=js(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function $5(i){var t=i.x,e=i.y;if(e*hn>90&&e*hn<-90&&t*hn>180&&t*hn<-180)return null;var n,s;if(Math.abs(Math.abs(e)-rt)<=ut)return null;if(this.sphere)n=this.x0+this.a*this.k0*dt(t-this.long0,this.over),s=this.y0+this.a*this.k0*Math.log(Math.tan(re+.5*e));else{var r=Math.sin(e),o=ys(this.e,e,r);n=this.x0+this.a*this.k0*dt(t-this.long0,this.over),s=this.y0-this.a*this.k0*Math.log(o)}return i.x=n,i.y=s,i}function Q5(i){var t=i.x-this.x0,e=i.y-this.y0,n,s;if(this.sphere)s=rt-2*Math.atan(Math.exp(-e/(this.a*this.k0)));else{var r=Math.exp(-e/(this.a*this.k0));if(s=ah(this.e,r),s===-9999)return null}return n=dt(this.long0+t/(this.a*this.k0),this.over),i.x=n,i.y=s,i}var J5=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","Mercator_Variant_A","merc"];const t8={init:Z5,forward:$5,inverse:Q5,names:J5};function e8(){}function oS(i){return i}var C4=["longlat","identity"];const i8={init:e8,forward:oS,inverse:oS,names:C4};var n8=[t8,i8],ao={},Vl=[];function R4(i,t){var e=Vl.length;return i.names?(Vl[e]=i,i.names.forEach(function(n){ao[n.toLowerCase()]=e}),this):(console.log(t),!0)}function A4(i){return i.replace(/[-\(\)\s]+/g," ").trim().replace(/ /g,"_")}function s8(i){if(!i)return!1;var t=i.toLowerCase();if(typeof ao[t]<"u"&&Vl[ao[t]]||(t=A4(t),t in ao&&Vl[ao[t]]))return Vl[ao[t]]}function r8(){n8.forEach(R4)}const a8={start:r8,add:R4,get:s8};var O4={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},andrae:{a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},clrk80:{a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}};const o8=O4.WGS84;function l8(i,t,e,n){var s=i*i,r=t*t,o=(s-r)/s,l=0;n?(i*=1-o*(w5+o*(T5+o*C5)),s=i*i,o=0):l=Math.sqrt(o);var c=(s-r)/r;return{es:o,e:l,ep2:c}}function u8(i,t,e,n,s){if(!i){var r=Ca(O4,n);r||(r=o8),i=r.a,t=r.b,e=r.rf}return e&&!t&&(t=(1-1/e)*i),(e===0||Math.abs(i-t)<ut)&&(s=!0,t=i),{a:i,b:t,rf:e,sphere:s}}var eg={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},EPSG_5451:{towgs84:"6.41,-49.05,-11.28,1.5657,0.5242,6.9718,-5.7649"},IGNF_LURESG:{towgs84:"-192.986,13.673,-39.309,-0.4099,-2.9332,2.6881,0.43"},EPSG_4614:{towgs84:"-119.4248,-303.65872,-11.00061,1.164298,0.174458,1.096259,3.657065"},EPSG_4615:{towgs84:"-494.088,-312.129,279.877,-1.423,-1.013,1.59,-0.748"},ESRI_37241:{towgs84:"-76.822,257.457,-12.817,2.136,-0.033,-2.392,-0.031"},ESRI_37249:{towgs84:"-440.296,58.548,296.265,1.128,10.202,4.559,-0.438"},ESRI_37245:{towgs84:"-511.151,-181.269,139.609,1.05,2.703,1.798,3.071"},EPSG_4178:{towgs84:"24.9,-126.4,-93.2,-0.063,-0.247,-0.041,1.01"},EPSG_4622:{towgs84:"-472.29,-5.63,-304.12,0.4362,-0.8374,0.2563,1.8984"},EPSG_4625:{towgs84:"126.93,547.94,130.41,-2.7867,5.1612,-0.8584,13.8227"},EPSG_5252:{towgs84:"0.023,0.036,-0.068,0.00176,0.00912,-0.01136,0.00439"},EPSG_4314:{towgs84:"597.1,71.4,412.1,0.894,0.068,-1.563,7.58"},EPSG_4282:{towgs84:"-178.3,-316.7,-131.5,5.278,6.077,10.979,19.166"},EPSG_4231:{towgs84:"-83.11,-97.38,-117.22,0.0276,-0.2167,0.2147,0.1218"},EPSG_4274:{towgs84:"-230.994,102.591,25.199,0.633,-0.239,0.9,1.95"},EPSG_4134:{towgs84:"-180.624,-225.516,173.919,-0.81,-1.898,8.336,16.71006"},EPSG_4254:{towgs84:"18.38,192.45,96.82,0.056,-0.142,-0.2,-0.0013"},EPSG_4159:{towgs84:"-194.513,-63.978,-25.759,-3.4027,3.756,-3.352,-0.9175"},EPSG_4687:{towgs84:"0.072,-0.507,-0.245,0.0183,-0.0003,0.007,-0.0093"},EPSG_4227:{towgs84:"-83.58,-397.54,458.78,-17.595,-2.847,4.256,3.225"},EPSG_4746:{towgs84:"599.4,72.4,419.2,-0.062,-0.022,-2.723,6.46"},EPSG_4745:{towgs84:"612.4,77,440.2,-0.054,0.057,-2.797,2.55"},EPSG_6311:{towgs84:"8.846,-4.394,-1.122,-0.00237,-0.146528,0.130428,0.783926"},EPSG_4289:{towgs84:"565.7381,50.4018,465.2904,-1.91514,1.60363,-9.09546,4.07244"},EPSG_4230:{towgs84:"-68.863,-134.888,-111.49,-0.53,-0.14,0.57,-3.4"},EPSG_4154:{towgs84:"-123.02,-158.95,-168.47"},EPSG_4156:{towgs84:"570.8,85.7,462.8,4.998,1.587,5.261,3.56"},EPSG_4299:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4179:{towgs84:"33.4,-146.6,-76.3,-0.359,-0.053,0.844,-0.84"},EPSG_4313:{towgs84:"-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747"},EPSG_4194:{towgs84:"163.511,127.533,-159.789"},EPSG_4195:{towgs84:"105,326,-102.5"},EPSG_4196:{towgs84:"-45,417,-3.5"},EPSG_4611:{towgs84:"-162.619,-276.959,-161.764,0.067753,-2.243649,-1.158827,-1.094246"},EPSG_4633:{towgs84:"137.092,131.66,91.475,-1.9436,-11.5993,-4.3321,-7.4824"},EPSG_4641:{towgs84:"-408.809,366.856,-412.987,1.8842,-0.5308,2.1655,-121.0993"},EPSG_4643:{towgs84:"-480.26,-438.32,-643.429,16.3119,20.1721,-4.0349,-111.7002"},EPSG_4300:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4188:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4660:{towgs84:"982.6087,552.753,-540.873,32.39344,-153.25684,-96.2266,16.805"},EPSG_4662:{towgs84:"97.295,-263.247,310.882,-1.5999,0.8386,3.1409,13.3259"},EPSG_3906:{towgs84:"577.88891,165.22205,391.18289,4.9145,-0.94729,-13.05098,7.78664"},EPSG_4307:{towgs84:"-209.3622,-87.8162,404.6198,0.0046,3.4784,0.5805,-1.4547"},EPSG_6892:{towgs84:"-76.269,-16.683,68.562,-6.275,10.536,-4.286,-13.686"},EPSG_4690:{towgs84:"221.597,152.441,176.523,2.403,1.3893,0.884,11.4648"},EPSG_4691:{towgs84:"218.769,150.75,176.75,3.5231,2.0037,1.288,10.9817"},EPSG_4629:{towgs84:"72.51,345.411,79.241,-1.5862,-0.8826,-0.5495,1.3653"},EPSG_4630:{towgs84:"165.804,216.213,180.26,-0.6251,-0.4515,-0.0721,7.4111"},EPSG_4692:{towgs84:"217.109,86.452,23.711,0.0183,-0.0003,0.007,-0.0093"},EPSG_9333:{towgs84:"0,0,0,-8.393,0.749,-10.276,0"},EPSG_9059:{towgs84:"0,0,0"},EPSG_4312:{towgs84:"601.705,84.263,485.227,4.7354,1.3145,5.393,-2.3887"},EPSG_4123:{towgs84:"-96.062,-82.428,-121.753,4.801,0.345,-1.376,1.496"},EPSG_4309:{towgs84:"-124.45,183.74,44.64,-0.4384,0.5446,-0.9706,-2.1365"},ESRI_104106:{towgs84:"-283.088,-70.693,117.445,-1.157,0.059,-0.652,-4.058"},EPSG_4281:{towgs84:"-219.247,-73.802,269.529"},EPSG_4322:{towgs84:"0,0,4.5"},EPSG_4324:{towgs84:"0,0,1.9"},EPSG_4284:{towgs84:"43.822,-108.842,-119.585,1.455,-0.761,0.737,0.549"},EPSG_4277:{towgs84:"446.448,-125.157,542.06,0.15,0.247,0.842,-20.489"},EPSG_4207:{towgs84:"-282.1,-72.2,120,-1.529,0.145,-0.89,-4.46"},EPSG_4688:{towgs84:"347.175,1077.618,2623.677,33.9058,-70.6776,9.4013,186.0647"},EPSG_4689:{towgs84:"410.793,54.542,80.501,-2.5596,-2.3517,-0.6594,17.3218"},EPSG_4720:{towgs84:"0,0,4.5"},EPSG_4273:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},EPSG_4240:{towgs84:"204.64,834.74,293.8"},EPSG_4817:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},ESRI_104131:{towgs84:"426.62,142.62,460.09,4.98,4.49,-12.42,-17.1"},EPSG_4265:{towgs84:"-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"},EPSG_4263:{towgs84:"-111.92,-87.85,114.5,1.875,0.202,0.219,0.032"},EPSG_4298:{towgs84:"-689.5937,623.84046,-65.93566,-0.02331,1.17094,-0.80054,5.88536"},EPSG_4270:{towgs84:"-253.4392,-148.452,386.5267,0.15605,0.43,-0.1013,-0.0424"},EPSG_4229:{towgs84:"-121.8,98.1,-10.7"},EPSG_4220:{towgs84:"-55.5,-348,-229.2"},EPSG_4214:{towgs84:"12.646,-155.176,-80.863"},EPSG_4232:{towgs84:"-345,3,223"},EPSG_4238:{towgs84:"-1.977,-13.06,-9.993,0.364,0.254,0.689,-1.037"},EPSG_4168:{towgs84:"-170,33,326"},EPSG_4131:{towgs84:"199,931,318.9"},EPSG_4152:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_5228:{towgs84:"572.213,85.334,461.94,4.9732,1.529,5.2484,3.5378"},EPSG_8351:{towgs84:"485.021,169.465,483.839,7.786342,4.397554,4.102655,0"},EPSG_4683:{towgs84:"-127.62,-67.24,-47.04,-3.068,4.903,1.578,-1.06"},EPSG_4133:{towgs84:"0,0,0"},EPSG_7373:{towgs84:"0.819,-0.5762,-1.6446,-0.00378,-0.03317,0.00318,0.0693"},EPSG_9075:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9072:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9294:{towgs84:"1.16835,-1.42001,-2.24431,-0.00822,-0.05508,0.01818,0.23388"},EPSG_4212:{towgs84:"-267.434,173.496,181.814,-13.4704,8.7154,7.3926,14.7492"},EPSG_4191:{towgs84:"-44.183,-0.58,-38.489,2.3867,2.7072,-3.5196,-8.2703"},EPSG_4237:{towgs84:"52.684,-71.194,-13.975,-0.312,-0.1063,-0.3729,1.0191"},EPSG_4740:{towgs84:"-1.08,-0.27,-0.9"},EPSG_4124:{towgs84:"419.3836,99.3335,591.3451,0.850389,1.817277,-7.862238,-0.99496"},EPSG_5681:{towgs84:"584.9636,107.7175,413.8067,1.1155,0.2824,-3.1384,7.9922"},EPSG_4141:{towgs84:"23.772,17.49,17.859,-0.3132,-1.85274,1.67299,-5.4262"},EPSG_4204:{towgs84:"-85.645,-273.077,-79.708,2.289,-1.421,2.532,3.194"},EPSG_4319:{towgs84:"226.702,-193.337,-35.371,-2.229,-4.391,9.238,0.9798"},EPSG_4200:{towgs84:"24.82,-131.21,-82.66"},EPSG_4130:{towgs84:"0,0,0"},EPSG_4127:{towgs84:"-82.875,-57.097,-156.768,-2.158,1.524,-0.982,-0.359"},EPSG_4149:{towgs84:"674.374,15.056,405.346"},EPSG_4617:{towgs84:"-0.991,1.9072,0.5129,1.25033e-7,4.6785e-8,5.6529e-8,0"},EPSG_4663:{towgs84:"-210.502,-66.902,-48.476,2.094,-15.067,-5.817,0.485"},EPSG_4664:{towgs84:"-211.939,137.626,58.3,-0.089,0.251,0.079,0.384"},EPSG_4665:{towgs84:"-105.854,165.589,-38.312,-0.003,-0.026,0.024,-0.048"},EPSG_4666:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},EPSG_4756:{towgs84:"-192.873,-39.382,-111.202,-0.00205,-0.0005,0.00335,0.0188"},EPSG_4723:{towgs84:"-179.483,-69.379,-27.584,-7.862,8.163,6.042,-13.925"},EPSG_4726:{towgs84:"8.853,-52.644,180.304,-0.393,-2.323,2.96,-24.081"},EPSG_4267:{towgs84:"-8.0,160.0,176.0"},EPSG_5365:{towgs84:"-0.16959,0.35312,0.51846,0.03385,-0.16325,0.03446,0.03693"},EPSG_4218:{towgs84:"304.5,306.5,-318.1"},EPSG_4242:{towgs84:"-33.722,153.789,94.959,-8.581,-4.478,4.54,8.95"},EPSG_4216:{towgs84:"-292.295,248.758,429.447,4.9971,2.99,6.6906,1.0289"},ESRI_104105:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},ESRI_104129:{towgs84:"0,0,0"},EPSG_4673:{towgs84:"174.05,-25.49,112.57"},EPSG_4202:{towgs84:"-124,-60,154"},EPSG_4203:{towgs84:"-117.763,-51.51,139.061,0.292,0.443,0.277,-0.191"},EPSG_3819:{towgs84:"595.48,121.69,515.35,4.115,-2.9383,0.853,-3.408"},EPSG_8694:{towgs84:"-93.799,-132.737,-219.073,-1.844,0.648,-6.37,-0.169"},EPSG_4145:{towgs84:"275.57,676.78,229.6"},EPSG_4283:{towgs84:"61.55,-10.87,-40.19,39.4924,32.7221,32.8979,-9.994"},EPSG_4317:{towgs84:"2.3287,-147.0425,-92.0802,-0.3092483,0.32482185,0.49729934,5.68906266"},EPSG_4272:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993"},EPSG_4248:{towgs84:"-307.7,265.3,-363.5"},EPSG_5561:{towgs84:"24,-121,-76"},EPSG_5233:{towgs84:"-0.293,766.95,87.713,0.195704,1.695068,3.473016,-0.039338"},ESRI_104130:{towgs84:"-86,-98,-119"},ESRI_104102:{towgs84:"682,-203,480"},ESRI_37207:{towgs84:"7,-10,-26"},EPSG_4675:{towgs84:"59.935,118.4,-10.871"},ESRI_104109:{towgs84:"-89.121,-348.182,260.871"},ESRI_104112:{towgs84:"-185.583,-230.096,281.361"},ESRI_104113:{towgs84:"25.1,-275.6,222.6"},IGNF_WGS72G:{towgs84:"0,12,6"},IGNF_NTFG:{towgs84:"-168,-60,320"},IGNF_EFATE57G:{towgs84:"-127,-769,472"},IGNF_PGP50G:{towgs84:"324.8,153.6,172.1"},IGNF_REUN47G:{towgs84:"94,-948,-1262"},IGNF_CSG67G:{towgs84:"-186,230,110"},IGNF_GUAD48G:{towgs84:"-467,-16,-300"},IGNF_TAHI51G:{towgs84:"162,117,154"},IGNF_TAHAAG:{towgs84:"65,342,77"},IGNF_NUKU72G:{towgs84:"84,274,65"},IGNF_PETRELS72G:{towgs84:"365,194,166"},IGNF_WALL78G:{towgs84:"253,-133,-127"},IGNF_MAYO50G:{towgs84:"-382,-59,-262"},IGNF_TANNAG:{towgs84:"-139,-967,436"},IGNF_IGN72G:{towgs84:"-13,-348,292"},IGNF_ATIGG:{towgs84:"1118,23,66"},IGNF_FANGA84G:{towgs84:"150.57,158.33,118.32"},IGNF_RUSAT84G:{towgs84:"202.13,174.6,-15.74"},IGNF_KAUE70G:{towgs84:"126.74,300.1,-75.49"},IGNF_MOP90G:{towgs84:"-10.8,-1.8,12.77"},IGNF_MHPF67G:{towgs84:"338.08,212.58,-296.17"},IGNF_TAHI79G:{towgs84:"160.61,116.05,153.69"},IGNF_ANAA92G:{towgs84:"1.5,3.84,4.81"},IGNF_MARQUI72G:{towgs84:"330.91,-13.92,58.56"},IGNF_APAT86G:{towgs84:"143.6,197.82,74.05"},IGNF_TUBU69G:{towgs84:"237.17,171.61,-77.84"},IGNF_STPM50G:{towgs84:"11.363,424.148,373.13"},EPSG_4150:{towgs84:"674.374,15.056,405.346"},EPSG_4754:{towgs84:"-208.4058,-109.8777,-2.5764"},ESRI_104101:{towgs84:"374,150,588"},EPSG_4693:{towgs84:"0,-0.15,0.68"},EPSG_6207:{towgs84:"293.17,726.18,245.36"},EPSG_4153:{towgs84:"-133.63,-157.5,-158.62"},EPSG_4132:{towgs84:"-241.54,-163.64,396.06"},EPSG_4221:{towgs84:"-154.5,150.7,100.4"},EPSG_4266:{towgs84:"-80.7,-132.5,41.1"},EPSG_4193:{towgs84:"-70.9,-151.8,-41.4"},EPSG_5340:{towgs84:"-0.41,0.46,-0.35"},EPSG_4246:{towgs84:"-294.7,-200.1,525.5"},EPSG_4318:{towgs84:"-3.2,-5.7,2.8"},EPSG_4121:{towgs84:"-199.87,74.79,246.62"},EPSG_4223:{towgs84:"-260.1,5.5,432.2"},EPSG_4158:{towgs84:"-0.465,372.095,171.736"},EPSG_4285:{towgs84:"-128.16,-282.42,21.93"},EPSG_4613:{towgs84:"-404.78,685.68,45.47"},EPSG_4607:{towgs84:"195.671,332.517,274.607"},EPSG_4475:{towgs84:"-381.788,-57.501,-256.673"},EPSG_4208:{towgs84:"-157.84,308.54,-146.6"},EPSG_4743:{towgs84:"70.995,-335.916,262.898"},EPSG_4710:{towgs84:"-323.65,551.39,-491.22"},EPSG_7881:{towgs84:"-0.077,0.079,0.086"},EPSG_4682:{towgs84:"283.729,735.942,261.143"},EPSG_4739:{towgs84:"-156,-271,-189"},EPSG_4679:{towgs84:"-80.01,253.26,291.19"},EPSG_4750:{towgs84:"-56.263,16.136,-22.856"},EPSG_4644:{towgs84:"-10.18,-350.43,291.37"},EPSG_4695:{towgs84:"-103.746,-9.614,-255.95"},EPSG_4292:{towgs84:"-355,21,72"},EPSG_4302:{towgs84:"-61.702,284.488,472.052"},EPSG_4143:{towgs84:"-124.76,53,466.79"},EPSG_4606:{towgs84:"-153,153,307"},EPSG_4699:{towgs84:"-770.1,158.4,-498.2"},EPSG_4247:{towgs84:"-273.5,110.6,-357.9"},EPSG_4160:{towgs84:"8.88,184.86,106.69"},EPSG_4161:{towgs84:"-233.43,6.65,173.64"},EPSG_9251:{towgs84:"-9.5,122.9,138.2"},EPSG_9253:{towgs84:"-78.1,101.6,133.3"},EPSG_4297:{towgs84:"-198.383,-240.517,-107.909"},EPSG_4269:{towgs84:"0,0,0"},EPSG_4301:{towgs84:"-147,506,687"},EPSG_4618:{towgs84:"-59,-11,-52"},EPSG_4612:{towgs84:"0,0,0"},EPSG_4678:{towgs84:"44.585,-131.212,-39.544"},EPSG_4250:{towgs84:"-130,29,364"},EPSG_4144:{towgs84:"214,804,268"},EPSG_4147:{towgs84:"-17.51,-108.32,-62.39"},EPSG_4259:{towgs84:"-254.1,-5.36,-100.29"},EPSG_4164:{towgs84:"-76,-138,67"},EPSG_4211:{towgs84:"-378.873,676.002,-46.255"},EPSG_4182:{towgs84:"-422.651,-172.995,84.02"},EPSG_4224:{towgs84:"-143.87,243.37,-33.52"},EPSG_4225:{towgs84:"-205.57,168.77,-4.12"},EPSG_5527:{towgs84:"-67.35,3.88,-38.22"},EPSG_4752:{towgs84:"98,390,-22"},EPSG_4310:{towgs84:"-30,190,89"},EPSG_9248:{towgs84:"-192.26,65.72,132.08"},EPSG_4680:{towgs84:"124.5,-63.5,-281"},EPSG_4701:{towgs84:"-79.9,-158,-168.9"},EPSG_4706:{towgs84:"-146.21,112.63,4.05"},EPSG_4805:{towgs84:"682,-203,480"},EPSG_4201:{towgs84:"-165,-11,206"},EPSG_4210:{towgs84:"-157,-2,-299"},EPSG_4183:{towgs84:"-104,167,-38"},EPSG_4139:{towgs84:"11,72,-101"},EPSG_4668:{towgs84:"-86,-98,-119"},EPSG_4717:{towgs84:"-2,151,181"},EPSG_4732:{towgs84:"102,52,-38"},EPSG_4280:{towgs84:"-377,681,-50"},EPSG_4209:{towgs84:"-138,-105,-289"},EPSG_4261:{towgs84:"31,146,47"},EPSG_4658:{towgs84:"-73,46,-86"},EPSG_4721:{towgs84:"265.025,384.929,-194.046"},EPSG_4222:{towgs84:"-136,-108,-292"},EPSG_4601:{towgs84:"-255,-15,71"},EPSG_4602:{towgs84:"725,685,536"},EPSG_4603:{towgs84:"72,213.7,93"},EPSG_4605:{towgs84:"9,183,236"},EPSG_4621:{towgs84:"137,248,-430"},EPSG_4657:{towgs84:"-28,199,5"},EPSG_4316:{towgs84:"103.25,-100.4,-307.19"},EPSG_4642:{towgs84:"-13,-348,292"},EPSG_4698:{towgs84:"145,-187,103"},EPSG_4192:{towgs84:"-206.1,-174.7,-87.7"},EPSG_4311:{towgs84:"-265,120,-358"},EPSG_4135:{towgs84:"58,-283,-182"},ESRI_104138:{towgs84:"198,-226,-347"},EPSG_4245:{towgs84:"-11,851,5"},EPSG_4142:{towgs84:"-125,53,467"},EPSG_4213:{towgs84:"-106,-87,188"},EPSG_4253:{towgs84:"-133,-77,-51"},EPSG_4129:{towgs84:"-132,-110,-335"},EPSG_4713:{towgs84:"-77,-128,142"},EPSG_4239:{towgs84:"217,823,299"},EPSG_4146:{towgs84:"295,736,257"},EPSG_4155:{towgs84:"-83,37,124"},EPSG_4165:{towgs84:"-173,253,27"},EPSG_4672:{towgs84:"175,-38,113"},EPSG_4236:{towgs84:"-637,-549,-203"},EPSG_4251:{towgs84:"-90,40,88"},EPSG_4271:{towgs84:"-2,374,172"},EPSG_4175:{towgs84:"-88,4,101"},EPSG_4716:{towgs84:"298,-304,-375"},EPSG_4315:{towgs84:"-23,259,-9"},EPSG_4744:{towgs84:"-242.2,-144.9,370.3"},EPSG_4244:{towgs84:"-97,787,86"},EPSG_4293:{towgs84:"616,97,-251"},EPSG_4714:{towgs84:"-127,-769,472"},EPSG_4736:{towgs84:"260,12,-147"},EPSG_6883:{towgs84:"-235,-110,393"},EPSG_6894:{towgs84:"-63,176,185"},EPSG_4205:{towgs84:"-43,-163,45"},EPSG_4256:{towgs84:"41,-220,-134"},EPSG_4262:{towgs84:"639,405,60"},EPSG_4604:{towgs84:"174,359,365"},EPSG_4169:{towgs84:"-115,118,426"},EPSG_4620:{towgs84:"-106,-129,165"},EPSG_4184:{towgs84:"-203,141,53"},EPSG_4616:{towgs84:"-289,-124,60"},EPSG_9403:{towgs84:"-307,-92,127"},EPSG_4684:{towgs84:"-133,-321,50"},EPSG_4708:{towgs84:"-491,-22,435"},EPSG_4707:{towgs84:"114,-116,-333"},EPSG_4709:{towgs84:"145,75,-272"},EPSG_4712:{towgs84:"-205,107,53"},EPSG_4711:{towgs84:"124,-234,-25"},EPSG_4718:{towgs84:"230,-199,-752"},EPSG_4719:{towgs84:"211,147,111"},EPSG_4724:{towgs84:"208,-435,-229"},EPSG_4725:{towgs84:"189,-79,-202"},EPSG_4735:{towgs84:"647,1777,-1124"},EPSG_4722:{towgs84:"-794,119,-298"},EPSG_4728:{towgs84:"-307,-92,127"},EPSG_4734:{towgs84:"-632,438,-609"},EPSG_4727:{towgs84:"912,-58,1227"},EPSG_4729:{towgs84:"185,165,42"},EPSG_4730:{towgs84:"170,42,84"},EPSG_4733:{towgs84:"276,-57,149"},ESRI_37218:{towgs84:"230,-199,-752"},ESRI_37240:{towgs84:"-7,215,225"},ESRI_37221:{towgs84:"252,-209,-751"},ESRI_4305:{towgs84:"-123,-206,219"},ESRI_104139:{towgs84:"-73,-247,227"},EPSG_4748:{towgs84:"51,391,-36"},EPSG_4219:{towgs84:"-384,664,-48"},EPSG_4255:{towgs84:"-333,-222,114"},EPSG_4257:{towgs84:"-587.8,519.75,145.76"},EPSG_4646:{towgs84:"-963,510,-359"},EPSG_6881:{towgs84:"-24,-203,268"},EPSG_6882:{towgs84:"-183,-15,273"},EPSG_4715:{towgs84:"-104,-129,239"},IGNF_RGF93GDD:{towgs84:"0,0,0"},IGNF_RGM04GDD:{towgs84:"0,0,0"},IGNF_RGSPM06GDD:{towgs84:"0,0,0"},IGNF_RGTAAF07GDD:{towgs84:"0,0,0"},IGNF_RGFG95GDD:{towgs84:"0,0,0"},IGNF_RGNCG:{towgs84:"0,0,0"},IGNF_RGPFGDD:{towgs84:"0,0,0"},IGNF_ETRS89G:{towgs84:"0,0,0"},IGNF_RGR92GDD:{towgs84:"0,0,0"},EPSG_4173:{towgs84:"0,0,0"},EPSG_4180:{towgs84:"0,0,0"},EPSG_4619:{towgs84:"0,0,0"},EPSG_4667:{towgs84:"0,0,0"},EPSG_4075:{towgs84:"0,0,0"},EPSG_6706:{towgs84:"0,0,0"},EPSG_7798:{towgs84:"0,0,0"},EPSG_4661:{towgs84:"0,0,0"},EPSG_4669:{towgs84:"0,0,0"},EPSG_8685:{towgs84:"0,0,0"},EPSG_4151:{towgs84:"0,0,0"},EPSG_9702:{towgs84:"0,0,0"},EPSG_4758:{towgs84:"0,0,0"},EPSG_4761:{towgs84:"0,0,0"},EPSG_4765:{towgs84:"0,0,0"},EPSG_8997:{towgs84:"0,0,0"},EPSG_4023:{towgs84:"0,0,0"},EPSG_4670:{towgs84:"0,0,0"},EPSG_4694:{towgs84:"0,0,0"},EPSG_4148:{towgs84:"0,0,0"},EPSG_4163:{towgs84:"0,0,0"},EPSG_4167:{towgs84:"0,0,0"},EPSG_4189:{towgs84:"0,0,0"},EPSG_4190:{towgs84:"0,0,0"},EPSG_4176:{towgs84:"0,0,0"},EPSG_4659:{towgs84:"0,0,0"},EPSG_3824:{towgs84:"0,0,0"},EPSG_3889:{towgs84:"0,0,0"},EPSG_4046:{towgs84:"0,0,0"},EPSG_4081:{towgs84:"0,0,0"},EPSG_4558:{towgs84:"0,0,0"},EPSG_4483:{towgs84:"0,0,0"},EPSG_5013:{towgs84:"0,0,0"},EPSG_5264:{towgs84:"0,0,0"},EPSG_5324:{towgs84:"0,0,0"},EPSG_5354:{towgs84:"0,0,0"},EPSG_5371:{towgs84:"0,0,0"},EPSG_5373:{towgs84:"0,0,0"},EPSG_5381:{towgs84:"0,0,0"},EPSG_5393:{towgs84:"0,0,0"},EPSG_5489:{towgs84:"0,0,0"},EPSG_5593:{towgs84:"0,0,0"},EPSG_6135:{towgs84:"0,0,0"},EPSG_6365:{towgs84:"0,0,0"},EPSG_5246:{towgs84:"0,0,0"},EPSG_7886:{towgs84:"0,0,0"},EPSG_8431:{towgs84:"0,0,0"},EPSG_8427:{towgs84:"0,0,0"},EPSG_8699:{towgs84:"0,0,0"},EPSG_8818:{towgs84:"0,0,0"},EPSG_4757:{towgs84:"0,0,0"},EPSG_9140:{towgs84:"0,0,0"},EPSG_8086:{towgs84:"0,0,0"},EPSG_4686:{towgs84:"0,0,0"},EPSG_4737:{towgs84:"0,0,0"},EPSG_4702:{towgs84:"0,0,0"},EPSG_4747:{towgs84:"0,0,0"},EPSG_4749:{towgs84:"0,0,0"},EPSG_4674:{towgs84:"0,0,0"},EPSG_4755:{towgs84:"0,0,0"},EPSG_4759:{towgs84:"0,0,0"},EPSG_4762:{towgs84:"0,0,0"},EPSG_4763:{towgs84:"0,0,0"},EPSG_4764:{towgs84:"0,0,0"},EPSG_4166:{towgs84:"0,0,0"},EPSG_4170:{towgs84:"0,0,0"},EPSG_5546:{towgs84:"0,0,0"},EPSG_7844:{towgs84:"0,0,0"},EPSG_4818:{towgs84:"589,76,480"}};for(var c8 in eg){var gy=eg[c8];gy.datumName&&(eg[gy.datumName]=gy)}function h8(i,t,e,n,s,r,o){var l={};return i===void 0||i==="none"?l.datum_type=m_:l.datum_type=S5,t&&(l.datum_params=t.map(parseFloat),(l.datum_params[0]!==0||l.datum_params[1]!==0||l.datum_params[2]!==0)&&(l.datum_type=wo),l.datum_params.length>3&&(l.datum_params[3]!==0||l.datum_params[4]!==0||l.datum_params[5]!==0||l.datum_params[6]!==0)&&(l.datum_type=To,l.datum_params[3]*=Yc,l.datum_params[4]*=Yc,l.datum_params[5]*=Yc,l.datum_params[6]=l.datum_params[6]/1e6+1)),o&&(l.datum_type=Kl,l.grids=o),l.a=e,l.b=n,l.es=s,l.ep2=r,l}var f1={};function f8(i,t,e){return t instanceof ArrayBuffer?d8(i,t,e):{ready:g8(i,t)}}function d8(i,t,e){var n=!0;e!==void 0&&e.includeErrorFields===!1&&(n=!1);var s=new DataView(t),r=y8(s),o=_8(s,r),l=v8(s,o,r,n),c={header:o,subgrids:l};return f1[i]=c,c}async function g8(i,t){for(var e=[],n=await t.getImageCount(),s=n-1;s>=0;s--){var r=await t.getImage(s),o=await r.readRasters(),l=o,c=[r.getWidth(),r.getHeight()],f=r.getBoundingBox().map(lS),g=[r.fileDirectory.ModelPixelScale[0],r.fileDirectory.ModelPixelScale[1]].map(lS),m=f[0]+(c[0]-1)*g[0],p=f[3]-(c[1]-1)*g[1],v=l[0],x=l[1],E=[];for(let w=c[1]-1;w>=0;w--)for(let R=c[0]-1;R>=0;R--){var b=w*c[0]+R;E.push([-fa(x[b]),fa(v[b])])}e.push({del:g,lim:c,ll:[-m,p],cvs:E})}var M={header:{nSubgrids:n},subgrids:e};return f1[i]=M,M}function m8(i){if(i===void 0)return null;var t=i.split(",");return t.map(p8)}function p8(i){if(i.length===0)return null;var t=i[0]==="@";return t&&(i=i.slice(1)),i==="null"?{name:"null",mandatory:!t,grid:null,isNull:!0}:{name:i,mandatory:!t,grid:f1[i]||null,isNull:!1}}function lS(i){return i*Math.PI/180}function fa(i){return i/3600*Math.PI/180}function y8(i){var t=i.getInt32(8,!1);return t===11?!1:(t=i.getInt32(8,!0),t!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function _8(i,t){return{nFields:i.getInt32(8,t),nSubgridFields:i.getInt32(24,t),nSubgrids:i.getInt32(40,t),shiftType:y_(i,56,64).trim(),fromSemiMajorAxis:i.getFloat64(120,t),fromSemiMinorAxis:i.getFloat64(136,t),toSemiMajorAxis:i.getFloat64(152,t),toSemiMinorAxis:i.getFloat64(168,t)}}function y_(i,t,e){return String.fromCharCode.apply(null,new Uint8Array(i.buffer.slice(t,e)))}function v8(i,t,e,n){for(var s=176,r=[],o=0;o<t.nSubgrids;o++){var l=b8(i,s,e),c=E8(i,s,l,e,n),f=Math.round(1+(l.upperLongitude-l.lowerLongitude)/l.longitudeInterval),g=Math.round(1+(l.upperLatitude-l.lowerLatitude)/l.latitudeInterval);r.push({ll:[fa(l.lowerLongitude),fa(l.lowerLatitude)],del:[fa(l.longitudeInterval),fa(l.latitudeInterval)],lim:[f,g],count:l.gridNodeCount,cvs:x8(c)});var m=16;n===!1&&(m=8),s+=176+l.gridNodeCount*m}return r}function x8(i){return i.map(function(t){return[fa(t.longitudeShift),fa(t.latitudeShift)]})}function b8(i,t,e){return{name:y_(i,t+8,t+16).trim(),parent:y_(i,t+24,t+24+8).trim(),lowerLatitude:i.getFloat64(t+72,e),upperLatitude:i.getFloat64(t+88,e),lowerLongitude:i.getFloat64(t+104,e),upperLongitude:i.getFloat64(t+120,e),latitudeInterval:i.getFloat64(t+136,e),longitudeInterval:i.getFloat64(t+152,e),gridNodeCount:i.getInt32(t+168,e)}}function E8(i,t,e,n,s){var r=t+176,o=16;s===!1&&(o=8);for(var l=[],c=0;c<e.gridNodeCount;c++){var f={latitudeShift:i.getFloat32(r+c*o,n),longitudeShift:i.getFloat32(r+c*o+4,n)};s!==!1&&(f.latitudeAccuracy=i.getFloat32(r+c*o+8,n),f.longitudeAccuracy=i.getFloat32(r+c*o+12,n)),l.push(f)}return l}function Qn(i,t){if(!(this instanceof Qn))return new Qn(i);this.forward=null,this.inverse=null,this.init=null,this.name,this.names=null,this.title,t=t||function(f){if(f)throw f};var e=K5(i);if(typeof e!="object"){t("Could not parse to valid json: "+i);return}var n=Qn.projections.get(e.projName);if(!n){t("Could not get projection name from: "+i);return}if(e.datumCode&&e.datumCode!=="none"){var s=Ca(eg,e.datumCode);s&&(e.datum_params=e.datum_params||(s.towgs84?s.towgs84.split(","):null),e.ellps=s.ellipse,e.datumName=s.datumName?s.datumName:e.datumCode)}e.k0=e.k0||1,e.axis=e.axis||"enu",e.ellps=e.ellps||"wgs84",e.lat1=e.lat1||e.lat0;var r=u8(e.a,e.b,e.rf,e.ellps,e.sphere),o=l8(r.a,r.b,r.rf,e.R_A),l=m8(e.nadgrids),c=e.datum||h8(e.datumCode,e.datum_params,r.a,r.b,o.es,o.ep2,l);aS(this,e),aS(this,n),this.a=r.a,this.b=r.b,this.rf=r.rf,this.sphere=r.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=c,"init"in this&&typeof this.init=="function"&&this.init(),t(null,this)}Qn.projections=a8;Qn.projections.start();function S8(i,t){return i.datum_type!==t.datum_type||i.a!==t.a||Math.abs(i.es-t.es)>5e-11?!1:i.datum_type===wo?i.datum_params[0]===t.datum_params[0]&&i.datum_params[1]===t.datum_params[1]&&i.datum_params[2]===t.datum_params[2]:i.datum_type===To?i.datum_params[0]===t.datum_params[0]&&i.datum_params[1]===t.datum_params[1]&&i.datum_params[2]===t.datum_params[2]&&i.datum_params[3]===t.datum_params[3]&&i.datum_params[4]===t.datum_params[4]&&i.datum_params[5]===t.datum_params[5]&&i.datum_params[6]===t.datum_params[6]:!0}function D4(i,t,e){var n=i.x,s=i.y,r=i.z?i.z:0,o,l,c,f;if(s<-rt&&s>-1.001*rt)s=-rt;else if(s>rt&&s<1.001*rt)s=rt;else{if(s<-rt)return{x:-1/0,y:-1/0,z:i.z};if(s>rt)return{x:1/0,y:1/0,z:i.z}}return n>Math.PI&&(n-=2*Math.PI),l=Math.sin(s),f=Math.cos(s),c=l*l,o=e/Math.sqrt(1-t*c),{x:(o+r)*f*Math.cos(n),y:(o+r)*f*Math.sin(n),z:(o*(1-t)+r)*l}}function I4(i,t,e,n){var s=1e-12,r=s*s,o=30,l,c,f,g,m,p,v,x,E,b,M,w,R,A=i.x,T=i.y,L=i.z?i.z:0,I,P,k;if(l=Math.sqrt(A*A+T*T),c=Math.sqrt(A*A+T*T+L*L),l/e<s){if(I=0,c/e<s)return P=rt,k=-n,{x:i.x,y:i.y,z:i.z}}else I=Math.atan2(T,A);f=L/c,g=l/c,m=1/Math.sqrt(1-t*(2-t)*g*g),x=g*(1-t)*m,E=f*m,R=0;do R++,v=e/Math.sqrt(1-t*E*E),k=l*x+L*E-v*(1-t*E*E),p=t*v/(v+k),m=1/Math.sqrt(1-p*(2-p)*g*g),b=g*(1-p)*m,M=f*m,w=M*x-b*E,x=b,E=M;while(w*w>r&&R<o);return P=Math.atan(M/Math.abs(b)),{x:I,y:P,z:k}}function M8(i,t,e){if(t===wo)return{x:i.x+e[0],y:i.y+e[1],z:i.z+e[2]};if(t===To){var n=e[0],s=e[1],r=e[2],o=e[3],l=e[4],c=e[5],f=e[6];return{x:f*(i.x-c*i.y+l*i.z)+n,y:f*(c*i.x+i.y-o*i.z)+s,z:f*(-l*i.x+o*i.y+i.z)+r}}}function w8(i,t,e){if(t===wo)return{x:i.x-e[0],y:i.y-e[1],z:i.z-e[2]};if(t===To){var n=e[0],s=e[1],r=e[2],o=e[3],l=e[4],c=e[5],f=e[6],g=(i.x-n)/f,m=(i.y-s)/f,p=(i.z-r)/f;return{x:g+c*m-l*p,y:-c*g+m+o*p,z:l*g-o*m+p}}}function xd(i){return i===wo||i===To}function T8(i,t,e){if(S8(i,t)||i.datum_type===m_||t.datum_type===m_)return e;var n=i.a,s=i.es;if(i.datum_type===Kl){var r=uS(i,!1,e);if(r!==0)return;n=tS,s=eS}var o=t.a,l=t.b,c=t.es;if(t.datum_type===Kl&&(o=tS,l=M5,c=eS),s===c&&n===o&&!xd(i.datum_type)&&!xd(t.datum_type))return e;if(e=D4(e,s,n),xd(i.datum_type)&&(e=M8(e,i.datum_type,i.datum_params)),xd(t.datum_type)&&(e=w8(e,t.datum_type,t.datum_params)),e=I4(e,c,o,l),t.datum_type===Kl){var f=uS(t,!0,e);if(f!==0)return}return e}function uS(i,t,e){if(i.grids===null||i.grids.length===0)return console.log("Grid shift grids not found"),-1;var n={x:-e.x,y:e.y},s={x:Number.NaN,y:Number.NaN},r=[];t:for(var o=0;o<i.grids.length;o++){var l=i.grids[o];if(r.push(l.name),l.isNull){s=n;break}if(l.grid===null){if(l.mandatory)return console.log("Unable to find mandatory grid '"+l.name+"'"),-1;continue}for(var c=l.grid.subgrids,f=0,g=c.length;f<g;f++){var m=c[f],p=(Math.abs(m.del[1])+Math.abs(m.del[0]))/1e4,v=m.ll[0]-p,x=m.ll[1]-p,E=m.ll[0]+(m.lim[0]-1)*m.del[0]+p,b=m.ll[1]+(m.lim[1]-1)*m.del[1]+p;if(!(x>n.y||v>n.x||b<n.y||E<n.x)&&(s=C8(n,t,m),!isNaN(s.x)))break t}}return isNaN(s.x)?(console.log("Failed to find a grid shift table for location '"+-n.x*hn+" "+n.y*hn+" tried: '"+r+"'"),-1):(e.x=-s.x,e.y=s.y,0)}function C8(i,t,e){var n={x:Number.NaN,y:Number.NaN};if(isNaN(i.x))return n;var s={x:i.x,y:i.y};s.x-=e.ll[0],s.y-=e.ll[1],s.x=dt(s.x-Math.PI)+Math.PI;var r=cS(s,e);if(t){if(isNaN(r.x))return n;r.x=s.x-r.x,r.y=s.y-r.y;var o=9,l=1e-12,c,f;do{if(f=cS(r,e),isNaN(f.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}c={x:s.x-(f.x+r.x),y:s.y-(f.y+r.y)},r.x+=c.x,r.y+=c.y}while(o--&&Math.abs(c.x)>l&&Math.abs(c.y)>l);if(o<0)return console.log("Inverse grid shift iterator failed to converge."),n;n.x=dt(r.x+e.ll[0]),n.y=r.y+e.ll[1]}else isNaN(r.x)||(n.x=i.x+r.x,n.y=i.y+r.y);return n}function cS(i,t){var e={x:i.x/t.del[0],y:i.y/t.del[1]},n={x:Math.floor(e.x),y:Math.floor(e.y)},s={x:e.x-1*n.x,y:e.y-1*n.y},r={x:Number.NaN,y:Number.NaN},o;if(n.x<0||n.x>=t.lim[0]||n.y<0||n.y>=t.lim[1])return r;o=n.y*t.lim[0]+n.x;var l={x:t.cvs[o][0],y:t.cvs[o][1]};o++;var c={x:t.cvs[o][0],y:t.cvs[o][1]};o+=t.lim[0];var f={x:t.cvs[o][0],y:t.cvs[o][1]};o--;var g={x:t.cvs[o][0],y:t.cvs[o][1]},m=s.x*s.y,p=s.x*(1-s.y),v=(1-s.x)*(1-s.y),x=(1-s.x)*s.y;return r.x=v*l.x+p*c.x+x*g.x+m*f.x,r.y=v*l.y+p*c.y+x*g.y+m*f.y,r}function hS(i,t,e){var n=e.x,s=e.y,r=e.z||0,o,l,c,f={};for(c=0;c<3;c++)if(!(t&&c===2&&e.z===void 0))switch(c===0?(o=n,"ew".indexOf(i.axis[c])!==-1?l="x":l="y"):c===1?(o=s,"ns".indexOf(i.axis[c])!==-1?l="y":l="x"):(o=r,l="z"),i.axis[c]){case"e":f[l]=o;break;case"w":f[l]=-o;break;case"n":f[l]=o;break;case"s":f[l]=-o;break;case"u":e[l]!==void 0&&(f.z=o);break;case"d":e[l]!==void 0&&(f.z=-o);break;default:return null}return f}function L4(i){var t={x:i[0],y:i[1]};return i.length>2&&(t.z=i[2]),i.length>3&&(t.m=i[3]),t}function R8(i){fS(i.x),fS(i.y)}function fS(i){if(typeof Number.isFinite=="function"){if(Number.isFinite(i))return;throw new TypeError("coordinates must be finite numbers")}if(typeof i!="number"||i!==i||!isFinite(i))throw new TypeError("coordinates must be finite numbers")}function A8(i,t){return(i.datum.datum_type===wo||i.datum.datum_type===To||i.datum.datum_type===Kl)&&t.datumCode!=="WGS84"||(t.datum.datum_type===wo||t.datum.datum_type===To||t.datum.datum_type===Kl)&&i.datumCode!=="WGS84"}function yg(i,t,e,n){var s;Array.isArray(e)?e=L4(e):e={x:e.x,y:e.y,z:e.z,m:e.m};var r=e.z!==void 0;if(R8(e),i.datum&&t.datum&&A8(i,t)&&(s=new Qn("WGS84"),e=yg(i,s,e,n),i=s),n&&i.axis!=="enu"&&(e=hS(i,!1,e)),i.projName==="longlat")e={x:e.x*Ke,y:e.y*Ke,z:e.z||0};else if(i.to_meter&&(e={x:e.x*i.to_meter,y:e.y*i.to_meter,z:e.z||0}),e=i.inverse(e),!e)return;if(i.from_greenwich&&(e.x+=i.from_greenwich),e=T8(i.datum,t.datum,e),!!e)return e=e,t.from_greenwich&&(e={x:e.x-t.from_greenwich,y:e.y,z:e.z||0}),t.projName==="longlat"?e={x:e.x*hn,y:e.y*hn,z:e.z||0}:(e=t.forward(e),t.to_meter&&(e={x:e.x/t.to_meter,y:e.y/t.to_meter,z:e.z||0})),n&&t.axis!=="enu"?hS(t,!0,e):(e&&!r&&delete e.z,e)}var dS=Qn("WGS84");function my(i,t,e,n){var s,r,o;return Array.isArray(e)?(s=yg(i,t,e,n)||{x:NaN,y:NaN},e.length>2?typeof i.name<"u"&&i.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"?typeof s.z=="number"?[s.x,s.y,s.z].concat(e.slice(3)):[s.x,s.y,e[2]].concat(e.slice(3)):[s.x,s.y].concat(e.slice(2)):[s.x,s.y]):(r=yg(i,t,e,n),o=Object.keys(e),o.length===2||o.forEach(function(l){if(typeof i.name<"u"&&i.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"){if(l==="x"||l==="y"||l==="z")return}else if(l==="x"||l==="y")return;r[l]=e[l]}),r)}function bd(i){return i instanceof Qn?i:typeof i=="object"&&"oProj"in i?i.oProj:Qn(i)}function O8(i,t,e){var n,s,r=!1,o;return typeof t>"u"?(s=bd(i),n=dS,r=!0):(typeof t.x<"u"||Array.isArray(t))&&(e=t,s=bd(i),n=dS,r=!0),n||(n=bd(i)),s||(s=bd(t)),e?my(n,s,e):(o={forward:function(l,c){return my(n,s,l,c)},inverse:function(l,c){return my(s,n,l,c)}},r&&(o.oProj=s),o)}var gS=6,P4="AJSAJS",N4="AFAFAF",Yl=65,sn=73,Yn=79,Lc=86,Pc=90;const D8={forward:z4,inverse:I8,toPoint:G4};function z4(i,t){return t=t||5,N8(L8({lat:i[1],lon:i[0]}),t)}function I8(i){var t=d1(F4(i.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat,t.lon,t.lat]:[t.left,t.bottom,t.right,t.top]}function G4(i){var t=d1(F4(i.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function py(i){return i*(Math.PI/180)}function mS(i){return 180*(i/Math.PI)}function L8(i){var t=i.lat,e=i.lon,n=6378137,s=.00669438,r=.9996,o,l,c,f,g,m,p,v=py(t),x=py(e),E,b;b=Math.floor((e+180)/6)+1,e===180&&(b=60),t>=56&&t<64&&e>=3&&e<12&&(b=32),t>=72&&t<84&&(e>=0&&e<9?b=31:e>=9&&e<21?b=33:e>=21&&e<33?b=35:e>=33&&e<42&&(b=37)),o=(b-1)*6-180+3,E=py(o),l=s/(1-s),c=n/Math.sqrt(1-s*Math.sin(v)*Math.sin(v)),f=Math.tan(v)*Math.tan(v),g=l*Math.cos(v)*Math.cos(v),m=Math.cos(v)*(x-E),p=n*((1-s/4-3*s*s/64-5*s*s*s/256)*v-(3*s/8+3*s*s/32+45*s*s*s/1024)*Math.sin(2*v)+(15*s*s/256+45*s*s*s/1024)*Math.sin(4*v)-35*s*s*s/3072*Math.sin(6*v));var M=r*c*(m+(1-f+g)*m*m*m/6+(5-18*f+f*f+72*g-58*l)*m*m*m*m*m/120)+5e5,w=r*(p+c*Math.tan(v)*(m*m/2+(5-f+9*g+4*g*g)*m*m*m*m/24+(61-58*f+f*f+600*g-330*l)*m*m*m*m*m*m/720));return t<0&&(w+=1e7),{northing:Math.round(w),easting:Math.round(M),zoneNumber:b,zoneLetter:P8(t)}}function d1(i){var t=i.northing,e=i.easting,n=i.zoneLetter,s=i.zoneNumber;if(s<0||s>60)return null;var r=.9996,o=6378137,l=.00669438,c,f=(1-Math.sqrt(1-l))/(1+Math.sqrt(1-l)),g,m,p,v,x,E,b,M,w,R=e-5e5,A=t;n<"N"&&(A-=1e7),b=(s-1)*6-180+3,c=l/(1-l),E=A/r,M=E/(o*(1-l/4-3*l*l/64-5*l*l*l/256)),w=M+(3*f/2-27*f*f*f/32)*Math.sin(2*M)+(21*f*f/16-55*f*f*f*f/32)*Math.sin(4*M)+151*f*f*f/96*Math.sin(6*M),g=o/Math.sqrt(1-l*Math.sin(w)*Math.sin(w)),m=Math.tan(w)*Math.tan(w),p=c*Math.cos(w)*Math.cos(w),v=o*(1-l)/Math.pow(1-l*Math.sin(w)*Math.sin(w),1.5),x=R/(g*r);var T=w-g*Math.tan(w)/v*(x*x/2-(5+3*m+10*p-4*p*p-9*c)*x*x*x*x/24+(61+90*m+298*p+45*m*m-252*c-3*p*p)*x*x*x*x*x*x/720);T=mS(T);var L=(x-(1+2*m+p)*x*x*x/6+(5-2*p+28*m-3*p*p+8*c+24*m*m)*x*x*x*x*x/120)/Math.cos(w);L=b+mS(L);var I;if(i.accuracy){var P=d1({northing:i.northing+i.accuracy,easting:i.easting+i.accuracy,zoneLetter:i.zoneLetter,zoneNumber:i.zoneNumber});I={top:P.lat,right:P.lon,bottom:T,left:L}}else I={lat:T,lon:L};return I}function P8(i){var t="Z";return 84>=i&&i>=72?t="X":72>i&&i>=64?t="W":64>i&&i>=56?t="V":56>i&&i>=48?t="U":48>i&&i>=40?t="T":40>i&&i>=32?t="S":32>i&&i>=24?t="R":24>i&&i>=16?t="Q":16>i&&i>=8?t="P":8>i&&i>=0?t="N":0>i&&i>=-8?t="M":-8>i&&i>=-16?t="L":-16>i&&i>=-24?t="K":-24>i&&i>=-32?t="J":-32>i&&i>=-40?t="H":-40>i&&i>=-48?t="G":-48>i&&i>=-56?t="F":-56>i&&i>=-64?t="E":-64>i&&i>=-72?t="D":-72>i&&i>=-80&&(t="C"),t}function N8(i,t){var e="00000"+i.easting,n="00000"+i.northing;return i.zoneNumber+i.zoneLetter+z8(i.easting,i.northing,i.zoneNumber)+e.substr(e.length-5,t)+n.substr(n.length-5,t)}function z8(i,t,e){var n=k4(e),s=Math.floor(i/1e5),r=Math.floor(t/1e5)%20;return G8(s,r,n)}function k4(i){var t=i%gS;return t===0&&(t=gS),t}function G8(i,t,e){var n=e-1,s=P4.charCodeAt(n),r=N4.charCodeAt(n),o=s+i-1,l=r+t,c=!1;o>Pc&&(o=o-Pc+Yl-1,c=!0),(o===sn||s<sn&&o>sn||(o>sn||s<sn)&&c)&&o++,(o===Yn||s<Yn&&o>Yn||(o>Yn||s<Yn)&&c)&&(o++,o===sn&&o++),o>Pc&&(o=o-Pc+Yl-1),l>Lc?(l=l-Lc+Yl-1,c=!0):c=!1,(l===sn||r<sn&&l>sn||(l>sn||r<sn)&&c)&&l++,(l===Yn||r<Yn&&l>Yn||(l>Yn||r<Yn)&&c)&&(l++,l===sn&&l++),l>Lc&&(l=l-Lc+Yl-1);var f=String.fromCharCode(o)+String.fromCharCode(l);return f}function F4(i){if(i&&i.length===0)throw"MGRSPoint coverting from nothing";for(var t=i.length,e=null,n="",s,r=0;!/[A-Z]/.test(s=i.charAt(r));){if(r>=2)throw"MGRSPoint bad conversion from: "+i;n+=s,r++}var o=parseInt(n,10);if(r===0||r+3>t)throw"MGRSPoint bad conversion from: "+i;var l=i.charAt(r++);if(l<="A"||l==="B"||l==="Y"||l>="Z"||l==="I"||l==="O")throw"MGRSPoint zone letter "+l+" not handled: "+i;e=i.substring(r,r+=2);for(var c=k4(o),f=k8(e.charAt(0),c),g=F8(e.charAt(1),c);g<j8(l);)g+=2e6;var m=t-r;if(m%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+i;var p=m/2,v=0,x=0,E,b,M,w,R;return p>0&&(E=1e5/Math.pow(10,p),b=i.substring(r,r+p),v=parseFloat(b)*E,M=i.substring(r+p),x=parseFloat(M)*E),w=v+f,R=x+g,{easting:w,northing:R,zoneLetter:l,zoneNumber:o,accuracy:E}}function k8(i,t){for(var e=P4.charCodeAt(t-1),n=1e5,s=!1;e!==i.charCodeAt(0);){if(e++,e===sn&&e++,e===Yn&&e++,e>Pc){if(s)throw"Bad character: "+i;e=Yl,s=!0}n+=1e5}return n}function F8(i,t){if(i>"V")throw"MGRSPoint given invalid Northing "+i;for(var e=N4.charCodeAt(t-1),n=0,s=!1;e!==i.charCodeAt(0);){if(e++,e===sn&&e++,e===Yn&&e++,e>Lc){if(s)throw"Bad character: "+i;e=Yl,s=!0}n+=1e5}return n}function j8(i){var t;switch(i){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+i}function au(i,t,e){if(!(this instanceof au))return new au(i,t,e);if(Array.isArray(i))this.x=i[0],this.y=i[1],this.z=i[2]||0;else if(typeof i=="object")this.x=i.x,this.y=i.y,this.z=i.z||0;else if(typeof i=="string"&&typeof t>"u"){var n=i.split(",");this.x=parseFloat(n[0]),this.y=parseFloat(n[1]),this.z=parseFloat(n[2])||0}else this.x=i,this.y=t,this.z=e||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}au.fromMGRS=function(i){return new au(G4(i))};au.prototype.toMGRS=function(i){return z4([this.x,this.y],i)};var B8=1,U8=.25,pS=.046875,yS=.01953125,_S=.01068115234375,H8=.75,q8=.46875,V8=.013020833333333334,Y8=.007120768229166667,X8=.3645833333333333,W8=.005696614583333333,K8=.3076171875;function g1(i){var t=[];t[0]=B8-i*(U8+i*(pS+i*(yS+i*_S))),t[1]=i*(H8-i*(pS+i*(yS+i*_S)));var e=i*i;return t[2]=e*(q8-i*(V8+i*Y8)),e*=i,t[3]=e*(X8-i*W8),t[4]=e*i*K8,t}function yu(i,t,e,n){return e*=t,t*=t,n[0]*i-e*(n[1]+t*(n[2]+t*(n[3]+t*n[4])))}var Z8=20;function m1(i,t,e){for(var n=1/(1-t),s=i,r=Z8;r;--r){var o=Math.sin(s),l=1-t*o*o;if(l=(yu(s,o,Math.cos(s),e)-i)*(l*Math.sqrt(l))*n,s-=l,Math.abs(l)<ut)return s}return s}function $8(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=g1(this.es),this.ml0=yu(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function Q8(i){var t=i.x,e=i.y,n=dt(t-this.long0,this.over),s,r,o,l=Math.sin(e),c=Math.cos(e);if(this.es){var g=c*n,m=Math.pow(g,2),p=this.ep2*Math.pow(c,2),v=Math.pow(p,2),x=Math.abs(c)>ut?Math.tan(e):0,E=Math.pow(x,2),b=Math.pow(E,2);s=1-this.es*Math.pow(l,2),g=g/Math.sqrt(s);var M=yu(e,l,c,this.en);r=this.a*(this.k0*g*(1+m/6*(1-E+p+m/20*(5-18*E+b+14*p-58*E*p+m/42*(61+179*b-b*E-479*E)))))+this.x0,o=this.a*(this.k0*(M-this.ml0+l*n*g/2*(1+m/12*(5-E+9*p+4*v+m/30*(61+b-58*E+270*p-330*E*p+m/56*(1385+543*b-b*E-3111*E))))))+this.y0}else{var f=c*Math.sin(n);if(Math.abs(Math.abs(f)-1)<ut)return 93;if(r=.5*this.a*this.k0*Math.log((1+f)/(1-f))+this.x0,o=c*Math.cos(n)/Math.sqrt(1-Math.pow(f,2)),f=Math.abs(o),f>=1){if(f-1>ut)return 93;o=0}else o=Math.acos(o);e<0&&(o=-o),o=this.a*this.k0*(o-this.lat0)+this.y0}return i.x=r,i.y=o,i}function J8(i){var t,e,n,s,r=(i.x-this.x0)*(1/this.a),o=(i.y-this.y0)*(1/this.a);if(this.es)if(t=this.ml0+o/this.k0,e=m1(t,this.es,this.en),Math.abs(e)<rt){var m=Math.sin(e),p=Math.cos(e),v=Math.abs(p)>ut?Math.tan(e):0,x=this.ep2*Math.pow(p,2),E=Math.pow(x,2),b=Math.pow(v,2),M=Math.pow(b,2);t=1-this.es*Math.pow(m,2);var w=r*Math.sqrt(t)/this.k0,R=Math.pow(w,2);t=t*v,n=e-t*R/(1-this.es)*.5*(1-R/12*(5+3*b-9*x*b+x-4*E-R/30*(61+90*b-252*x*b+45*M+46*x-R/56*(1385+3633*b+4095*M+1574*M*b)))),s=dt(this.long0+w*(1-R/6*(1+2*b+x-R/20*(5+28*b+24*M+8*x*b+6*x-R/42*(61+662*b+1320*M+720*M*b))))/p,this.over)}else n=rt*Nh(o),s=0;else{var l=Math.exp(r/this.k0),c=.5*(l-1/l),f=this.lat0+o/this.k0,g=Math.cos(f);t=Math.sqrt((1-Math.pow(g,2))/(1+Math.pow(c,2))),n=Math.asin(t),o<0&&(n=-n),c===0&&g===0?s=0:s=dt(Math.atan2(c,g)+this.long0,this.over)}return i.x=s,i.y=n,i}var tO=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const ig={init:$8,forward:Q8,inverse:J8,names:tO};function j4(i){var t=Math.exp(i);return t=(t-1/t)/2,t}function ln(i,t){i=Math.abs(i),t=Math.abs(t);var e=Math.max(i,t),n=Math.min(i,t)/(e||1);return e*Math.sqrt(1+Math.pow(n,2))}function eO(i){var t=1+i,e=t-1;return e===0?i:i*Math.log(t)/e}function iO(i){var t=Math.abs(i);return t=eO(t*(1+t/(ln(1,t)+1))),i<0?-t:t}function p1(i,t){for(var e=2*Math.cos(2*t),n=i.length-1,s=i[n],r=0,o;--n>=0;)o=-r+e*s+i[n],r=s,s=o;return t+o*Math.sin(2*t)}function nO(i,t){for(var e=2*Math.cos(t),n=i.length-1,s=i[n],r=0,o;--n>=0;)o=-r+e*s+i[n],r=s,s=o;return Math.sin(t)*o}function sO(i){var t=Math.exp(i);return t=(t+1/t)/2,t}function B4(i,t,e){for(var n=Math.sin(t),s=Math.cos(t),r=j4(e),o=sO(e),l=2*s*o,c=-2*n*r,f=i.length-1,g=i[f],m=0,p=0,v=0,x,E;--f>=0;)x=p,E=m,p=g,m=v,g=-x+l*p-c*m+i[f],v=-E+c*p+l*m;return l=n*o,c=s*r,[l*g-c*v,l*v+c*g]}function rO(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(ig.init.apply(this),this.forward=ig.forward,this.inverse=ig.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var i=this.es/(1+Math.sqrt(1-this.es)),t=i/(2-i),e=t;this.cgb[0]=t*(2+t*(-2/3+t*(-2+t*(116/45+t*(26/45+t*(-2854/675)))))),this.cbg[0]=t*(-2+t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))),e=e*t,this.cgb[1]=e*(7/3+t*(-8/5+t*(-227/45+t*(2704/315+t*(2323/945))))),this.cbg[1]=e*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),e=e*t,this.cgb[2]=e*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=e*(-26/15+t*(34/21+t*(8/5+t*(-12686/2835)))),e=e*t,this.cgb[3]=e*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=e*(1237/630+t*(-12/5+t*(-24832/14175))),e=e*t,this.cgb[4]=e*(4174/315+t*(-144838/6237)),this.cbg[4]=e*(-734/315+t*(109598/31185)),e=e*t,this.cgb[5]=e*(601676/22275),this.cbg[5]=e*(444337/155925),e=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+e*(1/4+e*(1/64+e/256))),this.utg[0]=t*(-.5+t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=e*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=e*(13/48+t*(-3/5+t*(557/1440+t*(281/630+t*(-1983433/1935360))))),e=e*t,this.utg[2]=e*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=e*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),e=e*t,this.utg[3]=e*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=e*(49561/161280+t*(-179/168+t*(6601661/7257600))),e=e*t,this.utg[4]=e*(-4583/161280+t*(108847/3991680)),this.gtu[4]=e*(34729/80640+t*(-3418889/1995840)),e=e*t,this.utg[5]=e*(-20648693/638668800),this.gtu[5]=e*(212378941/319334400);var n=p1(this.cbg,this.lat0);this.Zb=-this.Qn*(n+nO(this.gtu,2*n))}function aO(i){var t=dt(i.x-this.long0,this.over),e=i.y;e=p1(this.cbg,e);var n=Math.sin(e),s=Math.cos(e),r=Math.sin(t),o=Math.cos(t);e=Math.atan2(n,o*s),t=Math.atan2(r*s,ln(n,s*o)),t=iO(Math.tan(t));var l=B4(this.gtu,2*e,2*t);e=e+l[0],t=t+l[1];var c,f;return Math.abs(t)<=2.623395162778?(c=this.a*(this.Qn*t)+this.x0,f=this.a*(this.Qn*e+this.Zb)+this.y0):(c=1/0,f=1/0),i.x=c,i.y=f,i}function oO(i){var t=(i.x-this.x0)*(1/this.a),e=(i.y-this.y0)*(1/this.a);e=(e-this.Zb)/this.Qn,t=t/this.Qn;var n,s;if(Math.abs(t)<=2.623395162778){var r=B4(this.utg,2*e,2*t);e=e+r[0],t=t+r[1],t=Math.atan(j4(t));var o=Math.sin(e),l=Math.cos(e),c=Math.sin(t),f=Math.cos(t);e=Math.atan2(o*f,ln(c,f*l)),t=Math.atan2(c,f*l),n=dt(t+this.long0,this.over),s=p1(this.cgb,e)}else n=1/0,s=1/0;return i.x=n,i.y=s,i}var lO=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const ng={init:rO,forward:aO,inverse:oO,names:lO};function uO(i,t){if(i===void 0){if(i=Math.floor((dt(t)+Math.PI)*30/Math.PI)+1,i<0)return 0;if(i>60)return 60}return i}var cO="etmerc";function hO(){var i=uO(this.zone,this.long0);if(i===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(i)-183)*Ke,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,ng.init.apply(this),this.forward=ng.forward,this.inverse=ng.inverse}var fO=["Universal Transverse Mercator System","utm"];const dO={init:hO,names:fO,dependsOn:cO};function y1(i,t){return Math.pow((1-i)/(1+i),t)}var gO=20;function mO(){var i=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*i*i),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(i/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+re)/(Math.pow(Math.tan(.5*this.lat0+re),this.C)*y1(this.e*i,this.ratexp))}function pO(i){var t=i.x,e=i.y;return i.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*e+re),this.C)*y1(this.e*Math.sin(e),this.ratexp))-rt,i.x=this.C*t,i}function yO(i){for(var t=1e-14,e=i.x/this.C,n=i.y,s=Math.pow(Math.tan(.5*n+re)/this.K,1/this.C),r=gO;r>0&&(n=2*Math.atan(s*y1(this.e*Math.sin(i.y),-.5*this.e))-rt,!(Math.abs(n-i.y)<t));--r)i.y=n;return r?(i.x=e,i.y=n,i):null}const _1={init:mO,forward:pO,inverse:yO};function _O(){_1.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function vO(i){var t,e,n,s;return i.x=dt(i.x-this.long0,this.over),_1.forward.apply(this,[i]),t=Math.sin(i.y),e=Math.cos(i.y),n=Math.cos(i.x),s=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*e*n),i.x=s*e*Math.sin(i.x),i.y=s*(this.cosc0*t-this.sinc0*e*n),i.x=this.a*i.x+this.x0,i.y=this.a*i.y+this.y0,i}function xO(i){var t,e,n,s,r;if(i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a,i.x/=this.k0,i.y/=this.k0,r=ln(i.x,i.y)){var o=2*Math.atan2(r,this.R2);t=Math.sin(o),e=Math.cos(o),s=Math.asin(e*this.sinc0+i.y*t*this.cosc0/r),n=Math.atan2(i.x*t,r*this.cosc0*e-i.y*this.sinc0*t)}else s=this.phic0,n=0;return i.x=n,i.y=s,_1.inverse.apply(this,[i]),i.x=dt(i.x+this.long0,this.over),i}var bO=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const EO={init:_O,forward:vO,inverse:xO,names:bO};function v1(i,t,e){return t*=e,Math.tan(.5*(rt+i))*Math.pow((1-t)/(1+t),.5*e)}function SO(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=ut&&(this.k0=.5*(1+Nh(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=ut&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=ut&&Math.abs(Math.cos(this.lat_ts))>ut&&(this.k0=.5*this.cons*js(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/ys(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=js(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(v1(this.lat0,this.sinlat0,this.e))-rt,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function MO(i){var t=i.x,e=i.y,n=Math.sin(e),s=Math.cos(e),r,o,l,c,f,g,m=dt(t-this.long0,this.over);return Math.abs(Math.abs(t-this.long0)-Math.PI)<=ut&&Math.abs(e+this.lat0)<=ut?(i.x=NaN,i.y=NaN,i):this.sphere?(r=2*this.k0/(1+this.sinlat0*n+this.coslat0*s*Math.cos(m)),i.x=this.a*r*s*Math.sin(m)+this.x0,i.y=this.a*r*(this.coslat0*n-this.sinlat0*s*Math.cos(m))+this.y0,i):(o=2*Math.atan(v1(e,n,this.e))-rt,c=Math.cos(o),l=Math.sin(o),Math.abs(this.coslat0)<=ut?(f=ys(this.e,e*this.con,this.con*n),g=2*this.a*this.k0*f/this.cons,i.x=this.x0+g*Math.sin(t-this.long0),i.y=this.y0-this.con*g*Math.cos(t-this.long0),i):(Math.abs(this.sinlat0)<ut?(r=2*this.a*this.k0/(1+c*Math.cos(m)),i.y=r*l):(r=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*l+this.cosX0*c*Math.cos(m))),i.y=r*(this.cosX0*l-this.sinX0*c*Math.cos(m))+this.y0),i.x=r*c*Math.sin(m)+this.x0,i))}function wO(i){i.x-=this.x0,i.y-=this.y0;var t,e,n,s,r,o=Math.sqrt(i.x*i.x+i.y*i.y);if(this.sphere){var l=2*Math.atan(o/(2*this.a*this.k0));return t=this.long0,e=this.lat0,o<=ut?(i.x=t,i.y=e,i):(e=Math.asin(Math.cos(l)*this.sinlat0+i.y*Math.sin(l)*this.coslat0/o),Math.abs(this.coslat0)<ut?this.lat0>0?t=dt(this.long0+Math.atan2(i.x,-1*i.y),this.over):t=dt(this.long0+Math.atan2(i.x,i.y),this.over):t=dt(this.long0+Math.atan2(i.x*Math.sin(l),o*this.coslat0*Math.cos(l)-i.y*this.sinlat0*Math.sin(l)),this.over),i.x=t,i.y=e,i)}else if(Math.abs(this.coslat0)<=ut){if(o<=ut)return e=this.lat0,t=this.long0,i.x=t,i.y=e,i;i.x*=this.con,i.y*=this.con,n=o*this.cons/(2*this.a*this.k0),e=this.con*ah(this.e,n),t=this.con*dt(this.con*this.long0+Math.atan2(i.x,-1*i.y),this.over)}else s=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,o<=ut?r=this.X0:(r=Math.asin(Math.cos(s)*this.sinX0+i.y*Math.sin(s)*this.cosX0/o),t=dt(this.long0+Math.atan2(i.x*Math.sin(s),o*this.cosX0*Math.cos(s)-i.y*this.sinX0*Math.sin(s)),this.over)),e=-1*ah(this.e,Math.tan(.5*(rt+r)));return i.x=t,i.y=e,i}var TO=["stere","Stereographic_South_Pole","Polar_Stereographic_variant_A","Polar_Stereographic_variant_B","Polar_Stereographic"];const CO={init:SO,forward:MO,inverse:wO,names:TO,ssfn_:v1};function RO(){var i=this.lat0;this.lambda0=this.long0;var t=Math.sin(i),e=this.a,n=this.rf,s=1/n,r=2*s-Math.pow(s,2),o=this.e=Math.sqrt(r);this.R=this.k0*e*Math.sqrt(1-r)/(1-r*Math.pow(t,2)),this.alpha=Math.sqrt(1+r/(1-r)*Math.pow(Math.cos(i),4)),this.b0=Math.asin(t/this.alpha);var l=Math.log(Math.tan(Math.PI/4+this.b0/2)),c=Math.log(Math.tan(Math.PI/4+i/2)),f=Math.log((1+o*t)/(1-o*t));this.K=l-this.alpha*c+this.alpha*o/2*f}function AO(i){var t=Math.log(Math.tan(Math.PI/4-i.y/2)),e=this.e/2*Math.log((1+this.e*Math.sin(i.y))/(1-this.e*Math.sin(i.y))),n=-this.alpha*(t+e)+this.K,s=2*(Math.atan(Math.exp(n))-Math.PI/4),r=this.alpha*(i.x-this.lambda0),o=Math.atan(Math.sin(r)/(Math.sin(this.b0)*Math.tan(s)+Math.cos(this.b0)*Math.cos(r))),l=Math.asin(Math.cos(this.b0)*Math.sin(s)-Math.sin(this.b0)*Math.cos(s)*Math.cos(r));return i.y=this.R/2*Math.log((1+Math.sin(l))/(1-Math.sin(l)))+this.y0,i.x=this.R*o+this.x0,i}function OO(i){for(var t=i.x-this.x0,e=i.y-this.y0,n=t/this.R,s=2*(Math.atan(Math.exp(e/this.R))-Math.PI/4),r=Math.asin(Math.cos(this.b0)*Math.sin(s)+Math.sin(this.b0)*Math.cos(s)*Math.cos(n)),o=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(s))),l=this.lambda0+o/this.alpha,c=0,f=r,g=-1e3,m=0;Math.abs(f-g)>1e-7;){if(++m>20)return;c=1/this.alpha*(Math.log(Math.tan(Math.PI/4+r/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(f))/2)),g=f,f=2*Math.atan(Math.exp(c))-Math.PI/2}return i.x=l,i.y=f,i}var DO=["somerc"];const IO={init:RO,forward:AO,inverse:OO,names:DO};var Gl=1e-7;function LO(i){var t=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],e=typeof i.projName=="object"?Object.keys(i.projName)[0]:i.projName;return"no_uoff"in i||"no_off"in i||t.indexOf(e)!==-1||t.indexOf(A4(e))!==-1}function PO(){var i,t,e,n,s,r,o,l,c,f,g=0,m,p=0,v=0,x=0,E=0,b=0,M=0;this.no_off=LO(this),this.no_rot="no_rot"in this;var w=!1;"alpha"in this&&(w=!0);var R=!1;if("rectified_grid_angle"in this&&(R=!0),w&&(M=this.alpha),R&&(g=this.rectified_grid_angle),w||R)p=this.longc;else if(v=this.long1,E=this.lat1,x=this.long2,b=this.lat2,Math.abs(E-b)<=Gl||(i=Math.abs(E))<=Gl||Math.abs(i-rt)<=Gl||Math.abs(Math.abs(this.lat0)-rt)<=Gl||Math.abs(Math.abs(b)-rt)<=Gl)throw new Error;var A=1-this.es;t=Math.sqrt(A),Math.abs(this.lat0)>ut?(l=Math.sin(this.lat0),e=Math.cos(this.lat0),i=1-this.es*l*l,this.B=e*e,this.B=Math.sqrt(1+this.es*this.B*this.B/A),this.A=this.B*this.k0*t/i,n=this.B*t/(e*Math.sqrt(i)),s=n*n-1,s<=0?s=0:(s=Math.sqrt(s),this.lat0<0&&(s=-s)),this.E=s+=n,this.E*=Math.pow(ys(this.e,this.lat0,l),this.B)):(this.B=1/t,this.A=this.k0,this.E=n=s=1),w||R?(w?(m=Math.asin(Math.sin(M)/n),R||(g=M)):(m=g,M=Math.asin(n*Math.sin(m))),this.lam0=p-Math.asin(.5*(s-1/s)*Math.tan(m))/this.B):(r=Math.pow(ys(this.e,E,Math.sin(E)),this.B),o=Math.pow(ys(this.e,b,Math.sin(b)),this.B),s=this.E/r,c=(o-r)/(o+r),f=this.E*this.E,f=(f-o*r)/(f+o*r),i=v-x,i<-Math.PI?x-=sh:i>Math.PI&&(x+=sh),this.lam0=dt(.5*(v+x)-Math.atan(f*Math.tan(.5*this.B*(v-x))/c)/this.B,this.over),m=Math.atan(2*Math.sin(this.B*dt(v-this.lam0,this.over))/(s-1/s)),g=M=Math.asin(n*Math.sin(m))),this.singam=Math.sin(m),this.cosgam=Math.cos(m),this.sinrot=Math.sin(g),this.cosrot=Math.cos(g),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(n*n-1)/Math.cos(M))),this.lat0<0&&(this.u_0=-this.u_0)),s=.5*m,this.v_pole_n=this.ArB*Math.log(Math.tan(re-s)),this.v_pole_s=this.ArB*Math.log(Math.tan(re+s))}function NO(i){var t={},e,n,s,r,o,l,c,f;if(i.x=i.x-this.lam0,Math.abs(Math.abs(i.y)-rt)>ut){if(o=this.E/Math.pow(ys(this.e,i.y,Math.sin(i.y)),this.B),l=1/o,e=.5*(o-l),n=.5*(o+l),r=Math.sin(this.B*i.x),s=(e*this.singam-r*this.cosgam)/n,Math.abs(Math.abs(s)-1)<ut)throw new Error;f=.5*this.ArB*Math.log((1-s)/(1+s)),l=Math.cos(this.B*i.x),Math.abs(l)<Gl?c=this.A*i.x:c=this.ArB*Math.atan2(e*this.cosgam+r*this.singam,l)}else f=i.y>0?this.v_pole_n:this.v_pole_s,c=this.ArB*i.y;return this.no_rot?(t.x=c,t.y=f):(c-=this.u_0,t.x=f*this.cosrot+c*this.sinrot,t.y=c*this.cosrot-f*this.sinrot),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function zO(i){var t,e,n,s,r,o,l,c={};if(i.x=(i.x-this.x0)*(1/this.a),i.y=(i.y-this.y0)*(1/this.a),this.no_rot?(e=i.y,t=i.x):(e=i.x*this.cosrot-i.y*this.sinrot,t=i.y*this.cosrot+i.x*this.sinrot+this.u_0),n=Math.exp(-this.BrA*e),s=.5*(n-1/n),r=.5*(n+1/n),o=Math.sin(this.BrA*t),l=(o*this.cosgam+s*this.singam)/r,Math.abs(Math.abs(l)-1)<ut)c.x=0,c.y=l<0?-rt:rt;else{if(c.y=this.E/Math.sqrt((1+l)/(1-l)),c.y=ah(this.e,Math.pow(c.y,1/this.B)),c.y===1/0)throw new Error;c.x=-this.rB*Math.atan2(s*this.cosgam-o*this.singam,Math.cos(this.BrA*t))}return c.x+=this.lam0,c}var GO=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Variant_B","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const kO={init:PO,forward:NO,inverse:zO,names:GO};function FO(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<ut)){var i=this.b/this.a;this.e=Math.sqrt(1-i*i);var t=Math.sin(this.lat1),e=Math.cos(this.lat1),n=js(this.e,t,e),s=ys(this.e,this.lat1,t),r=Math.sin(this.lat2),o=Math.cos(this.lat2),l=js(this.e,r,o),c=ys(this.e,this.lat2,r),f=Math.abs(Math.abs(this.lat0)-rt)<ut?0:ys(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>ut?this.ns=Math.log(n/l)/Math.log(s/c):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=n/(this.ns*Math.pow(s,this.ns)),this.rh=this.a*this.f0*Math.pow(f,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function jO(i){var t=i.x,e=i.y;Math.abs(2*Math.abs(e)-Math.PI)<=ut&&(e=Nh(e)*(rt-2*ut));var n=Math.abs(Math.abs(e)-rt),s,r;if(n>ut)s=ys(this.e,e,Math.sin(e)),r=this.a*this.f0*Math.pow(s,this.ns);else{if(n=e*this.ns,n<=0)return null;r=0}var o=this.ns*dt(t-this.long0,this.over);return i.x=this.k0*(r*Math.sin(o))+this.x0,i.y=this.k0*(this.rh-r*Math.cos(o))+this.y0,i}function BO(i){var t,e,n,s,r,o=(i.x-this.x0)/this.k0,l=this.rh-(i.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(o*o+l*l),e=1):(t=-Math.sqrt(o*o+l*l),e=-1);var c=0;if(t!==0&&(c=Math.atan2(e*o,e*l)),t!==0||this.ns>0){if(e=1/this.ns,n=Math.pow(t/(this.a*this.f0),e),s=ah(this.e,n),s===-9999)return null}else s=-rt;return r=dt(c/this.ns+this.long0,this.over),i.x=r,i.y=s,i}var UO=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const HO={init:FO,forward:jO,inverse:BO,names:UO};function qO(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function VO(i){var t,e,n,s,r,o,l,c=i.x,f=i.y,g=dt(c-this.long0,this.over);return t=Math.pow((1+this.e*Math.sin(f))/(1-this.e*Math.sin(f)),this.alfa*this.e/2),e=2*(Math.atan(this.k*Math.pow(Math.tan(f/2+this.s45),this.alfa)/t)-this.s45),n=-g*this.alfa,s=Math.asin(Math.cos(this.ad)*Math.sin(e)+Math.sin(this.ad)*Math.cos(e)*Math.cos(n)),r=Math.asin(Math.cos(e)*Math.sin(n)/Math.cos(s)),o=this.n*r,l=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(s/2+this.s45),this.n),i.y=l*Math.cos(o)/1,i.x=l*Math.sin(o)/1,this.czech||(i.y*=-1,i.x*=-1),i}function YO(i){var t,e,n,s,r,o,l,c,f=i.x;i.x=i.y,i.y=f,this.czech||(i.y*=-1,i.x*=-1),o=Math.sqrt(i.x*i.x+i.y*i.y),r=Math.atan2(i.y,i.x),s=r/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(s)),e=Math.asin(Math.cos(n)*Math.sin(s)/Math.cos(t)),i.x=this.long0-e/this.alfa,l=t,c=0;var g=0;do i.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.e/2))-this.s45),Math.abs(l-i.y)<1e-10&&(c=1),l=i.y,g+=1;while(c===0&&g<15);return g>=15?null:i}var XO=["Krovak","krovak"];const WO={init:qO,forward:VO,inverse:YO,names:XO};function Yi(i,t,e,n,s){return i*s-t*Math.sin(2*s)+e*Math.sin(4*s)-n*Math.sin(6*s)}function zh(i){return 1-.25*i*(1+i/16*(3+1.25*i))}function Gh(i){return .375*i*(1+.25*i*(1+.46875*i))}function kh(i){return .05859375*i*i*(1+.75*i)}function Fh(i){return i*i*i*(35/3072)}function x1(i,t,e){var n=t*e;return i/Math.sqrt(1-n*n)}function Da(i){return Math.abs(i)<rt?i:i-Nh(i)*Math.PI}function _g(i,t,e,n,s){var r,o;r=i/t;for(var l=0;l<15;l++)if(o=(i-(t*r-e*Math.sin(2*r)+n*Math.sin(4*r)-s*Math.sin(6*r)))/(t-2*e*Math.cos(2*r)+4*n*Math.cos(4*r)-6*s*Math.cos(6*r)),r+=o,Math.abs(o)<=1e-10)return r;return NaN}function KO(){this.sphere||(this.e0=zh(this.es),this.e1=Gh(this.es),this.e2=kh(this.es),this.e3=Fh(this.es),this.ml0=this.a*Yi(this.e0,this.e1,this.e2,this.e3,this.lat0))}function ZO(i){var t,e,n=i.x,s=i.y;if(n=dt(n-this.long0,this.over),this.sphere)t=this.a*Math.asin(Math.cos(s)*Math.sin(n)),e=this.a*(Math.atan2(Math.tan(s),Math.cos(n))-this.lat0);else{var r=Math.sin(s),o=Math.cos(s),l=x1(this.a,this.e,r),c=Math.tan(s)*Math.tan(s),f=n*Math.cos(s),g=f*f,m=this.es*o*o/(1-this.es),p=this.a*Yi(this.e0,this.e1,this.e2,this.e3,s);t=l*f*(1-g*c*(1/6-(8-c+8*m)*g/120)),e=p-this.ml0+l*r/o*g*(.5+(5-c+6*m)*g/24)}return i.x=t+this.x0,i.y=e+this.y0,i}function $O(i){i.x-=this.x0,i.y-=this.y0;var t=i.x/this.a,e=i.y/this.a,n,s;if(this.sphere){var r=e+this.lat0;n=Math.asin(Math.sin(r)*Math.cos(t)),s=Math.atan2(Math.tan(t),Math.cos(r))}else{var o=this.ml0/this.a+e,l=_g(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(l)-rt)<=ut)return i.x=this.long0,i.y=rt,e<0&&(i.y*=-1),i;var c=x1(this.a,this.e,Math.sin(l)),f=c*c*c/this.a/this.a*(1-this.es),g=Math.pow(Math.tan(l),2),m=t*this.a/c,p=m*m;n=l-c*Math.tan(l)/f*m*m*(.5-(1+3*g)*m*m/24),s=m*(1-p*(g/3+(1+3*g)*g*p/15))/Math.cos(l)}return i.x=dt(s+this.long0,this.over),i.y=Da(n),i}var QO=["Cassini","Cassini_Soldner","cass"];const JO={init:KO,forward:ZO,inverse:$O,names:QO};function Ea(i,t){var e;return i>1e-7?(e=i*t,(1-i*i)*(t/(1-e*e)-.5/i*Math.log((1-e)/(1+e)))):2*t}var __=1,v_=2,x_=3,sg=4;function t6(){var i=Math.abs(this.lat0);if(Math.abs(i-rt)<ut?this.mode=this.lat0<0?__:v_:Math.abs(i)<ut?this.mode=x_:this.mode=sg,this.es>0){var t;switch(this.qp=Ea(this.e,1),this.mmf=.5/(1-this.es),this.apa=u6(this.es),this.mode){case v_:this.dd=1;break;case __:this.dd=1;break;case x_:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case sg:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=Ea(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===sg&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function e6(i){var t,e,n,s,r,o,l,c,f,g,m=i.x,p=i.y;if(m=dt(m-this.long0,this.over),this.sphere){if(r=Math.sin(p),g=Math.cos(p),n=Math.cos(m),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e=this.mode===this.EQUIT?1+g*n:1+this.sinph0*r+this.cosph0*g*n,e<=ut)return null;e=Math.sqrt(2/e),t=e*g*Math.sin(m),e*=this.mode===this.EQUIT?r:this.cosph0*r-this.sinph0*g*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(p+this.lat0)<ut)return null;e=re-p*.5,e=2*(this.mode===this.S_POLE?Math.cos(e):Math.sin(e)),t=e*Math.sin(m),e*=n}}else{switch(l=0,c=0,f=0,n=Math.cos(m),s=Math.sin(m),r=Math.sin(p),o=Ea(this.e,r),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(l=o/this.qp,c=Math.sqrt(1-l*l)),this.mode){case this.OBLIQ:f=1+this.sinb1*l+this.cosb1*c*n;break;case this.EQUIT:f=1+c*n;break;case this.N_POLE:f=rt+p,o=this.qp-o;break;case this.S_POLE:f=p-rt,o=this.qp+o;break}if(Math.abs(f)<ut)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:f=Math.sqrt(2/f),this.mode===this.OBLIQ?e=this.ymf*f*(this.cosb1*l-this.sinb1*c*n):e=(f=Math.sqrt(2/(1+c*n)))*l*this.ymf,t=this.xmf*f*c*s;break;case this.N_POLE:case this.S_POLE:o>=0?(t=(f=Math.sqrt(o))*s,e=n*(this.mode===this.S_POLE?f:-f)):t=e=0;break}}return i.x=this.a*t+this.x0,i.y=this.a*e+this.y0,i}function i6(i){i.x-=this.x0,i.y-=this.y0;var t=i.x/this.a,e=i.y/this.a,n,s,r,o,l,c,f;if(this.sphere){var g=0,m,p=0;if(m=Math.sqrt(t*t+e*e),s=m*.5,s>1)return null;switch(s=2*Math.asin(s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(p=Math.sin(s),g=Math.cos(s)),this.mode){case this.EQUIT:s=Math.abs(m)<=ut?0:Math.asin(e*p/m),t*=p,e=g*m;break;case this.OBLIQ:s=Math.abs(m)<=ut?this.lat0:Math.asin(g*this.sinph0+e*p*this.cosph0/m),t*=p*this.cosph0,e=(g-Math.sin(s)*this.sinph0)*m;break;case this.N_POLE:e=-e,s=rt-s;break;case this.S_POLE:s-=rt;break}n=e===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(t,e)}else{if(f=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t/=this.dd,e*=this.dd,c=Math.sqrt(t*t+e*e),c<ut)return i.x=this.long0,i.y=this.lat0,i;o=2*Math.asin(.5*c/this.rq),r=Math.cos(o),t*=o=Math.sin(o),this.mode===this.OBLIQ?(f=r*this.sinb1+e*o*this.cosb1/c,l=this.qp*f,e=c*this.cosb1*r-e*this.sinb1*o):(f=e*o/c,l=this.qp*f,e=c*r)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(e=-e),l=t*t+e*e,!l)return i.x=this.long0,i.y=this.lat0,i;f=1-l/this.qp,this.mode===this.S_POLE&&(f=-f)}n=Math.atan2(t,e),s=c6(Math.asin(f),this.apa)}return i.x=dt(this.long0+n,this.over),i.y=s,i}var n6=.3333333333333333,s6=.17222222222222222,r6=.10257936507936508,a6=.06388888888888888,o6=.0664021164021164,l6=.016415012942191543;function u6(i){var t,e=[];return e[0]=i*n6,t=i*i,e[0]+=t*s6,e[1]=t*a6,t*=i,e[0]+=t*r6,e[1]+=t*o6,e[2]=t*l6,e}function c6(i,t){var e=i+i;return i+t[0]*Math.sin(e)+t[1]*Math.sin(e+e)+t[2]*Math.sin(e+e+e)}var h6=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const f6={init:t6,forward:e6,inverse:i6,names:h6,S_POLE:__,N_POLE:v_,EQUIT:x_,OBLIQ:sg};function Ra(i){return Math.abs(i)>1&&(i=i>1?1:-1),Math.asin(i)}function d6(){Math.abs(this.lat1+this.lat2)<ut||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=js(this.e3,this.sin_po,this.cos_po),this.qs1=Ea(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=js(this.e3,this.sin_po,this.cos_po),this.qs2=Ea(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Ea(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>ut?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function g6(i){var t=i.x,e=i.y;this.sin_phi=Math.sin(e),this.cos_phi=Math.cos(e);var n=Ea(this.e3,this.sin_phi),s=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,r=this.ns0*dt(t-this.long0,this.over),o=s*Math.sin(r)+this.x0,l=this.rh-s*Math.cos(r)+this.y0;return i.x=o,i.y=l,i}function m6(i){var t,e,n,s,r,o;return i.x-=this.x0,i.y=this.rh-i.y+this.y0,this.ns0>=0?(t=Math.sqrt(i.x*i.x+i.y*i.y),n=1):(t=-Math.sqrt(i.x*i.x+i.y*i.y),n=-1),s=0,t!==0&&(s=Math.atan2(n*i.x,n*i.y)),n=t*this.ns0/this.a,this.sphere?o=Math.asin((this.c-n*n)/(2*this.ns0)):(e=(this.c-n*n)/this.ns0,o=this.phi1z(this.e3,e)),r=dt(s/this.ns0+this.long0,this.over),i.x=r,i.y=o,i}function p6(i,t){var e,n,s,r,o,l=Ra(.5*t);if(i<ut)return l;for(var c=i*i,f=1;f<=25;f++)if(e=Math.sin(l),n=Math.cos(l),s=i*e,r=1-s*s,o=.5*r*r/n*(t/(1-c)-e/r+.5/i*Math.log((1-s)/(1+s))),l=l+o,Math.abs(o)<=1e-7)return l;return null}var y6=["Albers_Conic_Equal_Area","Albers_Equal_Area","Albers","aea"];const _6={init:d6,forward:g6,inverse:m6,names:y6,phi1z:p6};function v6(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function x6(i){var t,e,n,s,r,o,l,c,f=i.x,g=i.y;return n=dt(f-this.long0,this.over),t=Math.sin(g),e=Math.cos(g),s=Math.cos(n),o=this.sin_p14*t+this.cos_p14*e*s,r=1,o>0||Math.abs(o)<=ut?(l=this.x0+this.a*r*e*Math.sin(n)/o,c=this.y0+this.a*r*(this.cos_p14*t-this.sin_p14*e*s)/o):(l=this.x0+this.infinity_dist*e*Math.sin(n),c=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*e*s)),i.x=l,i.y=c,i}function b6(i){var t,e,n,s,r,o;return i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a,i.x/=this.k0,i.y/=this.k0,(t=Math.sqrt(i.x*i.x+i.y*i.y))?(s=Math.atan2(t,this.rc),e=Math.sin(s),n=Math.cos(s),o=Ra(n*this.sin_p14+i.y*e*this.cos_p14/t),r=Math.atan2(i.x*e,t*this.cos_p14*n-i.y*this.sin_p14*e),r=dt(this.long0+r,this.over)):(o=this.phic0,r=0),i.x=r,i.y=o,i}var E6=["gnom"];const S6={init:v6,forward:x6,inverse:b6,names:E6};function M6(i,t){var e=1-(1-i*i)/(2*i)*Math.log((1-i)/(1+i));if(Math.abs(Math.abs(t)-e)<1e-6)return t<0?-1*rt:rt;for(var n=Math.asin(.5*t),s,r,o,l,c=0;c<30;c++)if(r=Math.sin(n),o=Math.cos(n),l=i*r,s=Math.pow(1-l*l,2)/(2*o)*(t/(1-i*i)-r/(1-l*l)+.5/i*Math.log((1-l)/(1+l))),n+=s,Math.abs(s)<=1e-10)return n;return NaN}function w6(){this.sphere||(this.k0=js(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function T6(i){var t=i.x,e=i.y,n,s,r=dt(t-this.long0,this.over);if(this.sphere)n=this.x0+this.a*r*Math.cos(this.lat_ts),s=this.y0+this.a*Math.sin(e)/Math.cos(this.lat_ts);else{var o=Ea(this.e,Math.sin(e));n=this.x0+this.a*this.k0*r,s=this.y0+this.a*o*.5/this.k0}return i.x=n,i.y=s,i}function C6(i){i.x-=this.x0,i.y-=this.y0;var t,e;return this.sphere?(t=dt(this.long0+i.x/this.a/Math.cos(this.lat_ts),this.over),e=Math.asin(i.y/this.a*Math.cos(this.lat_ts))):(e=M6(this.e,2*i.y*this.k0/this.a),t=dt(this.long0+i.x/(this.a*this.k0),this.over)),i.x=t,i.y=e,i}var R6=["cea"];const A6={init:w6,forward:T6,inverse:C6,names:R6};function O6(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function D6(i){var t=i.x,e=i.y,n=dt(t-this.long0,this.over),s=Da(e-this.lat0);return i.x=this.x0+this.a*n*this.rc,i.y=this.y0+this.a*s,i}function I6(i){var t=i.x,e=i.y;return i.x=dt(this.long0+(t-this.x0)/(this.a*this.rc),this.over),i.y=Da(this.lat0+(e-this.y0)/this.a),i}var L6=["Equirectangular","Equidistant_Cylindrical","Equidistant_Cylindrical_Spherical","eqc"];const P6={init:O6,forward:D6,inverse:I6,names:L6};var vS=20;function N6(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=zh(this.es),this.e1=Gh(this.es),this.e2=kh(this.es),this.e3=Fh(this.es),this.ml0=this.a*Yi(this.e0,this.e1,this.e2,this.e3,this.lat0)}function z6(i){var t=i.x,e=i.y,n,s,r,o=dt(t-this.long0,this.over);if(r=o*Math.sin(e),this.sphere)Math.abs(e)<=ut?(n=this.a*o,s=-1*this.a*this.lat0):(n=this.a*Math.sin(r)/Math.tan(e),s=this.a*(Da(e-this.lat0)+(1-Math.cos(r))/Math.tan(e)));else if(Math.abs(e)<=ut)n=this.a*o,s=-1*this.ml0;else{var l=x1(this.a,this.e,Math.sin(e))/Math.tan(e);n=l*Math.sin(r),s=this.a*Yi(this.e0,this.e1,this.e2,this.e3,e)-this.ml0+l*(1-Math.cos(r))}return i.x=n+this.x0,i.y=s+this.y0,i}function G6(i){var t,e,n,s,r,o,l,c,f;if(n=i.x-this.x0,s=i.y-this.y0,this.sphere)if(Math.abs(s+this.a*this.lat0)<=ut)t=dt(n/this.a+this.long0,this.over),e=0;else{o=this.lat0+s/this.a,l=n*n/this.a/this.a+o*o,c=o;var g;for(r=vS;r;--r)if(g=Math.tan(c),f=-1*(o*(c*g+1)-c-.5*(c*c+l)*g)/((c-o)/g-1),c+=f,Math.abs(f)<=ut){e=c;break}t=dt(this.long0+Math.asin(n*Math.tan(c)/this.a)/Math.sin(e),this.over)}else if(Math.abs(s+this.ml0)<=ut)e=0,t=dt(this.long0+n/this.a,this.over);else{o=(this.ml0+s)/this.a,l=n*n/this.a/this.a+o*o,c=o;var m,p,v,x,E;for(r=vS;r;--r)if(E=this.e*Math.sin(c),m=Math.sqrt(1-E*E)*Math.tan(c),p=this.a*Yi(this.e0,this.e1,this.e2,this.e3,c),v=this.e0-2*this.e1*Math.cos(2*c)+4*this.e2*Math.cos(4*c)-6*this.e3*Math.cos(6*c),x=p/this.a,f=(o*(m*x+1)-x-.5*m*(x*x+l))/(this.es*Math.sin(2*c)*(x*x+l-2*o*x)/(4*m)+(o-x)*(m*v-2/Math.sin(2*c))-v),c-=f,Math.abs(f)<=ut){e=c;break}m=Math.sqrt(1-this.es*Math.pow(Math.sin(e),2))*Math.tan(e),t=dt(this.long0+Math.asin(n*m/this.a)/Math.sin(e),this.over)}return i.x=t,i.y=e,i}var k6=["Polyconic","American_Polyconic","poly"];const F6={init:N6,forward:z6,inverse:G6,names:k6};function j6(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function B6(i){var t,e=i.x,n=i.y,s=n-this.lat0,r=e-this.long0,o=s/Yc*1e-5,l=r,c=1,f=0;for(t=1;t<=10;t++)c=c*o,f=f+this.A[t]*c;var g=f,m=l,p=1,v=0,x,E,b=0,M=0;for(t=1;t<=6;t++)x=p*g-v*m,E=v*g+p*m,p=x,v=E,b=b+this.B_re[t]*p-this.B_im[t]*v,M=M+this.B_im[t]*p+this.B_re[t]*v;return i.x=M*this.a+this.x0,i.y=b*this.a+this.y0,i}function U6(i){var t,e=i.x,n=i.y,s=e-this.x0,r=n-this.y0,o=r/this.a,l=s/this.a,c=1,f=0,g,m,p=0,v=0;for(t=1;t<=6;t++)g=c*o-f*l,m=f*o+c*l,c=g,f=m,p=p+this.C_re[t]*c-this.C_im[t]*f,v=v+this.C_im[t]*c+this.C_re[t]*f;for(var x=0;x<this.iterations;x++){var E=p,b=v,M,w,R=o,A=l;for(t=2;t<=6;t++)M=E*p-b*v,w=b*p+E*v,E=M,b=w,R=R+(t-1)*(this.B_re[t]*E-this.B_im[t]*b),A=A+(t-1)*(this.B_im[t]*E+this.B_re[t]*b);E=1,b=0;var T=this.B_re[1],L=this.B_im[1];for(t=2;t<=6;t++)M=E*p-b*v,w=b*p+E*v,E=M,b=w,T=T+t*(this.B_re[t]*E-this.B_im[t]*b),L=L+t*(this.B_im[t]*E+this.B_re[t]*b);var I=T*T+L*L;p=(R*T+A*L)/I,v=(A*T-R*L)/I}var P=p,k=v,Y=1,F=0;for(t=1;t<=9;t++)Y=Y*P,F=F+this.D[t]*Y;var G=this.lat0+F*Yc*1e5,K=this.long0+k;return i.x=K,i.y=G,i}var H6=["New_Zealand_Map_Grid","nzmg"];const q6={init:j6,forward:B6,inverse:U6,names:H6};function V6(){}function Y6(i){var t=i.x,e=i.y,n=dt(t-this.long0,this.over),s=this.x0+this.a*n,r=this.y0+this.a*Math.log(Math.tan(Math.PI/4+e/2.5))*1.25;return i.x=s,i.y=r,i}function X6(i){i.x-=this.x0,i.y-=this.y0;var t=dt(this.long0+i.x/this.a,this.over),e=2.5*(Math.atan(Math.exp(.8*i.y/this.a))-Math.PI/4);return i.x=t,i.y=e,i}var W6=["Miller_Cylindrical","mill"];const K6={init:V6,forward:Y6,inverse:X6,names:W6};var Z6=20;function $6(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=g1(this.es)}function Q6(i){var t,e,n=i.x,s=i.y;if(n=dt(n-this.long0,this.over),this.sphere){if(!this.m)s=this.n!==1?Math.asin(this.n*Math.sin(s)):s;else for(var r=this.n*Math.sin(s),o=Z6;o;--o){var l=(this.m*s+Math.sin(s)-r)/(this.m+Math.cos(s));if(s-=l,Math.abs(l)<ut)break}t=this.a*this.C_x*n*(this.m+Math.cos(s)),e=this.a*this.C_y*s}else{var c=Math.sin(s),f=Math.cos(s);e=this.a*yu(s,c,f,this.en),t=this.a*n*f/Math.sqrt(1-this.es*c*c)}return i.x=t,i.y=e,i}function J6(i){var t,e,n,s;return i.x-=this.x0,n=i.x/this.a,i.y-=this.y0,t=i.y/this.a,this.sphere?(t/=this.C_y,n=n/(this.C_x*(this.m+Math.cos(t))),this.m?t=Ra((this.m*t+Math.sin(t))/this.n):this.n!==1&&(t=Ra(Math.sin(t)/this.n)),n=dt(n+this.long0,this.over),t=Da(t)):(t=m1(i.y/this.a,this.es,this.en),s=Math.abs(t),s<rt?(s=Math.sin(t),e=this.long0+i.x*Math.sqrt(1-this.es*s*s)/(this.a*Math.cos(t)),n=dt(e,this.over)):s-ut<rt&&(n=this.long0)),i.x=n,i.y=t,i}var tD=["Sinusoidal","sinu"];const eD={init:$6,forward:Q6,inverse:J6,names:tD};function iD(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0}function nD(i){for(var t=i.x,e=i.y,n=dt(t-this.long0,this.over),s=e,r=Math.PI*Math.sin(e);;){var o=-(s+Math.sin(s)-r)/(1+Math.cos(s));if(s+=o,Math.abs(o)<ut)break}s/=2,Math.PI/2-Math.abs(e)<ut&&(n=0);var l=.900316316158*this.a*n*Math.cos(s)+this.x0,c=1.4142135623731*this.a*Math.sin(s)+this.y0;return i.x=l,i.y=c,i}function sD(i){var t,e;i.x-=this.x0,i.y-=this.y0,e=i.y/(1.4142135623731*this.a),Math.abs(e)>.999999999999&&(e=.999999999999),t=Math.asin(e);var n=dt(this.long0+i.x/(.900316316158*this.a*Math.cos(t)),this.over);n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),e=(2*t+Math.sin(2*t))/Math.PI,Math.abs(e)>1&&(e=1);var s=Math.asin(e);return i.x=n,i.y=s,i}var rD=["Mollweide","moll"];const aD={init:iD,forward:nD,inverse:sD,names:rD};function oD(){Math.abs(this.lat1+this.lat2)<ut||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=zh(this.es),this.e1=Gh(this.es),this.e2=kh(this.es),this.e3=Fh(this.es),this.sin_phi=Math.sin(this.lat1),this.cos_phi=Math.cos(this.lat1),this.ms1=js(this.e,this.sin_phi,this.cos_phi),this.ml1=Yi(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<ut?this.ns=this.sin_phi:(this.sin_phi=Math.sin(this.lat2),this.cos_phi=Math.cos(this.lat2),this.ms2=js(this.e,this.sin_phi,this.cos_phi),this.ml2=Yi(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Yi(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function lD(i){var t=i.x,e=i.y,n;if(this.sphere)n=this.a*(this.g-e);else{var s=Yi(this.e0,this.e1,this.e2,this.e3,e);n=this.a*(this.g-s)}var r=this.ns*dt(t-this.long0,this.over),o=this.x0+n*Math.sin(r),l=this.y0+this.rh-n*Math.cos(r);return i.x=o,i.y=l,i}function uD(i){i.x-=this.x0,i.y=this.rh-i.y+this.y0;var t,e,n,s;this.ns>=0?(e=Math.sqrt(i.x*i.x+i.y*i.y),t=1):(e=-Math.sqrt(i.x*i.x+i.y*i.y),t=-1);var r=0;if(e!==0&&(r=Math.atan2(t*i.x,t*i.y)),this.sphere)return s=dt(this.long0+r/this.ns,this.over),n=Da(this.g-e/this.a),i.x=s,i.y=n,i;var o=this.g-e/this.a;return n=_g(o,this.e0,this.e1,this.e2,this.e3),s=dt(this.long0+r/this.ns,this.over),i.x=s,i.y=n,i}var cD=["Equidistant_Conic","eqdc"];const hD={init:oD,forward:lD,inverse:uD,names:cD};function fD(){this.R=this.a}function dD(i){var t=i.x,e=i.y,n=dt(t-this.long0,this.over),s,r;Math.abs(e)<=ut&&(s=this.x0+this.R*n,r=this.y0);var o=Ra(2*Math.abs(e/Math.PI));(Math.abs(n)<=ut||Math.abs(Math.abs(e)-rt)<=ut)&&(s=this.x0,e>=0?r=this.y0+Math.PI*this.R*Math.tan(.5*o):r=this.y0+Math.PI*this.R*-Math.tan(.5*o));var l=.5*Math.abs(Math.PI/n-n/Math.PI),c=l*l,f=Math.sin(o),g=Math.cos(o),m=g/(f+g-1),p=m*m,v=m*(2/f-1),x=v*v,E=Math.PI*this.R*(l*(m-x)+Math.sqrt(c*(m-x)*(m-x)-(x+c)*(p-x)))/(x+c);n<0&&(E=-E),s=this.x0+E;var b=c+m;return E=Math.PI*this.R*(v*b-l*Math.sqrt((x+c)*(c+1)-b*b))/(x+c),e>=0?r=this.y0+E:r=this.y0-E,i.x=s,i.y=r,i}function gD(i){var t,e,n,s,r,o,l,c,f,g,m,p,v;return i.x-=this.x0,i.y-=this.y0,m=Math.PI*this.R,n=i.x/m,s=i.y/m,r=n*n+s*s,o=-Math.abs(s)*(1+r),l=o-2*s*s+n*n,c=-2*o+1+2*s*s+r*r,v=s*s/c+(2*l*l*l/c/c/c-9*o*l/c/c)/27,f=(o-l*l/3/c)/c,g=2*Math.sqrt(-f/3),m=3*v/f/g,Math.abs(m)>1&&(m>=0?m=1:m=-1),p=Math.acos(m)/3,i.y>=0?e=(-g*Math.cos(p+Math.PI/3)-l/3/c)*Math.PI:e=-(-g*Math.cos(p+Math.PI/3)-l/3/c)*Math.PI,Math.abs(n)<ut?t=this.long0:t=dt(this.long0+Math.PI*(r-1+Math.sqrt(1+2*(n*n-s*s)+r*r))/2/n,this.over),i.x=t,i.y=e,i}var mD=["Van_der_Grinten_I","VanDerGrinten","Van_der_Grinten","vandg"];const pD={init:fD,forward:dD,inverse:gD,names:mD};function yD(i,t,e,n,s,r){const o=n-t,l=Math.atan((1-r)*Math.tan(i)),c=Math.atan((1-r)*Math.tan(e)),f=Math.sin(l),g=Math.cos(l),m=Math.sin(c),p=Math.cos(c);let v=o,x,E=100,b,M,w,R,A,T,L,I,P,k,Y,F,G,K;do{if(b=Math.sin(v),M=Math.cos(v),w=Math.sqrt(p*b*(p*b)+(g*m-f*p*M)*(g*m-f*p*M)),w===0)return{azi1:0,s12:0};R=f*m+g*p*M,A=Math.atan2(w,R),T=g*p*b/w,L=1-T*T,I=L!==0?R-2*f*m/L:0,P=r/16*L*(4+r*(4-3*L)),x=v,v=o+(1-P)*r*T*(A+P*w*(I+P*R*(-1+2*I*I)))}while(Math.abs(v-x)>1e-12&&--E>0);return E===0?{azi1:NaN,s12:NaN}:(k=L*(s*s-s*(1-r)*(s*(1-r)))/(s*(1-r)*(s*(1-r))),Y=1+k/16384*(4096+k*(-768+k*(320-175*k))),F=k/1024*(256+k*(-128+k*(74-47*k))),G=F*w*(I+F/4*(R*(-1+2*I*I)-F/6*I*(-3+4*w*w)*(-3+4*I*I))),K=s*(1-r)*Y*(A-G),{azi1:Math.atan2(p*b,g*m-f*p*M),s12:K})}function _D(i,t,e,n,s,r){const o=Math.atan((1-r)*Math.tan(i)),l=Math.sin(o),c=Math.cos(o),f=Math.sin(e),g=Math.cos(e),m=Math.atan2(l,c*g),p=c*f,v=1-p*p,x=v*(s*s-s*(1-r)*(s*(1-r)))/(s*(1-r)*(s*(1-r))),E=1+x/16384*(4096+x*(-768+x*(320-175*x))),b=x/1024*(256+x*(-128+x*(74-47*x)));let M=n/(s*(1-r)*E),w,R=100,A,T,L,I;do A=Math.cos(2*m+M),T=Math.sin(M),L=Math.cos(M),I=b*T*(A+b/4*(L*(-1+2*A*A)-b/6*A*(-3+4*T*T)*(-3+4*A*A))),w=M,M=n/(s*(1-r)*E)+I;while(Math.abs(M-w)>1e-12&&--R>0);if(R===0)return{lat2:NaN,lon2:NaN};const P=l*T-c*L*g,k=Math.atan2(l*L+c*T*g,(1-r)*Math.sqrt(p*p+P*P)),Y=Math.atan2(T*f,c*L-l*T*g),F=r/16*v*(4+r*(4-3*v)),G=Y-(1-F)*r*p*(M+F*T*(A+F*L*(-1+2*A*A))),K=t+G;return{lat2:k,lon2:K}}function vD(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0),this.f=this.es/(1+Math.sqrt(1-this.es))}function xD(i){var t=i.x,e=i.y,n=Math.sin(i.y),s=Math.cos(i.y),r=dt(t-this.long0,this.over),o,l,c,f,g,m,p,v,x,E,b;return this.sphere?Math.abs(this.sin_p12-1)<=ut?(i.x=this.x0+this.a*(rt-e)*Math.sin(r),i.y=this.y0-this.a*(rt-e)*Math.cos(r),i):Math.abs(this.sin_p12+1)<=ut?(i.x=this.x0+this.a*(rt+e)*Math.sin(r),i.y=this.y0+this.a*(rt+e)*Math.cos(r),i):(x=this.sin_p12*n+this.cos_p12*s*Math.cos(r),p=Math.acos(x),v=p?p/Math.sin(p):1,i.x=this.x0+this.a*v*s*Math.sin(r),i.y=this.y0+this.a*v*(this.cos_p12*n-this.sin_p12*s*Math.cos(r)),i):(o=zh(this.es),l=Gh(this.es),c=kh(this.es),f=Fh(this.es),Math.abs(this.sin_p12-1)<=ut?(g=this.a*Yi(o,l,c,f,rt),m=this.a*Yi(o,l,c,f,e),i.x=this.x0+(g-m)*Math.sin(r),i.y=this.y0-(g-m)*Math.cos(r),i):Math.abs(this.sin_p12+1)<=ut?(g=this.a*Yi(o,l,c,f,rt),m=this.a*Yi(o,l,c,f,e),i.x=this.x0+(g+m)*Math.sin(r),i.y=this.y0+(g+m)*Math.cos(r),i):Math.abs(t)<ut&&Math.abs(e-this.lat0)<ut?(i.x=i.y=0,i):(E=yD(this.lat0,this.long0,e,t,this.a,this.f),b=E.azi1,i.x=E.s12*Math.sin(b),i.y=E.s12*Math.cos(b),i))}function bD(i){i.x-=this.x0,i.y-=this.y0;var t,e,n,s,r,o,l,c,f,g,m,p,v,x,E,b;return this.sphere?(t=Math.sqrt(i.x*i.x+i.y*i.y),t>2*rt*this.a?void 0:(e=t/this.a,n=Math.sin(e),s=Math.cos(e),r=this.long0,Math.abs(t)<=ut?o=this.lat0:(o=Ra(s*this.sin_p12+i.y*n*this.cos_p12/t),l=Math.abs(this.lat0)-rt,Math.abs(l)<=ut?this.lat0>=0?r=dt(this.long0+Math.atan2(i.x,-i.y),this.over):r=dt(this.long0-Math.atan2(-i.x,i.y),this.over):r=dt(this.long0+Math.atan2(i.x*n,t*this.cos_p12*s-i.y*this.sin_p12*n),this.over)),i.x=r,i.y=o,i)):(c=zh(this.es),f=Gh(this.es),g=kh(this.es),m=Fh(this.es),Math.abs(this.sin_p12-1)<=ut?(p=this.a*Yi(c,f,g,m,rt),t=Math.sqrt(i.x*i.x+i.y*i.y),v=p-t,o=_g(v/this.a,c,f,g,m),r=dt(this.long0+Math.atan2(i.x,-1*i.y),this.over),i.x=r,i.y=o,i):Math.abs(this.sin_p12+1)<=ut?(p=this.a*Yi(c,f,g,m,rt),t=Math.sqrt(i.x*i.x+i.y*i.y),v=t-p,o=_g(v/this.a,c,f,g,m),r=dt(this.long0+Math.atan2(i.x,i.y),this.over),i.x=r,i.y=o,i):(x=Math.atan2(i.x,i.y),E=Math.sqrt(i.x*i.x+i.y*i.y),b=_D(this.lat0,this.long0,x,E,this.a,this.f),i.x=b.lon2,i.y=b.lat2,i))}var ED=["Azimuthal_Equidistant","aeqd"];const SD={init:vD,forward:xD,inverse:bD,names:ED};function MD(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function wD(i){var t,e,n,s,r,o,l,c,f=i.x,g=i.y;return n=dt(f-this.long0,this.over),t=Math.sin(g),e=Math.cos(g),s=Math.cos(n),o=this.sin_p14*t+this.cos_p14*e*s,r=1,(o>0||Math.abs(o)<=ut)&&(l=this.a*r*e*Math.sin(n),c=this.y0+this.a*r*(this.cos_p14*t-this.sin_p14*e*s)),i.x=l,i.y=c,i}function TD(i){var t,e,n,s,r,o,l;return i.x-=this.x0,i.y-=this.y0,t=Math.sqrt(i.x*i.x+i.y*i.y),e=Ra(t/this.a),n=Math.sin(e),s=Math.cos(e),o=this.long0,Math.abs(t)<=ut?(l=this.lat0,i.x=o,i.y=l,i):(l=Ra(s*this.sin_p14+i.y*n*this.cos_p14/t),r=Math.abs(this.lat0)-rt,Math.abs(r)<=ut?(this.lat0>=0?o=dt(this.long0+Math.atan2(i.x,-i.y),this.over):o=dt(this.long0-Math.atan2(-i.x,i.y),this.over),i.x=o,i.y=l,i):(o=dt(this.long0+Math.atan2(i.x*n,t*this.cos_p14*s-i.y*this.sin_p14*n),this.over),i.x=o,i.y=l,i))}var CD=["ortho"];const RD={init:MD,forward:wD,inverse:TD,names:CD};var Fe={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},ae={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function AD(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=rt-re/2?this.face=Fe.TOP:this.lat0<=-(rt-re/2)?this.face=Fe.BOTTOM:Math.abs(this.long0)<=re?this.face=Fe.FRONT:Math.abs(this.long0)<=rt+re?this.face=this.long0>0?Fe.RIGHT:Fe.LEFT:this.face=Fe.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function OD(i){var t={x:0,y:0},e,n,s,r,o,l,c={value:0};if(i.x-=this.long0,this.es!==0?e=Math.atan(this.one_minus_f_squared*Math.tan(i.y)):e=i.y,n=i.x,this.face===Fe.TOP)r=rt-e,n>=re&&n<=rt+re?(c.value=ae.AREA_0,s=n-rt):n>rt+re||n<=-(rt+re)?(c.value=ae.AREA_1,s=n>0?n-ei:n+ei):n>-(rt+re)&&n<=-re?(c.value=ae.AREA_2,s=n+rt):(c.value=ae.AREA_3,s=n);else if(this.face===Fe.BOTTOM)r=rt+e,n>=re&&n<=rt+re?(c.value=ae.AREA_0,s=-n+rt):n<re&&n>=-re?(c.value=ae.AREA_1,s=-n):n<-re&&n>=-(rt+re)?(c.value=ae.AREA_2,s=-n-rt):(c.value=ae.AREA_3,s=n>0?-n+ei:-n-ei);else{var f,g,m,p,v,x,E;this.face===Fe.RIGHT?n=Zl(n,+rt):this.face===Fe.BACK?n=Zl(n,+ei):this.face===Fe.LEFT&&(n=Zl(n,-rt)),p=Math.sin(e),v=Math.cos(e),x=Math.sin(n),E=Math.cos(n),f=v*E,g=v*x,m=p,this.face===Fe.FRONT?(r=Math.acos(f),s=Ed(r,m,g,c)):this.face===Fe.RIGHT?(r=Math.acos(g),s=Ed(r,m,-f,c)):this.face===Fe.BACK?(r=Math.acos(-f),s=Ed(r,m,-g,c)):this.face===Fe.LEFT?(r=Math.acos(-g),s=Ed(r,m,f,c)):(r=s=0,c.value=ae.AREA_0)}return l=Math.atan(12/ei*(s+Math.acos(Math.sin(s)*Math.cos(re))-rt)),o=Math.sqrt((1-Math.cos(r))/(Math.cos(l)*Math.cos(l))/(1-Math.cos(Math.atan(1/Math.cos(s))))),c.value===ae.AREA_1?l+=rt:c.value===ae.AREA_2?l+=ei:c.value===ae.AREA_3&&(l+=1.5*ei),t.x=o*Math.cos(l),t.y=o*Math.sin(l),t.x=t.x*this.a+this.x0,t.y=t.y*this.a+this.y0,i.x=t.x,i.y=t.y,i}function DD(i){var t={lam:0,phi:0},e,n,s,r,o,l,c,f,g,m={value:0};if(i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a,n=Math.atan(Math.sqrt(i.x*i.x+i.y*i.y)),e=Math.atan2(i.y,i.x),i.x>=0&&i.x>=Math.abs(i.y)?m.value=ae.AREA_0:i.y>=0&&i.y>=Math.abs(i.x)?(m.value=ae.AREA_1,e-=rt):i.x<0&&-i.x>=Math.abs(i.y)?(m.value=ae.AREA_2,e=e<0?e+ei:e-ei):(m.value=ae.AREA_3,e+=rt),g=ei/12*Math.tan(e),o=Math.sin(g)/(Math.cos(g)-1/Math.sqrt(2)),l=Math.atan(o),s=Math.cos(e),r=Math.tan(n),c=1-s*s*r*r*(1-Math.cos(Math.atan(1/Math.cos(l)))),c<-1?c=-1:c>1&&(c=1),this.face===Fe.TOP)f=Math.acos(c),t.phi=rt-f,m.value===ae.AREA_0?t.lam=l+rt:m.value===ae.AREA_1?t.lam=l<0?l+ei:l-ei:m.value===ae.AREA_2?t.lam=l-rt:t.lam=l;else if(this.face===Fe.BOTTOM)f=Math.acos(c),t.phi=f-rt,m.value===ae.AREA_0?t.lam=-l+rt:m.value===ae.AREA_1?t.lam=-l:m.value===ae.AREA_2?t.lam=-l-rt:t.lam=l<0?-l-ei:-l+ei;else{var p,v,x;p=c,g=p*p,g>=1?x=0:x=Math.sqrt(1-g)*Math.sin(l),g+=x*x,g>=1?v=0:v=Math.sqrt(1-g),m.value===ae.AREA_1?(g=v,v=-x,x=g):m.value===ae.AREA_2?(v=-v,x=-x):m.value===ae.AREA_3&&(g=v,v=x,x=-g),this.face===Fe.RIGHT?(g=p,p=-v,v=g):this.face===Fe.BACK?(p=-p,v=-v):this.face===Fe.LEFT&&(g=p,p=v,v=-g),t.phi=Math.acos(-x)-rt,t.lam=Math.atan2(v,p),this.face===Fe.RIGHT?t.lam=Zl(t.lam,-rt):this.face===Fe.BACK?t.lam=Zl(t.lam,-ei):this.face===Fe.LEFT&&(t.lam=Zl(t.lam,+rt))}if(this.es!==0){var E,b,M;E=t.phi<0?1:0,b=Math.tan(t.phi),M=this.b/Math.sqrt(b*b+this.one_minus_f_squared),t.phi=Math.atan(Math.sqrt(this.a*this.a-M*M)/(this.one_minus_f*M)),E&&(t.phi=-t.phi)}return t.lam+=this.long0,i.x=t.lam,i.y=t.phi,i}function Ed(i,t,e,n){var s;return i<ut?(n.value=ae.AREA_0,s=0):(s=Math.atan2(t,e),Math.abs(s)<=re?n.value=ae.AREA_0:s>re&&s<=rt+re?(n.value=ae.AREA_1,s-=rt):s>rt+re||s<=-(rt+re)?(n.value=ae.AREA_2,s=s>=0?s-ei:s+ei):(n.value=ae.AREA_3,s+=rt)),s}function Zl(i,t){var e=i+t;return e<-ei?e+=sh:e>+ei&&(e-=sh),e}var ID=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const LD={init:AD,forward:OD,inverse:DD,names:ID};var b_=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Nc=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],U4=.8487,H4=1.3523,q4=hn/5,PD=1/q4,Xl=18,vg=function(i,t){return i[0]+t*(i[1]+t*(i[2]+t*i[3]))},ND=function(i,t){return i[1]+t*(2*i[2]+t*3*i[3])};function zD(i,t,e,n){for(var s=t;n;--n){var r=i(s);if(s-=r,Math.abs(r)<e)break}return s}function GD(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function kD(i){var t=dt(i.x-this.long0,this.over),e=Math.abs(i.y),n=Math.floor(e*q4);n<0?n=0:n>=Xl&&(n=Xl-1),e=hn*(e-PD*n);var s={x:vg(b_[n],e)*t,y:vg(Nc[n],e)};return i.y<0&&(s.y=-s.y),s.x=s.x*this.a*U4+this.x0,s.y=s.y*this.a*H4+this.y0,s}function FD(i){var t={x:(i.x-this.x0)/(this.a*U4),y:Math.abs(i.y-this.y0)/(this.a*H4)};if(t.y>=1)t.x/=b_[Xl][0],t.y=i.y<0?-rt:rt;else{var e=Math.floor(t.y*Xl);for(e<0?e=0:e>=Xl&&(e=Xl-1);;)if(Nc[e][0]>t.y)--e;else if(Nc[e+1][0]<=t.y)++e;else break;var n=Nc[e],s=5*(t.y-n[0])/(Nc[e+1][0]-n[0]);s=zD(function(r){return(vg(n,r)-t.y)/ND(n,r)},s,ut,100),t.x/=vg(b_[e],s),t.y=(5*e+s)*Ke,i.y<0&&(t.y=-t.y)}return t.x=dt(t.x+this.long0,this.over),t}var jD=["Robinson","robin"];const BD={init:GD,forward:kD,inverse:FD,names:jD};function UD(){this.name="geocent"}function HD(i){var t=D4(i,this.es,this.a);return t}function qD(i){var t=I4(i,this.es,this.a,this.b);return t}var VD=["Geocentric","geocentric","geocent","Geocent"];const YD={init:UD,forward:HD,inverse:qD,names:VD};var Gi={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},vc={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function XD(){if(Object.keys(vc).forEach((function(e){if(typeof this[e]>"u")this[e]=vc[e].def;else{if(vc[e].num&&isNaN(this[e]))throw new Error("Invalid parameter value, must be numeric "+e+" = "+this[e]);vc[e].num&&(this[e]=parseFloat(this[e]))}vc[e].degrees&&(this[e]=this[e]*Ke)}).bind(this)),Math.abs(Math.abs(this.lat0)-rt)<ut?this.mode=this.lat0<0?Gi.S_POLE:Gi.N_POLE:Math.abs(this.lat0)<ut?this.mode=Gi.EQUIT:(this.mode=Gi.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var i=this.tilt,t=this.azi;this.cg=Math.cos(t),this.sg=Math.sin(t),this.cw=Math.cos(i),this.sw=Math.sin(i)}function WD(i){i.x-=this.long0;var t=Math.sin(i.y),e=Math.cos(i.y),n=Math.cos(i.x),s,r;switch(this.mode){case Gi.OBLIQ:r=this.sinph0*t+this.cosph0*e*n;break;case Gi.EQUIT:r=e*n;break;case Gi.S_POLE:r=-t;break;case Gi.N_POLE:r=t;break}switch(r=this.pn1/(this.p-r),s=r*e*Math.sin(i.x),this.mode){case Gi.OBLIQ:r*=this.cosph0*t-this.sinph0*e*n;break;case Gi.EQUIT:r*=t;break;case Gi.N_POLE:r*=-(e*n);break;case Gi.S_POLE:r*=e*n;break}var o,l;return o=r*this.cg+s*this.sg,l=1/(o*this.sw*this.h1+this.cw),s=(s*this.cg-r*this.sg)*this.cw*l,r=o*l,i.x=s*this.a,i.y=r*this.a,i}function KD(i){i.x/=this.a,i.y/=this.a;var t={x:i.x,y:i.y},e,n,s;s=1/(this.pn1-i.y*this.sw),e=this.pn1*i.x*s,n=this.pn1*i.y*this.cw*s,i.x=e*this.cg+n*this.sg,i.y=n*this.cg-e*this.sg;var r=ln(i.x,i.y);if(Math.abs(r)<ut)t.x=0,t.y=i.y;else{var o,l;switch(l=1-r*r*this.pfact,l=(this.p-Math.sqrt(l))/(this.pn1/r+r/this.pn1),o=Math.sqrt(1-l*l),this.mode){case Gi.OBLIQ:t.y=Math.asin(o*this.sinph0+i.y*l*this.cosph0/r),i.y=(o-this.sinph0*Math.sin(t.y))*r,i.x*=l*this.cosph0;break;case Gi.EQUIT:t.y=Math.asin(i.y*l/r),i.y=o*r,i.x*=l;break;case Gi.N_POLE:t.y=Math.asin(o),i.y=-i.y;break;case Gi.S_POLE:t.y=-Math.asin(o);break}t.x=Math.atan2(i.x,i.y)}return i.x=t.x+this.long0,i.y=t.y,i}var ZD=["Tilted_Perspective","tpers"];const $D={init:XD,forward:WD,inverse:KD,names:ZD};function QD(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var i=1-this.es,t=1/i;this.radius_p=Math.sqrt(i),this.radius_p2=i,this.radius_p_inv2=t,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function JD(i){var t=i.x,e=i.y,n,s,r,o;if(t=t-this.long0,this.shape==="ellipse"){e=Math.atan(this.radius_p2*Math.tan(e));var l=this.radius_p/ln(this.radius_p*Math.cos(e),Math.sin(e));if(s=l*Math.cos(t)*Math.cos(e),r=l*Math.sin(t)*Math.cos(e),o=l*Math.sin(e),(this.radius_g-s)*s-r*r-o*o*this.radius_p_inv2<0)return i.x=Number.NaN,i.y=Number.NaN,i;n=this.radius_g-s,this.flip_axis?(i.x=this.radius_g_1*Math.atan(r/ln(o,n)),i.y=this.radius_g_1*Math.atan(o/n)):(i.x=this.radius_g_1*Math.atan(r/n),i.y=this.radius_g_1*Math.atan(o/ln(r,n)))}else this.shape==="sphere"&&(n=Math.cos(e),s=Math.cos(t)*n,r=Math.sin(t)*n,o=Math.sin(e),n=this.radius_g-s,this.flip_axis?(i.x=this.radius_g_1*Math.atan(r/ln(o,n)),i.y=this.radius_g_1*Math.atan(o/n)):(i.x=this.radius_g_1*Math.atan(r/n),i.y=this.radius_g_1*Math.atan(o/ln(r,n))));return i.x=i.x*this.a,i.y=i.y*this.a,i}function tI(i){var t=-1,e=0,n=0,s,r,o,l;if(i.x=i.x/this.a,i.y=i.y/this.a,this.shape==="ellipse"){this.flip_axis?(n=Math.tan(i.y/this.radius_g_1),e=Math.tan(i.x/this.radius_g_1)*ln(1,n)):(e=Math.tan(i.x/this.radius_g_1),n=Math.tan(i.y/this.radius_g_1)*ln(1,e));var c=n/this.radius_p;if(s=e*e+c*c+t*t,r=2*this.radius_g*t,o=r*r-4*s*this.C,o<0)return i.x=Number.NaN,i.y=Number.NaN,i;l=(-r-Math.sqrt(o))/(2*s),t=this.radius_g+l*t,e*=l,n*=l,i.x=Math.atan2(e,t),i.y=Math.atan(n*Math.cos(i.x)/t),i.y=Math.atan(this.radius_p_inv2*Math.tan(i.y))}else if(this.shape==="sphere"){if(this.flip_axis?(n=Math.tan(i.y/this.radius_g_1),e=Math.tan(i.x/this.radius_g_1)*Math.sqrt(1+n*n)):(e=Math.tan(i.x/this.radius_g_1),n=Math.tan(i.y/this.radius_g_1)*Math.sqrt(1+e*e)),s=e*e+n*n+t*t,r=2*this.radius_g*t,o=r*r-4*s*this.C,o<0)return i.x=Number.NaN,i.y=Number.NaN,i;l=(-r-Math.sqrt(o))/(2*s),t=this.radius_g+l*t,e*=l,n*=l,i.x=Math.atan2(e,t),i.y=Math.atan(n*Math.cos(i.x)/t)}return i.x=i.x+this.long0,i}var eI=["Geostationary Satellite View","Geostationary_Satellite","geos"];const iI={init:QD,forward:JD,inverse:tI,names:eI};var Xc=1.340264,Wc=-.081106,Kc=893e-6,Zc=.003796,xg=Math.sqrt(3)/2;function nI(){this.es=0,this.long0=this.long0!==void 0?this.long0:0,this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0}function sI(i){var t=dt(i.x-this.long0,this.over),e=i.y,n=Math.asin(xg*Math.sin(e)),s=n*n,r=s*s*s;return i.x=t*Math.cos(n)/(xg*(Xc+3*Wc*s+r*(7*Kc+9*Zc*s))),i.y=n*(Xc+Wc*s+r*(Kc+Zc*s)),i.x=this.a*i.x+this.x0,i.y=this.a*i.y+this.y0,i}function rI(i){i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a;var t=1e-9,e=12,n=i.y,s,r,o,l,c,f;for(f=0;f<e&&(s=n*n,r=s*s*s,o=n*(Xc+Wc*s+r*(Kc+Zc*s))-i.y,l=Xc+3*Wc*s+r*(7*Kc+9*Zc*s),n-=c=o/l,!(Math.abs(c)<t));++f);return s=n*n,r=s*s*s,i.x=xg*i.x*(Xc+3*Wc*s+r*(7*Kc+9*Zc*s))/Math.cos(n),i.y=Math.asin(Math.sin(n)/xg),i.x=dt(i.x+this.long0,this.over),i}var aI=["eqearth","Equal Earth","Equal_Earth"];const oI={init:nI,forward:sI,inverse:rI,names:aI};var oh=1e-10;function lI(){var i;if(this.phi1=this.lat1,Math.abs(this.phi1)<oh)throw new Error;this.es?(this.en=g1(this.es),this.m1=yu(this.phi1,this.am1=Math.sin(this.phi1),i=Math.cos(this.phi1),this.en),this.am1=i/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=cI,this.forward=uI):(Math.abs(this.phi1)+oh>=rt?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=fI,this.forward=hI)}function uI(i){var t=dt(i.x-(this.long0||0),this.over),e=i.y,n,s,r;return n=this.am1+this.m1-yu(e,s=Math.sin(e),r=Math.cos(e),this.en),s=r*t/(n*Math.sqrt(1-this.es*s*s)),i.x=n*Math.sin(s),i.y=this.am1-n*Math.cos(s),i.x=this.a*i.x+(this.x0||0),i.y=this.a*i.y+(this.y0||0),i}function cI(i){i.x=(i.x-(this.x0||0))/this.a,i.y=(i.y-(this.y0||0))/this.a;var t,e,n,s;if(e=ln(i.x,i.y=this.am1-i.y),s=m1(this.am1+this.m1-e,this.es,this.en),(t=Math.abs(s))<rt)t=Math.sin(s),n=e*Math.atan2(i.x,i.y)*Math.sqrt(1-this.es*t*t)/Math.cos(s);else if(Math.abs(t-rt)<=oh)n=0;else throw new Error;return i.x=dt(n+(this.long0||0),this.over),i.y=Da(s),i}function hI(i){var t=dt(i.x-(this.long0||0),this.over),e=i.y,n,s;return s=this.cphi1+this.phi1-e,Math.abs(s)>oh?(i.x=s*Math.sin(n=t*Math.cos(e)/s),i.y=this.cphi1-s*Math.cos(n)):i.x=i.y=0,i.x=this.a*i.x+(this.x0||0),i.y=this.a*i.y+(this.y0||0),i}function fI(i){i.x=(i.x-(this.x0||0))/this.a,i.y=(i.y-(this.y0||0))/this.a;var t,e,n=ln(i.x,i.y=this.cphi1-i.y);if(e=this.cphi1+this.phi1-n,Math.abs(e)>rt)throw new Error;return Math.abs(Math.abs(e)-rt)<=oh?t=0:t=n*Math.atan2(i.x,i.y)/Math.cos(e),i.x=dt(t+(this.long0||0),this.over),i.y=Da(e),i}var dI=["bonne","Bonne (Werner lat_1=90)"];const gI={init:lI,names:dI},xS={OBLIQUE:{forward:vI,inverse:bI},TRANSVERSE:{forward:xI,inverse:EI}},bg={ROTATE:{o_alpha:"oAlpha",o_lon_c:"oLongC",o_lat_c:"oLatC"},NEW_POLE:{o_lat_p:"oLatP",o_lon_p:"oLongP"},NEW_EQUATOR:{o_lon_1:"oLong1",o_lat_1:"oLat1",o_lon_2:"oLong2",o_lat_2:"oLat2"}};function mI(){if(this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.title=this.title||"General Oblique Transformation",this.isIdentity=C4.includes(this.o_proj),!this.o_proj)throw new Error("Missing parameter: o_proj");if(this.o_proj==="ob_tran")throw new Error("Invalid value for o_proj: "+this.o_proj);const i=this.projStr.replace("+proj=ob_tran","").replace("+o_proj=","+proj=").trim(),t=Qn(i);if(!t)throw new Error("Invalid parameter: o_proj. Unknown projection "+this.o_proj);t.long0=0,this.obliqueProjection=t;let e;const n=Object.keys(bg),s=l=>{if(typeof this[l]>"u")return;const c=parseFloat(this[l])*Ke;if(isNaN(c))throw new Error("Invalid value for "+l+": "+this[l]);return c};for(let l=0;l<n.length;l++){const c=n[l],f=bg[c],g=Object.entries(f);if(g.some(([p])=>typeof this[p]<"u")){e=f;for(let p=0;p<g.length;p++){const[v,x]=g[p],E=s(v);if(typeof E>"u")throw new Error("Missing parameter: "+v+".");this[x]=E}break}}if(!e)throw new Error("No valid parameters provided for ob_tran projection.");const{lamp:r,phip:o}=_I(this,e);this.lamp=r,Math.abs(o)>ut?(this.cphip=Math.cos(o),this.sphip=Math.sin(o),this.projectionType=xS.OBLIQUE):this.projectionType=xS.TRANSVERSE}function pI(i){return this.projectionType.forward(this,i)}function yI(i){return this.projectionType.inverse(this,i)}function _I(i,t){let e,n;if(t===bg.ROTATE){let s=i.oLongC,r=i.oLatC,o=i.oAlpha;if(Math.abs(Math.abs(r)-rt)<=ut)throw new Error("Invalid value for o_lat_c: "+i.o_lat_c+" should be < 90");n=s+Math.atan2(-1*Math.cos(o),-1*Math.sin(o)*Math.sin(r)),e=Math.asin(Math.cos(r)*Math.sin(o))}else if(t===bg.NEW_POLE)n=i.oLongP,e=i.oLatP;else{let s=i.oLong1,r=i.oLat1,o=i.oLong2,l=i.oLat2,c=Math.abs(r);if(Math.abs(r)>rt-ut)throw new Error("Invalid value for o_lat_1: "+i.o_lat_1+" should be < 90");if(Math.abs(l)>rt-ut)throw new Error("Invalid value for o_lat_2: "+i.o_lat_2+" should be < 90");if(Math.abs(r-l)<ut)throw new Error("Invalid value for o_lat_1 and o_lat_2: o_lat_1 should be different from o_lat_2");if(c<ut)throw new Error("Invalid value for o_lat_1: o_lat_1 should be different from zero");n=Math.atan2(Math.cos(r)*Math.sin(l)*Math.cos(s)-Math.sin(r)*Math.cos(l)*Math.cos(o),Math.sin(r)*Math.cos(l)*Math.sin(o)-Math.cos(r)*Math.sin(l)*Math.sin(s)),e=Math.atan(-1*Math.cos(n-s)/Math.tan(r))}return{lamp:n,phip:e}}function vI(i,t){let{x:e,y:n}=t;e+=i.long0;const s=Math.cos(e),r=Math.sin(n),o=Math.cos(n);t.x=dt(Math.atan2(o*Math.sin(e),i.sphip*o*s+i.cphip*r)+i.lamp),t.y=Math.asin(i.sphip*r-i.cphip*o*s);const l=i.obliqueProjection.forward(t);return i.isIdentity&&(l.x*=hn,l.y*=hn),l}function xI(i,t){let{x:e,y:n}=t;e+=i.long0;const s=Math.cos(n),r=Math.cos(e);t.x=dt(Math.atan2(s*Math.sin(e),Math.sin(n))+i.lamp),t.y=Math.asin(-1*s*r);const o=i.obliqueProjection.forward(t);return i.isIdentity&&(o.x*=hn,o.y*=hn),o}function bI(i,t){i.isIdentity&&(t.x*=Ke,t.y*=Ke);const e=i.obliqueProjection.inverse(t);let{x:n,y:s}=e;if(n<Number.MAX_VALUE){n-=i.lamp;const r=Math.cos(n),o=Math.sin(s),l=Math.cos(s);t.x=Math.atan2(l*Math.sin(n),i.sphip*l*r-i.cphip*o),t.y=Math.asin(i.sphip*o+i.cphip*l*r)}return t.x=dt(t.x+i.long0),t}function EI(i,t){i.isIdentity&&(t.x*=Ke,t.y*=Ke);const e=i.obliqueProjection.inverse(t);let{x:n,y:s}=e;if(n<Number.MAX_VALUE){const r=Math.cos(s);n-=i.lamp,t.x=Math.atan2(r*Math.sin(n),-1*Math.sin(s)),t.y=Math.asin(r*Math.cos(n))}return t.x=dt(t.x+i.long0),t}var SI=["General Oblique Transformation","General_Oblique_Transformation","ob_tran"];const MI={init:mI,forward:pI,inverse:yI,names:SI};function wI(i){i.Proj.projections.add(ig),i.Proj.projections.add(ng),i.Proj.projections.add(dO),i.Proj.projections.add(EO),i.Proj.projections.add(CO),i.Proj.projections.add(IO),i.Proj.projections.add(kO),i.Proj.projections.add(HO),i.Proj.projections.add(WO),i.Proj.projections.add(JO),i.Proj.projections.add(f6),i.Proj.projections.add(_6),i.Proj.projections.add(S6),i.Proj.projections.add(A6),i.Proj.projections.add(P6),i.Proj.projections.add(F6),i.Proj.projections.add(q6),i.Proj.projections.add(K6),i.Proj.projections.add(eD),i.Proj.projections.add(aD),i.Proj.projections.add(hD),i.Proj.projections.add(pD),i.Proj.projections.add(SD),i.Proj.projections.add(RD),i.Proj.projections.add(LD),i.Proj.projections.add(BD),i.Proj.projections.add(YD),i.Proj.projections.add($D),i.Proj.projections.add(iI),i.Proj.projections.add(oI),i.Proj.projections.add(gI),i.Proj.projections.add(MI)}const No=Object.assign(O8,{defaultDatum:"WGS84",Proj:Qn,WGS84:new Qn("WGS84"),Point:au,toPoint:L4,defs:Di,nadgrid:f8,transform:yg,mgrs:D8,version:"__VERSION__"});wI(No);function V4(...i){console.warn(...i)}const bi={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function E_(i){const t=ts();for(let e=0,n=i.length;e<n;++e)$c(t,i[e]);return t}function TI(i,t,e){const n=Math.min.apply(null,i),s=Math.min.apply(null,t),r=Math.max.apply(null,i),o=Math.max.apply(null,t);return Er(n,s,r,o,e)}function Sa(i,t,e){return e?(e[0]=i[0]-t,e[1]=i[1]-t,e[2]=i[2]+t,e[3]=i[3]+t,e):[i[0]-t,i[1]-t,i[2]+t,i[3]+t]}function Y4(i,t){return t?(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t):i.slice()}function zo(i,t,e){let n,s;return t<i[0]?n=i[0]-t:i[2]<t?n=t-i[2]:n=0,e<i[1]?s=i[1]-e:i[3]<e?s=e-i[3]:s=0,n*n+s*s}function Co(i,t){return b1(i,t[0],t[1])}function pr(i,t){return i[0]<=t[0]&&t[2]<=i[2]&&i[1]<=t[1]&&t[3]<=i[3]}function b1(i,t,e){return i[0]<=t&&t<=i[2]&&i[1]<=e&&e<=i[3]}function S_(i,t){const e=i[0],n=i[1],s=i[2],r=i[3],o=t[0],l=t[1];let c=bi.UNKNOWN;return o<e?c=c|bi.LEFT:o>s&&(c=c|bi.RIGHT),l<n?c=c|bi.BELOW:l>r&&(c=c|bi.ABOVE),c===bi.UNKNOWN&&(c=bi.INTERSECTING),c}function ts(){return[1/0,1/0,-1/0,-1/0]}function Er(i,t,e,n,s){return s?(s[0]=i,s[1]=t,s[2]=e,s[3]=n,s):[i,t,e,n]}function _u(i){return Er(1/0,1/0,-1/0,-1/0,i)}function X4(i,t){const e=i[0],n=i[1];return Er(e,n,e,n,t)}function E1(i,t,e,n,s){const r=_u(s);return K4(r,i,t,e,n)}function Sr(i,t){return i[0]==t[0]&&i[2]==t[2]&&i[1]==t[1]&&i[3]==t[3]}function W4(i,t){return t[0]<i[0]&&(i[0]=t[0]),t[2]>i[2]&&(i[2]=t[2]),t[1]<i[1]&&(i[1]=t[1]),t[3]>i[3]&&(i[3]=t[3]),i}function $c(i,t){t[0]<i[0]&&(i[0]=t[0]),t[0]>i[2]&&(i[2]=t[0]),t[1]<i[1]&&(i[1]=t[1]),t[1]>i[3]&&(i[3]=t[1])}function K4(i,t,e,n,s){for(;e<n;e+=s)CI(i,t[e],t[e+1]);return i}function CI(i,t,e){i[0]=Math.min(i[0],t),i[1]=Math.min(i[1],e),i[2]=Math.max(i[2],t),i[3]=Math.max(i[3],e)}function Z4(i,t){let e;return e=t(c0(i)),e||(e=t(h0(i)),e)||(e=t(f0(i)),e)||(e=t(Ar(i)),e)?e:!1}function M_(i){let t=0;return Go(i)||(t=Ht(i)*li(i)),t}function c0(i){return[i[0],i[1]]}function h0(i){return[i[2],i[1]]}function Dn(i){return[(i[0]+i[2])/2,(i[1]+i[3])/2]}function RI(i,t){let e;if(t==="bottom-left")e=c0(i);else if(t==="bottom-right")e=h0(i);else if(t==="top-left")e=Ar(i);else if(t==="top-right")e=f0(i);else throw new Error("Invalid corner");return e}function Eg(i,t,e,n,s){const[r,o,l,c,f,g,m,p]=$4(i,t,e,n);return Er(Math.min(r,l,f,m),Math.min(o,c,g,p),Math.max(r,l,f,m),Math.max(o,c,g,p),s)}function $4(i,t,e,n){const s=t*n[0]/2,r=t*n[1]/2,o=Math.cos(e),l=Math.sin(e),c=s*o,f=s*l,g=r*o,m=r*l,p=i[0],v=i[1];return[p-c+m,v-f-g,p-c-m,v-f+g,p+c-m,v+f+g,p+c+m,v+f-g,p-c+m,v-f-g]}function li(i){return i[3]-i[1]}function _s(i,t,e){const n=e||ts();return Ze(i,t)?(i[0]>t[0]?n[0]=i[0]:n[0]=t[0],i[1]>t[1]?n[1]=i[1]:n[1]=t[1],i[2]<t[2]?n[2]=i[2]:n[2]=t[2],i[3]<t[3]?n[3]=i[3]:n[3]=t[3]):_u(n),n}function Ar(i){return[i[0],i[3]]}function f0(i){return[i[2],i[3]]}function Ht(i){return i[2]-i[0]}function Ze(i,t){return i[0]<=t[2]&&i[2]>=t[0]&&i[1]<=t[3]&&i[3]>=t[1]}function Go(i){return i[2]<i[0]||i[3]<i[1]}function AI(i,t){return t?(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t):i}function OI(i,t,e){let n=!1;const s=S_(i,t),r=S_(i,e);if(s===bi.INTERSECTING||r===bi.INTERSECTING)n=!0;else{const o=i[0],l=i[1],c=i[2],f=i[3],g=t[0],m=t[1],p=e[0],v=e[1],x=(v-m)/(p-g);let E,b;r&bi.ABOVE&&!(s&bi.ABOVE)&&(E=p-(v-f)/x,n=E>=o&&E<=c),!n&&r&bi.RIGHT&&!(s&bi.RIGHT)&&(b=v-(p-c)*x,n=b>=l&&b<=f),!n&&r&bi.BELOW&&!(s&bi.BELOW)&&(E=p-(v-l)/x,n=E>=o&&E<=c),!n&&r&bi.LEFT&&!(s&bi.LEFT)&&(b=v-(p-o)*x,n=b>=l&&b<=f)}return n}function Q4(i,t,e,n){if(Go(i))return _u(e);let s=[];if(n>1){const l=i[2]-i[0],c=i[3]-i[1];for(let f=0;f<n;++f)s.push(i[0]+l*f/n,i[1],i[2],i[1]+c*f/n,i[2]-l*f/n,i[3],i[0],i[3]-c*f/n)}else s=[i[0],i[1],i[2],i[1],i[2],i[3],i[0],i[3]];t(s,s,2);const r=[],o=[];for(let l=0,c=s.length;l<c;l+=2)r.push(s[l]),o.push(s[l+1]);return TI(r,o,e)}function J4(i,t){const e=t.getExtent(),n=Dn(i);if(t.canWrapX()&&(n[0]<e[0]||n[0]>=e[2])){const s=Ht(e),o=Math.floor((n[0]-e[0])/s)*s;i[0]-=o,i[2]-=o}return i}function tT(i,t,e){if(t.canWrapX()){const n=t.getExtent();if(!isFinite(i[0])||!isFinite(i[2]))return[[n[0],i[1],n[2],i[3]]];J4(i,t);const s=Ht(n);if(Ht(i)>s&&!e)return[[n[0],i[1],n[2],i[3]]];if(i[0]<n[0])return[[i[0]+s,i[1],n[2],i[3]],[n[0],i[1],i[2],i[3]]];if(i[2]>n[2])return[[i[0],i[1],n[2],i[3]],[n[0],i[1],i[2]-s,i[3]]]}return[i]}function Oe(i,t,e){return Math.min(Math.max(i,t),e)}function DI(i,t,e,n,s,r){const o=s-e,l=r-n;if(o!==0||l!==0){const c=((i-e)*o+(t-n)*l)/(o*o+l*l);c>1?(e=s,n=r):c>0&&(e+=o*c,n+=l*c)}return _o(i,t,e,n)}function _o(i,t,e,n){const s=e-i,r=n-t;return s*s+r*r}function II(i){const t=i.length;for(let n=0;n<t;n++){let s=n,r=Math.abs(i[n][n]);for(let l=n+1;l<t;l++){const c=Math.abs(i[l][n]);c>r&&(r=c,s=l)}if(r===0)return null;const o=i[s];i[s]=i[n],i[n]=o;for(let l=n+1;l<t;l++){const c=-i[l][n]/i[n][n];for(let f=n;f<t+1;f++)n==f?i[l][f]=0:i[l][f]+=c*i[n][f]}}const e=new Array(t);for(let n=t-1;n>=0;n--){e[n]=i[n][t]/i[n][n];for(let s=n-1;s>=0;s--)i[s][t]-=i[s][n]*e[n]}return e}function bS(i){return i*180/Math.PI}function Ma(i){return i*Math.PI/180}function $l(i,t){const e=i%t;return e*t<0?e+t:e}function wn(i,t,e){return i+e*(t-i)}function d0(i,t){const e=Math.pow(10,t);return Math.round(i*e)/e}function Sd(i,t){return Math.floor(d0(i,t))}function da(i,t){return Math.ceil(d0(i,t))}function w_(i,t,e){if(i>=t&&i<e)return i;const n=e-t;return((i-t)%n+n)%n+t}function LI(i,t){return i[0]+=+t[0],i[1]+=+t[1],i}function Sg(i,t){let e=!0;for(let n=i.length-1;n>=0;--n)if(i[n]!=t[n]){e=!1;break}return e}function S1(i,t){const e=Math.cos(t),n=Math.sin(t),s=i[0]*e-i[1]*n,r=i[1]*e+i[0]*n;return i[0]=s,i[1]=r,i}function PI(i,t){return i[0]*=t,i[1]*=t,i}function NI(i,t){const e=i[0]-t[0],n=i[1]-t[1];return e*e+n*n}function zI(i,t){return Math.sqrt(NI(i,t))}function M1(i,t){if(t.canWrapX()){const e=Ht(t.getExtent()),n=eT(i,t,e);n&&(i[0]-=n*e)}return i}function eT(i,t,e){const n=t.getExtent();let s=0;return t.canWrapX()&&(i[0]<n[0]||i[0]>n[2])&&(e=e||Ht(n),s=Math.floor((i[0]-n[0])/e)),s}const Mr={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class vu{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Mr[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const jh=6378137,Wl=Math.PI*jh,GI=[-Wl,-Wl,Wl,Wl],kI=[-180,-85,180,85],Md=jh*Math.log(Math.tan(Math.PI/2));class Tl extends vu{constructor(t){super({code:t,units:"m",extent:GI,global:!0,worldExtent:kI,getPointResolution:function(e,n){return e/Math.cosh(n[1]/jh)}})}}const ES=[new Tl("EPSG:3857"),new Tl("EPSG:102100"),new Tl("EPSG:102113"),new Tl("EPSG:900913"),new Tl("http://www.opengis.net/def/crs/EPSG/0/3857"),new Tl("http://www.opengis.net/gml/srs/epsg.xml#3857")];function FI(i,t,e,n){const s=i.length;e=e>1?e:2,n=n??e,t===void 0&&(e>2?t=i.slice():t=new Array(s));for(let r=0;r<s;r+=n){t[r]=Wl*i[r]/180;let o=jh*Math.log(Math.tan(Math.PI*(+i[r+1]+90)/360));o>Md?o=Md:o<-Md&&(o=-Md),t[r+1]=o}return t}function jI(i,t,e,n){const s=i.length;e=e>1?e:2,n=n??e,t===void 0&&(e>2?t=i.slice():t=new Array(s));for(let r=0;r<s;r+=n)t[r]=180*i[r]/Wl,t[r+1]=360*Math.atan(Math.exp(i[r+1]/jh))/Math.PI-90;return t}const BI=6378137,SS=[-180,-90,180,90],UI=Math.PI*BI/180;class $a extends vu{constructor(t,e){super({code:t,units:"degrees",extent:SS,axisOrientation:e,global:!0,metersPerUnit:UI,worldExtent:SS})}}const MS=[new $a("CRS:84"),new $a("EPSG:4326","neu"),new $a("urn:ogc:def:crs:OGC:1.3:CRS84"),new $a("urn:ogc:def:crs:OGC:2:84"),new $a("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new $a("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new $a("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let T_={};function rg(i){return T_[i]||T_[i.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function HI(i,t){T_[i]=t}function Bh(i){for(const t in i)delete i[t]}function Aa(i){let t;for(t in i)return!1;return!t}let Ql={};function Ro(i,t,e){const n=i.getCode(),s=t.getCode();n in Ql||(Ql[n]={}),Ql[n][s]=e}function ag(i,t){return i in Ql&&t in Ql[i]?Ql[i][t]:null}const Mg=.9996,Jn=.00669438,g0=Jn*Jn,m0=g0*Jn,ho=Jn/(1-Jn),wS=Math.sqrt(1-Jn),ou=(1-wS)/(1+wS),iT=ou*ou,w1=iT*ou,T1=w1*ou,nT=T1*ou,sT=1-Jn/4-3*g0/64-5*m0/256,qI=3*Jn/8+3*g0/32+45*m0/1024,VI=15*g0/256+45*m0/1024,YI=35*m0/3072,XI=3/2*ou-27/32*w1+269/512*nT,WI=21/16*iT-55/32*T1,KI=151/96*w1-417/128*nT,ZI=1097/512*T1,wg=6378137;function $I(i,t,e){const n=i-5e5,o=(e.north?t:t-1e7)/Mg/(wg*sT),l=o+XI*Math.sin(2*o)+WI*Math.sin(4*o)+KI*Math.sin(6*o)+ZI*Math.sin(8*o),c=Math.sin(l),f=c*c,g=Math.cos(l),m=c/g,p=m*m,v=p*p,x=1-Jn*f,E=Math.sqrt(1-Jn*f),b=wg/E,M=(1-Jn)/x,w=ho*g**2,R=w*w,A=n/(b*Mg),T=A*A,L=T*A,I=L*A,P=I*A,k=P*A,Y=l-m/M*(T/2-I/24*(5+3*p+10*w-4*R-9*ho))+k/720*(61+90*p+298*w+45*v-252*ho-3*R);let F=(A-L/6*(1+2*p+w)+P/120*(5-2*w+28*p-3*R+8*ho+24*v))/g;return F=w_(F+Ma(rT(e.number)),-Math.PI,Math.PI),[bS(F),bS(Y)]}const TS=-80,CS=84,QI=-180,JI=180;function tL(i,t,e){i=w_(i,QI,JI),t<TS?t=TS:t>CS&&(t=CS);const n=Ma(t),s=Math.sin(n),r=Math.cos(n),o=s/r,l=o*o,c=l*l,f=Ma(i),g=rT(e.number),m=Ma(g),p=wg/Math.sqrt(1-Jn*s**2),v=ho*r**2,x=r*w_(f-m,-Math.PI,Math.PI),E=x*x,b=E*x,M=b*x,w=M*x,R=w*x,A=wg*(sT*n-qI*Math.sin(2*n)+VI*Math.sin(4*n)-YI*Math.sin(6*n)),T=Mg*p*(x+b/6*(1-l+v)+w/120*(5-18*l+c+72*v-58*ho))+5e5;let L=Mg*(A+p*o*(E/2+M/24*(5-l+9*v+4*v**2)+R/720*(61-58*l+c+600*v-330*ho)));return e.north||(L+=1e7),[T,L]}function rT(i){return(i-1)*6-180+3}const eL=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function aT(i){let t=0;for(const s of eL){const r=i.match(s);if(r){t=parseInt(r[1]);break}}if(!t)return null;let e=0,n=!1;return t>32700&&t<32761?e=t-32700:t>32600&&t<32661&&(n=!0,e=t-32600),e?{number:e,north:n}:null}function RS(i,t){return function(e,n,s,r){const o=e.length;s=s>1?s:2,r=r??s,n||(s>2?n=e.slice():n=new Array(o));for(let l=0;l<o;l+=r){const c=e[l],f=e[l+1],g=i(c,f,t);n[l]=g[0],n[l+1]=g[1]}return n}}function iL(i){return aT(i)?new vu({code:i,units:"m"}):null}function nL(i){const t=aT(i.getCode());return t?{forward:RS(tL,t),inverse:RS($I,t)}:null}const sL=63710088e-1;function AS(i,t,e){e=e||sL;const n=Ma(i[1]),s=Ma(t[1]),r=(s-n)/2,o=Ma(t[0]-i[0])/2,l=Math.sin(r)*Math.sin(r)+Math.sin(o)*Math.sin(o)*Math.cos(n)*Math.cos(s);return 2*e*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))}const rL=[nL],aL=[iL];let C_=!0;function oT(i){C_=!1}function C1(i,t){if(t!==void 0){for(let e=0,n=i.length;e<n;++e)t[e]=i[e];t=t}else t=i.slice();return t}function Tg(i){HI(i.getCode(),i),Ro(i,i,C1)}function oL(i){i.forEach(Tg)}function ee(i){if(typeof i!="string")return i;const t=rg(i);if(t)return t;for(const e of aL){const n=e(i);if(n)return n}return null}function lh(i,t,e,n){i=ee(i);let s;const r=i.getPointResolutionFunc();if(r){if(s=r(t,e),n&&n!==i.getUnits()){const o=i.getMetersPerUnit();o&&(s=s*o/Mr[n])}}else{const o=i.getUnits();if(o=="degrees"&&!n||n=="degrees")s=t;else{const l=Uh(i,ee("EPSG:4326"));if(!l&&o!=="degrees")s=t*i.getMetersPerUnit();else{let f=[e[0]-t/2,e[1],e[0]+t/2,e[1],e[0],e[1]-t/2,e[0],e[1]+t/2];f=l(f,f,2);const g=AS(f.slice(0,2),f.slice(2,4)),m=AS(f.slice(4,6),f.slice(6,8));s=(g+m)/2}const c=n?Mr[n]:i.getMetersPerUnit();c!==void 0&&(s/=c)}}return s}function R_(i){oL(i),i.forEach(function(t){i.forEach(function(e){t!==e&&Ro(t,e,C1)})})}function lL(i,t,e,n){i.forEach(function(s){t.forEach(function(r){Ro(s,r,e),Ro(r,s,n)})})}function R1(i,t){return i?typeof i=="string"?ee(i):i:ee(t)}function A_(i){return(function(t,e,n,s){const r=t.length;n=n!==void 0?n:2,s=s??n,e=e!==void 0?e:new Array(r);for(let o=0;o<r;o+=s){const l=i(t.slice(o,o+n)),c=l.length;for(let f=0,g=s;f<g;++f)e[o+f]=f>=c?t[o+f]:l[f]}return e})}function uL(i,t,e,n){const s=ee(i),r=ee(t);Ro(s,r,A_(e)),Ro(r,s,A_(n))}function Cg(i,t){return oT(),p0(i,"EPSG:4326",t!==void 0?t:"EPSG:3857")}function ki(i,t){if(i===t)return!0;const e=i.getUnits()===t.getUnits();return(i.getCode()===t.getCode()||Uh(i,t)===C1)&&e}function Uh(i,t){const e=i.getCode(),n=t.getCode();let s=ag(e,n);if(s)return s;let r=null,o=null;for(const c of rL)r||(r=c(i)),o||(o=c(t));if(!r&&!o)return null;const l="EPSG:4326";if(o)if(r)s=yy(r.inverse,o.forward);else{const c=ag(e,l);c&&(s=yy(c,o.forward))}else{const c=ag(l,n);c&&(s=yy(r.inverse,c))}return s&&(Tg(i),Tg(t),Ro(i,t,s)),s}function yy(i,t){return function(e,n,s,r){return n=i(e,n,s,r),t(n,n,s,r)}}function Ao(i,t){const e=ee(i),n=ee(t);return Uh(e,n)}function p0(i,t,e){const n=Ao(t,e);if(!n){const s=ee(t).getCode(),r=ee(e).getCode();throw new Error(`No transform available between ${s} and ${r}`)}return n(i,void 0,i.length)}function og(i,t,e,n){const s=Ao(t,e);return Q4(i,s,void 0,n)}let cL=null;function hL(){return cL}function O_(i,t){return i}function hr(i,t){return C_&&!Sg(i,[0,0])&&i[0]>=-180&&i[0]<=180&&i[1]>=-90&&i[1]<=90&&(C_=!1,V4("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),i}function A1(i,t){return i}function Ds(i,t){return i}function OS(i,t,e){return function(n){let s,r;if(i.canWrapX()){const o=i.getExtent(),l=Ht(o);n=n.slice(0),r=eT(n,i,l),r&&(n[0]=n[0]-r*l),n[0]=Oe(n[0],o[0],o[2]),n[1]=Oe(n[1],o[1],o[3]),s=e(n)}else s=e(n);return r&&t.canWrapX()&&(s[0]+=r*Ht(t.getExtent())),s}}function fL(){R_(ES),R_(MS),lL(MS,ES,FI,jI)}fL();function dL(i){const t=Object.keys(i.defs),e=t.length;let n,s;for(n=0;n<e;++n){const r=t[n];if(!rg(r)){const o=i.defs(r);let l=o.units;!l&&o.projName==="longlat"&&(l="degrees"),Tg(new vu({code:r,axisOrientation:o.axis,metersPerUnit:o.to_meter,units:l}))}}for(n=0;n<e;++n){const r=t[n],o=rg(r);for(s=0;s<e;++s){const l=t[s],c=rg(l);if(!ag(r,l))if(i.defs[r]===i.defs[l])R_([o,c]);else{const f=i(r,l);uL(o,c,OS(o,c,f.forward),OS(c,o,f.inverse))}}}}const wd="ol-hidden",Hh="ol-unselectable",O1="ol-control",DS="ol-collapsed",gL=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),IS=["style","variant","weight","size","lineHeight","family"],D_={normal:400,bold:700},I_=function(i){const t=i.match(gL);if(!t)return null;const e={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let n=0,s=IS.length;n<s;++n){const r=t[n+1];r!==void 0&&(e[IS[n]]=typeof r=="string"?r.trim():r)}return isNaN(Number(e.weight))&&e.weight in D_&&(e.weight=D_[e.weight]),e.families=e.family.split(/,\s?/).map(n=>n.trim().replace(/^['"]|['"]$/g,"")),e},la={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},lu={PROPERTYCHANGE:"propertychange"},St={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class qh{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function mL(i,t,e){let n,s;e=e||Ls;let r=0,o=i.length,l=!1;for(;r<o;)n=r+(o-r>>1),s=+e(i[n],t),s<0?r=n+1:(o=n,l=!s);return l?r:~r}function Ls(i,t){return i>t?1:i<t?-1:0}function pL(i,t){return i<t?1:i>t?-1:0}function y0(i,t,e){if(i[0]<=t)return 0;const n=i.length;if(t<=i[n-1])return n-1;if(typeof e=="function"){for(let s=1;s<n;++s){const r=i[s];if(r===t)return s;if(r<t)return e(t,i[s-1],r)>0?s-1:s}return n-1}if(e>0){for(let s=1;s<n;++s)if(i[s]<t)return s-1;return n-1}if(e<0){for(let s=1;s<n;++s)if(i[s]<=t)return s;return n-1}for(let s=1;s<n;++s){if(i[s]==t)return s;if(i[s]<t)return i[s-1]-t<t-i[s]?s-1:s}return n-1}function yL(i,t,e){for(;t<e;){const n=i[t];i[t]=i[e],i[e]=n,++t,--e}}function Ps(i,t){const e=Array.isArray(t)?t:[t],n=e.length;for(let s=0;s<n;s++)i[i.length]=e[s]}function Ia(i,t){const e=i.length;if(e!==t.length)return!1;for(let n=0;n<e;n++)if(i[n]!==t[n])return!1;return!0}function _L(i,t,e){const n=t||Ls;return i.every(function(s,r){if(r===0)return!0;const o=n(i[r-1],s);return!(o>0||o===0)})}function uh(){return!0}function _0(){return!1}function ch(){}function lT(i){let t,e,n;return function(){const s=Array.prototype.slice.call(arguments);return(!e||this!==n||!Ia(s,e))&&(n=this,e=s,t=i.apply(this,arguments)),t}}function uu(i){function t(){let e;try{e=i()}catch(n){return Promise.reject(n)}return e instanceof Promise?e:Promise.resolve(e)}return t()}class xs{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}class Vh extends qh{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const n=this.listeners_||(this.listeners_={}),s=n[t]||(n[t]=[]);s.includes(e)||s.push(e)}dispatchEvent(t){const e=typeof t=="string",n=e?t:t.type,s=this.listeners_&&this.listeners_[n];if(!s)return;const r=e?new xs(t):t;r.target||(r.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),l=this.pendingRemovals_||(this.pendingRemovals_={});n in o||(o[n]=0,l[n]=0),++o[n];let c;for(let f=0,g=s.length;f<g;++f)if("handleEvent"in s[f]?c=s[f].handleEvent(r):c=s[f].call(this,r),c===!1||r.propagationStopped){c=!1;break}if(--o[n]===0){let f=l[n];for(delete l[n];f--;)this.removeEventListener(n,ch);delete o[n]}return c}disposeInternal(){this.listeners_&&Bh(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,e){if(!this.listeners_)return;const n=this.listeners_[t];if(!n)return;const s=n.indexOf(e);s!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(n[s]=ch,++this.pendingRemovals_[t]):(n.splice(s,1),n.length===0&&delete this.listeners_[t]))}}function Wt(i,t,e,n,s){if(s){const o=e;e=function(l){return i.removeEventListener(t,e),o.call(n??this,l)}}else n&&n!==i&&(e=e.bind(n));const r={target:i,type:t,listener:e};return i.addEventListener(t,e),r}function Rg(i,t,e,n){return Wt(i,t,e,n,!0)}function Me(i){i&&i.target&&(i.target.removeEventListener(i.type,i.listener),Bh(i))}class Yh extends Vh{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(St.CHANGE)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const n=t.length,s=new Array(n);for(let r=0;r<n;++r)s[r]=Wt(this,t[r],e);return s}return Wt(this,t,e)}onceInternal(t,e){let n;if(Array.isArray(t)){const s=t.length;n=new Array(s);for(let r=0;r<s;++r)n[r]=Rg(this,t[r],e)}else n=Rg(this,t,e);return e.ol_key=n,n}unInternal(t,e){const n=e.ol_key;if(n)vL(n);else if(Array.isArray(t))for(let s=0,r=t.length;s<r;++s)this.removeEventListener(t[s],e);else this.removeEventListener(t,e)}}Yh.prototype.on;Yh.prototype.once;Yh.prototype.un;function vL(i){if(Array.isArray(i))for(let t=0,e=i.length;t<e;++t)Me(i[t]);else Me(i)}function Ct(){throw new Error("Unimplemented abstract method.")}let xL=0;function At(i){return i.ol_uid||(i.ol_uid=String(++xL))}class LS extends xs{constructor(t,e,n){super(t),this.key=e,this.oldValue=n}}class Us extends Yh{constructor(t){super(),this.on,this.once,this.un,At(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,e){let n;n=`change:${t}`,this.hasListener(n)&&this.dispatchEvent(new LS(n,t,e)),n=lu.PROPERTYCHANGE,this.hasListener(n)&&this.dispatchEvent(new LS(n,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,n){const s=this.values_||(this.values_={});if(n)s[t]=e;else{const r=s[t];s[t]=e,r!==e&&this.notify(t,r)}}setProperties(t,e){for(const n in t)this.set(n,t[n],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const n=this.values_[t];delete this.values_[t],Aa(this.values_)&&(this.values_=null),e||this.notify(t,n)}}}class v0 extends Us{constructor(t){super();const e=t.element;e&&!t.target&&!e.style.pointerEvents&&(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&this.element?.remove();for(let e=0,n=this.listenerKeys.length;e<n;++e)Me(this.listenerKeys[e]);if(this.listenerKeys.length=0,this.map_=t,t){const e=this.target_??t.getOverlayContainerStopEvent();this.element&&e.appendChild(this.element),this.render!==ch&&this.listenerKeys.push(Wt(t,la.POSTRENDER,this.render,this)),t.render()}}render(t){}setTarget(t){this.target_=typeof t=="string"?document.getElementById(t):t}}const _y="units",bL=[1,2,5],xc=25.4/.28;class EL extends v0{constructor(t){t=t||{};const e=document.createElement("div");e.style.pointerEvents="none",super({element:e,render:t.render,target:t.target}),this.on,this.once,this.un;const n=t.className!==void 0?t.className:t.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=n+"-inner",this.element.className=n+" "+Hh,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=t.minWidth!==void 0?t.minWidth:64,this.maxWidth_=t.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(_y,this.handleUnitsChanged_),this.setUnits(t.units||"metric"),this.scaleBar_=t.bar||!1,this.scaleBarSteps_=t.steps||4,this.scaleBarText_=t.text||!1,this.dpi_=t.dpi||void 0}getUnits(){return this.get(_y)}handleUnitsChanged_(){this.updateElement_()}setUnits(t){this.set(_y,t)}setDpi(t){this.dpi_=t}updateElement_(){const t=this.viewState_;if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const e=t.center,n=t.projection,s=this.getUnits(),r=s=="degrees"?"degrees":"m";let o=lh(n,t.resolution,e,r);const l=this.minWidth_*(this.dpi_||xc)/xc,c=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||xc)/xc:void 0;let f=l*o,g="";if(s=="degrees"){const R=Mr.degrees;f*=R,f<R/60?(g="",o*=3600):f<R?(g="",o*=60):g=""}else if(s=="imperial")f<.9144?(g="in",o/=.0254):f<1609.344?(g="ft",o/=.3048):(g="mi",o/=1609.344);else if(s=="nautical")o/=1852,g="NM";else if(s=="metric")f<1e-6?(g="nm",o*=1e9):f<.001?(g="m",o*=1e6):f<1?(g="mm",o*=1e3):f<1e3?g="m":(g="km",o/=1e3);else if(s=="us")f<.9144?(g="in",o*=39.37):f<1609.344?(g="ft",o/=.30480061):(g="mi",o/=1609.3472);else throw new Error("Invalid units");let m=3*Math.floor(Math.log(l*o)/Math.log(10)),p,v,x,E=0,b,M;for(;;){x=Math.floor(m/3);const R=Math.pow(10,x);if(p=bL[(m%3+3)%3]*R,v=Math.round(p/o),isNaN(v)){this.element.style.display="none",this.renderedVisible_=!1;return}if(c!==void 0&&v>=c){p=E,v=b,x=M;break}else if(v>=l)break;E=p,b=v,M=x,++m}const w=this.scaleBar_?this.createScaleBar(v,p,g):p.toFixed(x<0?-x:0)+" "+g;this.renderedHTML_!=w&&(this.innerElement_.innerHTML=w,this.renderedHTML_=w),this.renderedWidth_!=v&&(this.innerElement_.style.width=v+"px",this.renderedWidth_=v),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(t,e,n){const s=this.getScaleForResolution(),r=s<1?Math.round(1/s).toLocaleString()+" : 1":"1 : "+Math.round(s).toLocaleString(),o=this.scaleBarSteps_,l=t/o,c=[this.createMarker("absolute")];for(let g=0;g<o;++g){const m=g%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";c.push(`<div><div class="ol-scale-singlebar ${m}" style="width: ${l}px;"></div>`+this.createMarker("relative")+(g%2===0||o===2?this.createStepText(g,t,!1,e,n):"")+"</div>")}return c.push(this.createStepText(o,t,!0,e,n)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${t}px;">`+r+"</div>":"")+c.join("")}createMarker(t){return`<div class="ol-scale-step-marker" style="position: ${t}; top: ${t==="absolute"?3:-10}px;"></div>`}createStepText(t,e,n,s,r){const l=(t===0?0:Math.round(s/this.scaleBarSteps_*t*100)/100)+(t===0?"":" "+r),c=t===0?-3:e/this.scaleBarSteps_*-1,f=t===0?0:e/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${c}px;text-align: ${t===0?"left":"center"};min-width: ${f}px;left: ${n?e+"px":"unset"};">`+l+"</div>"}getScaleForResolution(){const t=lh(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),e=this.dpi_||xc,n=1e3/25.4;return t*n*e}render(t){const e=t.frameState;e?this.viewState_=e.viewState:this.viewState_=null,this.updateElement_()}}const rn={ADD:"add",REMOVE:"remove"},PS={LENGTH:"length"};class Td extends xs{constructor(t,e,n){super(t),this.element=e,this.index=n}}class Xn extends Us{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t??[],this.unique_)for(let n=1,s=this.array_.length;n<s;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,n=t.length;e<n;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let n=0,s=e.length;n<s;++n)t(e[n],n,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(PS.LENGTH)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new Td(rn.ADD,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let n=0,s=e.length;n<s;++n)if(e[n]===t)return this.removeAt(n)}removeAt(t){if(t<0||t>=this.getLength())return;const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new Td(rn.REMOVE,e,t)),e}setAt(t,e){const n=this.getLength();if(t>=n){this.insertAt(t,e);return}if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);const s=this.array_[t];this.array_[t]=e,this.dispatchEvent(new Td(rn.REMOVE,s,t)),this.dispatchEvent(new Td(rn.ADD,e,t))}updateLength_(){this.set(PS.LENGTH,this.array_.length)}assertUnique_(t,e){const n=this.array_;for(let s=0,r=n.length;s<r;++s)if(n[s]===t&&s!==e)throw new Error("Duplicate item added to a unique collection")}}const Oo=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",SL=Oo.includes("safari")&&!Oo.includes("chrom");SL&&(Oo.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Oo));const ML=Oo.includes("webkit")&&!Oo.includes("edge"),uT=Oo.includes("macintosh"),wL=typeof devicePixelRatio<"u"?devicePixelRatio:1,ji=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,cT=typeof Image<"u"&&Image.prototype.decode,TL=typeof createImageBitmap=="function",hT=(function(){let i=!1;try{const t=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return i})();function Ue(i,t,e,n){let s;return e&&e.length?s=e.shift():ji?s=new class extends OffscreenCanvas{style={}}(i??300,t??150):s=document.createElement("canvas"),i&&(s.width=i),t&&(s.height=t),s.getContext("2d",n)}let vy;function Ag(){return vy||(vy=Ue(1,1)),vy}function Xh(i){const t=i.canvas;t.width=1,t.height=1,i.clearRect(0,0,1,1)}function NS(i,t){const e=t.parentNode;e&&e.replaceChild(i,t)}function CL(i){for(;i.lastChild;)i.lastChild.remove()}function RL(i,t){const e=i.childNodes;for(let n=0;;++n){const s=e[n],r=t[n];if(!s&&!r)break;if(s!==r){if(!s){i.appendChild(r);continue}if(!r){i.removeChild(s),--n;continue}i.insertBefore(r,s)}}}function fT(){return new Proxy({childNodes:[],appendChild:function(t){return this.childNodes.push(t),t},remove:function(){},removeChild:function(t){const e=this.childNodes.indexOf(t);if(e===-1)throw new Error("Node to remove was not found");return this.childNodes.splice(e,1),t},insertBefore:function(t,e){const n=this.childNodes.indexOf(e);if(n===-1)throw new Error("Reference node not found");return this.childNodes.splice(n,0,t),t},style:{}},{get(t,e,n){return e==="firstElementChild"?t.childNodes.length>0?t.childNodes[0]:null:Reflect.get(t,e,n)}})}function ga(i){return typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas}class AL extends v0{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=t.collapsed!==void 0?t.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=t.collapsible!==void 0,this.collapsible_=t.collapsible!==void 0?t.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=t.attributions;const e=t.className!==void 0?t.className:"ol-attribution",n=t.tipLabel!==void 0?t.tipLabel:"Attributions",s=t.expandClassName!==void 0?t.expandClassName:e+"-expand",r=t.collapseLabel!==void 0?t.collapseLabel:"",o=t.collapseClassName!==void 0?t.collapseClassName:e+"-collapse";typeof r=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r,this.collapseLabel_.className=o):this.collapseLabel_=r;const l=t.label!==void 0?t.label:"i";typeof l=="string"?(this.label_=document.createElement("span"),this.label_.textContent=l,this.label_.className=s):this.label_=l;const c=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(c),this.toggleButton_.addEventListener(St.CLICK,this.handleClick_.bind(this),!1);const f=e+" "+Hh+" "+O1+(this.collapsed_&&this.collapsible_?" "+DS:"")+(this.collapsible_?"":" ol-uncollapsible"),g=this.element;g.className=f,g.appendChild(this.toggleButton_),g.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const e=this.getMap().getAllLayers(),n=new Set(e.flatMap(s=>s.getAttributions(t)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(s=>n.add(s)):n.add(this.attributions_)),!this.overrideCollapsible_){const s=!e.some(r=>r.getSource()?.getAttributionsCollapsible()===!1);this.setCollapsible(s)}return Array.from(n)}async updateElement_(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const e=await Promise.all(this.collectSourceAttributions_(t).map(s=>uu(()=>s))),n=e.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!Ia(e,this.renderedAttributions_)){CL(this.ulElement_);for(let s=0,r=e.length;s<r;++s){const o=document.createElement("li");o.innerHTML=e[s],this.ulElement_.appendChild(o)}this.renderedAttributions_=e}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(DS),this.collapsed_?NS(this.collapseLabel_,this.label_):NS(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}}function dT(i){return Math.pow(i,3)}function xu(i){return 1-dT(1-i)}function OL(i){return 3*i*i-2*i*i*i}function DL(i){return i}class IL extends v0{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const e=t.className!==void 0?t.className:"ol-rotate",n=t.label!==void 0?t.label:"",s=t.compassClassName!==void 0?t.compassClassName:"ol-compass";this.label_=null,typeof n=="string"?(this.label_=document.createElement("span"),this.label_.className=s,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(s));const r=t.tipLabel?t.tipLabel:"Reset rotation",o=document.createElement("button");o.className=e+"-reset",o.setAttribute("type","button"),o.title=r,o.appendChild(this.label_),o.addEventListener(St.CLICK,this.handleClick_.bind(this),!1);const l=e+" "+Hh+" "+O1,c=this.element;c.className=l,c.appendChild(o),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=t.duration!==void 0?t.duration:250,this.autoHide_=t.autoHide!==void 0?t.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(wd)}handleClick_(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const e=this.getMap().getView();if(!e)return;const n=e.getRotation();n!==void 0&&(this.duration_>0&&n%(2*Math.PI)!==0?e.animate({rotation:0,duration:this.duration_,easing:xu}):e.setRotation(0))}render(t){const e=t.frameState;if(!e)return;const n=e.viewState.rotation;if(n!=this.rotation_){const s="rotate("+n+"rad)";if(this.autoHide_){const r=this.element.classList.contains(wd);!r&&n===0?this.element.classList.add(wd):r&&n!==0&&this.element.classList.remove(wd)}this.label_.style.transform=s}this.rotation_=n}}class LL extends v0{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const e=t.className!==void 0?t.className:"ol-zoom",n=t.delta!==void 0?t.delta:1,s=t.zoomInClassName!==void 0?t.zoomInClassName:e+"-in",r=t.zoomOutClassName!==void 0?t.zoomOutClassName:e+"-out",o=t.zoomInLabel!==void 0?t.zoomInLabel:"+",l=t.zoomOutLabel!==void 0?t.zoomOutLabel:"",c=t.zoomInTipLabel!==void 0?t.zoomInTipLabel:"Zoom in",f=t.zoomOutTipLabel!==void 0?t.zoomOutTipLabel:"Zoom out",g=document.createElement("button");g.className=s,g.setAttribute("type","button"),g.title=c,g.appendChild(typeof o=="string"?document.createTextNode(o):o),g.addEventListener(St.CLICK,this.handleClick_.bind(this,n),!1);const m=document.createElement("button");m.className=r,m.setAttribute("type","button"),m.title=f,m.appendChild(typeof l=="string"?document.createTextNode(l):l),m.addEventListener(St.CLICK,this.handleClick_.bind(this,-n),!1);const p=e+" "+Hh+" "+O1,v=this.element;v.className=p,v.appendChild(g),v.appendChild(m),this.duration_=t.duration!==void 0?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const n=this.getMap().getView();if(!n)return;const s=n.getZoom();if(s!==void 0){const r=n.getConstrainedZoom(s+t);this.duration_>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:r,duration:this.duration_,easing:xu})):n.setZoom(r)}}}function gT(i){i=i||{};const t=new Xn;return(i.zoom!==void 0?i.zoom:!0)&&t.push(new LL(i.zoomOptions)),(i.rotate!==void 0?i.rotate:!0)&&t.push(new IL(i.rotateOptions)),(i.attribution!==void 0?i.attribution:!0)&&t.push(new AL(i.attributionOptions)),t}function se(i,t){if(!i)throw new Error(t)}class Wh extends Us{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){const e=t;this.setGeometry(e)}else{const e=t;this.setProperties(e)}}clone(){const t=new Wh(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const e=this.getGeometry();e&&t.setGeometry(e.clone());const n=this.getStyle();return n&&t.setStyle(n),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Me(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=Wt(t,St.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?PL(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function PL(i){if(typeof i=="function")return i;let t;return Array.isArray(i)?t=i:(se(typeof i.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),t=[i]),function(){return t}}const mT=new Array(6);function dn(){return[1,0,0,1,0,0]}function zS(i){return I1(i,1,0,0,1,0,0)}function D1(i,t){const e=i[0],n=i[1],s=i[2],r=i[3],o=i[4],l=i[5],c=t[0],f=t[1],g=t[2],m=t[3],p=t[4],v=t[5];return i[0]=e*c+s*f,i[1]=n*c+r*f,i[2]=e*g+s*m,i[3]=n*g+r*m,i[4]=e*p+s*v+o,i[5]=n*p+r*v+l,i}function I1(i,t,e,n,s,r,o){return i[0]=t,i[1]=e,i[2]=n,i[3]=s,i[4]=r,i[5]=o,i}function NL(i,t){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i}function oi(i,t){const e=t[0],n=t[1];return t[0]=i[0]*e+i[2]*n+i[4],t[1]=i[1]*e+i[3]*n+i[5],t}function xy(i,t,e){return D1(i,I1(mT,t,0,0,e,0,0))}function zL(i,t,e){return D1(i,I1(mT,1,0,0,1,t,e))}function Bs(i,t,e,n,s,r,o,l){const c=Math.sin(r),f=Math.cos(r);return i[0]=n*f,i[1]=s*c,i[2]=-n*c,i[3]=s*f,i[4]=o*n*f-l*n*c+t,i[5]=o*s*c+l*s*f+e,i}function pT(i,t){const e=GL(t);se(e!==0,"Transformation matrix cannot be inverted");const n=t[0],s=t[1],r=t[2],o=t[3],l=t[4],c=t[5];return i[0]=o/e,i[1]=-s/e,i[2]=-r/e,i[3]=n/e,i[4]=(r*c-o*l)/e,i[5]=-(n*c-s*l)/e,i}function GL(i){return i[0]*i[3]-i[1]*i[2]}const kL=[1e5,1e5,1e5,1e5,2,2];function FL(i){return"matrix("+i.join(", ")+")"}function L_(i){return i.substring(7,i.length-1).split(",").map(parseFloat)}function jL(i,t){const e=L_(i),n=L_(t);for(let s=0;s<6;++s)if(Math.round((e[s]-n[s])*kL[s])!==0)return!1;return!0}function wa(i,t,e,n,s,r,o){r=r||[],o=o||2;let l=0;for(let c=t;c<e;c+=n){const f=i[c],g=i[c+1];r[l++]=s[0]*f+s[2]*g+s[4],r[l++]=s[1]*f+s[3]*g+s[5];for(let m=2;m<o;m++)r[l++]=i[c+m]}return r&&r.length!=l&&(r.length=l),r}function yT(i,t,e,n,s,r,o){o=o||[];const l=Math.cos(s),c=Math.sin(s),f=r[0],g=r[1];let m=0;for(let p=t;p<e;p+=n){const v=i[p]-f,x=i[p+1]-g;o[m++]=f+v*l-x*c,o[m++]=g+v*c+x*l;for(let E=p+2;E<p+n;++E)o[m++]=i[E]}return o&&o.length!=m&&(o.length=m),o}function BL(i,t,e,n,s,r,o,l){l=l||[];const c=o[0],f=o[1];let g=0;for(let m=t;m<e;m+=n){const p=i[m]-c,v=i[m+1]-f;l[g++]=c+s*p,l[g++]=f+r*v;for(let x=m+2;x<m+n;++x)l[g++]=i[x]}return l&&l.length!=g&&(l.length=g),l}function UL(i,t,e,n,s,r,o){o=o||[];let l=0;for(let c=t;c<e;c+=n){o[l++]=i[c]+s,o[l++]=i[c+1]+r;for(let f=c+2;f<c+n;++f)o[l++]=i[f]}return o&&o.length!=l&&(o.length=l),o}const GS=dn(),HL=[NaN,NaN];class _T extends Us{constructor(){super(),this.extent_=ts(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=lT((t,e,n)=>{if(!n)return this.getSimplifiedGeometry(e);const s=this.clone();return s.applyTransform(n),s.getSimplifiedGeometry(e)})}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return Ct()}closestPointXY(t,e,n,s){return Ct()}containsXY(t,e){return this.closestPointXY(t,e,HL,Number.MIN_VALUE)===0}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return Ct()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&_u(e),this.extentRevision_=this.getRevision()}return AI(this.extent_,t)}rotate(t,e){Ct()}scale(t,e,n){Ct()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return Ct()}getType(){return Ct()}applyTransform(t){Ct()}intersectsExtent(t){return Ct()}translate(t,e){Ct()}transform(t,e){const n=ee(t),s=n.getUnits()=="tile-pixels"?function(r,o,l){const c=n.getExtent(),f=n.getWorldExtent(),g=li(f)/li(c);Bs(GS,f[0],f[3],g,-g,0,0,0);const m=wa(r,0,r.length,l,GS,o),p=Ao(n,e);return p?p(m,m,l):m}:Ao(n,e);return this.applyTransform(s),this}}class ko extends _T{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(t){return E1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return Ct()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=kS(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){Ct()}setLayout(t,e,n){let s;if(t)s=kS(t);else{for(let r=0;r<n;++r){if(e.length===0){this.layout="XY",this.stride=2;return}e=e[0]}s=e.length,t=Fo(s)}this.layout=t,this.stride=s}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(t,e){const n=this.getFlatCoordinates();if(n){const s=this.getStride();yT(n,0,n.length,s,t,e,n),this.changed()}}scale(t,e,n){e===void 0&&(e=t),n||(n=Dn(this.getExtent()));const s=this.getFlatCoordinates();if(s){const r=this.getStride();BL(s,0,s.length,r,t,e,n,s),this.changed()}}translate(t,e){const n=this.getFlatCoordinates();if(n){const s=this.getStride();UL(n,0,n.length,s,t,e,n),this.changed()}}}function Fo(i){let t;return i==2?t="XY":i==3?t="XYZ":i==4&&(t="XYZM"),t}function kS(i){let t;return i=="XY"?t=2:i=="XYZ"||i=="XYM"?t=3:i=="XYZM"&&(t=4),t}function qL(i,t,e){const n=i.getFlatCoordinates();if(!n)return null;const s=i.getStride();return wa(n,0,n.length,s,t,e)}function vT(i,t,e,n){let s=0;const r=i[e-n],o=i[e-n+1];let l=0,c=0;for(;t<e;t+=n){const f=i[t]-r,g=i[t+1]-o;s+=c*f-l*g,l=f,c=g}return s/2}function xT(i,t,e,n){let s=0;for(let r=0,o=e.length;r<o;++r){const l=e[r];s+=vT(i,t,l,n),t=l}return s}function VL(i,t,e,n){let s=0;for(let r=0,o=e.length;r<o;++r){const l=e[r];s+=xT(i,t,l,n),t=l[l.length-1]}return s}function FS(i,t,e,n,s,r,o){const l=i[t],c=i[t+1],f=i[e]-l,g=i[e+1]-c;let m;if(f===0&&g===0)m=t;else{const p=((s-l)*f+(r-c)*g)/(f*f+g*g);if(p>1)m=e;else if(p>0){for(let v=0;v<n;++v)o[v]=wn(i[t+v],i[e+v],p);o.length=n;return}else m=t}for(let p=0;p<n;++p)o[p]=i[m+p];o.length=n}function L1(i,t,e,n,s){let r=i[t],o=i[t+1];for(t+=n;t<e;t+=n){const l=i[t],c=i[t+1],f=_o(r,o,l,c);f>s&&(s=f),r=l,o=c}return s}function P1(i,t,e,n,s){for(let r=0,o=e.length;r<o;++r){const l=e[r];s=L1(i,t,l,n,s),t=l}return s}function YL(i,t,e,n,s){for(let r=0,o=e.length;r<o;++r){const l=e[r];s=P1(i,t,l,n,s),t=l[l.length-1]}return s}function N1(i,t,e,n,s,r,o,l,c,f,g){if(t==e)return f;let m,p;if(s===0){if(p=_o(o,l,i[t],i[t+1]),p<f){for(m=0;m<n;++m)c[m]=i[t+m];return c.length=n,p}return f}g=g||[NaN,NaN];let v=t+n;for(;v<e;)if(FS(i,v-n,v,n,o,l,g),p=_o(o,l,g[0],g[1]),p<f){for(f=p,m=0;m<n;++m)c[m]=g[m];c.length=n,v+=n}else v+=n*Math.max((Math.sqrt(p)-Math.sqrt(f))/s|0,1);if(r&&(FS(i,e-n,t,n,o,l,g),p=_o(o,l,g[0],g[1]),p<f)){for(f=p,m=0;m<n;++m)c[m]=g[m];c.length=n}return f}function z1(i,t,e,n,s,r,o,l,c,f,g){g=g||[NaN,NaN];for(let m=0,p=e.length;m<p;++m){const v=e[m];f=N1(i,t,v,n,s,r,o,l,c,f,g),t=v}return f}function XL(i,t,e,n,s,r,o,l,c,f,g){g=g||[NaN,NaN];for(let m=0,p=e.length;m<p;++m){const v=e[m];f=z1(i,t,v,n,s,r,o,l,c,f,g),t=v[v.length-1]}return f}function WL(i,t,e,n){for(let s=0,r=e.length;s<r;++s)i[t++]=e[s];return t}function x0(i,t,e,n){for(let s=0,r=e.length;s<r;++s){const o=e[s];for(let l=0;l<n;++l)i[t++]=o[l]}return t}function Kh(i,t,e,n,s){s=s||[];let r=0;for(let o=0,l=e.length;o<l;++o){const c=x0(i,t,e[o],n);s[r++]=c,t=c}return s.length=r,s}function bT(i,t,e,n,s){s=s||[];let r=0;for(let o=0,l=e.length;o<l;++o){const c=Kh(i,t,e[o],n,s[r]);c.length===0&&(c[0]=t),s[r++]=c,t=c[c.length-1]}return s.length=r,s}function ma(i,t,e,n,s){s=s!==void 0?s:[];let r=0;for(let o=t;o<e;o+=n)s[r++]=i.slice(o,o+n);return s.length=r,s}function hh(i,t,e,n,s){s=s!==void 0?s:[];let r=0;for(let o=0,l=e.length;o<l;++o){const c=e[o];s[r++]=ma(i,t,c,n,s[r]),t=c}return s.length=r,s}function P_(i,t,e,n,s){s=s!==void 0?s:[];let r=0;for(let o=0,l=e.length;o<l;++o){const c=e[o];s[r++]=c.length===1&&c[0]===t?[]:hh(i,t,c,n,s[r]),t=c[c.length-1]}return s.length=r,s}function b0(i,t,e,n,s,r,o){const l=(e-t)/n;if(l<3){for(;t<e;t+=n)r[o++]=i[t],r[o++]=i[t+1];return o}const c=new Array(l);c[0]=1,c[l-1]=1;const f=[t,e-n];let g=0;for(;f.length>0;){const m=f.pop(),p=f.pop();let v=0;const x=i[p],E=i[p+1],b=i[m],M=i[m+1];for(let w=p+n;w<m;w+=n){const R=i[w],A=i[w+1],T=DI(R,A,x,E,b,M);T>v&&(g=w,v=T)}v>s&&(c[(g-t)/n]=1,p+n<g&&f.push(p,g),g+n<m&&f.push(g,m))}for(let m=0;m<l;++m)c[m]&&(r[o++]=i[t+m*n],r[o++]=i[t+m*n+1]);return o}function ET(i,t,e,n,s,r,o,l){for(let c=0,f=e.length;c<f;++c){const g=e[c];o=b0(i,t,g,n,s,r,o),l.push(o),t=g}return o}function oo(i,t){return t*Math.round(i/t)}function KL(i,t,e,n,s,r,o){if(t==e)return o;let l=oo(i[t],s),c=oo(i[t+1],s);t+=n,r[o++]=l,r[o++]=c;let f,g;do if(f=oo(i[t],s),g=oo(i[t+1],s),t+=n,t==e)return r[o++]=f,r[o++]=g,o;while(f==l&&g==c);for(;t<e;){const m=oo(i[t],s),p=oo(i[t+1],s);if(t+=n,m==f&&p==g)continue;const v=f-l,x=g-c,E=m-l,b=p-c;if(v*b==x*E&&(v<0&&E<v||v==E||v>0&&E>v)&&(x<0&&b<x||x==b||x>0&&b>x)){f=m,g=p;continue}r[o++]=f,r[o++]=g,l=f,c=g,f=m,g=p}return r[o++]=f,r[o++]=g,o}function G1(i,t,e,n,s,r,o,l){for(let c=0,f=e.length;c<f;++c){const g=e[c];o=KL(i,t,g,n,s,r,o),l.push(o),t=g}return o}function ZL(i,t,e,n,s,r,o,l){for(let c=0,f=e.length;c<f;++c){const g=e[c],m=[];o=G1(i,t,g,n,s,r,o,m),l.push(m),t=g[g.length-1]}return o}class fh extends ko{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}clone(){return new fh(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,n,s){return s<zo(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(L1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),N1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,s))}getArea(){return vT(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return ma(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=b0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new fh(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=x0(this.flatCoordinates,0,t,this.stride),this.changed()}}class Do extends ko{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new Do(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,s){const r=this.flatCoordinates,o=_o(t,e,r[0],r[1]);if(o<s){const l=this.stride;for(let c=0;c<l;++c)n[c]=r[c];return n.length=l,o}return s}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(t){return X4(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return b1(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=WL(this.flatCoordinates,0,t,this.stride),this.changed()}}function $L(i,t,e,n,s){return!Z4(s,function(o){return!fo(i,t,e,n,o[0],o[1])})}function fo(i,t,e,n,s,r){let o=0,l=i[e-n],c=i[e-n+1];for(;t<e;t+=n){const f=i[t],g=i[t+1];c<=r?g>r&&(f-l)*(r-c)-(s-l)*(g-c)>0&&o++:g<=r&&(f-l)*(r-c)-(s-l)*(g-c)<0&&o--,l=f,c=g}return o!==0}function k1(i,t,e,n,s,r){if(e.length===0||!fo(i,t,e[0],n,s,r))return!1;for(let o=1,l=e.length;o<l;++o)if(fo(i,e[o-1],e[o],n,s,r))return!1;return!0}function QL(i,t,e,n,s,r){if(e.length===0)return!1;for(let o=0,l=e.length;o<l;++o){const c=e[o];if(k1(i,t,c,n,s,r))return!0;t=c[c.length-1]}return!1}function F1(i,t,e,n,s,r,o){let l,c,f,g,m,p,v;const x=s[r+1],E=[];for(let w=0,R=e.length;w<R;++w){const A=e[w];for(g=i[A-n],p=i[A-n+1],l=t;l<A;l+=n)m=i[l],v=i[l+1],(x<=p&&v<=x||p<=x&&x<=v)&&(f=(x-p)/(v-p)*(m-g)+g,E.push(f)),g=m,p=v}let b=NaN,M=-1/0;for(E.sort(Ls),g=E[0],l=1,c=E.length;l<c;++l){m=E[l];const w=Math.abs(m-g);w>M&&(f=(g+m)/2,k1(i,t,e,n,f,x)&&(b=f,M=w)),g=m}return isNaN(b)&&(b=s[r]),o?(o.push(b,x,M),o):[b,x,M]}function ST(i,t,e,n,s){let r=[];for(let o=0,l=e.length;o<l;++o){const c=e[o];r=F1(i,t,c,n,s,2*o,r),t=c[c.length-1]}return r}function MT(i,t,e,n,s){let r;for(t+=n;t<e;t+=n)if(r=s(i.slice(t-n,t),i.slice(t,t+n)),r)return r;return!1}function E0(i,t,e,n,s,r){return r=r??K4(ts(),i,t,e,n),Ze(s,r)?r[0]>=s[0]&&r[2]<=s[2]||r[1]>=s[1]&&r[3]<=s[3]?!0:MT(i,t,e,n,function(o,l){return OI(s,o,l)}):!1}function JL(i,t,e,n,s){for(let r=0,o=e.length;r<o;++r){if(E0(i,t,e[r],n,s))return!0;t=e[r]}return!1}function wT(i,t,e,n,s){return!!(E0(i,t,e,n,s)||fo(i,t,e,n,s[0],s[1])||fo(i,t,e,n,s[0],s[3])||fo(i,t,e,n,s[2],s[1])||fo(i,t,e,n,s[2],s[3]))}function TT(i,t,e,n,s){if(!wT(i,t,e[0],n,s))return!1;if(e.length===1)return!0;for(let r=1,o=e.length;r<o;++r)if($L(i,e[r-1],e[r],n,s)&&!E0(i,e[r-1],e[r],n,s))return!1;return!0}function tP(i,t,e,n,s){for(let r=0,o=e.length;r<o;++r){const l=e[r];if(TT(i,t,l,n,s))return!0;t=l[l.length-1]}return!1}function eP(i,t,e,n){for(;t<e-n;){for(let s=0;s<n;++s){const r=i[t+s];i[t+s]=i[e-n+s],i[e-n+s]=r}t+=n,e-=n}}function j1(i,t,e,n){let s=0,r=i[e-n],o=i[e-n+1];for(;t<e;t+=n){const l=i[t],c=i[t+1];s+=(l-r)*(c+o),r=l,o=c}return s===0?void 0:s>0}function B1(i,t,e,n,s){s=s!==void 0?s:!1;for(let r=0,o=e.length;r<o;++r){const l=e[r],c=j1(i,t,l,n);if(r===0){if(s&&c||!s&&!c)return!1}else if(s&&!c||!s&&c)return!1;t=l}return!0}function CT(i,t,e,n,s){for(let r=0,o=e.length;r<o;++r){const l=e[r];if(!B1(i,t,l,n,s))return!1;l.length&&(t=l[l.length-1])}return!0}function Og(i,t,e,n,s){s=s!==void 0?s:!1;for(let r=0,o=e.length;r<o;++r){const l=e[r],c=j1(i,t,l,n);(r===0?s&&c||!s&&!c:s&&!c||!s&&c)&&eP(i,t,l,n),t=l}return t}function N_(i,t,e,n,s){for(let r=0,o=e.length;r<o;++r)t=Og(i,t,e[r],n,s);return t}function RT(i,t){const e=[];let n=0,s=0,r;for(let o=0,l=t.length;o<l;++o){const c=t[o],f=j1(i,n,c,2);if(r===void 0&&(r=f),f===r)e.push(t.slice(s,o+1));else{if(e.length===0)continue;e[e.length-1].push(t[s])}s=o+1,n=c}return e}class wr extends ko{constructor(t,e,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,e!==void 0&&n?(this.setFlatCoordinates(e,t),this.ends_=n):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?Ps(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new wr(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,n,s){return s<zo(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(P1(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),z1(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,s))}containsXY(t,e){return k1(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return xT(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),Og(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,hh(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=Dn(this.getExtent());this.flatInteriorPoint_=F1(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Do(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new fh(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,n=this.ends_,s=[];let r=0;for(let o=0,l=n.length;o<l;++o){const c=n[o],f=new fh(e.slice(r,c),t);s.push(f),r=c}return s}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;B1(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Og(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=G1(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,n),new wr(e,"XY",n)}getType(){return"Polygon"}intersectsExtent(t){return TT(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=Kh(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}function jS(i){if(Go(i))throw new Error("Cannot create polygon from empty extent");const t=i[0],e=i[1],n=i[2],s=i[3],r=[t,e,t,s,n,s,n,e,t,e];return new wr(r,"XY",[r.length])}function Dg(i,t,e,n,s,r,o){let l,c;const f=(e-t)/n;if(f===1)l=t;else if(f===2)l=t,c=s;else if(f!==0){let g=i[t],m=i[t+1],p=0;const v=[0];for(let b=t+n;b<e;b+=n){const M=i[b],w=i[b+1];p+=Math.sqrt((M-g)*(M-g)+(w-m)*(w-m)),v.push(p),g=M,m=w}const x=s*p,E=mL(v,x);E<0?(c=(x-v[-E-2])/(v[-E-1]-v[-E-2]),l=t+(-E-2)*n):l=t+E*n}o=o>1?o:2,r=r||new Array(o);for(let g=0;g<o;++g)r[g]=l===void 0?NaN:c===void 0?i[l+g]:wn(i[l+g],i[l+n+g],c);return r}function z_(i,t,e,n,s,r){if(e==t)return null;let o;if(s<i[t+n-1])return r?(o=i.slice(t,t+n),o[n-1]=s,o):null;if(i[e-1]<s)return r?(o=i.slice(e-n,e),o[n-1]=s,o):null;if(s==i[t+n-1])return i.slice(t,t+n);let l=t/n,c=e/n;for(;l<c;){const p=l+c>>1;s<i[(p+1)*n-1]?c=p:l=p+1}const f=i[l*n-1];if(s==f)return i.slice((l-1)*n,(l-1)*n+n);const g=i[(l+1)*n-1],m=(s-f)/(g-f);o=[];for(let p=0;p<n-1;++p)o.push(wn(i[(l-1)*n+p],i[l*n+p],m));return o.push(s),o}function iP(i,t,e,n,s,r,o){if(o)return z_(i,t,e[e.length-1],n,s,r);let l;if(s<i[n-1])return r?(l=i.slice(0,n),l[n-1]=s,l):null;if(i[i.length-1]<s)return r?(l=i.slice(i.length-n),l[n-1]=s,l):null;for(let c=0,f=e.length;c<f;++c){const g=e[c];if(t!=g){if(s<i[t+n-1])return null;if(s<=i[g-1])return z_(i,t,g,n,s,!1);t=g}}return null}function U1(i,t,e,n){let s=i[t],r=i[t+1],o=0;for(let l=t+n;l<e;l+=n){const c=i[l],f=i[l+1];o+=Math.sqrt((c-s)*(c-s)+(f-r)*(f-r)),s=c,r=f}return o}class Io extends ko{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendCoordinate(t){Ps(this.flatCoordinates,t),this.changed()}clone(){const t=new Io(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,s){return s<zo(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(L1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),N1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,n,s))}forEachSegment(t){return MT(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){return this.layout!="XYM"&&this.layout!="XYZM"?null:(e=e!==void 0?e:!1,z_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}getCoordinates(){return ma(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return Dg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}getLength(){return U1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const e=[];return e.length=b0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new Io(e,"XY")}getType(){return"LineString"}intersectsExtent(t){return E0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,this.getExtent())}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=x0(this.flatCoordinates,0,t,this.stride),this.changed()}}const Wn={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},mt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},H1=[NaN,NaN,NaN,0];let by;function nP(){return by||(by=Ue(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),by}const sP=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,rP=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,aP=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,oP=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function Cd(i,t){return i.endsWith("%")?Number(i.substring(0,i.length-1))/t:Number(i)}function Qc(i){throw new Error('failed to parse "'+i+'" as color')}function AT(i){if(i.toLowerCase().startsWith("rgb")){const r=i.match(rP)||i.match(sP)||i.match(aP);if(r){const o=r[4],l=100/255;return[Oe(Cd(r[1],l)+.5|0,0,255),Oe(Cd(r[2],l)+.5|0,0,255),Oe(Cd(r[3],l)+.5|0,0,255),o!==void 0?Oe(Cd(o,100),0,1):1]}Qc(i)}if(i.startsWith("#")){if(oP.test(i)){const r=i.substring(1),o=r.length<=4?1:2,l=[0,0,0,255];for(let c=0,f=r.length;c<f;c+=o){let g=parseInt(r.substring(c,c+o),16);o===1&&(g+=g<<4),l[c/o]=g}return l[3]=l[3]/255,l}Qc(i)}const t=nP();t.fillStyle="#abcdef";let e=t.fillStyle;t.fillStyle=i,t.fillStyle===e&&(t.fillStyle="#fedcba",e=t.fillStyle,t.fillStyle=i,t.fillStyle===e&&Qc(i));const n=t.fillStyle;if(n.startsWith("#")||n.startsWith("rgba"))return AT(n);t.clearRect(0,0,1,1),t.fillRect(0,0,1,1);const s=Array.from(t.getImageData(0,0,1,1).data);return s[3]=d0(s[3]/255,3),s}function lP(i){return typeof i=="string"?i:V1(i)}const uP=1024,bc={};let Ey=0;function cP(i){if(i.length===4)return i;const t=i.slice();return t[3]=1,t}function Sy(i){return i>.0031308?Math.pow(i,1/2.4)*269.025-14.025:i*3294.6}function My(i){return i>.2068965?Math.pow(i,3):(i-4/29)*(108/841)}function wy(i){return i>10.314724?Math.pow((i+14.025)/269.025,2.4):i/3294.6}function Ty(i){return i>.0088564?Math.pow(i,1/3):i/(108/841)+4/29}function BS(i){const t=wy(i[0]),e=wy(i[1]),n=wy(i[2]),s=Ty(t*.222488403+e*.716873169+n*.06060791),r=500*(Ty(t*.452247074+e*.399439023+n*.148375274)-s),o=200*(s-Ty(t*.016863605+e*.117638439+n*.865350722)),l=Math.atan2(o,r)*(180/Math.PI);return[116*s-16,Math.sqrt(r*r+o*o),l<0?l+360:l,i[3]]}function hP(i){const t=(i[0]+16)/116,e=i[1],n=i[2]*Math.PI/180,s=My(t),r=My(t+e/500*Math.cos(n)),o=My(t-e/200*Math.sin(n)),l=Sy(r*3.021973625-s*1.617392459-o*.404875592),c=Sy(r*-.943766287+s*1.916279586+o*.027607165),f=Sy(r*.069407491-s*.22898585+o*1.159737864);return[Oe(l+.5|0,0,255),Oe(c+.5|0,0,255),Oe(f+.5|0,0,255),i[3]]}function q1(i){if(i==="none")return H1;if(bc.hasOwnProperty(i))return bc[i];if(Ey>=uP){let e=0;for(const n in bc)(e++&3)===0&&(delete bc[n],--Ey)}const t=AT(i);t.length!==4&&Qc(i);for(const e of t)isNaN(e)&&Qc(i);return bc[i]=t,++Ey,t}function cu(i){return Array.isArray(i)?i:q1(i)}function V1(i){let t=i[0];t!=(t|0)&&(t=t+.5|0);let e=i[1];e!=(e|0)&&(e=e+.5|0);let n=i[2];n!=(n|0)&&(n=n+.5|0);const s=i[3]===void 0?1:Math.round(i[3]*1e3)/1e3;return"rgba("+t+","+e+","+n+","+s+")"}class Y1 extends Vh{constructor(t,e,n,s){super(),this.extent=t,this.pixelRatio_=n,this.resolution=e,this.state=typeof s=="function"?mt.IDLE:s,this.image_=null,this.loader=typeof s=="function"?s:null}changed(){this.dispatchEvent(St.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==mt.IDLE&&this.loader){this.state=mt.LOADING,this.changed();const t=this.getResolution(),e=Array.isArray(t)?t[0]:t;uu(()=>this.loader(this.getExtent(),e,this.getPixelRatio())).then(n=>{"image"in n&&(this.image_=n.image),"extent"in n&&(this.extent=n.extent),"resolution"in n&&(this.resolution=n.resolution),"pixelRatio"in n&&(this.pixelRatio_=n.pixelRatio),(n instanceof HTMLImageElement||TL&&n instanceof ImageBitmap||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement)&&(this.image_=n),this.state=mt.LOADED}).catch(n=>{this.state=mt.ERROR,console.error(n)}).finally(()=>this.changed())}}setImage(t){this.image_=t}setResolution(t){this.resolution=t}}function fP(i,t,e){const n=i;let s=!0,r=!1,o=!1;const l=[Rg(n,St.LOAD,function(){o=!0,r||t()})];return n.src&&cT?(r=!0,n.decode().then(function(){s&&t()}).catch(function(c){s&&(o?t():e())})):l.push(Rg(n,St.ERROR,e)),function(){s=!1,l.forEach(Me)}}function dP(i,t){return new Promise((e,n)=>{function s(){o(),e(i)}function r(){o(),n(new Error("Image load error"))}function o(){i.removeEventListener("load",s),i.removeEventListener("error",r)}i.addEventListener("load",s),i.addEventListener("error",r)})}function gP(i,t){return t&&(i.src=t),i.src&&cT?new Promise((e,n)=>i.decode().then(()=>e(i)).catch(s=>i.complete&&i.width?e(i):n(s))):dP(i)}class mP{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const n=this.cache_[e];(t++&3)===0&&!n.hasListener()&&(delete this.cache_[e],delete this.patternCache_[e],--this.cacheSize_)}}}get(t,e,n){const s=Cy(t,e,n);return s in this.cache_?this.cache_[s]:null}getPattern(t,e,n){const s=Cy(t,e,n);return s in this.patternCache_?this.patternCache_[s]:null}set(t,e,n,s,r){const o=Cy(t,e,n),l=o in this.cache_;this.cache_[o]=s,r&&(s.getImageState()===mt.IDLE&&s.load(),s.getImageState()===mt.LOADING?s.ready().then(()=>{this.patternCache_[o]=Ag().createPattern(s.getImage(1),"repeat")}):this.patternCache_[o]=Ag().createPattern(s.getImage(1),"repeat")),l||++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function Cy(i,t,e){const n=e?cu(e):"null";return t+":"+i+":"+n}const Kn=new mP;let Ec=null;class OT extends Vh{constructor(t,e,n,s,r){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=n,this.canvas_={},this.color_=r,this.imageState_=s===void 0?mt.IDLE:s,this.size_=t&&t.width&&t.height?[t.width,t.height]:null,this.src_=e,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===mt.LOADED){Ec||(Ec=Ue(1,1,void 0,{willReadFrequently:!0})),Ec.drawImage(this.image_,0,0);try{Ec.getImageData(0,0,1,1),this.tainted_=!1}catch{Ec=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(St.CHANGE)}handleImageError_(){this.imageState_=mt.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=mt.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],e=this.size_[1],n=Ue(t,e);n.fillRect(0,0,t,e),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===mt.IDLE){this.image_||this.initializeImage_(),this.imageState_=mt.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&gP(this.image_,this.src_).then(t=>{this.image_=t,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==mt.LOADED)return;const e=this.image_,n=Ue(Math.ceil(e.width*t),Math.ceil(e.height*t)),s=n.canvas;n.scale(t,t),n.drawImage(e,0,0),n.globalCompositeOperation="multiply",n.fillStyle=lP(this.color_),n.fillRect(0,0,s.width/t,s.height/t),n.globalCompositeOperation="destination-in",n.drawImage(e,0,0),this.canvas_[t]=s}ready(){return this.ready_||(this.ready_=new Promise(t=>{if(this.imageState_===mt.LOADED||this.imageState_===mt.ERROR)t();else{const e=()=>{(this.imageState_===mt.LOADED||this.imageState_===mt.ERROR)&&(this.removeEventListener(St.CHANGE,e),t())};this.addEventListener(St.CHANGE,e)}})),this.ready_}}function Ig(i,t,e,n,s,r){let o=t===void 0?void 0:Kn.get(t,e,s);return o||(o=new OT(i,i&&"src"in i?i.src||void 0:t,e,n,s),Kn.set(t,e,s,o,r)),r&&o&&!Kn.getPattern(t,e,s)&&Kn.set(t,e,s,o,r),o}function Is(i){return i?Array.isArray(i)?V1(i):typeof i=="object"&&"src"in i?pP(i):i:null}function pP(i){if(!i.offset||!i.size)return Kn.getPattern(i.src,"anonymous",i.color);const t=i.src+":"+i.offset,e=Kn.getPattern(t,void 0,i.color);if(e)return e;const n=Kn.get(i.src,"anonymous",null);if(n.getImageState()!==mt.LOADED)return null;const s=Ue(i.size[0],i.size[1]);return s.drawImage(n.getImage(1),i.offset[0],i.offset[1],i.size[0],i.size[1],0,0,i.size[0],i.size[1]),Ig(s.canvas,t,void 0,mt.LOADED,i.color,!0),Kn.getPattern(t,void 0,i.color)}class DT{drawCustom(t,e,n,s,r){}drawGeometry(t){}setStyle(t){}drawCircle(t,e,n){}drawFeature(t,e,n){}drawGeometryCollection(t,e,n){}drawLineString(t,e,n){}drawMultiLineString(t,e,n){}drawMultiPoint(t,e,n){}drawMultiPolygon(t,e,n){}drawPoint(t,e,n){}drawPolygon(t,e,n){}drawText(t,e,n){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}}const IT="10px sans-serif",an="#000",hu="round",vr=[],xr=0,fu="round",dh=10,gh="#000",mh="center",Lg="middle",go=[0,0,0,0],ph=1,uo=new Us;let Sc=null,US;const G_={},yP=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function _P(i,t,e){return`${i} ${t} 16px "${e}"`}const vP=(function(){let t,e;async function n(r){await e.ready;const o=await e.load(r);if(o.length===0)return!1;const l=I_(r),c=l.families[0].toLowerCase(),f=l.weight;return o.some(g=>{const m=g.family.replace(/^['"]|['"]$/g,"").toLowerCase(),p=D_[g.weight]||g.weight;return m===c&&g.style===l.style&&p==f})}async function s(){await e.ready;let r=!0;const o=uo.getProperties(),l=Object.keys(o).filter(c=>o[c]<100);for(let c=l.length-1;c>=0;--c){const f=l[c];let g=o[f];g<100&&(await n(f)?(Bh(G_),uo.set(f,100)):(g+=10,uo.set(f,g,!0),g<100&&(r=!1)))}t=void 0,r||(t=setTimeout(s,100))}return async function(r){e||(e=ji?self.fonts:document.fonts);const o=I_(r);if(!o)return;const l=o.families;let c=!1;for(const f of l){if(yP.has(f))continue;const g=_P(o.style,o.weight,f);uo.get(g)===void 0&&(uo.set(g,0,!0),c=!0)}c&&(clearTimeout(t),t=setTimeout(s,100))}})(),xP=(function(){let i;return function(t){let e=G_[t];if(e==null){if(ji){const n=I_(t),s=LT(t,"g");e=(isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight))*(s.actualBoundingBoxAscent+s.actualBoundingBoxDescent)}else i||(i=document.createElement("div"),i.innerHTML="M",i.style.minHeight="0",i.style.maxHeight="none",i.style.height="auto",i.style.padding="0",i.style.border="none",i.style.position="absolute",i.style.display="block",i.style.left="-99999px"),i.style.font=t,document.body.appendChild(i),e=i.offsetHeight,document.body.removeChild(i);G_[t]=e}return e}})();function LT(i,t){return Sc||(Sc=Ue(1,1)),i!=US&&(Sc.font=i,US=Sc.font),Sc.measureText(t)}function PT(i,t){return LT(i,t).width}function HS(i,t,e){if(t in e)return e[t];const n=t.split(`
`).reduce((s,r)=>Math.max(s,PT(i,r)),0);return e[t]=n,n}function bP(i,t){const e=[],n=[],s=[];let r=0,o=0,l=0,c=0;for(let f=0,g=t.length;f<=g;f+=2){const m=t[f];if(m===`
`||f===g){r=Math.max(r,o),s.push(o),o=0,l+=c,c=0;continue}const p=t[f+1]||i.font,v=PT(p,m);e.push(v),o+=v;const x=xP(p);n.push(x),c=Math.max(c,x)}return{width:r,height:l,widths:e,heights:n,lineWidths:s}}function EP(i,t,e,n,s,r,o,l,c,f,g){i.save(),e!==1&&(i.globalAlpha===void 0?i.globalAlpha=m=>m.globalAlpha*=e:i.globalAlpha*=e),t&&i.transform.apply(i,t),n.contextInstructions?(i.translate(c,f),i.scale(g[0],g[1]),SP(n,i)):g[0]<0||g[1]<0?(i.translate(c,f),i.scale(g[0],g[1]),i.drawImage(n,s,r,o,l,0,0,o,l)):i.drawImage(n,s,r,o,l,c,f,o*g[0],l*g[1]),i.restore()}function SP(i,t){const e=i.contextInstructions;for(let n=0,s=e.length;n<s;n+=2)Array.isArray(e[n+1])?t[e[n]].apply(t,e[n+1]):t[e[n]]=e[n+1]}class MP extends DT{constructor(t,e,n,s,r,o,l){super(),this.context_=t,this.pixelRatio_=e,this.extent_=n,this.transform_=s,this.transformRotation_=s?d0(Math.atan2(s[1],s[0]),10):0,this.viewRotation_=r,this.squaredTolerance_=o,this.userTransform_=l,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=dn()}drawImages_(t,e,n,s){if(!this.image_)return;const r=wa(t,e,n,s,this.transform_,this.pixelCoordinates_),o=this.context_,l=this.tmpLocalTransform_,c=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=c*this.imageOpacity_);let f=this.imageRotation_;this.transformRotation_===0&&(f-=this.viewRotation_),this.imageRotateWithView_&&(f+=this.viewRotation_);for(let g=0,m=r.length;g<m;g+=2){const p=r[g]-this.imageAnchorX_,v=r[g+1]-this.imageAnchorY_;if(f!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const x=p+this.imageAnchorX_,E=v+this.imageAnchorY_;Bs(l,x,E,1,1,f,-x,-E),o.save(),o.transform.apply(o,l),o.translate(x,E),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,p,v,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=c)}drawText_(t,e,n,s){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const r=wa(t,e,n,s,this.transform_,this.pixelCoordinates_),o=this.context_;let l=this.textRotation_;for(this.transformRotation_===0&&(l-=this.viewRotation_),this.textRotateWithView_&&(l+=this.viewRotation_);e<n;e+=s){const c=r[e]+this.textOffsetX_,f=r[e+1]+this.textOffsetY_;l!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.save(),o.translate(c-this.textOffsetX_,f-this.textOffsetY_),o.rotate(l),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,c,f),this.textFillState_&&o.fillText(this.text_,c,f))}}moveToLineTo_(t,e,n,s,r){const o=this.context_,l=wa(t,e,n,s,this.transform_,this.pixelCoordinates_);o.moveTo(l[0],l[1]);let c=l.length;r&&(c-=2);for(let f=2;f<c;f+=2)o.lineTo(l[f],l[f+1]);return r&&o.closePath(),n}drawRings_(t,e,n,s){for(let r=0,o=n.length;r<o;++r)e=this.moveToLineTo_(t,e,n[r],s,!0);return e}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ze(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=qL(t,this.transform_,this.pixelCoordinates_),n=e[2]-e[0],s=e[3]-e[1],r=Math.sqrt(n*n+s*s),o=this.context_;o.beginPath(),o.arc(e[0],e[1],r,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);break}}drawFeature(t,e){const n=e.getGeometryFunction()(t);n&&(this.setStyle(e),this.drawGeometry(n))}drawGeometryCollection(t){const e=t.getGeometriesArray();for(let n=0,s=e.length;n<s;++n)this.drawGeometry(e[n])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),this.text_!==""&&this.drawText_(e,0,e.length,n)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),this.text_!==""&&this.drawText_(e,0,e.length,n)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ze(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,n=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(n,0,n.length,t.getStride(),!1),e.stroke()}if(this.text_!==""){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getExtent();if(Ze(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,s=t.getFlatCoordinates();let r=0;const o=t.getEnds(),l=t.getStride();n.beginPath();for(let c=0,f=o.length;c<f;++c)r=this.moveToLineTo_(s,r,o[c],l,!1);n.stroke()}if(this.text_!==""){const n=t.getFlatMidpoints();this.drawText_(n,0,n.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ze(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ze(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,n=t.getOrientedFlatCoordinates();let s=0;const r=t.getEndss(),o=t.getStride();e.beginPath();for(let l=0,c=r.length;l<c;++l){const f=r[l];s=this.drawRings_(n,s,f,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,n=this.contextFillState_;n?n.fillStyle!=t.fillStyle&&(n.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const e=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=t.lineCap&&(n.lineCap=t.lineCap,e.lineCap=t.lineCap),Ia(n.lineDash,t.lineDash)||e.setLineDash(n.lineDash=t.lineDash),n.lineDashOffset!=t.lineDashOffset&&(n.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),n.lineJoin!=t.lineJoin&&(n.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),n.lineWidth!=t.lineWidth&&(n.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),n.miterLimit!=t.miterLimit&&(n.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),n.strokeStyle!=t.strokeStyle&&(n.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const e=this.context_,n=this.contextTextState_,s=t.textAlign?t.textAlign:mh;n?(n.font!=t.font&&(n.font=t.font,e.font=t.font),n.textAlign!=s&&(n.textAlign=s,e.textAlign=s),n.textBaseline!=t.textBaseline&&(n.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=s,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:s,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(!t)this.fillState_=null;else{const n=t.getColor();this.fillState_={fillStyle:Is(n||an)}}if(!e)this.strokeState_=null;else{const n=e.getColor(),s=e.getLineCap(),r=e.getLineDash(),o=e.getLineDashOffset(),l=e.getLineJoin(),c=e.getWidth(),f=e.getMiterLimit(),g=r||vr;this.strokeState_={lineCap:s!==void 0?s:hu,lineDash:this.pixelRatio_===1?g:g.map(m=>m*this.pixelRatio_),lineDashOffset:(o||xr)*this.pixelRatio_,lineJoin:l!==void 0?l:fu,lineWidth:(c!==void 0?c:ph)*this.pixelRatio_,miterLimit:f!==void 0?f:dh,strokeStyle:Is(n||gh)}}}setImageStyle(t){let e;if(!t||!(e=t.getSize())){this.image_=null;return}const n=t.getPixelRatio(this.pixelRatio_),s=t.getAnchor(),r=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=s[0]*n,this.imageAnchorY_=s[1]*n,this.imageHeight_=e[1]*n,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const o=t.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/n,o[1]*this.pixelRatio_/n],this.imageWidth_=e[0]*n}setTextStyle(t){if(!t)this.text_="";else{const e=t.getFill();if(!e)this.textFillState_=null;else{const v=e.getColor();this.textFillState_={fillStyle:Is(v||an)}}const n=t.getStroke();if(!n)this.textStrokeState_=null;else{const v=n.getColor(),x=n.getLineCap(),E=n.getLineDash(),b=n.getLineDashOffset(),M=n.getLineJoin(),w=n.getWidth(),R=n.getMiterLimit();this.textStrokeState_={lineCap:x!==void 0?x:hu,lineDash:E||vr,lineDashOffset:b||xr,lineJoin:M!==void 0?M:fu,lineWidth:w!==void 0?w:ph,miterLimit:R!==void 0?R:dh,strokeStyle:Is(v||gh)}}const s=t.getFont(),r=t.getOffsetX(),o=t.getOffsetY(),l=t.getRotateWithView(),c=t.getRotation(),f=t.getScaleArray(),g=t.getText(),m=t.getTextAlign(),p=t.getTextBaseline();this.textState_={font:s!==void 0?s:IT,textAlign:m!==void 0?m:mh,textBaseline:p!==void 0?p:Lg},this.text_=g!==void 0?Array.isArray(g)?g.reduce((v,x,E)=>v+=E%2?" ":x,""):g:"",this.textOffsetX_=r!==void 0?this.pixelRatio_*r:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=l!==void 0?l:!1,this.textRotation_=c!==void 0?c:0,this.textScale_=[this.pixelRatio_*f[0],this.pixelRatio_*f[1]]}}}const wP=.5,NT={Point:LP,LineString:OP,Polygon:NP,MultiPoint:PP,MultiLineString:DP,MultiPolygon:IP,GeometryCollection:AP,Circle:CP};function TP(i,t){return parseInt(At(i),10)-parseInt(At(t),10)}function k_(i,t){const e=zT(i,t);return e*e}function zT(i,t){return wP*i/t}function CP(i,t,e,n,s){const r=e.getFill(),o=e.getStroke();if(r||o){const c=i.getBuilder(e.getZIndex(),"Circle");c.setFillStrokeStyle(r,o),c.drawCircle(t,n,s)}const l=e.getText();if(l&&l.getText()){const c=i.getBuilder(e.getZIndex(),"Text");c.setTextStyle(l),c.drawText(t,n)}}function Pg(i,t,e,n,s,r,o,l){const c=[],f=e.getImage();if(f){let p=!0;const v=f.getImageState();v==mt.LOADED||v==mt.ERROR?p=!1:v==mt.IDLE&&f.load(),p&&c.push(f.ready())}const g=e.getFill();g&&g.loading()&&c.push(g.ready());const m=c.length>0;return m&&Promise.all(c).then(()=>s(null)),RP(i,t,e,n,r,o,l),m}function RP(i,t,e,n,s,r,o){const l=e.getGeometryFunction()(t);if(!l)return;const c=l.simplifyTransformed(n,s);if(e.getRenderer())GT(i,c,e,t,o);else{const g=NT[c.getType()];g(i,c,e,t,o,r)}}function GT(i,t,e,n,s){if(t.getType()=="GeometryCollection"){const o=t.getGeometries();for(let l=0,c=o.length;l<c;++l)GT(i,o[l],e,n,s);return}i.getBuilder(e.getZIndex(),"Default").drawCustom(t,n,e.getRenderer(),e.getHitDetectionRenderer(),s)}function AP(i,t,e,n,s,r){const o=t.getGeometriesArray();let l,c;for(l=0,c=o.length;l<c;++l){const f=NT[o[l].getType()];f(i,o[l],e,n,s,r)}}function OP(i,t,e,n,s){const r=e.getStroke();if(r){const l=i.getBuilder(e.getZIndex(),"LineString");l.setFillStrokeStyle(null,r),l.drawLineString(t,n,s)}const o=e.getText();if(o&&o.getText()){const l=i.getBuilder(e.getZIndex(),"Text");l.setTextStyle(o),l.drawText(t,n,s)}}function DP(i,t,e,n,s){const r=e.getStroke();if(r){const l=i.getBuilder(e.getZIndex(),"LineString");l.setFillStrokeStyle(null,r),l.drawMultiLineString(t,n,s)}const o=e.getText();if(o&&o.getText()){const l=i.getBuilder(e.getZIndex(),"Text");l.setTextStyle(o),l.drawText(t,n,s)}}function IP(i,t,e,n,s){const r=e.getFill(),o=e.getStroke();if(o||r){const c=i.getBuilder(e.getZIndex(),"Polygon");c.setFillStrokeStyle(r,o),c.drawMultiPolygon(t,n,s)}const l=e.getText();if(l&&l.getText()){const c=i.getBuilder(e.getZIndex(),"Text");c.setTextStyle(l),c.drawText(t,n,s)}}function LP(i,t,e,n,s,r){const o=e.getImage(),l=e.getText(),c=l&&l.getText(),f=r&&o&&c?{}:void 0;if(o){if(o.getImageState()!=mt.LOADED)return;const g=i.getBuilder(e.getZIndex(),"Image");g.setImageStyle(o,f),g.drawPoint(t,n,s)}if(c){const g=i.getBuilder(e.getZIndex(),"Text");g.setTextStyle(l,f),g.drawText(t,n,s)}}function PP(i,t,e,n,s,r){const o=e.getImage(),l=o&&o.getOpacity()!==0,c=e.getText(),f=c&&c.getText(),g=r&&l&&f?{}:void 0;if(l){if(o.getImageState()!=mt.LOADED)return;const m=i.getBuilder(e.getZIndex(),"Image");m.setImageStyle(o,g),m.drawMultiPoint(t,n,s)}if(f){const m=i.getBuilder(e.getZIndex(),"Text");m.setTextStyle(c,g),m.drawText(t,n,s)}}function NP(i,t,e,n,s){const r=e.getFill(),o=e.getStroke();if(r||o){const c=i.getBuilder(e.getZIndex(),"Polygon");c.setFillStrokeStyle(r,o),c.drawPolygon(t,n,s)}const l=e.getText();if(l&&l.getText()){const c=i.getBuilder(e.getZIndex(),"Text");c.setTextStyle(l),c.drawText(t,n,s)}}let zP=!1;function kT(i,t,e,n,s,r,o){const l=new XMLHttpRequest;l.open("GET",typeof i=="function"?i(e,n,s):i,!0),t.getType()=="arraybuffer"&&(l.responseType="arraybuffer"),l.withCredentials=zP,l.onload=function(c){if(!l.status||l.status>=200&&l.status<300){const f=t.getType();try{let g;f=="text"||f=="json"?g=l.responseText:f=="xml"?g=l.responseXML||l.responseText:f=="arraybuffer"&&(g=l.response),g?r(t.readFeatures(g,{extent:e,featureProjection:s}),t.readProjection(g)):o()}catch{o()}}else o()},l.onerror=o,l.send()}function qS(i,t){return function(e,n,s,r,o){kT(i,t,e,n,s,(l,c)=>{this.addFeatures(l),r!==void 0&&r(l)},()=>{this.changed(),o!==void 0&&o()})}}function GP(i,t){return[[-1/0,-1/0,1/0,1/0]]}function kP(i,t){return[i]}function FT(i,t,e,n){const s=[];let r=ts();for(let o=0,l=e.length;o<l;++o){const c=e[o];r=E1(i,t,c[0],n),s.push((r[0]+r[2])/2,(r[1]+r[3])/2),t=c[c.length-1]}return s}class Ng extends _T{constructor(t){super(),this.geometries_=t,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Me),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const t=this.geometries_;for(let e=0,n=t.length;e<n;++e)this.changeEventsKeys_.push(Wt(t[e],St.CHANGE,this.changed,this))}clone(){const t=new Ng(Ry(this.geometries_));return t.applyProperties(this),t}closestPointXY(t,e,n,s){if(s<zo(this.getExtent(),t,e))return s;const r=this.geometries_;for(let o=0,l=r.length;o<l;++o)s=r[o].closestPointXY(t,e,n,s);return s}containsXY(t,e){const n=this.geometries_;for(let s=0,r=n.length;s<r;++s)if(n[s].containsXY(t,e))return!0;return!1}computeExtent(t){_u(t);const e=this.geometries_;for(let n=0,s=e.length;n<s;++n)W4(t,e[n].getExtent());return t}getGeometries(){return Ry(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[];const e=this.geometries_;for(let n=0,s=e.length;n<s;++n)e[n].getType()===this.getType()?t=t.concat(e[n].getGeometriesArrayRecursive()):t.push(e[n]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=[],n=this.geometries_;let s=!1;for(let r=0,o=n.length;r<o;++r){const l=n[r],c=l.getSimplifiedGeometry(t);e.push(c),c!==l&&(s=!0)}return s?new Ng(e):(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getType(){return"GeometryCollection"}intersectsExtent(t){const e=this.geometries_;for(let n=0,s=e.length;n<s;++n)if(e[n].intersectsExtent(t))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(t,e){const n=this.geometries_;for(let s=0,r=n.length;s<r;++s)n[s].rotate(t,e);this.changed()}scale(t,e,n){n||(n=Dn(this.getExtent()));const s=this.geometries_;for(let r=0,o=s.length;r<o;++r)s[r].scale(t,e,n);this.changed()}setGeometries(t){this.setGeometriesArray(Ry(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const e=this.geometries_;for(let n=0,s=e.length;n<s;++n)e[n].applyTransform(t);this.changed()}translate(t,e){const n=this.geometries_;for(let s=0,r=n.length;s<r;++s)n[s].translate(t,e);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function Ry(i){return i.map(t=>t.clone())}class yh extends ko{constructor(t,e,n){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,e);else if(e!==void 0&&n)this.setFlatCoordinates(e,t),this.ends_=n;else{const s=t,r=[],o=[];for(let c=0,f=s.length;c<f;++c){const g=s[c];Ps(r,g.getFlatCoordinates()),o.push(r.length)}const l=s.length===0?this.getLayout():s[0].getLayout();this.setFlatCoordinates(l,r),this.ends_=o}}appendLineString(t){Ps(this.flatCoordinates,t.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new yh(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,n,s){return s<zo(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(P1(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),z1(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,n,s))}getCoordinateAtM(t,e,n){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(e=e!==void 0?e:!1,n=n!==void 0?n:!1,iP(this.flatCoordinates,0,this.ends_,this.stride,t,e,n))}getCoordinates(){return hh(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new Io(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,e=this.ends_,n=this.layout,s=[];let r=0;for(let o=0,l=e.length;o<l;++o){const c=e[o],f=new Io(t.slice(r,c),n);s.push(f),r=c}return s}getLength(){const t=this.ends_;let e=0,n=0;for(let s=0,r=t.length;s<r;++s)n+=U1(this.flatCoordinates,e,t[s],this.stride),e=t[s];return n}getFlatMidpoints(){const t=[],e=this.flatCoordinates;let n=0;const s=this.ends_,r=this.stride;for(let o=0,l=s.length;o<l;++o){const c=s[o],f=Dg(e,n,c,r,.5);Ps(t,f),n=c}return t}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=ET(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,n),new yh(e,"XY",n)}getType(){return"MultiLineString"}intersectsExtent(t){return JL(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=Kh(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}class Zh extends ko{constructor(t,e){super(),e&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendPoint(t){Ps(this.flatCoordinates,t.getFlatCoordinates()),this.changed()}clone(){const t=new Zh(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,s){if(s<zo(this.getExtent(),t,e))return s;const r=this.flatCoordinates,o=this.stride;for(let l=0,c=r.length;l<c;l+=o){const f=_o(t,e,r[l],r[l+1]);if(f<s){s=f;for(let g=0;g<o;++g)n[g]=r[l+g];n.length=o}}return s}getCoordinates(){return ma(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const e=this.flatCoordinates.length/this.stride;return t<0||e<=t?null:new Do(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,e=this.layout,n=this.stride,s=[];for(let r=0,o=t.length;r<o;r+=n){const l=new Do(t.slice(r,r+n),e);s.push(l)}return s}getType(){return"MultiPoint"}intersectsExtent(t){const e=this.flatCoordinates,n=this.stride;for(let s=0,r=e.length;s<r;s+=n){const o=e[s],l=e[s+1];if(b1(t,o,l))return!0}return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=x0(this.flatCoordinates,0,t,this.stride),this.changed()}}class _h extends ko{constructor(t,e,n){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!n&&!Array.isArray(t[0])){const s=t,r=[],o=[];for(let l=0,c=s.length;l<c;++l){const f=s[l],g=r.length,m=f.getEnds();for(let p=0,v=m.length;p<v;++p)m[p]+=g;Ps(r,f.getFlatCoordinates()),o.push(m)}e=s.length===0?this.getLayout():s[0].getLayout(),t=r,n=o}e!==void 0&&n?(this.setFlatCoordinates(e,t),this.endss_=n):this.setCoordinates(t,e)}appendPolygon(t){let e;if(!this.flatCoordinates)this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();else{const n=this.flatCoordinates.length;Ps(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice();for(let s=0,r=e.length;s<r;++s)e[s]+=n}this.endss_.push(e),this.changed()}clone(){const t=this.endss_.length,e=new Array(t);for(let s=0;s<t;++s)e[s]=this.endss_[s].slice();const n=new _h(this.flatCoordinates.slice(),this.layout,e);return n.applyProperties(this),n}closestPointXY(t,e,n,s){return s<zo(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(YL(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),XL(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,n,s))}containsXY(t,e){return QL(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}getArea(){return VL(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),N_(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,P_(e,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=FT(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=ST(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new Zh(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;CT(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=N_(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=ZL(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,n),new _h(e,"XY",n)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let e;if(t===0)e=0;else{const r=this.endss_[t-1];e=r[r.length-1]}const n=this.endss_[t].slice(),s=n[n.length-1];if(e!==0)for(let r=0,o=n.length;r<o;++r)n[r]-=e;return new wr(this.flatCoordinates.slice(e,s),this.layout,n)}getPolygons(){const t=this.layout,e=this.flatCoordinates,n=this.endss_,s=[];let r=0;for(let o=0,l=n.length;o<l;++o){const c=n[o].slice(),f=c[c.length-1];if(r!==0)for(let m=0,p=c.length;m<p;++m)c[m]-=r;const g=new wr(e.slice(r,f),t,c);s.push(g),r=f}return s}getType(){return"MultiPolygon"}intersectsExtent(t){return tP(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const n=bT(this.flatCoordinates,0,t,this.stride,this.endss_);if(n.length===0)this.flatCoordinates.length=0;else{const s=n[n.length-1];this.flatCoordinates.length=s.length===0?0:s[s.length-1]}this.changed()}}const VS=dn();class Fi{constructor(t,e,n,s,r,o){this.styleFunction,this.extent_,this.id_=o,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=n||null,this.properties_=r,this.squaredTolerance_,this.stride_=s,this.simplifiedGeometry_}get(t){return this.properties_[t]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?X4(this.flatCoordinates_):E1(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const t=Dn(this.getExtent());this.flatInteriorPoints_=F1(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const t=RT(this.flatCoordinates_,this.ends_),e=FT(this.flatCoordinates_,0,t,2);this.flatInteriorPoints_=ST(this.flatCoordinates_,0,t,2,e)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=Dg(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const t=this.flatCoordinates_;let e=0;const n=this.ends_;for(let s=0,r=n.length;s<r;++s){const o=n[s],l=Dg(t,e,o,2,.5);Ps(this.flatMidpoints_,l),e=o}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(t){return this}simplifyTransformed(t,e){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(t){t=ee(t);const e=t.getExtent(),n=t.getWorldExtent();if(e&&n){const s=li(n)/li(e);Bs(VS,n[0],n[3],s,-s,0,0,0),wa(this.flatCoordinates_,0,this.flatCoordinates_.length,2,VS,this.flatCoordinates_)}}applyTransform(t){t(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new Fi(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=lT((t,e)=>{if(t===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),e&&this.simplifiedGeometry_.applyTransform(e);const n=this.simplifiedGeometry_.getFlatCoordinates();let s;switch(this.type_){case"LineString":n.length=b0(n,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,t,n,0),s=[n.length];break;case"MultiLineString":s=[],n.length=ET(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,t,n,0,s);break;case"Polygon":s=[],n.length=G1(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(t),n,0,s);break}return s&&(this.simplifiedGeometry_=new Fi(this.type_,n,s,2,this.properties_,this.id_)),this.squaredTolerance_=t,this.simplifiedGeometry_}),this}}Fi.prototype.getFlatCoordinates=Fi.prototype.getOrientedFlatCoordinates;function jT(i,t,e=0,n=i.length-1,s=FP){for(;n>e;){if(n-e>600){const c=n-e+1,f=t-e+1,g=Math.log(c),m=.5*Math.exp(2*g/3),p=.5*Math.sqrt(g*m*(c-m)/c)*(f-c/2<0?-1:1),v=Math.max(e,Math.floor(t-f*m/c+p)),x=Math.min(n,Math.floor(t+(c-f)*m/c+p));jT(i,t,v,x,s)}const r=i[t];let o=e,l=n;for(Mc(i,e,t),s(i[n],r)>0&&Mc(i,e,n);o<l;){for(Mc(i,o,l),o++,l--;s(i[o],r)<0;)o++;for(;s(i[l],r)>0;)l--}s(i[e],r)===0?Mc(i,e,l):(l++,Mc(i,l,n)),l<=t&&(e=l+1),t<=l&&(n=l-1)}}function Mc(i,t,e){const n=i[t];i[t]=i[e],i[e]=n}function FP(i,t){return i<t?-1:i>t?1:0}let BT=class{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(t){let e=this.data;const n=[];if(!Ad(t,e))return n;const s=this.toBBox,r=[];for(;e;){for(let o=0;o<e.children.length;o++){const l=e.children[o],c=e.leaf?s(l):l;Ad(t,c)&&(e.leaf?n.push(l):Oy(t,c)?this._all(l,n):r.push(l))}e=r.pop()}return n}collides(t){let e=this.data;if(!Ad(t,e))return!1;const n=[];for(;e;){for(let s=0;s<e.children.length;s++){const r=e.children[s],o=e.leaf?this.toBBox(r):r;if(Ad(t,o)){if(e.leaf||Oy(t,o))return!0;n.push(r)}}e=n.pop()}return!1}load(t){if(!(t&&t.length))return this;if(t.length<this._minEntries){for(let n=0;n<t.length;n++)this.insert(t[n]);return this}let e=this._build(t.slice(),0,t.length-1,0);if(!this.data.children.length)this.data=e;else if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){const n=this.data;this.data=e,e=n}this._insert(e,this.data.height-e.height-1,!0)}return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=kl([]),this}remove(t,e){if(!t)return this;let n=this.data;const s=this.toBBox(t),r=[],o=[];let l,c,f;for(;n||r.length;){if(n||(n=r.pop(),c=r[r.length-1],l=o.pop(),f=!0),n.leaf){const g=jP(t,n.children,e);if(g!==-1)return n.children.splice(g,1),r.push(n),this._condense(r),this}!f&&!n.leaf&&Oy(n,s)?(r.push(n),o.push(l),l=0,c=n,n=n.children[0]):c?(l++,n=c.children[l],f=!1):n=null}return this}toBBox(t){return t}compareMinX(t,e){return t.minX-e.minX}compareMinY(t,e){return t.minY-e.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,e){const n=[];for(;t;)t.leaf?e.push(...t.children):n.push(...t.children),t=n.pop();return e}_build(t,e,n,s){const r=n-e+1;let o=this._maxEntries,l;if(r<=o)return l=kl(t.slice(e,n+1)),Cl(l,this.toBBox),l;s||(s=Math.ceil(Math.log(r)/Math.log(o)),o=Math.ceil(r/Math.pow(o,s-1))),l=kl([]),l.leaf=!1,l.height=s;const c=Math.ceil(r/o),f=c*Math.ceil(Math.sqrt(o));YS(t,e,n,f,this.compareMinX);for(let g=e;g<=n;g+=f){const m=Math.min(g+f-1,n);YS(t,g,m,c,this.compareMinY);for(let p=g;p<=m;p+=c){const v=Math.min(p+c-1,m);l.children.push(this._build(t,p,v,s-1))}}return Cl(l,this.toBBox),l}_chooseSubtree(t,e,n,s){for(;s.push(e),!(e.leaf||s.length-1===n);){let r=1/0,o=1/0,l;for(let c=0;c<e.children.length;c++){const f=e.children[c],g=Ay(f),m=HP(t,f)-g;m<o?(o=m,r=g<r?g:r,l=f):m===o&&g<r&&(r=g,l=f)}e=l||e.children[0]}return e}_insert(t,e,n){const s=n?t:this.toBBox(t),r=[],o=this._chooseSubtree(s,this.data,e,r);for(o.children.push(t),Gc(o,s);e>=0&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(s,r,e)}_split(t,e){const n=t[e],s=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,s);const o=this._chooseSplitIndex(n,r,s),l=kl(n.children.splice(o,n.children.length-o));l.height=n.height,l.leaf=n.leaf,Cl(n,this.toBBox),Cl(l,this.toBBox),e?t[e-1].children.push(l):this._splitRoot(n,l)}_splitRoot(t,e){this.data=kl([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Cl(this.data,this.toBBox)}_chooseSplitIndex(t,e,n){let s,r=1/0,o=1/0;for(let l=e;l<=n-e;l++){const c=zc(t,0,l,this.toBBox),f=zc(t,l,n,this.toBBox),g=qP(c,f),m=Ay(c)+Ay(f);g<r?(r=g,s=l,o=m<o?m:o):g===r&&m<o&&(o=m,s=l)}return s||n-e}_chooseSplitAxis(t,e,n){const s=t.leaf?this.compareMinX:BP,r=t.leaf?this.compareMinY:UP,o=this._allDistMargin(t,e,n,s),l=this._allDistMargin(t,e,n,r);o<l&&t.children.sort(s)}_allDistMargin(t,e,n,s){t.children.sort(s);const r=this.toBBox,o=zc(t,0,e,r),l=zc(t,n-e,n,r);let c=Rd(o)+Rd(l);for(let f=e;f<n-e;f++){const g=t.children[f];Gc(o,t.leaf?r(g):g),c+=Rd(o)}for(let f=n-e-1;f>=e;f--){const g=t.children[f];Gc(l,t.leaf?r(g):g),c+=Rd(l)}return c}_adjustParentBBoxes(t,e,n){for(let s=n;s>=0;s--)Gc(e[s],t)}_condense(t){for(let e=t.length-1,n;e>=0;e--)t[e].children.length===0?e>0?(n=t[e-1].children,n.splice(n.indexOf(t[e]),1)):this.clear():Cl(t[e],this.toBBox)}};function jP(i,t,e){if(!e)return t.indexOf(i);for(let n=0;n<t.length;n++)if(e(i,t[n]))return n;return-1}function Cl(i,t){zc(i,0,i.children.length,t,i)}function zc(i,t,e,n,s){s||(s=kl(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let r=t;r<e;r++){const o=i.children[r];Gc(s,i.leaf?n(o):o)}return s}function Gc(i,t){return i.minX=Math.min(i.minX,t.minX),i.minY=Math.min(i.minY,t.minY),i.maxX=Math.max(i.maxX,t.maxX),i.maxY=Math.max(i.maxY,t.maxY),i}function BP(i,t){return i.minX-t.minX}function UP(i,t){return i.minY-t.minY}function Ay(i){return(i.maxX-i.minX)*(i.maxY-i.minY)}function Rd(i){return i.maxX-i.minX+(i.maxY-i.minY)}function HP(i,t){return(Math.max(t.maxX,i.maxX)-Math.min(t.minX,i.minX))*(Math.max(t.maxY,i.maxY)-Math.min(t.minY,i.minY))}function qP(i,t){const e=Math.max(i.minX,t.minX),n=Math.max(i.minY,t.minY),s=Math.min(i.maxX,t.maxX),r=Math.min(i.maxY,t.maxY);return Math.max(0,s-e)*Math.max(0,r-n)}function Oy(i,t){return i.minX<=t.minX&&i.minY<=t.minY&&t.maxX<=i.maxX&&t.maxY<=i.maxY}function Ad(i,t){return t.minX<=i.maxX&&t.minY<=i.maxY&&t.maxX>=i.minX&&t.maxY>=i.minY}function kl(i){return{children:i,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function YS(i,t,e,n,s){const r=[t,e];for(;r.length;){if(e=r.pop(),t=r.pop(),e-t<=n)continue;const o=t+Math.ceil((e-t)/n/2)*n;jT(i,o,t,e,s),r.push(t,o,o,e)}}class XS{constructor(t){this.rbush_=new BT(t),this.items_={}}insert(t,e){const n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(n),this.items_[At(e)]=n}load(t,e){const n=new Array(e.length);for(let s=0,r=e.length;s<r;s++){const o=t[s],l=e[s],c={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:l};n[s]=c,this.items_[At(l)]=c}this.rbush_.load(n)}remove(t){const e=At(t),n=this.items_[e];return delete this.items_[e],this.rbush_.remove(n)!==null}update(t,e){const n=this.items_[At(e)],s=[n.minX,n.minY,n.maxX,n.maxY];Sr(s,t)||(this.remove(e),this.insert(t,e))}getAll(){return this.rbush_.all().map(function(e){return e.value})}getInExtent(t){const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(s){return s.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let n;for(let s=0,r=t.length;s<r;s++)if(n=e(t[s]),n)return n;return n}isEmpty(){return Aa(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const e=this.rbush_.toJSON();return Er(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const e in t.items_)this.items_[e]=t.items_[e]}}class bu extends Us{constructor(t){super(),this.projection=ee(t.projection),this.attributions_=WS(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible??!0,this.loading=!1,this.state_=t.state!==void 0?t.state:"ready",this.wrapX_=t.wrapX!==void 0?t.wrapX:!1,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const e=this;this.viewPromise_=new Promise(function(n,s){e.viewResolver=n,e.viewRejector=s})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=WS(t),this.changed()}setState(t){this.state_=t,this.changed()}}function WS(i){return i?typeof i=="function"?i:(Array.isArray(i)||(i=[i]),t=>i):null}const qn={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class ea extends xs{constructor(t,e,n){super(t),this.feature=e,this.features=n}}class Jl extends bu{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:t.wrapX!==void 0?t.wrapX:!0}),this.on,this.once,this.un,this.loader_=ch,this.format_=t.format||null,this.overlaps_=t.overlaps===void 0?!0:t.overlaps,this.url_=t.url,t.loader!==void 0?this.loader_=t.loader:this.url_!==void 0&&(se(this.format_,"`format` must be set when `url` is set"),this.loader_=qS(this.url_,this.format_)),this.strategy_=t.strategy!==void 0?t.strategy:GP;const e=t.useSpatialIndex!==void 0?t.useSpatialIndex:!0;this.featuresRtree_=e?new XS:null,this.loadedExtentsRtree_=new XS,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let n,s;Array.isArray(t.features)?s=t.features:t.features&&(n=t.features,s=n.getArray()),!e&&n===void 0&&(n=new Xn(s)),s!==void 0&&this.addFeaturesInternal(s),n!==void 0&&this.bindFeaturesCollection_(n)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const e=At(t);if(!this.addToIndex_(e,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(e,t);const n=t.getGeometry();if(n){const s=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(s,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new ea(qn.ADDFEATURE,t))}setupChangeEvents_(t,e){e instanceof Fi||(this.featureChangeKeys_[t]=[Wt(e,St.CHANGE,this.handleFeatureChange_,this),Wt(e,lu.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(t,e){let n=!0;if(e.getId()!==void 0){const s=String(e.getId());if(!(s in this.idIndex_))this.idIndex_[s]=e;else if(e instanceof Fi){const r=this.idIndex_[s];r instanceof Fi?Array.isArray(r)?r.push(e):this.idIndex_[s]=[r,e]:n=!1}else n=!1}return n&&(se(!(t in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[t]=e),n}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const e=[],n=[],s=[];for(let r=0,o=t.length;r<o;r++){const l=t[r],c=At(l);this.addToIndex_(c,l)&&n.push(l)}for(let r=0,o=n.length;r<o;r++){const l=n[r],c=At(l);this.setupChangeEvents_(c,l);const f=l.getGeometry();if(f){const g=f.getExtent();e.push(g),s.push(l)}else this.nullGeometryFeatures_[c]=l}if(this.featuresRtree_&&this.featuresRtree_.load(e,s),this.hasListener(qn.ADDFEATURE))for(let r=0,o=n.length;r<o;r++)this.dispatchEvent(new ea(qn.ADDFEATURE,n[r]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener(qn.ADDFEATURE,function(n){e||(e=!0,t.push(n.feature),e=!1)}),this.addEventListener(qn.REMOVEFEATURE,function(n){e||(e=!0,t.remove(n.feature),e=!1)}),t.addEventListener(rn.ADD,n=>{e||(e=!0,this.addFeature(n.element),e=!1)}),t.addEventListener(rn.REMOVE,n=>{e||(e=!0,this.removeFeature(n.element),e=!1)}),this.featuresCollection_=t}clear(t){if(t){for(const n in this.featureChangeKeys_)this.featureChangeKeys_[n].forEach(Me);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(n=>{this.removeFeatureInternal(n)});for(const n in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[n])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const e=new ea(qn.CLEAR);this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){const n=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(n,function(s){const r=s.getGeometry();if(r instanceof Fi||r.intersectsCoordinate(t))return e(s)})}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,function(n){const s=n.getGeometry();if(s instanceof Fi||s.intersectsExtent(t)){const r=e(n);if(r)return r}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),Aa(this.nullGeometryFeatures_)||Ps(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const e=[];return this.forEachFeatureAtCoordinateDirect(t,function(n){e.push(n)}),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const s=tT(t,e);return[].concat(...s.map(r=>this.featuresRtree_.getInExtent(r)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){const n=t[0],s=t[1];let r=null;const o=[NaN,NaN];let l=1/0;const c=[-1/0,-1/0,1/0,1/0];return e=e||uh,this.featuresRtree_.forEachInExtent(c,function(f){if(e(f)){const g=f.getGeometry(),m=l;if(l=g instanceof Fi?0:g.closestPointXY(n,s,o,l),l<m){r=f;const p=Math.sqrt(l);c[0]=n-p,c[1]=s-p,c[2]=n+p,c[3]=s+p}}}),r}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const e=this.idIndex_[t.toString()];return e!==void 0?e:null}getFeatureByUid(t){const e=this.uidIndex_[t];return e!==void 0?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const e=t.target,n=At(e),s=e.getGeometry();if(!s)n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[n]=e);else{const o=s.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(o,e)):this.featuresRtree_&&this.featuresRtree_.update(o,e)}const r=e.getId();if(r!==void 0){const o=r.toString();this.idIndex_[o]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[o]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[n]=e;this.changed(),this.dispatchEvent(new ea(qn.CHANGEFEATURE,e))}hasFeature(t){const e=t.getId();return e!==void 0?e in this.idIndex_:At(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Aa(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(t,e,n){const s=this.loadedExtentsRtree_,r=this.strategy_(t,e,n);for(let o=0,l=r.length;o<l;++o){const c=r[o];s.forEachInExtent(c,function(g){return pr(g.extent,c)})||(++this.loadingExtentsCount_,this.dispatchEvent(new ea(qn.FEATURESLOADSTART)),this.loader_.call(this,c,e,n,g=>{--this.loadingExtentsCount_,this.dispatchEvent(new ea(qn.FEATURESLOADEND,void 0,g))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new ea(qn.FEATURESLOADERROR))}),s.insert(c,{extent:c.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const e=this.loadedExtentsRtree_,n=e.forEachInExtent(t,function(s){if(Sr(s.extent,t))return s});n&&e.remove(n)}removeFeatures(t){let e=!1;for(let n=0,s=t.length;n<s;++n)e=this.removeFeatureInternal(t[n])||e;e&&this.changed()}removeFeature(t){if(!t)return;this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const e=At(t);if(!(e in this.uidIndex_))return!1;e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.featureChangeKeys_[e]?.forEach(Me),delete this.featureChangeKeys_[e];const s=t.getId();if(s!==void 0){const r=s.toString(),o=this.idIndex_[r];o===t?delete this.idIndex_[r]:Array.isArray(o)&&(o.splice(o.indexOf(t),1),o.length===1&&(this.idIndex_[r]=o[0]))}return delete this.uidIndex_[e],this.hasListener(qn.REMOVEFEATURE)&&this.dispatchEvent(new ea(qn.REMOVEFEATURE,t)),!0}removeFromIdIndex_(t){for(const e in this.idIndex_)if(this.idIndex_[e]===t){delete this.idIndex_[e];break}}setLoader(t){this.loader_=t}setUrl(t){se(this.format_,"`format` must be set when `url` is set"),this.url_=t,this.setLoader(qS(t,this.format_))}setOverlaps(t){this.overlaps_=t,this.changed()}}class Zn{constructor(t){t=t||{},this.patternImage_=null,this.color_=null,t.color!==void 0&&this.setColor(t.color)}clone(){const t=this.getColor();return new Zn({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){if(t!==null&&typeof t=="object"&&"src"in t){const e=Ig(null,t.src,"anonymous",void 0,t.offset?null:t.color?t.color:null,!(t.offset&&t.size));e.ready().then(()=>{this.patternImage_=null}),e.getImageState()===mt.IDLE&&e.load(),e.getImageState()===mt.LOADING&&(this.patternImage_=e)}this.color_=t}getKey(){const t=this.getColor();return t?t instanceof CanvasPattern||t instanceof CanvasGradient?At(t):typeof t=="object"&&"src"in t?t.src+":"+t.offset:cu(t).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}class yr{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new yr({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}function KS(i){return i[0]>0&&i[1]>0}function VP(i,t,e){return e===void 0&&(e=[0,0]),e[0]=i[0]*t+.5|0,e[1]=i[1]*t+.5|0,e}function Bi(i,t){return Array.isArray(i)?i:(t===void 0?t=[i,i]:(t[0]=i,t[1]=i),t)}class S0{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=Bi(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new S0({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Ct()}getImage(t){return Ct()}getHitDetectionImage(){return Ct()}getPixelRatio(t){return 1}getImageState(){return Ct()}getImageSize(){return Ct()}getOrigin(){return Ct()}getSize(){return Ct()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Bi(t)}listenImageChange(t){Ct()}load(){Ct()}unlistenImageChange(t){Ct()}ready(){return Promise.resolve()}}class M0 extends S0{constructor(t){super({opacity:1,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=t.fill!==void 0?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius=t.radius,this.radius2_=t.radius2,this.angle_=t.angle!==void 0?t.angle:0,this.stroke_=t.stroke!==void 0?t.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?mt.LOADING:mt.LOADED,this.imageState_===mt.LOADING&&this.ready().then(()=>this.imageState_=mt.LOADED),this.render()}clone(){const t=this.getScale(),e=new M0({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){const t=this.size_,e=this.getDisplacement(),n=this.getScaleArray();return[t[0]/2-e[0]/n[0],t[1]/2+e[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(t){const e=this.fill_?.getKey(),n=`${t},${this.angle_},${this.radius},${this.radius2_},${this.points_},${e}`+Object.values(this.renderOptions_).join(",");let s=Kn.get(n,null,null)?.getImage(1);if(!s){const r=this.renderOptions_,o=Math.ceil(r.size*t),l=Ue(o,o);this.draw_(r,l,t),s=l.canvas,Kn.set(n,null,null,new OT(s,void 0,null,mt.LOADED,null))}return s}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,n){if(e===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return e;let s=this.radius,r=this.radius2_===void 0?s:this.radius2_;if(s<r){const L=s;s=r,r=L}const o=this.radius2_===void 0?this.points_:this.points_*2,l=2*Math.PI/o,c=r*Math.sin(l),f=Math.sqrt(r*r-c*c),g=s-f,m=Math.sqrt(c*c+g*g),p=m/c;if(t==="miter"&&p<=n)return p*e;const v=e/2/p,x=e/2*(g/m),b=Math.sqrt((s+v)*(s+v)+x*x)-s;if(this.radius2_===void 0||t==="bevel")return b*2;const M=s*Math.sin(l),w=Math.sqrt(s*s-M*M),R=r-w,T=Math.sqrt(M*M+R*R)/M;if(T<=n){const L=T*e/2-r-s;return 2*Math.max(b,L)}return b*2}createRenderOptions(){let t=hu,e=fu,n=0,s=null,r=0,o,l=0;this.stroke_&&(o=Is(this.stroke_.getColor()??gh),l=this.stroke_.getWidth()??ph,s=this.stroke_.getLineDash(),r=this.stroke_.getLineDashOffset()??0,e=this.stroke_.getLineJoin()??fu,t=this.stroke_.getLineCap()??hu,n=this.stroke_.getMiterLimit()??dh);const c=this.calculateLineJoinSize_(e,l,n),f=Math.max(this.radius,this.radius2_||0),g=Math.ceil(2*f+c);return{strokeStyle:o,strokeWidth:l,size:g,lineCap:t,lineDash:s,lineDashOffset:r,lineJoin:e,miterLimit:n}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[t,t]}draw_(t,e,n){if(e.scale(n,n),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let s=this.fill_.getColor();s===null&&(s=an),e.fillStyle=Is(s),e.fill()}t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){let e;if(this.fill_){let n=this.fill_.getColor(),s=0;typeof n=="string"&&(n=cu(n)),n===null?s=1:Array.isArray(n)&&(s=n.length===4?n[3]:1),s===0&&(e=Ue(t.size,t.size),this.drawHitDetectionCanvas_(t,e))}return e?e.canvas:this.getImage(1)}createPath_(t){let e=this.points_;const n=this.radius;if(e===1/0)t.arc(0,0,n,0,2*Math.PI);else{const s=this.radius2_===void 0?n:this.radius2_;this.radius2_!==void 0&&(e*=2);const r=this.angle_-Math.PI/2,o=2*Math.PI/e;for(let l=0;l<e;l++){const c=r+l*o,f=l%2===0?n:s;t.lineTo(f*Math.cos(c),f*Math.sin(c))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=an,e.fill(),t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class $h extends M0{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:t.scale!==void 0?t.scale:1,rotation:t.rotation!==void 0?t.rotation:0,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),e=new $h({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius=t,this.render()}}class qi{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=ZS,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&typeof t=="object"&&(t=t.clone()),new qi({geometry:t??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){typeof t=="function"?this.geometryFunction_=t:typeof t=="string"?this.geometryFunction_=function(e){return e.get(t)}:t?t!==void 0&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=ZS,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function YP(i){let t;if(typeof i=="function")t=i;else{let e;Array.isArray(i)?e=i:(se(typeof i.getZIndex=="function","Expected an `Style` or an array of `Style`"),e=[i]),t=function(){return e}}return t}let Dy=null;function UT(i,t){if(!Dy){const e=new Zn({color:"rgba(255,255,255,0.4)"}),n=new yr({color:"#3399CC",width:1.25});Dy=[new qi({image:new $h({fill:e,stroke:n,radius:5}),fill:e,stroke:n})]}return Dy}function ZS(i){return i.getGeometry()}const XP="#333";class w0{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.keepUpright_=t.keepUpright,this.scale_=t.scale,this.scaleArray_=Bi(t.scale!==void 0?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=t.fill!==void 0?t.fill:new Zn({color:XP}),this.maxAngle_=t.maxAngle!==void 0?t.maxAngle:Math.PI/4,this.placement_=t.placement!==void 0?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=t.stroke!==void 0?t.stroke:null,this.offsetX_=t.offsetX!==void 0?t.offsetX:0,this.offsetY_=t.offsetY!==void 0?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=t.padding===void 0?null:t.padding,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new w0({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()instanceof Zn?this.getFill().clone():this.getFill(),stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setKeepUpright(t){this.keepUpright_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Bi(t!==void 0?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}const Pe={ANIMATING:0,INTERACTING:1},bt={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Od=[bt.FILL],pa=[bt.STROKE],mo=[bt.BEGIN_PATH],$S=[bt.CLOSE_PATH];class Qh extends DT{constructor(t,e,n,s){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=s,this.maxLineWidth=0,this.resolution=n,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio;return e==1?t:t.map(function(n){return n*e})}appendFlatPointCoordinates(t,e){const n=this.getBufferedMaxExtent(),s=this.tmpCoordinate_,r=this.coordinates;let o=r.length;for(let l=0,c=t.length;l<c;l+=e)s[0]=t[l],s[1]=t[l+1],Co(n,s)&&(r[o++]=s[0],r[o++]=s[1]);return o}appendFlatLineCoordinates(t,e,n,s,r,o){const l=this.coordinates;let c=l.length;const f=this.getBufferedMaxExtent();o&&(e+=s);let g=t[e],m=t[e+1];const p=this.tmpCoordinate_;let v=!0,x,E,b;for(x=e+s;x<n;x+=s)p[0]=t[x],p[1]=t[x+1],b=S_(f,p),b!==E?(v&&(l[c++]=g,l[c++]=m,v=!1),l[c++]=p[0],l[c++]=p[1]):b===bi.INTERSECTING?(l[c++]=p[0],l[c++]=p[1],v=!1):v=!0,g=p[0],m=p[1],E=b;return(r&&v||x===e+s)&&(l[c++]=g,l[c++]=m),c}drawCustomCoordinates_(t,e,n,s,r){for(let o=0,l=n.length;o<l;++o){const c=n[o],f=this.appendFlatLineCoordinates(t,e,c,s,!1,!1);r.push(f),e=c}return e}drawCustom(t,e,n,s,r){this.beginGeometry(t,e,r);const o=t.getType(),l=t.getStride(),c=this.coordinates.length;let f,g,m,p,v;switch(o){case"MultiPolygon":f=t.getOrientedFlatCoordinates(),p=[];const x=t.getEndss();v=0;for(let E=0,b=x.length;E<b;++E){const M=[];v=this.drawCustomCoordinates_(f,v,x[E],l,M),p.push(M)}this.instructions.push([bt.CUSTOM,c,p,t,n,P_,r]),this.hitDetectionInstructions.push([bt.CUSTOM,c,p,t,s||n,P_,r]);break;case"Polygon":case"MultiLineString":m=[],f=o=="Polygon"?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),v=this.drawCustomCoordinates_(f,0,t.getEnds(),l,m),this.instructions.push([bt.CUSTOM,c,m,t,n,hh,r]),this.hitDetectionInstructions.push([bt.CUSTOM,c,m,t,s||n,hh,r]);break;case"LineString":case"Circle":f=t.getFlatCoordinates(),g=this.appendFlatLineCoordinates(f,0,f.length,l,!1,!1),this.instructions.push([bt.CUSTOM,c,g,t,n,ma,r]),this.hitDetectionInstructions.push([bt.CUSTOM,c,g,t,s||n,ma,r]);break;case"MultiPoint":f=t.getFlatCoordinates(),g=this.appendFlatPointCoordinates(f,l),g>c&&(this.instructions.push([bt.CUSTOM,c,g,t,n,ma,r]),this.hitDetectionInstructions.push([bt.CUSTOM,c,g,t,s||n,ma,r]));break;case"Point":f=t.getFlatCoordinates(),this.coordinates.push(f[0],f[1]),g=this.coordinates.length,this.instructions.push([bt.CUSTOM,c,g,t,n,void 0,r]),this.hitDetectionInstructions.push([bt.CUSTOM,c,g,t,s||n,void 0,r]);break}this.endGeometry(e)}beginGeometry(t,e,n){this.beginGeometryInstruction1_=[bt.BEGIN_GEOMETRY,e,0,t,n],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[bt.BEGIN_GEOMETRY,e,0,t,n],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;t.reverse();let e;const n=t.length;let s,r,o=-1;for(e=0;e<n;++e)s=t[e],r=s[0],r==bt.END_GEOMETRY?o=e:r==bt.BEGIN_GEOMETRY&&(s[2]=e,yL(this.hitDetectionInstructions,o,e),o=-1)}fillStyleToState(t,e={}){if(t){const n=t.getColor();e.fillPatternScale=n&&typeof n=="object"&&"src"in n?this.pixelRatio:1,e.fillStyle=Is(n||an)}else e.fillStyle=void 0;return e}strokeStyleToState(t,e={}){if(t){const n=t.getColor();e.strokeStyle=Is(n||gh);const s=t.getLineCap();e.lineCap=s!==void 0?s:hu;const r=t.getLineDash();e.lineDash=r?r.slice():vr;const o=t.getLineDashOffset();e.lineDashOffset=o||xr;const l=t.getLineJoin();e.lineJoin=l!==void 0?l:fu;const c=t.getWidth();e.lineWidth=c!==void 0?c:ph;const f=t.getMiterLimit();e.miterLimit=f!==void 0?f:dh,e.lineWidth>this.maxLineWidth&&(this.maxLineWidth=e.lineWidth,this.bufferedMaxExtent_=null)}else e.strokeStyle=void 0,e.lineCap=void 0,e.lineDash=null,e.lineDashOffset=void 0,e.lineJoin=void 0,e.lineWidth=void 0,e.miterLimit=void 0;return e}setFillStrokeStyle(t,e){const n=this.state;this.fillStyleToState(t,n),this.strokeStyleToState(e,n)}createFill(t){const e=t.fillStyle,n=[bt.SET_FILL_STYLE,e];return typeof e!="string"&&n.push(t.fillPatternScale),n}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[bt.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,t.lineDash?this.applyPixelRatio(t.lineDash):null,t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const n=t.fillStyle;(typeof n!="string"||t.currentFillStyle!=n)&&(this.instructions.push(e.call(this,t)),t.currentFillStyle=n)}updateStrokeStyle(t,e){const n=t.strokeStyle,s=t.lineCap,r=t.lineDash,o=t.lineDashOffset,l=t.lineJoin,c=t.lineWidth,f=t.miterLimit;(t.currentStrokeStyle!=n||t.currentLineCap!=s||r!=t.currentLineDash&&!Ia(t.currentLineDash,r)||t.currentLineDashOffset!=o||t.currentLineJoin!=l||t.currentLineWidth!=c||t.currentMiterLimit!=f)&&(e.call(this,t),t.currentStrokeStyle=n,t.currentLineCap=s,t.currentLineDash=r,t.currentLineDashOffset=o,t.currentLineJoin=l,t.currentLineWidth=c,t.currentMiterLimit=f)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const e=[bt.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Y4(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;Sa(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class WP extends Qh{constructor(t,e,n,s){super(t,e,n,s),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e,n){if(!this.image_||this.maxExtent&&!Co(this.maxExtent,t.getFlatCoordinates()))return;this.beginGeometry(t,e,n);const s=t.getFlatCoordinates(),r=t.getStride(),o=this.coordinates.length,l=this.appendFlatPointCoordinates(s,r);this.instructions.push([bt.DRAW_IMAGE,o,l,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([bt.DRAW_IMAGE,o,l,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e,n){if(!this.image_)return;this.beginGeometry(t,e,n);const s=t.getFlatCoordinates(),r=[];for(let c=0,f=s.length;c<f;c+=t.getStride())(!this.maxExtent||Co(this.maxExtent,s.slice(c,c+2)))&&r.push(s[c],s[c+1]);const o=this.coordinates.length,l=this.appendFlatPointCoordinates(r,2);this.instructions.push([bt.DRAW_IMAGE,o,l,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([bt.DRAW_IMAGE,o,l,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const n=t.getAnchor(),s=t.getSize(),r=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=s[1],this.opacity_=t.getOpacity(),this.originX_=r[0],this.originY_=r[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=s[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}class KP extends Qh{constructor(t,e,n,s){super(t,e,n,s)}drawFlatCoordinates_(t,e,n,s){const r=this.coordinates.length,o=this.appendFlatLineCoordinates(t,e,n,s,!1,!1),l=[bt.MOVE_TO_LINE_TO,r,o];return this.instructions.push(l),this.hitDetectionInstructions.push(l),n}drawLineString(t,e,n){const s=this.state,r=s.strokeStyle,o=s.lineWidth;if(r===void 0||o===void 0)return;this.updateStrokeStyle(s,this.applyStroke),this.beginGeometry(t,e,n),this.hitDetectionInstructions.push([bt.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,vr,xr],mo);const l=t.getFlatCoordinates(),c=t.getStride();this.drawFlatCoordinates_(l,0,l.length,c),this.hitDetectionInstructions.push(pa),this.endGeometry(e)}drawMultiLineString(t,e,n){const s=this.state,r=s.strokeStyle,o=s.lineWidth;if(r===void 0||o===void 0)return;this.updateStrokeStyle(s,this.applyStroke),this.beginGeometry(t,e,n),this.hitDetectionInstructions.push([bt.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,vr,xr],mo);const l=t.getEnds(),c=t.getFlatCoordinates(),f=t.getStride();let g=0;for(let m=0,p=l.length;m<p;++m)g=this.drawFlatCoordinates_(c,g,l[m],f);this.hitDetectionInstructions.push(pa),this.endGeometry(e)}finish(){const t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(pa),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(pa),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(mo)}}class QS extends Qh{constructor(t,e,n,s){super(t,e,n,s)}drawFlatCoordinatess_(t,e,n,s){const r=this.state,o=r.fillStyle!==void 0,l=r.strokeStyle!==void 0,c=n.length;this.instructions.push(mo),this.hitDetectionInstructions.push(mo);for(let f=0;f<c;++f){const g=n[f],m=this.coordinates.length,p=this.appendFlatLineCoordinates(t,e,g,s,!0,!l),v=[bt.MOVE_TO_LINE_TO,m,p];this.instructions.push(v),this.hitDetectionInstructions.push(v),l&&(this.instructions.push($S),this.hitDetectionInstructions.push($S)),e=g}return o&&(this.instructions.push(Od),this.hitDetectionInstructions.push(Od)),l&&(this.instructions.push(pa),this.hitDetectionInstructions.push(pa)),e}drawCircle(t,e,n){const s=this.state,r=s.fillStyle,o=s.strokeStyle;if(r===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,n),s.fillStyle!==void 0&&this.hitDetectionInstructions.push([bt.SET_FILL_STYLE,an]),s.strokeStyle!==void 0&&this.hitDetectionInstructions.push([bt.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,vr,xr]);const l=t.getFlatCoordinates(),c=t.getStride(),f=this.coordinates.length;this.appendFlatLineCoordinates(l,0,l.length,c,!1,!1);const g=[bt.CIRCLE,f];this.instructions.push(mo,g),this.hitDetectionInstructions.push(mo,g),s.fillStyle!==void 0&&(this.instructions.push(Od),this.hitDetectionInstructions.push(Od)),s.strokeStyle!==void 0&&(this.instructions.push(pa),this.hitDetectionInstructions.push(pa)),this.endGeometry(e)}drawPolygon(t,e,n){const s=this.state,r=s.fillStyle,o=s.strokeStyle;if(r===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,n),s.fillStyle!==void 0&&this.hitDetectionInstructions.push([bt.SET_FILL_STYLE,an]),s.strokeStyle!==void 0&&this.hitDetectionInstructions.push([bt.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,vr,xr]);const l=t.getEnds(),c=t.getOrientedFlatCoordinates(),f=t.getStride();this.drawFlatCoordinatess_(c,0,l,f),this.endGeometry(e)}drawMultiPolygon(t,e,n){const s=this.state,r=s.fillStyle,o=s.strokeStyle;if(r===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,n),s.fillStyle!==void 0&&this.hitDetectionInstructions.push([bt.SET_FILL_STYLE,an]),s.strokeStyle!==void 0&&this.hitDetectionInstructions.push([bt.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,vr,xr]);const l=t.getEndss(),c=t.getOrientedFlatCoordinates(),f=t.getStride();let g=0;for(let m=0,p=l.length;m<p;++m)g=this.drawFlatCoordinatess_(c,g,l[m],f);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(t!==0){const e=this.coordinates;for(let n=0,s=e.length;n<s;++n)e[n]=oo(e[n],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;this.updateFillStyle(t,this.createFill),this.updateStrokeStyle(t,this.applyStroke)}}function ZP(i,t,e,n,s){const r=[];let o=e,l=0,c=t.slice(e,2);for(;l<i&&o+s<n;){const[f,g]=c.slice(-2),m=t[o+s],p=t[o+s+1],v=Math.sqrt((m-f)*(m-f)+(p-g)*(p-g));if(l+=v,l>=i){const x=(i-l+v)/v,E=wn(f,m,x),b=wn(g,p,x);c.push(E,b),r.push(c),c=[E,b],l==i&&(o+=s),l=0}else if(l<i)c.push(t[o+s],t[o+s+1]),o+=s;else{const x=v-l,E=wn(f,m,x/v),b=wn(g,p,x/v);c.push(E,b),r.push(c),c=[E,b],l=0,o+=s}}return l>0&&r.push(c),r}function $P(i,t,e,n,s){let r=e,o=e,l=0,c=0,f=e,g,m,p,v,x,E,b,M,w,R;for(m=e;m<n;m+=s){const A=t[m],T=t[m+1];x!==void 0&&(w=A-x,R=T-E,v=Math.sqrt(w*w+R*R),b!==void 0&&(c+=p,g=Math.acos((b*w+M*R)/(p*v)),g>i&&(c>l&&(l=c,r=f,o=m),c=0,f=m-s)),p=v,b=w,M=R),x=A,E=T}return c+=v,c>l?[f,m]:[r,o]}const zg={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class QP extends Qh{constructor(t,e,n,s){super(t,e,n,s),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[an]={fillStyle:an},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e,n){const s=this.textFillState_,r=this.textStrokeState_,o=this.textState_;if(this.text_===""||!o||!s&&!r)return;const l=this.coordinates;let c=l.length;const f=t.getType();let g=null,m=t.getStride();if(o.placement==="line"&&(f=="LineString"||f=="MultiLineString"||f=="Polygon"||f=="MultiPolygon")){if(!Ze(this.maxExtent,t.getExtent()))return;let p;if(g=t.getFlatCoordinates(),f=="LineString")p=[g.length];else if(f=="MultiLineString")p=t.getEnds();else if(f=="Polygon")p=t.getEnds().slice(0,1);else if(f=="MultiPolygon"){const b=t.getEndss();p=[];for(let M=0,w=b.length;M<w;++M)p.push(b[M][0])}this.beginGeometry(t,e,n);const v=o.repeat,x=v?void 0:o.textAlign;let E=0;for(let b=0,M=p.length;b<M;++b){let w;v?w=ZP(v*this.resolution,g,E,p[b],m):w=[g.slice(E,p[b])];for(let R=0,A=w.length;R<A;++R){const T=w[R];let L=0,I=T.length;if(x==null){const k=$P(o.maxAngle,T,0,T.length,2);L=k[0],I=k[1]}for(let k=L;k<I;k+=m)l.push(T[k],T[k+1]);const P=l.length;E=p[b],this.drawChars_(c,P),c=P}}this.endGeometry(e)}else{let p=o.overflow?null:[];switch(f){case"Point":case"MultiPoint":g=t.getFlatCoordinates();break;case"LineString":g=t.getFlatMidpoint();break;case"Circle":g=t.getCenter();break;case"MultiLineString":g=t.getFlatMidpoints(),m=2;break;case"Polygon":g=t.getFlatInteriorPoint(),o.overflow||p.push(g[2]/this.resolution),m=3;break;case"MultiPolygon":const A=t.getFlatInteriorPoints();g=[];for(let T=0,L=A.length;T<L;T+=3)o.overflow||p.push(A[T+2]/this.resolution),g.push(A[T],A[T+1]);if(g.length===0)return;m=2;break}const v=this.appendFlatPointCoordinates(g,m);if(v===c)return;if(p&&(v-c)/2!==g.length/m){let A=c/2;p=p.filter((T,L)=>{const I=l[(A+L)*2]===g[L*m]&&l[(A+L)*2+1]===g[L*m+1];return I||--A,I})}this.saveTextStates_();const x=o.backgroundFill?this.createFill(this.fillStyleToState(o.backgroundFill)):null,E=o.backgroundStroke?this.createStroke(this.strokeStyleToState(o.backgroundStroke)):null;this.beginGeometry(t,e,n);let b=o.padding;if(b!=go&&(o.scale[0]<0||o.scale[1]<0)){let A=o.padding[0],T=o.padding[1],L=o.padding[2],I=o.padding[3];o.scale[0]<0&&(T=-T,I=-I),o.scale[1]<0&&(A=-A,L=-L),b=[A,T,L,I]}const M=this.pixelRatio;this.instructions.push([bt.DRAW_IMAGE,c,v,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,b==go?go:b.map(function(A){return A*M}),x,E,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,p]);const w=1/M,R=x?x.slice(0):null;R&&(R[1]=an),this.hitDetectionInstructions.push([bt.DRAW_IMAGE,c,v,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[w,w],NaN,this.declutterMode_,this.declutterImageWithText_,b,R,E,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?an:this.fillKey_,this.textOffsetX_,this.textOffsetY_,p]),this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,n=this.textFillState_,s=this.strokeKey_;t&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const r=this.textKey_;r in this.textStates||(this.textStates[r]={font:e.font,textAlign:e.textAlign||mh,justify:e.justify,textBaseline:e.textBaseline||Lg,scale:e.scale});const o=this.fillKey_;n&&(o in this.fillStates||(this.fillStates[o]={fillStyle:n.fillStyle}))}drawChars_(t,e){const n=this.textStrokeState_,s=this.textState_,r=this.strokeKey_,o=this.textKey_,l=this.fillKey_;this.saveTextStates_();const c=this.pixelRatio,f=zg[s.textBaseline],g=this.textOffsetY_*c,m=this.text_,p=n?n.lineWidth*Math.abs(s.scale[0])/2:0;this.instructions.push([bt.DRAW_CHARS,t,e,f,s.overflow,l,s.maxAngle,c,g,r,p*c,m,o,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([bt.DRAW_CHARS,t,e,f,s.overflow,l&&an,s.maxAngle,c,g,r,p*c,m,o,1/c,this.declutterMode_,this.textKeepUpright_])}setTextStyle(t,e){let n,s,r;if(!t)this.text_="";else{const o=t.getFill();o?(s=this.textFillState_,s||(s={},this.textFillState_=s),s.fillStyle=Is(o.getColor()||an)):(s=null,this.textFillState_=s);const l=t.getStroke();if(!l)r=null,this.textStrokeState_=r;else{r=this.textStrokeState_,r||(r={},this.textStrokeState_=r);const E=l.getLineDash(),b=l.getLineDashOffset(),M=l.getWidth(),w=l.getMiterLimit();r.lineCap=l.getLineCap()||hu,r.lineDash=E?E.slice():vr,r.lineDashOffset=b===void 0?xr:b,r.lineJoin=l.getLineJoin()||fu,r.lineWidth=M===void 0?ph:M,r.miterLimit=w===void 0?dh:w,r.strokeStyle=Is(l.getColor()||gh)}n=this.textState_;const c=t.getFont()||IT;vP(c);const f=t.getScaleArray();n.overflow=t.getOverflow(),n.font=c,n.maxAngle=t.getMaxAngle(),n.placement=t.getPlacement(),n.textAlign=t.getTextAlign(),n.repeat=t.getRepeat(),n.justify=t.getJustify(),n.textBaseline=t.getTextBaseline()||Lg,n.backgroundFill=t.getBackgroundFill(),n.backgroundStroke=t.getBackgroundStroke(),n.padding=t.getPadding()||go,n.scale=f===void 0?[1,1]:f;const g=t.getOffsetX(),m=t.getOffsetY(),p=t.getRotateWithView(),v=t.getKeepUpright(),x=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=g===void 0?0:g,this.textOffsetY_=m===void 0?0:m,this.textRotateWithView_=p===void 0?!1:p,this.textKeepUpright_=v===void 0?!0:v,this.textRotation_=x===void 0?0:x,this.strokeKey_=r?(typeof r.strokeStyle=="string"?r.strokeStyle:At(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.repeat||"?")+(n.justify||"?")+(n.textBaseline||"?"),this.fillKey_=s&&s.fillStyle?typeof s.fillStyle=="string"?s.fillStyle:"|"+At(s.fillStyle):""}this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}const JP={Circle:QS,Default:Qh,Image:WP,LineString:KP,Polygon:QS,Text:QP};class HT{constructor(t,e,n,s){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=s,this.resolution_=n,this.buildersByZIndex_={}}finish(){const t={};for(const e in this.buildersByZIndex_){t[e]=t[e]||{};const n=this.buildersByZIndex_[e];for(const s in n){const r=n[s].finish();t[e][s]=r}}return t}getBuilder(t,e){const n=t!==void 0?t.toString():"0";let s=this.buildersByZIndex_[n];s===void 0&&(s={},this.buildersByZIndex_[n]=s);let r=s[e];if(r===void 0){const o=JP[e];r=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),s[e]=r}return r}}function tN(i,t,e,n,s,r,o,l,c,f,g,m,p=!0){let v=i[t],x=i[t+1],E=0,b=0,M=0,w=0;function R(){E=v,b=x,t+=n,v=i[t],x=i[t+1],w+=M,M=Math.sqrt((v-E)*(v-E)+(x-b)*(x-b))}do R();while(t<e-n&&w+M<r);let A=M===0?0:(r-w)/M;const T=wn(E,v,A),L=wn(b,x,A),I=t-n,P=w,k=r+l*c(f,s,g);for(;t<e-n&&w+M<k;)R();A=M===0?0:(k-w)/M;const Y=wn(E,v,A),F=wn(b,x,A);let G=!1;if(p)if(m){const j=[T,L,Y,F];yT(j,0,4,2,m,j,j),G=j[0]>j[2]}else G=T>Y;const K=Math.PI,$=[],q=I+n===t;t=I,M=0,w=P,v=i[t],x=i[t+1];let D;if(q){R(),D=Math.atan2(x-b,v-E),G&&(D+=D>0?-K:K);const j=(Y+T)/2,U=(F+L)/2;return $[0]=[j,U,(k-r)/2,D,s],$}s=s.replace(/\n/g," ");for(let j=0,U=s.length;j<U;){R();let J=Math.atan2(x-b,v-E);if(G&&(J+=J>0?-K:K),D!==void 0){let ct=J-D;if(ct+=ct>K?-2*K:ct<-K?2*K:0,Math.abs(ct)>o)return null}D=J;const st=j;let O=0;for(;j<U;++j){const ct=G?U-j-1:j,gt=l*c(f,s[ct],g);if(t+n<e&&w+M<r+O+gt/2)break;O+=gt}if(j===st)continue;const N=G?s.substring(U-st,U-j):s.substring(st,j);A=M===0?0:(r+O/2-w)/M;const it=wn(E,v,A),at=wn(b,x,A);$.push([it,at,O/2,J,N]),r+=O}return $}class X1{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(Ag(),{get:(t,e)=>{if(typeof Ag()[e]=="function")return this.push_(e),this.pushMethodArgs_},set:(t,e,n)=>(this.push_(e,n),!0)})}push_(...t){const e=this.instructions_,n=this.zIndex+this.offset_;e[n]||(e[n]=[]),e[n].push(...t)}pushMethodArgs_=(...t)=>(this.push_(t),this);pushFunction(t){this.push_(t)}getContext(){return this.context_}draw(t){this.instructions_.forEach(e=>{for(let n=0,s=e.length;n<s;++n){const r=e[n];if(typeof r=="function"){r(t);continue}const o=e[++n];if(typeof t[r]=="function")t[r](...o);else{if(typeof o=="function"){t[r]=o(t);continue}t[r]=o}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const Rl=ts(),ia=[],lr=[],ur=[],na=[];function JS(i){return i[3].declutterBox}const tM=new RegExp("[-----]");function Iy(i,t){return t==="start"?t=tM.test(i)?"right":"left":t==="end"&&(t=tM.test(i)?"left":"right"),zg[t]}function eN(i,t,e){return e>0&&i.push(`
`,""),i.push(t,""),i}function iN(i,t,e){return e%2===0&&(i+=t),i}class nN{constructor(t,e,n,s,r){this.overlaps=n,this.pixelRatio=e,this.resolution=t,this.alignAndScaleFill_,this.instructions=s.instructions,this.coordinates=s.coordinates,this.coordinateCache_={},this.renderedTransform_=dn(),this.hitDetectionInstructions=s.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=s.fillStates||{},this.strokeStates=s.strokeStates||{},this.textStates=s.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=r?new X1:null}getZIndexContext(){return this.zIndexContext_}createLabel(t,e,n,s){const r=t+e+n+s;if(this.labels_[r])return this.labels_[r];const o=s?this.strokeStates[s]:null,l=n?this.fillStates[n]:null,c=this.textStates[e],f=this.pixelRatio,g=[c.scale[0]*f,c.scale[1]*f],m=c.justify?zg[c.justify]:Iy(Array.isArray(t)?t[0]:t,c.textAlign||mh),p=s&&o.lineWidth?o.lineWidth:0,v=Array.isArray(t)?t:String(t).split(`
`).reduce(eN,[]),{width:x,height:E,widths:b,heights:M,lineWidths:w}=bP(c,v),R=x+p,A=[],T=(R+2)*g[0],L=(E+p)*g[1],I={width:T<0?Math.floor(T):Math.ceil(T),height:L<0?Math.floor(L):Math.ceil(L),contextInstructions:A};(g[0]!=1||g[1]!=1)&&A.push("scale",g),s&&(A.push("strokeStyle",o.strokeStyle),A.push("lineWidth",p),A.push("lineCap",o.lineCap),A.push("lineJoin",o.lineJoin),A.push("miterLimit",o.miterLimit),A.push("setLineDash",[o.lineDash]),A.push("lineDashOffset",o.lineDashOffset)),n&&A.push("fillStyle",l.fillStyle),A.push("textBaseline","middle"),A.push("textAlign","center");const P=.5-m;let k=m*R+P*p;const Y=[],F=[];let G=0,K=0,$=0,q=0,D;for(let j=0,U=v.length;j<U;j+=2){const J=v[j];if(J===`
`){K+=G,G=0,k=m*R+P*p,++q;continue}const st=v[j+1]||c.font;st!==D&&(s&&Y.push("font",st),n&&F.push("font",st),D=st),G=Math.max(G,M[$]);const O=[J,k+P*b[$]+m*(b[$]-w[q]),.5*(p+G)+K];k+=b[$],s&&Y.push("strokeText",O),n&&F.push("fillText",O),++$}return Array.prototype.push.apply(A,Y),Array.prototype.push.apply(A,F),this.labels_[r]=I,I}replayTextBackground_(t,e,n,s,r,o,l){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,n),t.lineTo.apply(t,s),t.lineTo.apply(t,r),t.lineTo.apply(t,e),o&&(this.alignAndScaleFill_=o[2],t.fillStyle=o[1],this.fill_(t)),l&&(this.setStrokeStyle_(t,l),t.stroke())}calculateImageOrLabelDimensions_(t,e,n,s,r,o,l,c,f,g,m,p,v,x,E,b){l*=p[0],c*=p[1];let M=n-l,w=s-c;const R=r+f>t?t-f:r,A=o+g>e?e-g:o,T=x[3]+R*p[0]+x[1],L=x[0]+A*p[1]+x[2],I=M-x[3],P=w-x[0];(E||m!==0)&&(ia[0]=I,na[0]=I,ia[1]=P,lr[1]=P,lr[0]=I+T,ur[0]=lr[0],ur[1]=P+L,na[1]=ur[1]);let k;return m!==0?(k=Bs(dn(),n,s,1,1,m,-n,-s),oi(k,ia),oi(k,lr),oi(k,ur),oi(k,na),Er(Math.min(ia[0],lr[0],ur[0],na[0]),Math.min(ia[1],lr[1],ur[1],na[1]),Math.max(ia[0],lr[0],ur[0],na[0]),Math.max(ia[1],lr[1],ur[1],na[1]),Rl)):Er(Math.min(I,I+T),Math.min(P,P+L),Math.max(I,I+T),Math.max(P,P+L),Rl),v&&(M=Math.round(M),w=Math.round(w)),{drawImageX:M,drawImageY:w,drawImageW:R,drawImageH:A,originX:f,originY:g,declutterBox:{minX:Rl[0],minY:Rl[1],maxX:Rl[2],maxY:Rl[3],value:b},canvasTransform:k,scale:p}}replayImageOrLabel_(t,e,n,s,r,o,l){const c=!!(o||l),f=s.declutterBox,g=l?l[2]*s.scale[0]/2:0;return f.minX-g<=e[0]&&f.maxX+g>=0&&f.minY-g<=e[1]&&f.maxY+g>=0&&(c&&this.replayTextBackground_(t,ia,lr,ur,na,o,l),EP(t,s.canvasTransform,r,n,s.originX,s.originY,s.drawImageW,s.drawImageH,s.drawImageX,s.drawImageY,s.scale)),!0}fill_(t){const e=this.alignAndScaleFill_;if(e){const n=oi(this.renderedTransform_,[0,0]),s=512*this.pixelRatio;t.save(),t.translate(n[0]%s,n[1]%s),e!==1&&t.scale(e,e),t.rotate(this.viewRotation_)}t.fill(),e&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],e[1]&&(t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6]))}drawLabelWithPointPlacement_(t,e,n,s){const r=this.textStates[e],o=this.createLabel(t,e,s,n),l=this.strokeStates[n],c=this.pixelRatio,f=Iy(Array.isArray(t)?t[0]:t,r.textAlign||mh),g=zg[r.textBaseline||Lg],m=l&&l.lineWidth?l.lineWidth:0,p=o.width/c-2*r.scale[0],v=f*p+2*(.5-f)*m,x=g*o.height/c+2*(.5-g)*m;return{label:o,anchorX:v,anchorY:x}}execute_(t,e,n,s,r,o,l,c){const f=this.zIndexContext_;let g;this.pixelCoordinates_&&Ia(n,this.renderedTransform_)?g=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),g=wa(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),NL(this.renderedTransform_,n));let m=0;const p=s.length;let v=0,x,E,b,M,w,R,A,T,L,I,P,k,Y,F=0,G=0;const K=this.coordinateCache_,$=this.viewRotation_,q=Math.round(Math.atan2(-n[1],n[0])*1e12)/1e12,D={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:$},j=this.instructions!=s||this.overlaps?0:200;let U,J,st,O;for(;m<p;){const N=s[m];switch(N[0]){case bt.BEGIN_GEOMETRY:U=N[1],O=N[3],U.getGeometry()?l!==void 0&&!Ze(l,O.getExtent())?m=N[2]+1:++m:m=N[2],f&&(f.zIndex=N[4]);break;case bt.BEGIN_PATH:F>j&&(this.fill_(t),F=0),G>j&&(t.stroke(),G=0),!F&&!G&&(t.beginPath(),w=NaN,R=NaN),++m;break;case bt.CIRCLE:v=N[1];const at=g[v],ct=g[v+1],gt=g[v+2],yt=g[v+3],Gt=gt-at,Mt=yt-ct,le=Math.sqrt(Gt*Gt+Mt*Mt);t.moveTo(at+le,ct),t.arc(at,ct,le,0,2*Math.PI,!0),++m;break;case bt.CLOSE_PATH:t.closePath(),++m;break;case bt.CUSTOM:v=N[1],x=N[2];const ft=N[3],Xi=N[4],mn=N[5];D.geometry=ft,D.feature=U,m in K||(K[m]=[]);const wt=K[m];mn?mn(g,v,x,2,wt):(wt[0]=g[v],wt[1]=g[v+1],wt.length=2),f&&(f.zIndex=N[6]),Xi(wt,D),++m;break;case bt.DRAW_IMAGE:v=N[1],x=N[2],L=N[3],E=N[4],b=N[5];let hi=N[6];const $e=N[7],De=N[8],pn=N[9],_e=N[10];let Si=N[11];const Li=N[12];let Mi=N[13];M=N[14]||"declutter";const Ee=N[15];if(!L&&N.length>=20){I=N[19],P=N[20],k=N[21],Y=N[22];const Ve=this.drawLabelWithPointPlacement_(I,P,k,Y);L=Ve.label,N[3]=L;const ns=N[23];E=(Ve.anchorX-ns)*this.pixelRatio,N[4]=E;const wi=N[24];b=(Ve.anchorY-wi)*this.pixelRatio,N[5]=b,hi=L.height,N[6]=hi,Mi=L.width,N[13]=Mi}let Qe;N.length>25&&(Qe=N[25]);let ue,Qt,Xt;N.length>17?(ue=N[16],Qt=N[17],Xt=N[18]):(ue=go,Qt=null,Xt=null),_e&&q?Si+=$:!_e&&!q&&(Si-=$);let qt=0;for(;v<x;v+=2){if(Qe&&Qe[qt++]<Mi/this.pixelRatio)continue;const Ve=this.calculateImageOrLabelDimensions_(L.width,L.height,g[v],g[v+1],Mi,hi,E,b,De,pn,Si,Li,r,ue,!!Qt||!!Xt,U),ns=[t,e,L,Ve,$e,Qt,Xt];if(c){let wi,Wi,yi;if(Ee){const Te=x-v;if(!Ee[Te]){Ee[Te]={args:ns,declutterMode:M};continue}const _i=Ee[Te];wi=_i.args,Wi=_i.declutterMode,delete Ee[Te],yi=JS(wi)}let ss,Ln;if(wi&&(Wi!=="declutter"||!c.collides(yi))&&(ss=!0),(M!=="declutter"||!c.collides(Ve.declutterBox))&&(Ln=!0),Wi==="declutter"&&M==="declutter"){const Te=ss&&Ln;ss=Te,Ln=Te}ss&&(Wi!=="none"&&c.insert(yi),this.replayImageOrLabel_.apply(this,wi)),Ln&&(M!=="none"&&c.insert(Ve.declutterBox),this.replayImageOrLabel_.apply(this,ns))}else this.replayImageOrLabel_.apply(this,ns)}++m;break;case bt.DRAW_CHARS:const Ie=N[1],Lt=N[2],kt=N[3],He=N[4];Y=N[5];const we=N[6],ve=N[7],Ge=N[8];k=N[9];const Kt=N[10];I=N[11],Array.isArray(I)&&(I=I.reduce(iN,"")),P=N[12];const pi=[N[13],N[13]];M=N[14]||"declutter";const Se=N[15],qe=this.textStates[P],ke=qe.font,Zt=[qe.scale[0]*ve,qe.scale[1]*ve];let fi;ke in this.widths_?fi=this.widths_[ke]:(fi={},this.widths_[ke]=fi);const In=U1(g,Ie,Lt,2),Hs=Math.abs(Zt[0])*HS(ke,I,fi);if(He||Hs<=In){const Ve=this.textStates[P].textAlign,ns=(In-Hs)*Iy(I,Ve),wi=tN(g,Ie,Lt,2,I,ns,we,Math.abs(Zt[0]),HS,ke,fi,q?0:this.viewRotation_,Se);t:if(wi){const Wi=[];let yi,ss,Ln,Te,_i;if(k)for(yi=0,ss=wi.length;yi<ss;++yi){_i=wi[yi],Ln=_i[4],Te=this.createLabel(Ln,P,"",k),E=_i[2]+(Zt[0]<0?-Kt:Kt),b=kt*Te.height+(.5-kt)*2*Kt*Zt[1]/Zt[0]-Ge;const yn=this.calculateImageOrLabelDimensions_(Te.width,Te.height,_i[0],_i[1],Te.width,Te.height,E,b,0,0,_i[3],pi,!1,go,!1,U);if(c&&M==="declutter"&&c.collides(yn.declutterBox))break t;Wi.push([t,e,Te,yn,1,null,null])}if(Y)for(yi=0,ss=wi.length;yi<ss;++yi){_i=wi[yi],Ln=_i[4],Te=this.createLabel(Ln,P,Y,""),E=_i[2],b=kt*Te.height-Ge;const yn=this.calculateImageOrLabelDimensions_(Te.width,Te.height,_i[0],_i[1],Te.width,Te.height,E,b,0,0,_i[3],pi,!1,go,!1,U);if(c&&M==="declutter"&&c.collides(yn.declutterBox))break t;Wi.push([t,e,Te,yn,1,null,null])}c&&M!=="none"&&c.load(Wi.map(JS));for(let yn=0,Cu=Wi.length;yn<Cu;++yn)this.replayImageOrLabel_.apply(this,Wi[yn])}}++m;break;case bt.END_GEOMETRY:if(o!==void 0){U=N[1];const Ve=o(U,O,M);if(Ve)return Ve}++m;break;case bt.FILL:j?F++:this.fill_(t),++m;break;case bt.MOVE_TO_LINE_TO:for(v=N[1],x=N[2],J=g[v],st=g[v+1],t.moveTo(J,st),w=J+.5|0,R=st+.5|0,v+=2;v<x;v+=2)J=g[v],st=g[v+1],A=J+.5|0,T=st+.5|0,(v==x-2||A!==w||T!==R)&&(t.lineTo(J,st),w=A,R=T);++m;break;case bt.SET_FILL_STYLE:this.alignAndScaleFill_=N[2],F&&(this.fill_(t),F=0,G&&(t.stroke(),G=0)),t.fillStyle=N[1],++m;break;case bt.SET_STROKE_STYLE:G&&(t.stroke(),G=0),this.setStrokeStyle_(t,N),++m;break;case bt.STROKE:j?G++:t.stroke(),++m;break;default:++m;break}}F&&this.fill_(t),G&&t.stroke()}execute(t,e,n,s,r,o){this.viewRotation_=s,this.execute_(t,e,n,this.instructions,r,void 0,void 0,o)}executeHitDetection(t,e,n,s,r){return this.viewRotation_=n,this.execute_(t,[t.canvas.width,t.canvas.height],e,this.hitDetectionInstructions,!0,s,r)}}const co=["Polygon","Circle","LineString","Image","Text","Default"],Gg=["Image","Text"],sN=co.filter(i=>!Gg.includes(i));class qT{constructor(t,e,n,s,r,o,l){this.maxExtent_=t,this.overlaps_=s,this.pixelRatio_=n,this.resolution_=e,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=dn(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(r,l)}clip(t,e){const n=this.getClipCoords(e);t.beginPath(),t.moveTo(n[0],n[1]),t.lineTo(n[2],n[3]),t.lineTo(n[4],n[5]),t.lineTo(n[6],n[7]),t.clip()}createExecutors_(t,e){for(const n in t){let s=this.executorsByZIndex_[n];s===void 0&&(s={},this.executorsByZIndex_[n]=s);const r=t[n];for(const o in r){const l=r[o];s[o]=new nN(this.resolution_,this.pixelRatio_,this.overlaps_,l,e)}}}hasExecutors(t){for(const e in this.executorsByZIndex_){const n=this.executorsByZIndex_[e];for(let s=0,r=t.length;s<r;++s)if(t[s]in n)return!0}return!1}forEachFeatureAtCoordinate(t,e,n,s,r,o){s=Math.round(s);const l=s*2+1,c=Bs(this.hitDetectionTransform_,s+.5,s+.5,1/e,-1/e,-n,-t[0],-t[1]),f=!this.hitDetectionContext_;f&&(this.hitDetectionContext_=Ue(l,l));const g=this.hitDetectionContext_;g.canvas.width!==l||g.canvas.height!==l?(g.canvas.width=l,g.canvas.height=l):f||g.clearRect(0,0,l,l);let m;this.renderBuffer_!==void 0&&(m=ts(),$c(m,t),Sa(m,e*(this.renderBuffer_+s),m));const p=rN(s);let v;function x(T,L,I){const P=g.getImageData(0,0,l,l).data;for(let k=0,Y=p.length;k<Y;k++)if(P[p[k]]>0){if(!o||I==="none"||v!=="Image"&&v!=="Text"||o.includes(T)){const F=(p[k]-3)/4,G=s-F%l,K=s-(F/l|0),$=r(T,L,G*G+K*K);if($)return $}g.clearRect(0,0,l,l);break}}const E=Object.keys(this.executorsByZIndex_).map(Number);E.sort(Ls);let b,M,w,R,A;for(b=E.length-1;b>=0;--b){const T=E[b].toString();for(w=this.executorsByZIndex_[T],M=co.length-1;M>=0;--M)if(v=co[M],R=w[v],R!==void 0&&(A=R.executeHitDetection(g,c,n,x,m),A))return A}}getClipCoords(t){const e=this.maxExtent_;if(!e)return null;const n=e[0],s=e[1],r=e[2],o=e[3],l=[n,s,n,o,r,o,r,s];return wa(l,0,8,2,t,l),l}isEmpty(){return Aa(this.executorsByZIndex_)}execute(t,e,n,s,r,o,l){const c=Object.keys(this.executorsByZIndex_).map(Number);c.sort(l?pL:Ls),o=o||co;const f=co.length;for(let g=0,m=c.length;g<m;++g){const p=c[g].toString(),v=this.executorsByZIndex_[p];for(let x=0,E=o.length;x<E;++x){const b=o[x],M=v[b];if(M!==void 0){const w=l===null?void 0:M.getZIndexContext(),R=w?w.getContext():t,A=this.maxExtent_&&b!=="Image"&&b!=="Text";if(A&&(R.save(),this.clip(R,n)),!w||b==="Text"||b==="Image"?M.execute(R,e,n,s,r,l):w.pushFunction(T=>M.execute(T,e,n,s,r,l)),A&&R.restore(),w){w.offset();const T=c[g]*f+co.indexOf(b);this.deferredZIndexContexts_[T]||(this.deferredZIndexContexts_[T]=[]),this.deferredZIndexContexts_[T].push(w)}}}}this.renderedContext_=t}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const t=this.deferredZIndexContexts_,e=Object.keys(t).map(Number).sort(Ls);for(let n=0,s=e.length;n<s;++n)t[e[n]].forEach(r=>{r.draw(this.renderedContext_),r.clear()}),t[e[n]].length=0}}const Ly={};function rN(i){if(Ly[i]!==void 0)return Ly[i];const t=i*2+1,e=i*i,n=new Array(e+1);for(let r=0;r<=i;++r)for(let o=0;o<=i;++o){const l=r*r+o*o;if(l>e)break;let c=n[l];c||(c=[],n[l]=c),c.push(((i+r)*t+(i+o))*4+3),r>0&&c.push(((i-r)*t+(i+o))*4+3),o>0&&(c.push(((i+r)*t+(i-o))*4+3),r>0&&c.push(((i-r)*t+(i-o))*4+3))}const s=[];for(let r=0,o=n.length;r<o;++r)n[r]&&s.push(...n[r]);return Ly[i]=s,s}function eM(i,t,e,n){return e!==void 0&&n!==void 0?[e/i,n/t]:e!==void 0?e/i:n!==void 0?n/t:1}class du extends S0{constructor(t){t=t||{};const e=t.opacity!==void 0?t.opacity:1,n=t.rotation!==void 0?t.rotation:0,s=t.scale!==void 0?t.scale:1,r=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:e,rotation:n,scale:s,displacement:t.displacement!==void 0?t.displacement:[0,0],rotateWithView:r,declutterMode:t.declutterMode}),this.anchor_=t.anchor!==void 0?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=t.anchorOrigin!==void 0?t.anchorOrigin:"top-left",this.anchorXUnits_=t.anchorXUnits!==void 0?t.anchorXUnits:"fraction",this.anchorYUnits_=t.anchorYUnits!==void 0?t.anchorYUnits:"fraction",this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null;const o=t.img!==void 0?t.img:null;let l=t.src;se(!(l!==void 0&&o),"`image` and `src` cannot be provided at the same time"),(l===void 0||l.length===0)&&o&&(l=o.src||At(o)),se(l!==void 0&&l.length>0,"A defined and non-empty `src` or `image` must be provided"),se(!((t.width!==void 0||t.height!==void 0)&&t.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let c;if(t.src!==void 0?c=mt.IDLE:o!==void 0&&("complete"in o?o.complete?c=o.src?mt.LOADED:mt.IDLE:c=mt.LOADING:c=mt.LOADED),this.color_=t.color!==void 0?cu(t.color):null,this.iconImage_=Ig(o,l,this.crossOrigin_,c,this.color_),this.offset_=t.offset!==void 0?t.offset:[0,0],this.offsetOrigin_=t.offsetOrigin!==void 0?t.offsetOrigin:"top-left",this.origin_=null,this.size_=t.size!==void 0?t.size:null,this.initialOptions_,t.width!==void 0||t.height!==void 0){let f,g;if(t.size)[f,g]=t.size;else{const m=this.getImage(1);if(m.width&&m.height)f=m.width,g=m.height;else if(m instanceof HTMLImageElement){this.initialOptions_=t;const p=()=>{if(this.unlistenImageChange(p),!this.initialOptions_)return;const v=this.iconImage_.getSize();this.setScale(eM(v[0],v[1],t.width,t.height))};this.listenImageChange(p);return}}f!==void 0&&this.setScale(eM(f,g,t.width,t.height))}}clone(){let t,e,n;return this.initialOptions_?(e=this.initialOptions_.width,n=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new du({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:e,height:n,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const s=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!s)return null;t=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(t[0]*=s[0]),this.anchorYUnits_=="fraction"&&(t[1]*=s[1])}if(this.anchorOrigin_!="top-left"){if(!s)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(t[0]=-t[0]+s[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(t[1]=-t[1]+s[1])}this.normalizedAnchor_=t}const e=this.getDisplacement(),n=this.getScaleArray();return[t[0]-e[0]/n[0],t[1]+e[1]/n[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if(this.offsetOrigin_!="top-left"){const e=this.getSize(),n=this.iconImage_.getSize();if(!e||!n)return null;t=t.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(t[0]=n[0]-e[0]-t[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(t[1]=n[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}setSrc(t){this.iconImage_=Ig(null,t,this.crossOrigin_,mt.IDLE,this.color_)}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const t=this.getScaleArray();if(this.size_)return this.size_[0]*t[0];if(this.iconImage_.getImageState()==mt.LOADED)return this.iconImage_.getSize()[0]*t[0]}getHeight(){const t=this.getScaleArray();if(this.size_)return this.size_[1]*t[1];if(this.iconImage_.getImageState()==mt.LOADED)return this.iconImage_.getSize()[1]*t[1]}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(St.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(St.CHANGE,t)}ready(){return this.iconImage_.ready()}}const Tn=.5;function VT(i,t,e,n,s,r,o,l,c){const f=c?A1(s):s,g=i[0]*Tn,m=i[1]*Tn,p=Ue(g,m);p.imageSmoothingEnabled=!1;const v=p.canvas,x=new MP(p,Tn,s,null,o,l,c?Uh(hL(),c):null),E=e.length,b=Math.floor((256*256*256-1)/E),M={};for(let R=1;R<=E;++R){const A=e[R-1],T=A.getStyleFunction()||n;if(!T)continue;let L=T(A,r);if(!L)continue;Array.isArray(L)||(L=[L]);const P=(R*b).toString(16).padStart(7,"#00000");for(let k=0,Y=L.length;k<Y;++k){const F=L[k],G=F.getGeometryFunction()(A);if(!G||!Ze(f,G.getExtent()))continue;const K=F.clone(),$=K.getFill();$&&$.setColor(P);const q=K.getStroke();q&&(q.setColor(P),q.setLineDash(null)),K.setText(void 0);const D=F.getImage();if(D){const st=D.getImageSize();if(!st)continue;const O=Ue(st[0],st[1],void 0,{alpha:!1}),N=O.canvas;O.fillStyle=P,O.fillRect(0,0,N.width,N.height),K.setImage(new du({img:N,anchor:D.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:D.getOrigin(),opacity:1,size:D.getSize(),scale:D.getScale(),rotation:D.getRotation(),rotateWithView:D.getRotateWithView()}))}const j=K.getZIndex()||0;let U=M[j];U||(U={},M[j]=U,U.Polygon=[],U.Circle=[],U.LineString=[],U.Point=[]);const J=G.getType();if(J==="GeometryCollection"){const st=G.getGeometriesArrayRecursive();for(let O=0,N=st.length;O<N;++O){const it=st[O];U[it.getType().replace("Multi","")].push(it,K)}}else U[J.replace("Multi","")].push(G,K)}}const w=Object.keys(M).map(Number).sort(Ls);for(let R=0,A=w.length;R<A;++R){const T=M[w[R]];for(const L in T){const I=T[L];for(let P=0,k=I.length;P<k;P+=2){x.setStyle(I[P+1]);for(let Y=0,F=t.length;Y<F;++Y)x.setTransform(t[Y]),x.drawGeometry(I[P])}}}return p.getImageData(0,0,v.width,v.height)}function YT(i,t,e){const n=[];if(e){const s=Math.floor(Math.round(i[0])*Tn),r=Math.floor(Math.round(i[1])*Tn),o=(Oe(s,0,e.width-1)+Oe(r,0,e.height-1)*e.width)*4,l=e.data[o],c=e.data[o+1],g=e.data[o+2]+256*(c+256*l),m=Math.floor((256*256*256-1)/t.length);g&&g%m===0&&n.push(t[g/m-1])}return n}class XT extends xs{constructor(t,e,n,s){super(t),this.inversePixelTransform=e,this.frameState=n,this.context=s}}const aN=5;class oN extends Yh{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.staleKeys_=new Array,this.maxStaleKeys=aN}getStaleKeys(){return this.staleKeys_}prependStaleKey(t){this.staleKeys_.unshift(t),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(t){return Ct()}getData(t){return null}prepareFrame(t){return Ct()}renderFrame(t,e){return Ct()}forEachFeatureAtCoordinate(t,e,n,s,r){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){const e=t.target;(e.getState()===mt.LOADED||e.getState()===mt.ERROR)&&this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return e!=mt.LOADED&&e!=mt.ERROR&&t.addEventListener(St.CHANGE,this.boundHandleImageChange_),e==mt.IDLE&&(t.load(),e=t.getState()),e==mt.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&t.getSourceState()==="ready"&&t.changed()}renderDeferred(t){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const iM=[];let Fl=null;function lN(){Fl=Ue(1,1,void 0,{willReadFrequently:!0})}class W1 extends oN{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=dn(),this.pixelTransform=dn(),this.inversePixelTransform=dn(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(t,e,n){Fl||lN(),Fl.clearRect(0,0,1,1);let s;try{Fl.drawImage(t,e,n,1,1,0,0,1,1),s=Fl.getImageData(0,0,1,1).data}catch{return Fl=null,null}return s}getBackground(t){let n=this.getLayer().getBackground();return typeof n=="function"&&(n=n(t.viewState.resolution)),n||void 0}useContainer(t,e,n){const s=this.getLayer().getClassName();let r,o;if(t&&t.className===s&&(!n||t&&t.style.backgroundColor&&Ia(cu(t.style.backgroundColor),cu(n)))){const l=t.firstElementChild;ga(l)&&(o=l.getContext("2d"))}if(o&&jL(o.canvas.style.transform,e)?(this.container=t,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){r=ji?fT():document.createElement("div"),r.className=s;let l=r.style;l.position="absolute",l.width="100%",l.height="100%",o=Ue();const c=o.canvas;r.appendChild(c),l=c.style,l.position="absolute",l.left="0",l.transformOrigin="top left",this.container=r,this.context=o}!this.containerReused&&n&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=n)}clipUnrotated(t,e,n){const s=Ar(n),r=f0(n),o=h0(n),l=c0(n);oi(e.coordinateToPixelTransform,s),oi(e.coordinateToPixelTransform,r),oi(e.coordinateToPixelTransform,o),oi(e.coordinateToPixelTransform,l);const c=this.inversePixelTransform;oi(c,s),oi(c,r),oi(c,o),oi(c,l),t.save(),t.beginPath(),t.moveTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(l[0]),Math.round(l[1])),t.clip()}prepareContainer(t,e){const n=t.extent,s=t.viewState.resolution,r=t.viewState.rotation,o=t.pixelRatio,l=Math.round(Ht(n)/s*o),c=Math.round(li(n)/s*o);Bs(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/o,1/o,r,-l/2,-c/2),pT(this.inversePixelTransform,this.pixelTransform);const f=FL(this.pixelTransform);if(this.useContainer(e,f,this.getBackground(t)),!this.containerReused){const g=this.context.canvas;g.width!=l||g.height!=c?(g.width=l,g.height=c):this.context.clearRect(0,0,l,c),f!==g.style.transform&&(g.style.transform=f)}}dispatchRenderEvent_(t,e,n){const s=this.getLayer();if(s.hasListener(t)){const r=new XT(t,this.inversePixelTransform,n,e);s.dispatchEvent(r)}}preRender(t,e){this.frameState=e,!e.declutter&&this.dispatchRenderEvent_(Wn.PRERENDER,t,e)}postRender(t,e){e.declutter||this.dispatchRenderEvent_(Wn.POSTRENDER,t,e)}renderDeferredInternal(t){}getRenderContext(t){return t.declutter&&!this.deferredContext_&&(this.deferredContext_=new X1),t.declutter?this.deferredContext_.getContext():this.context}renderDeferred(t){t.declutter&&(this.dispatchRenderEvent_(Wn.PRERENDER,this.context,t),t.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(t),this.dispatchRenderEvent_(Wn.POSTRENDER,this.context,t))}getRenderTransform(t,e,n,s,r,o,l){const c=r/2,f=o/2,g=s/e,m=-g,p=-t[0]+l,v=-t[1];return Bs(this.tempTransform,c,f,g,m,-n,p,v)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class uN extends W1{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=ts(),this.wrappedRenderedExtent_=ts(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(t,e,n){const s=e.extent,r=e.viewState,o=r.center,l=r.resolution,c=r.projection,f=r.rotation,g=c.getExtent(),m=this.getLayer().getSource(),p=this.getLayer().getDeclutter(),v=e.pixelRatio,x=e.viewHints,E=!(x[Pe.ANIMATING]||x[Pe.INTERACTING]),b=this.context,M=Math.round(Ht(s)/l*v),w=Math.round(li(s)/l*v),R=m.getWrapX()&&c.canWrapX(),A=R?Ht(g):null,T=R?Math.ceil((s[2]-g[2])/A)+1:1;let L=R?Math.floor((s[0]-g[0])/A):0;do{let I=this.getRenderTransform(o,l,0,v,M,w,L*A);e.declutter&&(I=I.slice(0)),t.execute(b,[b.canvas.width,b.canvas.height],I,f,E,n===void 0?co:n?Gg:sN,n?p&&e.declutter[p]:void 0)}while(++L<T)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Ue(this.context.canvas.width,this.context.canvas.height,iM))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){const t=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=t,Xh(this.context),iM.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(t){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,t,!0)}renderDeferredInternal(t){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(t,e){const n=t.layerStatesArray[t.layerIndex];this.opacity_=n.opacity;const s=t.viewState;this.prepareContainer(t,e);const r=this.context,o=this.replayGroup_;let l=o&&!o.isEmpty();if(!l&&!(this.getLayer().hasListener(Wn.PRERENDER)||this.getLayer().hasListener(Wn.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(r,t),s.projection,this.clipped_=!1,l&&n.extent&&this.clipping){const c=Ds(n.extent);l=Ze(c,t.extent),this.clipped_=l&&!pr(c,t.extent),this.clipped_&&this.clipUnrotated(r,t,c)}return l&&this.renderWorlds(o,t,this.getLayer().getDeclutter()?!1:void 0),!t.declutter&&this.clipped_&&r.restore(),this.postRender(r,t),this.renderedRotation_!==s.rotation&&(this.renderedRotation_=s.rotation,this.hitDetectionImageData_=null),t.declutter||this.resetDrawContext_(),this.container}getFeatures(t){return new Promise(e=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const n=this.frameState.size.slice(),s=this.renderedCenter_,r=this.renderedResolution_,o=this.renderedRotation_,l=this.renderedProjection_,c=this.wrappedRenderedExtent_,f=this.getLayer(),g=[],m=n[0]*Tn,p=n[1]*Tn;g.push(this.getRenderTransform(s,r,o,Tn,m,p,0).slice());const v=f.getSource(),x=l.getExtent();if(v.getWrapX()&&l.canWrapX()&&!pr(x,c)){let E=c[0];const b=Ht(x);let M=0,w;for(;E<x[0];)--M,w=b*M,g.push(this.getRenderTransform(s,r,o,Tn,m,p,w).slice()),E+=b;for(M=0,E=c[2];E>x[2];)++M,w=b*M,g.push(this.getRenderTransform(s,r,o,Tn,m,p,w).slice()),E-=b}this.hitDetectionImageData_=VT(n,g,this.renderedFeatures_,f.getStyleFunction(),c,r,o,k_(r,this.renderedPixelRatio_),null)}e(YT(t,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(t,e,n,s,r){if(!this.replayGroup_)return;const o=e.viewState.resolution,l=e.viewState.rotation,c=this.getLayer(),f={},g=function(p,v,x){const E=At(p),b=f[E];if(b){if(b!==!0&&x<b.distanceSq){if(x===0)return f[E]=!0,r.splice(r.lastIndexOf(b),1),s(p,c,v);b.geometry=v,b.distanceSq=x}}else{if(x===0)return f[E]=!0,s(p,c,v);r.push(f[E]={feature:p,layer:c,geometry:v,distanceSq:x,callback:s})}},m=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(t,o,l,n,g,m?e.declutter?.[m]?.all().map(p=>p.value):null)}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const e=this.getLayer(),n=e.getSource();if(!n)return!1;const s=t.viewHints[Pe.ANIMATING],r=t.viewHints[Pe.INTERACTING],o=e.getUpdateWhileAnimating(),l=e.getUpdateWhileInteracting();if(this.ready&&!o&&s||!l&&r)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const c=t.extent,f=t.viewState,g=f.projection,m=f.resolution,p=t.pixelRatio,v=e.getRevision(),x=e.getRenderBuffer();let E=e.getRenderOrder();E===void 0&&(E=TP);const b=f.center.slice(),M=Sa(c,x*m),w=M.slice(),R=[M.slice()],A=g.getExtent();if(n.getWrapX()&&g.canWrapX()&&!pr(A,t.extent)){const $=Ht(A),q=Math.max(Ht(M)/2,$);M[0]=A[0]-q,M[2]=A[2]+q,M1(b,g);const D=J4(R[0],g);D[0]<A[0]&&D[2]<A[2]?R.push([D[0]+$,D[1],D[2]+$,D[3]]):D[0]>A[0]&&D[2]>A[2]&&R.push([D[0]-$,D[1],D[2]-$,D[3]])}if(this.ready&&this.renderedResolution_==m&&this.renderedRevision_==v&&this.renderedRenderOrder_==E&&this.renderedFrameDeclutter_===!!t.declutter&&pr(this.wrappedRenderedExtent_,M))return Ia(this.renderedExtent_,w)||(this.hitDetectionImageData_=null,this.renderedExtent_=w),this.renderedCenter_=b,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const T=new HT(zT(m,p),M,m,p);let L;for(let $=0,q=R.length;$<q;++$)n.loadFeatures(R[$],m,g);const I=k_(m,p);let P=!0;const k=($,q)=>{let D;const j=$.getStyleFunction()||e.getStyleFunction();if(j&&(D=j($,m)),D){const U=this.renderFeature($,I,D,T,L,this.getLayer().getDeclutter(),q);P=P&&!U}},Y=A1(M),F=n.getFeaturesInExtent(Y);E&&F.sort(E);for(let $=0,q=F.length;$<q;++$)k(F[$],$);this.renderedFeatures_=F,this.ready=P;const G=T.finish(),K=new qT(M,m,p,n.getOverlaps(),G,e.getRenderBuffer(),!!t.declutter);return this.renderedResolution_=m,this.renderedRevision_=v,this.renderedRenderOrder_=E,this.renderedFrameDeclutter_=!!t.declutter,this.renderedExtent_=w,this.wrappedRenderedExtent_=M,this.renderedCenter_=b,this.renderedProjection_=g,this.renderedPixelRatio_=p,this.replayGroup_=K,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,n,s,r,o,l){if(!n)return!1;let c=!1;if(Array.isArray(n))for(let f=0,g=n.length;f<g;++f)c=Pg(s,t,n[f],e,this.boundHandleStyleImageChange_,r,o,l)||c;else c=Pg(s,t,n,e,this.boundHandleStyleImageChange_,r,o,l);return c}}let jo=0;const Vi=1<<jo++,Yt=1<<jo++,on=1<<jo++,cs=1<<jo++,Lo=1<<jo++,kc=1<<jo++,Dd=Math.pow(2,jo)-1,K1={[Vi]:"boolean",[Yt]:"number",[on]:"string",[cs]:"color",[Lo]:"number[]",[kc]:"size"},cN=Object.keys(K1).map(Number).sort(Ls);function hN(i){return i in K1}function Fc(i){const t=[];for(const e of cN)jc(i,e)&&t.push(K1[e]);return t.length===0?"untyped":t.length<3?t.join(" or "):t.slice(0,-1).join(", ")+", or "+t[t.length-1]}function jc(i,t){return(i&t)===t}function sa(i,t){return i===t}class gi{constructor(t,e){if(!hN(t))throw new Error(`literal expressions must have a specific type, got ${Fc(t)}`);this.type=t,this.value=e}}class fN{constructor(t,e,...n){this.type=t,this.operator=e,this.args=n}}function WT(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function Ii(i,t,e){switch(typeof i){case"boolean":{if(sa(t,on))return new gi(on,i?"true":"false");if(!jc(t,Vi))throw new Error(`got a boolean, but expected ${Fc(t)}`);return new gi(Vi,i)}case"number":{if(sa(t,kc))return new gi(kc,Bi(i));if(sa(t,Vi))return new gi(Vi,!!i);if(sa(t,on))return new gi(on,i.toString());if(!jc(t,Yt))throw new Error(`got a number, but expected ${Fc(t)}`);return new gi(Yt,i)}case"string":{if(sa(t,cs))return new gi(cs,q1(i));if(sa(t,Vi))return new gi(Vi,!!i);if(!jc(t,on))throw new Error(`got a string, but expected ${Fc(t)}`);return new gi(on,i)}}if(!Array.isArray(i))throw new Error("expression must be an array or a primitive value");if(i.length===0)throw new Error("empty expression");if(typeof i[0]=="string")return SN(i,t,e);for(const n of i)if(typeof n!="number")throw new Error("expected an array of numbers");if(sa(t,kc)){if(i.length!==2)throw new Error(`expected an array of two values for a size, got ${i.length}`);return new gi(kc,i)}if(sa(t,cs)){if(i.length===3)return new gi(cs,[...i,1]);if(i.length===4)return new gi(cs,i);throw new Error(`expected an array of 3 or 4 values for a color, got ${i.length}`)}if(!jc(t,Lo))throw new Error(`got an array of numbers, but expected ${Fc(t)}`);return new gi(Lo,i)}const tt={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},dN={[tt.Get]:Tt(Nt(1,1/0),nM),[tt.Var]:Tt(Nt(1,1),gN),[tt.Has]:Tt(Nt(1,1/0),nM),[tt.Id]:Tt(mN,Al),[tt.Concat]:Tt(Nt(2,1/0),ne(on)),[tt.GeometryType]:Tt(pN,Al),[tt.LineMetric]:Tt(Al),[tt.Resolution]:Tt(Py,Al),[tt.Zoom]:Tt(Py,Al),[tt.Time]:Tt(Py,Al),[tt.Any]:Tt(Nt(2,1/0),ne(Vi)),[tt.All]:Tt(Nt(2,1/0),ne(Vi)),[tt.Not]:Tt(Nt(1,1),ne(Vi)),[tt.Equal]:Tt(Nt(2,2),ne(Dd)),[tt.NotEqual]:Tt(Nt(2,2),ne(Dd)),[tt.GreaterThan]:Tt(Nt(2,2),ne(Yt)),[tt.GreaterThanOrEqualTo]:Tt(Nt(2,2),ne(Yt)),[tt.LessThan]:Tt(Nt(2,2),ne(Yt)),[tt.LessThanOrEqualTo]:Tt(Nt(2,2),ne(Yt)),[tt.Multiply]:Tt(Nt(2,1/0),sM),[tt.Coalesce]:Tt(Nt(2,1/0),sM),[tt.Divide]:Tt(Nt(2,2),ne(Yt)),[tt.Add]:Tt(Nt(2,1/0),ne(Yt)),[tt.Subtract]:Tt(Nt(2,2),ne(Yt)),[tt.Clamp]:Tt(Nt(3,3),ne(Yt)),[tt.Mod]:Tt(Nt(2,2),ne(Yt)),[tt.Pow]:Tt(Nt(2,2),ne(Yt)),[tt.Abs]:Tt(Nt(1,1),ne(Yt)),[tt.Floor]:Tt(Nt(1,1),ne(Yt)),[tt.Ceil]:Tt(Nt(1,1),ne(Yt)),[tt.Round]:Tt(Nt(1,1),ne(Yt)),[tt.Sin]:Tt(Nt(1,1),ne(Yt)),[tt.Cos]:Tt(Nt(1,1),ne(Yt)),[tt.Atan]:Tt(Nt(1,2),ne(Yt)),[tt.Sqrt]:Tt(Nt(1,1),ne(Yt)),[tt.Match]:Tt(Nt(4,1/0),rM,_N),[tt.Between]:Tt(Nt(3,3),ne(Yt)),[tt.Interpolate]:Tt(Nt(6,1/0),rM,vN),[tt.Case]:Tt(Nt(3,1/0),yN,xN),[tt.In]:Tt(Nt(2,2),bN),[tt.Number]:Tt(Nt(1,1/0),ne(Dd)),[tt.String]:Tt(Nt(1,1/0),ne(Dd)),[tt.Array]:Tt(Nt(1,1/0),ne(Yt)),[tt.Color]:Tt(Nt(1,4),ne(Yt)),[tt.Band]:Tt(Nt(1,3),ne(Yt)),[tt.Palette]:Tt(Nt(2,2),EN),[tt.ToString]:Tt(Nt(1,1),ne(Vi|Yt|on|cs))};function nM(i,t,e){const n=i.length-1,s=new Array(n);for(let r=0;r<n;++r){const o=i[r+1];switch(typeof o){case"number":{s[r]=new gi(Yt,o);break}case"string":{s[r]=new gi(on,o);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${o}`)}r===0&&e.properties.add(String(o))}return s}function gN(i,t,e){const n=i[1];if(typeof n!="string")throw new Error("expected a string argument for var operation");return e.variables.add(n),[new gi(on,n)]}function mN(i,t,e){e.featureId=!0}function pN(i,t,e){e.geometryType=!0}function Py(i,t,e){e.mapState=!0}function Al(i,t,e){const n=i[0];if(i.length!==1)throw new Error(`expected no arguments for ${n} operation`);return[]}function Nt(i,t){return function(e,n,s){const r=e[0],o=e.length-1;if(i===t){if(o!==i){const l=i===1?"":"s";throw new Error(`expected ${i} argument${l} for ${r}, got ${o}`)}}else if(o<i||o>t){const l=t===1/0?`${i} or more`:`${i} to ${t}`;throw new Error(`expected ${l} arguments for ${r}, got ${o}`)}}}function sM(i,t,e){const n=i.length-1,s=new Array(n);for(let r=0;r<n;++r){const o=Ii(i[r+1],t,e);s[r]=o}return s}function ne(i){return function(t,e,n){const s=t.length-1,r=new Array(s);for(let o=0;o<s;++o){const l=Ii(t[o+1],i,n);r[o]=l}return r}}function yN(i,t,e){const n=i[0],s=i.length-1;if(s%2===0)throw new Error(`expected an odd number of arguments for ${n}, got ${s} instead`)}function rM(i,t,e){const n=i[0],s=i.length-1;if(s%2===1)throw new Error(`expected an even number of arguments for operation ${n}, got ${s} instead`)}function _N(i,t,e){const n=i.length-1,s=on|Yt|Vi,r=Ii(i[1],s,e),o=Ii(i[i.length-1],t,e),l=new Array(n-2);for(let c=0;c<n-2;c+=2){try{const f=Ii(i[c+2],r.type,e);l[c]=f}catch(f){throw new Error(`failed to parse argument ${c+1} of match expression: ${f.message}`)}try{const f=Ii(i[c+3],o.type,e);l[c+1]=f}catch(f){throw new Error(`failed to parse argument ${c+2} of match expression: ${f.message}`)}}return[r,...l,o]}function vN(i,t,e){const n=i[1];let s;switch(n[0]){case"linear":s=1;break;case"exponential":const c=n[1];if(typeof c!="number"||c<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(c)} instead`);s=c;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(n)}`)}const r=new gi(Yt,s);let o;try{o=Ii(i[2],Yt,e)}catch(c){throw new Error(`failed to parse argument 1 in interpolate expression: ${c.message}`)}const l=new Array(i.length-3);for(let c=0;c<l.length;c+=2){try{const f=Ii(i[c+3],Yt,e);l[c]=f}catch(f){throw new Error(`failed to parse argument ${c+2} for interpolate expression: ${f.message}`)}try{const f=Ii(i[c+4],t,e);l[c+1]=f}catch(f){throw new Error(`failed to parse argument ${c+3} for interpolate expression: ${f.message}`)}}return[r,o,...l]}function xN(i,t,e){const n=Ii(i[i.length-1],t,e),s=new Array(i.length-1);for(let r=0;r<s.length-1;r+=2){try{const o=Ii(i[r+1],Vi,e);s[r]=o}catch(o){throw new Error(`failed to parse argument ${r} of case expression: ${o.message}`)}try{const o=Ii(i[r+2],n.type,e);s[r+1]=o}catch(o){throw new Error(`failed to parse argument ${r+1} of case expression: ${o.message}`)}}return s[s.length-1]=n,s}function bN(i,t,e){let n=i[2];if(!Array.isArray(n))throw new Error('the second argument for the "in" operator must be an array');let s;if(typeof n[0]=="string"){if(n[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(n[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');n=n[1],s=on}else s=Yt;const r=new Array(n.length);for(let l=0;l<r.length;l++)try{const c=Ii(n[l],s,e);r[l]=c}catch(c){throw new Error(`failed to parse haystack item ${l} for "in" expression: ${c.message}`)}return[Ii(i[1],s,e),...r]}function EN(i,t,e){let n;try{n=Ii(i[1],Yt,e)}catch(o){throw new Error(`failed to parse first argument in palette expression: ${o.message}`)}const s=i[2];if(!Array.isArray(s))throw new Error("the second argument of palette must be an array");const r=new Array(s.length);for(let o=0;o<r.length;o++){let l;try{l=Ii(s[o],cs,e)}catch(c){throw new Error(`failed to parse color at index ${o} in palette expression: ${c.message}`)}if(!(l instanceof gi))throw new Error(`the palette color at index ${o} must be a literal value`);r[o]=l}return[n,...r]}function Tt(...i){return function(t,e,n){const s=t[0];let r;for(let o=0;o<i.length;o++){const l=i[o](t,e,n);if(o==i.length-1){if(!l)throw new Error("expected last argument validator to return the parsed args");r=l}}return new fN(e,s,...r)}}function SN(i,t,e){const n=i[0],s=dN[n];if(!s)throw new Error(`unknown operator: ${n}`);return s(i,t,e)}function KT(i){if(!i)return"";const t=i.getType();switch(t){case"Point":case"LineString":case"Polygon":return t;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return t.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return KT(i.getGeometries()[0]);default:return""}}function ZT(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function Or(i,t,e){const n=Ii(i,t,e);return vs(n)}function vs(i,t){if(i instanceof gi){if(i.type===cs&&typeof i.value=="string"){const n=q1(i.value);return function(){return n}}return function(){return i.value}}const e=i.operator;switch(e){case tt.Number:case tt.String:case tt.Coalesce:return MN(i);case tt.Get:case tt.Var:case tt.Has:return wN(i);case tt.Id:return n=>n.featureId;case tt.GeometryType:return n=>n.geometryType;case tt.Concat:{const n=i.args.map(s=>vs(s));return s=>"".concat(...n.map(r=>r(s).toString()))}case tt.Resolution:return n=>n.resolution;case tt.Any:case tt.All:case tt.Between:case tt.In:case tt.Not:return CN(i);case tt.Equal:case tt.NotEqual:case tt.LessThan:case tt.LessThanOrEqualTo:case tt.GreaterThan:case tt.GreaterThanOrEqualTo:return TN(i);case tt.Multiply:case tt.Divide:case tt.Add:case tt.Subtract:case tt.Clamp:case tt.Mod:case tt.Pow:case tt.Abs:case tt.Floor:case tt.Ceil:case tt.Round:case tt.Sin:case tt.Cos:case tt.Atan:case tt.Sqrt:return RN(i);case tt.Case:return AN(i);case tt.Match:return ON(i);case tt.Interpolate:return DN(i);case tt.ToString:return IN(i);default:throw new Error(`Unsupported operator ${e}`)}}function MN(i,t){const e=i.operator,n=i.args.length,s=new Array(n);for(let r=0;r<n;++r)s[r]=vs(i.args[r]);switch(e){case tt.Coalesce:return r=>{for(let o=0;o<n;++o){const l=s[o](r);if(typeof l<"u"&&l!==null)return l}throw new Error("Expected one of the values to be non-null")};case tt.Number:case tt.String:return r=>{for(let o=0;o<n;++o){const l=s[o](r);if(typeof l===e)return l}throw new Error(`Expected one of the values to be a ${e}`)};default:throw new Error(`Unsupported assertion operator ${e}`)}}function wN(i,t){const n=i.args[0].value;switch(i.operator){case tt.Get:return s=>{const r=i.args;let o=s.properties[n];for(let l=1,c=r.length;l<c;++l){const g=r[l].value;o=o[g]}return o};case tt.Var:return s=>s.variables[n];case tt.Has:return s=>{const r=i.args;if(!(n in s.properties))return!1;let o=s.properties[n];for(let l=1,c=r.length;l<c;++l){const g=r[l].value;if(!o||!Object.hasOwn(o,g))return!1;o=o[g]}return!0};default:throw new Error(`Unsupported accessor operator ${i.operator}`)}}function TN(i,t){const e=i.operator,n=vs(i.args[0]),s=vs(i.args[1]);switch(e){case tt.Equal:return r=>n(r)===s(r);case tt.NotEqual:return r=>n(r)!==s(r);case tt.LessThan:return r=>n(r)<s(r);case tt.LessThanOrEqualTo:return r=>n(r)<=s(r);case tt.GreaterThan:return r=>n(r)>s(r);case tt.GreaterThanOrEqualTo:return r=>n(r)>=s(r);default:throw new Error(`Unsupported comparison operator ${e}`)}}function CN(i,t){const e=i.operator,n=i.args.length,s=new Array(n);for(let r=0;r<n;++r)s[r]=vs(i.args[r]);switch(e){case tt.Any:return r=>{for(let o=0;o<n;++o)if(s[o](r))return!0;return!1};case tt.All:return r=>{for(let o=0;o<n;++o)if(!s[o](r))return!1;return!0};case tt.Between:return r=>{const o=s[0](r),l=s[1](r),c=s[2](r);return o>=l&&o<=c};case tt.In:return r=>{const o=s[0](r);for(let l=1;l<n;++l)if(o===s[l](r))return!0;return!1};case tt.Not:return r=>!s[0](r);default:throw new Error(`Unsupported logical operator ${e}`)}}function RN(i,t){const e=i.operator,n=i.args.length,s=new Array(n);for(let r=0;r<n;++r)s[r]=vs(i.args[r]);switch(e){case tt.Multiply:return r=>{let o=1;for(let l=0;l<n;++l)o*=s[l](r);return o};case tt.Divide:return r=>s[0](r)/s[1](r);case tt.Add:return r=>{let o=0;for(let l=0;l<n;++l)o+=s[l](r);return o};case tt.Subtract:return r=>s[0](r)-s[1](r);case tt.Clamp:return r=>{const o=s[0](r),l=s[1](r);if(o<l)return l;const c=s[2](r);return o>c?c:o};case tt.Mod:return r=>s[0](r)%s[1](r);case tt.Pow:return r=>Math.pow(s[0](r),s[1](r));case tt.Abs:return r=>Math.abs(s[0](r));case tt.Floor:return r=>Math.floor(s[0](r));case tt.Ceil:return r=>Math.ceil(s[0](r));case tt.Round:return r=>Math.round(s[0](r));case tt.Sin:return r=>Math.sin(s[0](r));case tt.Cos:return r=>Math.cos(s[0](r));case tt.Atan:return n===2?r=>Math.atan2(s[0](r),s[1](r)):r=>Math.atan(s[0](r));case tt.Sqrt:return r=>Math.sqrt(s[0](r));default:throw new Error(`Unsupported numeric operator ${e}`)}}function AN(i,t){const e=i.args.length,n=new Array(e);for(let s=0;s<e;++s)n[s]=vs(i.args[s]);return s=>{for(let r=0;r<e-1;r+=2)if(n[r](s))return n[r+1](s);return n[e-1](s)}}function ON(i,t){const e=i.args.length,n=new Array(e);for(let s=0;s<e;++s)n[s]=vs(i.args[s]);return s=>{const r=n[0](s);for(let o=1;o<e-1;o+=2)if(r===n[o](s))return n[o+1](s);return n[e-1](s)}}function DN(i,t){const e=i.args.length,n=new Array(e);for(let s=0;s<e;++s)n[s]=vs(i.args[s]);return s=>{const r=n[0](s),o=n[1](s);let l,c;for(let f=2;f<e;f+=2){const g=n[f](s);let m=n[f+1](s);const p=Array.isArray(m);if(p&&(m=cP(m)),g>=o)return f===2?m:p?LN(r,o,l,c,g,m):Bc(r,o,l,c,g,m);l=g,c=m}return c}}function IN(i,t){const e=i.operator,n=i.args.length,s=new Array(n);for(let r=0;r<n;++r)s[r]=vs(i.args[r]);switch(e){case tt.ToString:return r=>{const o=s[0](r);return i.args[0].type===cs?V1(o):o.toString()};default:throw new Error(`Unsupported convert operator ${e}`)}}function Bc(i,t,e,n,s,r){const o=s-e;if(o===0)return n;const l=t-e,c=i===1?l/o:(Math.pow(i,l)-1)/(Math.pow(i,o)-1);return n+c*(r-n)}function LN(i,t,e,n,s,r){if(s-e===0)return n;const l=BS(n),c=BS(r);let f=c[2]-l[2];f>180?f-=360:f<-180&&(f+=360);const g=[Bc(i,t,e,l[0],s,c[0]),Bc(i,t,e,l[1],s,c[1]),l[2]+Bc(i,t,e,0,s,f),Bc(i,t,e,n[3],s,r[3])];return hP(g)}function PN(i){return!0}function NN(i){const t=WT(),e=zN(i,t),n=ZT();return function(s,r){if(n.properties=s.getPropertiesInternal(),n.resolution=r,t.featureId){const o=s.getId();o!==void 0?n.featureId=o:n.featureId=null}return t.geometryType&&(n.geometryType=KT(s.getGeometry())),e(n)}}function aM(i){const t=WT(),e=i.length,n=new Array(e);for(let o=0;o<e;++o)n[o]=F_(i[o],t);const s=ZT(),r=new Array(e);return function(o,l){if(s.properties=o.getPropertiesInternal(),s.resolution=l,t.featureId){const f=o.getId();f!==void 0?s.featureId=f:s.featureId=null}let c=0;for(let f=0;f<e;++f){const g=n[f](s);g&&(r[c]=g,c+=1)}return r.length=c,r}}function zN(i,t){const e=i.length,n=new Array(e);for(let s=0;s<e;++s){const r=i[s],o="filter"in r?Or(r.filter,Vi,t):PN;let l;if(Array.isArray(r.style)){const c=r.style.length;l=new Array(c);for(let f=0;f<c;++f)l[f]=F_(r.style[f],t)}else l=[F_(r.style,t)];n[s]={filter:o,styles:l}}return function(s){const r=[];let o=!1;for(let l=0;l<e;++l){const c=n[l].filter;if(c(s)&&!(i[l].else&&o)){o=!0;for(const f of n[l].styles){const g=f(s);g&&r.push(g)}}}return r}}function F_(i,t){const e=vh(i,"",t),n=xh(i,"",t),s=GN(i,t),r=kN(i,t),o=un(i,"z-index",t);if(!e&&!n&&!s&&!r&&!Aa(i))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(i));const l=new qi;return function(c){let f=!0;if(e){const g=e(c);g&&(f=!1),l.setFill(g)}if(n){const g=n(c);g&&(f=!1),l.setStroke(g)}if(s){const g=s(c);g&&(f=!1),l.setText(g)}if(r){const g=r(c);g&&(f=!1),l.setImage(g)}return o&&l.setZIndex(o(c)),f?null:l}}function vh(i,t,e){let n;if(t+"fill-pattern-src"in i)n=UN(i,t+"fill-",e);else{if(i[t+"fill-color"]==="none")return r=>null;n=Z1(i,t+"fill-color",e)}if(!n)return null;const s=new Zn;return function(r){const o=n(r);return o===H1?null:(s.setColor(o),s)}}function xh(i,t,e){const n=un(i,t+"stroke-width",e),s=Z1(i,t+"stroke-color",e);if(!n&&!s)return null;const r=gr(i,t+"stroke-line-cap",e),o=gr(i,t+"stroke-line-join",e),l=$T(i,t+"stroke-line-dash",e),c=un(i,t+"stroke-line-dash-offset",e),f=un(i,t+"stroke-miter-limit",e),g=new yr;return function(m){if(s){const p=s(m);if(p===H1)return null;g.setColor(p)}if(n&&g.setWidth(n(m)),r){const p=r(m);if(p!=="butt"&&p!=="round"&&p!=="square")throw new Error("Expected butt, round, or square line cap");g.setLineCap(p)}if(o){const p=o(m);if(p!=="bevel"&&p!=="round"&&p!=="miter")throw new Error("Expected bevel, round, or miter line join");g.setLineJoin(p)}return l&&g.setLineDash(l(m)),c&&g.setLineDashOffset(c(m)),f&&g.setMiterLimit(f(m)),g}}function GN(i,t){const e="text-",n=gr(i,e+"value",t);if(!n)return null;const s=vh(i,e,t),r=vh(i,e+"background-",t),o=xh(i,e,t),l=xh(i,e+"background-",t),c=gr(i,e+"font",t),f=un(i,e+"max-angle",t),g=un(i,e+"offset-x",t),m=un(i,e+"offset-y",t),p=tu(i,e+"overflow",t),v=gr(i,e+"placement",t),x=un(i,e+"repeat",t),E=T0(i,e+"scale",t),b=tu(i,e+"rotate-with-view",t),M=un(i,e+"rotation",t),w=gr(i,e+"align",t),R=gr(i,e+"justify",t),A=gr(i,e+"baseline",t),T=tu(i,e+"keep-upright",t),L=$T(i,e+"padding",t),I=C0(i,e+"declutter-mode"),P=new w0({declutterMode:I});return function(k){if(P.setText(n(k)),s&&P.setFill(s(k)),r&&P.setBackgroundFill(r(k)),o&&P.setStroke(o(k)),l&&P.setBackgroundStroke(l(k)),c&&P.setFont(c(k)),f&&P.setMaxAngle(f(k)),g&&P.setOffsetX(g(k)),m&&P.setOffsetY(m(k)),p&&P.setOverflow(p(k)),v){const Y=v(k);if(Y!=="point"&&Y!=="line")throw new Error("Expected point or line for text-placement");P.setPlacement(Y)}if(x&&P.setRepeat(x(k)),E&&P.setScale(E(k)),b&&P.setRotateWithView(b(k)),M&&P.setRotation(M(k)),w){const Y=w(k);if(Y!=="left"&&Y!=="center"&&Y!=="right"&&Y!=="end"&&Y!=="start")throw new Error("Expected left, right, center, start, or end for text-align");P.setTextAlign(Y)}if(R){const Y=R(k);if(Y!=="left"&&Y!=="right"&&Y!=="center")throw new Error("Expected left, right, or center for text-justify");P.setJustify(Y)}if(A){const Y=A(k);if(Y!=="bottom"&&Y!=="top"&&Y!=="middle"&&Y!=="alphabetic"&&Y!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");P.setTextBaseline(Y)}return L&&P.setPadding(L(k)),T&&P.setKeepUpright(T(k)),P}}function kN(i,t){return"icon-src"in i?FN(i,t):"shape-points"in i?jN(i,t):"circle-radius"in i?BN(i,t):null}function FN(i,t){const e="icon-",n=e+"src",s=QT(i[n],n),r=kg(i,e+"anchor",t),o=T0(i,e+"scale",t),l=un(i,e+"opacity",t),c=kg(i,e+"displacement",t),f=un(i,e+"rotation",t),g=tu(i,e+"rotate-with-view",t),m=lM(i,e+"anchor-origin"),p=uM(i,e+"anchor-x-units"),v=uM(i,e+"anchor-y-units"),x=YN(i,e+"color"),E=qN(i,e+"cross-origin"),b=VN(i,e+"offset"),M=lM(i,e+"offset-origin"),w=Fg(i,e+"width"),R=Fg(i,e+"height"),A=HN(i,e+"size"),T=C0(i,e+"declutter-mode"),L=new du({src:s,anchorOrigin:m,anchorXUnits:p,anchorYUnits:v,color:x,crossOrigin:E,offset:b,offsetOrigin:M,height:R,width:w,size:A,declutterMode:T});return function(I){return l&&L.setOpacity(l(I)),c&&L.setDisplacement(c(I)),f&&L.setRotation(f(I)),g&&L.setRotateWithView(g(I)),o&&L.setScale(o(I)),r&&L.setAnchor(r(I)),L}}function jN(i,t){const e="shape-",n=e+"points",s=e+"radius",r=j_(i[n],n),o=j_(i[s],s),l=vh(i,e,t),c=xh(i,e,t),f=T0(i,e+"scale",t),g=kg(i,e+"displacement",t),m=un(i,e+"rotation",t),p=tu(i,e+"rotate-with-view",t),v=Fg(i,e+"radius2"),x=Fg(i,e+"angle"),E=C0(i,e+"declutter-mode"),b=new M0({points:r,radius:o,radius2:v,angle:x,declutterMode:E});return function(M){return l&&b.setFill(l(M)),c&&b.setStroke(c(M)),g&&b.setDisplacement(g(M)),m&&b.setRotation(m(M)),p&&b.setRotateWithView(p(M)),f&&b.setScale(f(M)),b}}function BN(i,t){const e="circle-",n=vh(i,e,t),s=xh(i,e,t),r=un(i,e+"radius",t),o=T0(i,e+"scale",t),l=kg(i,e+"displacement",t),c=un(i,e+"rotation",t),f=tu(i,e+"rotate-with-view",t),g=C0(i,e+"declutter-mode"),m=new $h({radius:5,declutterMode:g});return function(p){return r&&m.setRadius(r(p)),n&&m.setFill(n(p)),s&&m.setStroke(s(p)),l&&m.setDisplacement(l(p)),c&&m.setRotation(c(p)),f&&m.setRotateWithView(f(p)),o&&m.setScale(o(p)),m}}function un(i,t,e){if(!(t in i))return;const n=Or(i[t],Yt,e);return function(s){return j_(n(s),t)}}function gr(i,t,e){if(!(t in i))return null;const n=Or(i[t],on,e);return function(s){return QT(n(s),t)}}function UN(i,t,e){const n=gr(i,t+"pattern-src",e),s=oM(i,t+"pattern-offset",e),r=oM(i,t+"pattern-size",e),o=Z1(i,t+"color",e);return function(l){return{src:n(l),offset:s&&s(l),size:r&&r(l),color:o&&o(l)}}}function tu(i,t,e){if(!(t in i))return null;const n=Or(i[t],Vi,e);return function(s){const r=n(s);if(typeof r!="boolean")throw new Error(`Expected a boolean for ${t}`);return r}}function Z1(i,t,e){if(!(t in i))return null;const n=Or(i[t],cs,e);return function(s){return JT(n(s),t)}}function $T(i,t,e){if(!(t in i))return null;const n=Or(i[t],Lo,e);return function(s){return Jh(n(s),t)}}function kg(i,t,e){if(!(t in i))return null;const n=Or(i[t],Lo,e);return function(s){const r=Jh(n(s),t);if(r.length!==2)throw new Error(`Expected two numbers for ${t}`);return r}}function oM(i,t,e){if(!(t in i))return null;const n=Or(i[t],Lo,e);return function(s){return tC(n(s),t)}}function T0(i,t,e){if(!(t in i))return null;const n=Or(i[t],Lo|Yt,e);return function(s){return XN(n(s),t)}}function Fg(i,t){const e=i[t];if(e!==void 0){if(typeof e!="number")throw new Error(`Expected a number for ${t}`);return e}}function HN(i,t){const e=i[t];if(e!==void 0){if(typeof e=="number")return Bi(e);if(!Array.isArray(e))throw new Error(`Expected a number or size array for ${t}`);if(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number")throw new Error(`Expected a number or size array for ${t}`);return e}}function qN(i,t){const e=i[t];if(e!==void 0){if(typeof e!="string")throw new Error(`Expected a string for ${t}`);return e}}function lM(i,t){const e=i[t];if(e!==void 0){if(e!=="bottom-left"&&e!=="bottom-right"&&e!=="top-left"&&e!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${t}`);return e}}function uM(i,t){const e=i[t];if(e!==void 0){if(e!=="pixels"&&e!=="fraction")throw new Error(`Expected pixels or fraction for ${t}`);return e}}function VN(i,t){const e=i[t];if(e!==void 0)return Jh(e,t)}function C0(i,t){const e=i[t];if(e!==void 0){if(typeof e!="string")throw new Error(`Expected a string for ${t}`);if(e!=="declutter"&&e!=="obstacle"&&e!=="none")throw new Error(`Expected declutter, obstacle, or none for ${t}`);return e}}function YN(i,t){const e=i[t];if(e!==void 0)return JT(e,t)}function Jh(i,t){if(!Array.isArray(i))throw new Error(`Expected an array for ${t}`);const e=i.length;for(let n=0;n<e;++n)if(typeof i[n]!="number")throw new Error(`Expected an array of numbers for ${t}`);return i}function QT(i,t){if(typeof i!="string")throw new Error(`Expected a string for ${t}`);return i}function j_(i,t){if(typeof i!="number")throw new Error(`Expected a number for ${t}`);return i}function JT(i,t){if(typeof i=="string")return i;const e=Jh(i,t),n=e.length;if(n<3||n>4)throw new Error(`Expected a color with 3 or 4 values for ${t}`);return e}function tC(i,t){const e=Jh(i,t);if(e.length!==2)throw new Error(`Expected an array of two numbers for ${t}`);return e}function XN(i,t){return typeof i=="number"?i:tC(i,t)}const ls={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function cM(i,t,e){return(function(n,s,r,o,l){if(!n)return;if(!s&&!t)return n;const c=t?0:r[0]*s,f=t?0:r[1]*s,g=l?l[0]:0,m=l?l[1]:0;let p=i[0]+c/2+g,v=i[2]-c/2+g,x=i[1]+f/2+m,E=i[3]-f/2+m;p>v&&(p=(v+p)/2,v=p),x>E&&(x=(E+x)/2,E=x);let b=Oe(n[0],p,v),M=Oe(n[1],x,E);if(o&&e&&s){const w=30*s;b+=-w*Math.log(1+Math.max(0,p-n[0])/w)+w*Math.log(1+Math.max(0,n[0]-v)/w),M+=-w*Math.log(1+Math.max(0,x-n[1])/w)+w*Math.log(1+Math.max(0,n[1]-E)/w)}return[b,M]})}function WN(i){return i}function $1(i,t,e,n){const s=Ht(t)/e[0],r=li(t)/e[1];return n?Math.min(i,Math.max(s,r)):Math.min(i,Math.min(s,r))}function Q1(i,t,e){let n=Math.min(i,t);const s=50;return n*=Math.log(1+s*Math.max(0,i/t-1))/s+1,e&&(n=Math.max(n,e),n/=Math.log(1+s*Math.max(0,e/i-1))/s+1),Oe(n,e/2,t*2)}function KN(i,t,e,n){return t=t!==void 0?t:!0,(function(s,r,o,l){if(s!==void 0){const c=i[0],f=i[i.length-1],g=e?$1(c,e,o,n):c;if(l)return t?Q1(s,g,f):Oe(s,f,g);const m=Math.min(g,s),p=Math.floor(y0(i,m,r));return i[p]>g&&p<i.length-1?i[p+1]:i[p]}})}function ZN(i,t,e,n,s,r){return n=n!==void 0?n:!0,e=e!==void 0?e:0,(function(o,l,c,f){if(o!==void 0){const g=s?$1(t,s,c,r):t;if(f)return n?Q1(o,g,e):Oe(o,e,g);const m=1e-9,p=Math.ceil(Math.log(t/g)/Math.log(i)-m),v=-l*(.5-m)+.5,x=Math.min(g,o),E=Math.floor(Math.log(t/x)/Math.log(i)+v),b=Math.max(p,E),M=t/Math.pow(i,b);return Oe(M,e,g)}})}function hM(i,t,e,n,s){return e=e!==void 0?e:!0,(function(r,o,l,c){if(r!==void 0){const f=n?$1(i,n,l,s):i;return!e||!c?Oe(r,t,f):Q1(r,f,t)}})}function J1(i){if(i!==void 0)return 0}function fM(i){if(i!==void 0)return i}function $N(i){const t=2*Math.PI/i;return(function(e,n){if(n)return e;if(e!==void 0)return e=Math.floor(e/t+.5)*t,e})}function QN(i){const t=Ma(5);return(function(e,n){return n||e===void 0?e:Math.abs(e)<=t?0:e})}const eC=42,tv=256,Ny=0;class hs extends Us{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=R1(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&oT(),t.center&&(t.center=hr(t.center,this.projection_)),t.extent&&(t.extent=Ds(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const l in ls)delete e[l];this.setProperties(e,!0);const n=t7(t);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=n.minZoom;const s=JN(t),r=n.constraint,o=e7(t);this.constraints_={center:s,resolution:r,rotation:o},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const n=this.getCenterInternal();if(n){const s=t||[0,0,0,0];e=e||[0,0,0,0];const r=this.getResolution(),o=r/2*(s[3]-e[3]+e[1]-s[1]),l=r/2*(s[0]-e[0]+e[2]-s[2]);this.setCenterInternal([n[0]+o,n[1]-l])}}getUpdatedOptions_(t){const e=this.getProperties();return e.resolution!==void 0?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let n=0;n<e.length;++n){let s=arguments[n];s.center&&(s=Object.assign({},s),s.center=hr(s.center,this.getProjection())),s.anchor&&(s=Object.assign({},s),s.anchor=hr(s.anchor,this.getProjection())),e[n]=s}this.animateInternal.apply(this,e)}animateInternal(t){let e=arguments.length,n;e>1&&typeof arguments[e-1]=="function"&&(n=arguments[e-1],--e);let s=0;for(;s<e&&!this.isDef();++s){const g=arguments[s];g.center&&this.setCenterInternal(g.center),g.zoom!==void 0?this.setZoom(g.zoom):g.resolution&&this.setResolution(g.resolution),g.rotation!==void 0&&this.setRotation(g.rotation)}if(s===e){n&&Id(n,!0);return}let r=Date.now(),o=this.targetCenter_.slice(),l=this.targetResolution_,c=this.targetRotation_;const f=[];for(;s<e;++s){const g=arguments[s],m={start:r,complete:!1,anchor:g.anchor,duration:g.duration!==void 0?g.duration:1e3,easing:g.easing||OL,callback:n};if(g.center&&(m.sourceCenter=o,m.targetCenter=g.center.slice(),o=m.targetCenter),g.zoom!==void 0?(m.sourceResolution=l,m.targetResolution=this.getResolutionForZoom(g.zoom),l=m.targetResolution):g.resolution&&(m.sourceResolution=l,m.targetResolution=g.resolution,l=m.targetResolution),g.rotation!==void 0){m.sourceRotation=c;const p=$l(g.rotation-c+Math.PI,2*Math.PI)-Math.PI;m.targetRotation=c+p,c=m.targetRotation}i7(m)?m.complete=!0:r+=m.duration,f.push(m)}this.animations_.push(f),this.setHint(Pe.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Pe.ANIMATING]>0}getInteracting(){return this.hints_[Pe.INTERACTING]>0}cancelAnimations(){this.setHint(Pe.ANIMATING,-this.hints_[Pe.ANIMATING]);let t;for(let e=0,n=this.animations_.length;e<n;++e){const s=this.animations_[e];if(s[0].callback&&Id(s[0].callback,!1),!t)for(let r=0,o=s.length;r<o;++r){const l=s[r];if(!l.complete){t=l.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let n=this.animations_.length-1;n>=0;--n){const s=this.animations_[n];let r=!0;for(let o=0,l=s.length;o<l;++o){const c=s[o];if(c.complete)continue;const f=t-c.start;let g=c.duration>0?f/c.duration:1;g>=1?(c.complete=!0,g=1):r=!1;const m=c.easing(g);if(c.sourceCenter){const p=c.sourceCenter[0],v=c.sourceCenter[1],x=c.targetCenter[0],E=c.targetCenter[1];this.nextCenter_=c.targetCenter;const b=p+m*(x-p),M=v+m*(E-v);this.targetCenter_=[b,M]}if(c.sourceResolution&&c.targetResolution){const p=m===1?c.targetResolution:c.sourceResolution+m*(c.targetResolution-c.sourceResolution);if(c.anchor){const v=this.getViewportSize_(this.getRotation()),x=this.constraints_.resolution(p,0,v,!0);this.targetCenter_=this.calculateCenterZoom(x,c.anchor)}this.nextResolution_=c.targetResolution,this.targetResolution_=p,this.applyTargetState_(!0)}if(c.sourceRotation!==void 0&&c.targetRotation!==void 0){const p=m===1?$l(c.targetRotation+Math.PI,2*Math.PI)-Math.PI:c.sourceRotation+m*(c.targetRotation-c.sourceRotation);if(c.anchor){const v=this.constraints_.rotation(p,!0);this.targetCenter_=this.calculateCenterRotate(v,c.anchor)}this.nextRotation_=c.targetRotation,this.targetRotation_=p}if(this.applyTargetState_(!0),e=!0,!c.complete)break}if(r){this.animations_[n]=null,this.setHint(Pe.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=s[0].callback;o&&Id(o,!0)}}this.animations_=this.animations_.filter(Boolean),e&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let n;const s=this.getCenterInternal();return s!==void 0&&(n=[s[0]-e[0],s[1]-e[1]],S1(n,t-this.getRotation()),LI(n,e)),n}calculateCenterZoom(t,e){let n;const s=this.getCenterInternal(),r=this.getResolution();if(s!==void 0&&r!==void 0){const o=e[0]-t*(e[0]-s[0])/r,l=e[1]-t*(e[1]-s[1])/r;n=[o,l]}return n}getViewportSize_(t){const e=this.viewportSize_;if(t){const n=e[0],s=e[1];return[Math.abs(n*Math.cos(t))+Math.abs(s*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(s*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t&&O_(t,this.getProjection())}getCenterInternal(){return this.get(ls.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const e=this.calculateExtentInternal(t);return A1(e,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();se(e,"The view center is not defined");const n=this.getResolution();se(n!==void 0,"The view resolution is not defined");const s=this.getRotation();return se(s!==void 0,"The view rotation is not defined"),Eg(e,n,s,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(ls.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal(Ds(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const n=Ht(t)/e[0],s=li(t)/e[1];return Math.max(n,s)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,s=Math.log(e/n)/Math.log(t);return(function(r){return e/Math.pow(t,r*s)})}getRotation(){return this.get(ls.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),s=this.minResolution_,r=Math.log(n/s)/e;return(function(o){return Math.log(n/o)/e/r})}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const n=this.padding_;return n&&(e=[e[0]-n[1]-n[3],e[1]-n[0]-n[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),n=this.getRotation();let s=this.getCenterInternal();const r=this.padding_;if(r){const o=this.getViewportSizeMinusPadding_();s=zy(s,this.getViewportSize_(),[o[0]/2+r[3],o[1]/2+r[0]],e,n)}return{center:s.slice(0),projection:t!==void 0?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const e=this.getResolution();return e!==void 0&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e=this.minZoom_||0,n,s;if(this.resolutions_){const r=y0(this.resolutions_,t,1);e=r,n=this.resolutions_[r],r==this.resolutions_.length-1?s=2:s=n/this.resolutions_[r+1]}else n=this.maxResolution_,s=this.zoomFactor_;return e+Math.log(n/t)/Math.log(s)}getResolutionForZoom(t){if(this.resolutions_?.length){if(this.resolutions_.length===1)return this.resolutions_[0];const e=Oe(Math.floor(t),0,this.resolutions_.length-2),n=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(n,Oe(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let n;if(se(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(t)){se(!Go(t),"Cannot fit empty extent provided as `geometry`");const s=Ds(t,this.getProjection());n=jS(s)}else if(t.getType()==="Circle"){const s=Ds(t.getExtent(),this.getProjection());n=jS(s),n.rotate(this.getRotation(),Dn(s))}else n=t;this.fitInternal(n,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),n=Math.cos(e),s=Math.sin(-e),r=t.getFlatCoordinates(),o=t.getStride();let l=1/0,c=1/0,f=-1/0,g=-1/0;for(let m=0,p=r.length;m<p;m+=o){const v=r[m]*n-r[m+1]*s,x=r[m]*s+r[m+1]*n;l=Math.min(l,v),c=Math.min(c,x),f=Math.max(f,v),g=Math.max(g,x)}return[l,c,f,g]}fitInternal(t,e){e=e||{};let n=e.size;n||(n=this.getViewportSizeMinusPadding_());const s=e.padding!==void 0?e.padding:[0,0,0,0],r=e.nearest!==void 0?e.nearest:!1;let o;e.minResolution!==void 0?o=e.minResolution:e.maxZoom!==void 0?o=this.getResolutionForZoom(e.maxZoom):o=0;const l=this.rotatedExtentForGeometry(t);let c=this.getResolutionForExtentInternal(l,[n[0]-s[1]-s[3],n[1]-s[0]-s[2]]);c=isNaN(c)?o:Math.max(c,o),c=this.getConstrainedResolution(c,r?0:1);const f=this.getRotation(),g=Math.sin(f),m=Math.cos(f),p=Dn(l);p[0]+=(s[1]-s[3])/2*c,p[1]+=(s[0]-s[2])/2*c;const v=p[0]*m-p[1]*g,x=p[1]*m+p[0]*g,E=this.getConstrainedCenter([v,x],c),b=e.callback?e.callback:ch;e.duration!==void 0?this.animateInternal({resolution:c,center:E,duration:e.duration,easing:e.easing},b):(this.targetResolution_=c,this.targetCenter_=E,this.applyTargetState_(!1,!0),Id(b,!0))}centerOn(t,e,n){this.centerOnInternal(hr(t,this.getProjection()),e,n)}centerOnInternal(t,e,n){this.setCenterInternal(zy(t,e,n,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,n,s){let r;const o=this.padding_;if(o&&t){const l=this.getViewportSizeMinusPadding_(-n),c=zy(t,s,[l[0]/2+o[3],l[1]/2+o[0]],e,n);r=[t[0]-c[0],t[1]-c[1]]}return r}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(t){const e=O_(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&hr(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const n=this.getAnimating()||this.getInteracting(),s=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*t,0,s,n);e&&(this.targetCenter_=this.calculateCenterZoom(r,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=hr(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const n=this.getAnimating()||this.getInteracting(),s=this.constraints_.rotation(this.targetRotation_+t,n);e&&(this.targetCenter_=this.calculateCenterRotate(s,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&&hr(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const n=this.getAnimating()||this.getInteracting()||e,s=this.constraints_.rotation(this.targetRotation_,n),r=this.getViewportSize_(s),o=this.constraints_.resolution(this.targetResolution_,0,r,n),l=this.constraints_.center(this.targetCenter_,o,r,n,this.calculateCenterShift(this.targetCenter_,o,s,r));this.get(ls.ROTATION)!==s&&this.set(ls.ROTATION,s),this.get(ls.RESOLUTION)!==o&&(this.set(ls.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!l||!this.get(ls.CENTER)||!Sg(this.get(ls.CENTER),l))&&this.set(ls.CENTER,l),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,n){t=t!==void 0?t:200;const s=e||0,r=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(r),l=this.constraints_.resolution(this.targetResolution_,s,o),c=this.constraints_.center(this.targetCenter_,l,o,!1,this.calculateCenterShift(this.targetCenter_,l,r,o));if(t===0&&!this.cancelAnchor_){this.targetResolution_=l,this.targetRotation_=r,this.targetCenter_=c,this.applyTargetState_();return}n=n||(t===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==l||this.getRotation()!==r||!this.getCenterInternal()||!Sg(this.getCenterInternal(),c))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:c,resolution:l,duration:t,easing:xu,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Pe.INTERACTING,1)}endInteraction(t,e,n){n=n&&hr(n,this.getProjection()),this.endInteractionInternal(t,e,n)}endInteractionInternal(t,e,n){this.getInteracting()&&(this.setHint(Pe.INTERACTING,-1),this.resolveConstraints(t,e,n))}getConstrainedCenter(t,e){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),n)}getConstrainedZoom(t,e){const n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,e))}getConstrainedResolution(t,e){e=e||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,n)}}function Id(i,t){setTimeout(function(){i(t)},0)}function JN(i){if(i.extent!==void 0){const e=i.smoothExtentConstraint!==void 0?i.smoothExtentConstraint:!0;return cM(i.extent,i.constrainOnlyCenter,e)}const t=R1(i.projection,"EPSG:3857");if(i.multiWorld!==!0&&t.isGlobal()){const e=t.getExtent().slice();return e[0]=-1/0,e[2]=1/0,cM(e,!1,!1)}return WN}function t7(i){let t,e,n,o=i.minZoom!==void 0?i.minZoom:Ny,l=i.maxZoom!==void 0?i.maxZoom:28;const c=i.zoomFactor!==void 0?i.zoomFactor:2,f=i.multiWorld!==void 0?i.multiWorld:!1,g=i.smoothResolutionConstraint!==void 0?i.smoothResolutionConstraint:!0,m=i.showFullExtent!==void 0?i.showFullExtent:!1,p=R1(i.projection,"EPSG:3857"),v=p.getExtent();let x=i.constrainOnlyCenter,E=i.extent;if(!f&&!E&&p.isGlobal()&&(x=!1,E=v),i.resolutions!==void 0){const b=i.resolutions;e=b[o],n=b[l]!==void 0?b[l]:b[b.length-1],i.constrainResolution?t=KN(b,g,!x&&E,m):t=hM(e,n,g,!x&&E,m)}else{const M=(v?Math.max(Ht(v),li(v)):360*Mr.degrees/p.getMetersPerUnit())/tv/Math.pow(2,Ny),w=M/Math.pow(2,28-Ny);e=i.maxResolution,e!==void 0?o=0:e=M/Math.pow(c,o),n=i.minResolution,n===void 0&&(i.maxZoom!==void 0?i.maxResolution!==void 0?n=e/Math.pow(c,l):n=M/Math.pow(c,l):n=w),l=o+Math.floor(Math.log(e/n)/Math.log(c)),n=e/Math.pow(c,l-o),i.constrainResolution?t=ZN(c,e,n,g,!x&&E,m):t=hM(e,n,g,!x&&E,m)}return{constraint:t,maxResolution:e,minResolution:n,minZoom:o,zoomFactor:c}}function e7(i){if(i.enableRotation!==void 0?i.enableRotation:!0){const e=i.constrainRotation;return e===void 0||e===!0?QN():e===!1?fM:typeof e=="number"?$N(e):fM}return J1}function i7(i){return!(i.sourceCenter&&i.targetCenter&&!Sg(i.sourceCenter,i.targetCenter)||i.sourceResolution!==i.targetResolution||i.sourceRotation!==i.targetRotation)}function zy(i,t,e,n,s){const r=Math.cos(-s);let o=Math.sin(-s),l=i[0]*r-i[1]*o,c=i[1]*r+i[0]*o;l+=(t[0]/2-e[0])*n,c+=(e[1]-t[1]/2)*n,o=-o;const f=l*r-c*o,g=c*r+l*o;return[f,g]}const fe={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class iC extends Us{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const e=Object.assign({},t);typeof t.properties=="object"&&(delete e.properties,Object.assign(e,t.properties)),e[fe.OPACITY]=t.opacity!==void 0?t.opacity:1,se(typeof e[fe.OPACITY]=="number","Layer opacity must be a number"),e[fe.VISIBLE]=t.visible!==void 0?t.visible:!0,e[fe.Z_INDEX]=t.zIndex,e[fe.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,e[fe.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,e[fe.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,e[fe.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,this.className_=e.className!==void 0?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:t===void 0?!0:t},n=this.getZIndex();return e.opacity=Oe(Math.round(this.getOpacity()*100)/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=n===void 0&&!e.managed?1/0:n,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return Ct()}getLayerStatesArray(t){return Ct()}getExtent(){return this.get(fe.EXTENT)}getMaxResolution(){return this.get(fe.MAX_RESOLUTION)}getMinResolution(){return this.get(fe.MIN_RESOLUTION)}getMinZoom(){return this.get(fe.MIN_ZOOM)}getMaxZoom(){return this.get(fe.MAX_ZOOM)}getOpacity(){return this.get(fe.OPACITY)}getSourceState(){return Ct()}getVisible(){return this.get(fe.VISIBLE)}getZIndex(){return this.get(fe.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(fe.EXTENT,t)}setMaxResolution(t){this.set(fe.MAX_RESOLUTION,t)}setMinResolution(t){this.set(fe.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(fe.MAX_ZOOM,t)}setMinZoom(t){this.set(fe.MIN_ZOOM,t)}setOpacity(t){se(typeof t=="number","Layer opacity must be a number"),this.set(fe.OPACITY,t)}setVisible(t){this.set(fe.VISIBLE,t)}setZIndex(t){this.set(fe.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class Eu extends iC{constructor(t){const e=Object.assign({},t);delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(fe.SOURCE,this.handleSourcePropertyChange_);const n=t.source?t.source:null;this.setSource(n)}getLayersArray(t){return t=t||[],t.push(this),t}getLayerStatesArray(t){return t=t||[],t.push(this.getLayerState()),t}getSource(){return this.get(fe.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Me(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=Wt(t,St.CHANGE,this.handleSourceChange_,this),t.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return!this.renderer_||!this.rendered?null:this.renderer_.getData(t)}isVisible(t){let e;const n=this.getMapInternal();!t&&n&&(t=n.getView()),t instanceof hs?e={viewState:t.getState(),extent:t.calculateExtent()}:e=t,!e.layerStatesArray&&n&&(e.layerStatesArray=n.getLayerGroup().getLayerStatesArray());let s;if(e.layerStatesArray){if(s=e.layerStatesArray.find(o=>o.layer===this),!s)return!1}else s=this.getLayerState();const r=this.getExtent();return ev(s,e.viewState)&&(!r||Ze(r,e.extent))}getAttributions(t){if(!this.isVisible(t))return[];const e=this.getSource()?.getAttributions();if(!e)return[];const n=t instanceof hs?t.getViewStateAndExtent():t;let s=e(n);return Array.isArray(s)||(s=[s]),s}render(t,e){const n=this.getRenderer();return n.prepareFrame(t)?(this.rendered=!0,n.renderFrame(t,e)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(t,e){}renderDeferred(t){const e=this.getRenderer();e&&e.renderDeferred(t)}setMapInternal(t){t||this.unrender(),this.set(fe.MAP,t)}getMapInternal(){return this.get(fe.MAP)}setMap(t){this.mapPrecomposeKey_&&(Me(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Me(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=Wt(t,Wn.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=Wt(this,St.CHANGE,t.render,t),this.changed())}handlePrecompose_(t){const e=t.frameState.layerStatesArray,n=this.getLayerState(!1);se(!e.some(s=>s.layer===n.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),e.push(n)}setSource(t){this.set(fe.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function ev(i,t){if(!i.visible)return!1;const e=t.resolution;if(e<i.minResolution||e>=i.maxResolution)return!1;const n=t.zoom;return n>i.minZoom&&n<=i.maxZoom}const dM={RENDER_ORDER:"renderOrder"};class iv extends Eu{constructor(t){t=t||{};const e=Object.assign({},t);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=t.declutter?String(t.declutter):void 0,this.renderBuffer_=t.renderBuffer!==void 0?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=t.updateWhileAnimating!==void 0?t.updateWhileAnimating:!1,this.updateWhileInteracting_=t.updateWhileInteracting!==void 0?t.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(dM.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t,e){const n=this.getDeclutter();n in t.declutter||(t.declutter[n]=new BT(9)),this.getRenderer().renderDeclutter(t,e)}setRenderOrder(t){this.set(dM.RENDER_ORDER,t)}setStyle(t){this.style_=t===void 0?UT:t;const e=n7(t);this.styleFunction_=t===null?void 0:YP(e),this.changed()}setDeclutter(t){this.declutter_=t?String(t):void 0,this.changed()}}function n7(i){if(i===void 0)return UT;if(!i)return null;if(typeof i=="function"||i instanceof qi)return i;if(!Array.isArray(i))return aM([i]);if(i.length===0)return[];const t=i.length,e=i[0];if(e instanceof qi){const s=new Array(t);for(let r=0;r<t;++r){const o=i[r];if(!(o instanceof qi))throw new Error("Expected a list of style instances");s[r]=o}return s}if("style"in e){const s=new Array(t);for(let r=0;r<t;++r){const o=i[r];if(!("style"in o))throw new Error("Expected a list of rules with a style property");s[r]=o}return NN(s)}return aM(i)}class bh extends iv{constructor(t){super(t)}createRenderer(){return new uN(this)}}class s7 extends Y1{constructor(t,e,n,s,r){const o=r!==void 0?mt.IDLE:mt.LOADED;super(t,e,n,o),this.loader_=r!==void 0?r:null,this.canvas_=s,this.error_=null}getError(){return this.error_}handleLoad_(t){t?(this.error_=t,this.state=mt.ERROR):this.state=mt.LOADED,this.changed()}load(){this.state==mt.IDLE&&(this.state=mt.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}const ht={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class tf extends Vh{constructor(t,e,n){super(),n=n||{},this.tileCoord=t,this.state=e,this.key="",this.transition_=n.transition===void 0?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent(St.CHANGE)}release(){this.setState(ht.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==ht.EMPTY){if(this.state!==ht.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}}load(){Ct()}getAlpha(t,e){if(!this.transition_)return 1;let n=this.transitionStarts_[t];if(!n)n=e,this.transitionStarts_[t]=n;else if(n===-1)return 1;const s=e-n+1e3/60;return s>=this.transition_?1:dT(s/this.transition_)}inTransition(t){return this.transition_?this.transitionStarts_[t]!==-1:!1}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}class nC extends tf{constructor(t,e,n,s,r,o){super(t,e,o),this.crossOrigin_=s,this.src_=n,this.key=n,this.image_,ji?this.image_=new OffscreenCanvas(1,1):(this.image_=new Image,s!==null&&(this.image_.crossOrigin=s)),this.unlisten_=null,this.tileLoadFunction_=r}getImage(){return this.image_}setImage(t){this.image_=t,this.state=ht.LOADED,this.unlistenImage_(),this.changed()}getCrossOrigin(){return this.crossOrigin_}handleImageError_(){this.state=ht.ERROR,this.unlistenImage_(),this.image_=r7(),this.changed()}handleImageLoad_(){if(ji)this.state=ht.LOADED;else{const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=ht.LOADED:this.state=ht.EMPTY}this.unlistenImage_(),this.changed()}load(){this.state==ht.ERROR&&(this.state=ht.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==ht.IDLE&&(this.state=ht.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=fP(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function r7(){const i=Ue(1,1);return i.fillStyle="rgba(0,0,0,0)",i.fillRect(0,0,1,1),i.canvas}class a7{constructor(t,e,n){this.decay_=t,this.minVelocity_=e,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let n=e-3;for(;n>0&&this.points_[n+2]>t;)n-=3;const s=this.points_[e+2]-this.points_[n+2];if(s<1e3/60)return!1;const r=this.points_[e]-this.points_[n],o=this.points_[e+1]-this.points_[n+1];return this.angle_=Math.atan2(o,r),this.initialVelocity_=Math.sqrt(r*r+o*o)/s,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class jl extends xs{constructor(t,e,n){super(t),this.map=e,this.frameState=n!==void 0?n:null}}class ua extends jl{constructor(t,e,n,s,r,o){super(t,e,r),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=s!==void 0?s:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const We={SINGLECLICK:"singleclick",CLICK:St.CLICK,DBLCLICK:St.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},B_={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class o7 extends Vh{constructor(t,e){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=e===void 0?1:e,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=Wt(n,B_.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Wt(n,B_.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(St.TOUCHMOVE,this.boundHandleTouchMove_,hT?{passive:!1}:!1)}emulateClick_(t){let e=new ua(We.CLICK,this.map_,t);this.dispatchEvent(e),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new ua(We.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const n=new ua(We.SINGLECLICK,this.map_,t);this.dispatchEvent(n)},250)}updateActivePointers_(t){const e=t,n=e.pointerId;if(e.type==We.POINTERUP||e.type==We.POINTERCANCEL){delete this.trackedTouches_[n];for(const s in this.trackedTouches_)if(this.trackedTouches_[s].target!==e.target){delete this.trackedTouches_[s];break}}else(e.type==We.POINTERDOWN||e.type==We.POINTERMOVE)&&(this.trackedTouches_[n]=e);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const e=new ua(We.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Me),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return t.button===0}handlePointerDown_(t){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(t);const e=new ua(We.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(e),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),this.dragListenerKeys_.length===0){const n=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Wt(n,We.POINTERMOVE,this.handlePointerMove_,this),Wt(n,We.POINTERUP,this.handlePointerUp_,this),Wt(this.element_,We.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==n&&this.dragListenerKeys_.push(Wt(this.element_.getRootNode(),We.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const e=new ua(We.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const e=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new ua(We.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){const e=this.originalPointerMoveEvent_;(!e||e.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Me(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(St.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Me(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Me),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Ni={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},jg=1/0;class l7{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Bh(this.queuedElements_)}dequeue(){const t=this.elements_,e=this.priorities_,n=t[0];t.length==1?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));const s=this.keyFunction_(n);return delete this.queuedElements_[s],n}enqueue(t){se(!(this.keyFunction_(t)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const e=this.priorityFunction_(t);return e!=jg?(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(t){return t*2+1}getRightChildIndex_(t){return t*2+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return this.elements_.length===0}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const e=this.elements_,n=this.priorities_,s=e.length,r=e[t],o=n[t],l=t;for(;t<s>>1;){const c=this.getLeftChildIndex_(t),f=this.getRightChildIndex_(t),g=f<s&&n[f]<n[c]?f:c;e[t]=e[g],n[t]=n[g],t=g}e[t]=r,n[t]=o,this.siftDown_(l,t)}siftDown_(t,e){const n=this.elements_,s=this.priorities_,r=n[e],o=s[e];for(;e>t;){const l=this.getParentIndex_(e);if(s[l]>o)n[e]=n[l],s[e]=s[l],e=l;else break}n[e]=r,s[e]=o}reprioritize(){const t=this.priorityFunction_,e=this.elements_,n=this.priorities_;let s=0;const r=e.length;let o,l,c;for(l=0;l<r;++l)o=e[l],c=t(o),c==jg?delete this.queuedElements_[this.keyFunction_(o)]:(n[s]=c,e[s++]=o);e.length=s,n.length=s,this.heapify_()}}class sC extends l7{constructor(t,e){super(n=>t.apply(null,n),n=>n[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const e=super.enqueue(t);return e&&t[0].addEventListener(St.CHANGE,this.boundHandleTileChange_),e}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const e=t.target,n=e.getState();if(n===ht.LOADED||n===ht.ERROR||n===ht.EMPTY){n!==ht.ERROR&&e.removeEventListener(St.CHANGE,this.boundHandleTileChange_);const s=e.getKey();s in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[s],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let n=0;for(;this.tilesLoading_<t&&n<e&&this.getCount()>0;){const s=this.dequeue()[0],r=s.getKey();s.getState()===ht.IDLE&&!(r in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[r]=!0,++this.tilesLoading_,++n,s.load())}}}function u7(i,t,e,n,s){if(!i||!(e in i.wantedTiles)||!i.wantedTiles[e][t.getKey()])return jg;const r=i.viewState.center,o=n[0]-r[0],l=n[1]-r[1];return 65536*Math.log(s)+Math.sqrt(o*o+l*l)/s}const gM={ACTIVE:"active"};let ef=class extends Us{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(gM.ACTIVE)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(gM.ACTIVE,t)}setMap(t){this.map_=t}};function c7(i,t,e){const n=i.getCenterInternal();if(n){const s=[n[0]+t[0],n[1]+t[1]];i.animateInternal({duration:e!==void 0?e:250,easing:DL,center:i.getConstrainedCenter(s)})}}function nv(i,t,e,n){const s=i.getZoom();if(s===void 0)return;const r=i.getConstrainedZoom(s+t),o=i.getResolutionForZoom(r);i.getAnimating()&&i.cancelAnimations(),i.animate({resolution:o,anchor:e,duration:n!==void 0?n:250,easing:xu})}class h7 extends ef{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:250}handleEvent(t){let e=!1;if(t.type==We.DBLCLICK){const n=t.originalEvent,s=t.map,r=t.coordinate,o=n.shiftKey?-this.delta_:this.delta_,l=s.getView();nv(l,o,r,this.duration_),n.preventDefault(),e=!0}return!e}}function U_(i){const t=arguments;return function(e){let n=!0;for(let s=0,r=t.length;s<r&&(n=n&&t[s](e),!!n);++s);return n}}const f7=function(i){const t=i.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},d7=function(i){const t=i.map.getTargetElement(),e=t.getRootNode(),n=i.map.getOwnerDocument().activeElement;return e instanceof ShadowRoot?e.host.contains(n):t.contains(n)},rC=function(i){const t=i.map.getTargetElement(),e=t.getRootNode();return(e instanceof ShadowRoot?e.host:t).hasAttribute("tabindex")?d7(i):!0},g7=uh,aC=function(i){const t=i.originalEvent;return"pointerId"in t&&t.button==0&&!(ML&&uT&&t.ctrlKey)},oC=function(i){const t=i.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},m7=function(i){const t=i.originalEvent;return uT?t.metaKey:t.ctrlKey},p7=function(i){const t=i.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},lC=function(i){const t=i.originalEvent,e=t.target.tagName;return e!=="INPUT"&&e!=="SELECT"&&e!=="TEXTAREA"&&!t.target.isContentEditable},Gy=function(i){const t=i.originalEvent;return"pointerId"in t&&t.pointerType=="mouse"},y7=function(i){const t=i.originalEvent;return"pointerId"in t&&t.isPrimary&&t.button===0};class nf extends ef{constructor(t){t=t||{},super(t),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==We.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==We.POINTERUP){const n=this.handleUpEvent(t);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(t.type==We.POINTERDOWN){const n=this.handleDownEvent(t);this.handlingDownUpSequence=n,e=this.stopDown(n)}else t.type==We.POINTERMOVE&&this.handleMoveEvent(t);return!e}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}}function sv(i){const t=i.length;let e=0,n=0;for(let s=0;s<t;s++)e+=i[s].clientX,n+=i[s].clientY;return{clientX:e/t,clientY:n/t}}class _7 extends nf{constructor(t){super({stopDown:_0}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const e=t.condition?t.condition:U_(oC,y7);this.condition_=t.onFocusOnly?U_(rC,e):e,this.noKinetic_=!1}handleDragEvent(t){const e=t.map;this.panning_||(this.panning_=!0,e.getView().beginInteraction());const n=this.targetPointers,s=e.getEventPixel(sv(n));if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(s[0],s[1]),this.lastCentroid){const r=[this.lastCentroid[0]-s[0],s[1]-this.lastCentroid[1]],l=t.map.getView();PI(r,l.getResolution()),S1(r,l.getRotation()),l.adjustCenterInternal(r)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=s,this.lastPointersCount_=n.length,t.originalEvent.preventDefault()}handleUpEvent(t){const e=t.map,n=e.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const s=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),o=n.getCenterInternal(),l=e.getPixelFromCoordinateInternal(o),c=e.getCoordinateFromPixelInternal([l[0]-s*Math.cos(r),l[1]-s*Math.sin(r)]);n.animateInternal({center:n.getConstrainedCenter(c),duration:500,easing:xu})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const n=t.map.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class v7 extends nf{constructor(t){t=t||{},super({stopDown:_0}),this.condition_=t.condition?t.condition:f7,this.lastAngle_=void 0,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){if(!Gy(t))return;const e=t.map,n=e.getView();if(n.getConstraints().rotation===J1)return;const s=e.getSize(),r=t.pixel,o=Math.atan2(s[1]/2-r[1],r[0]-s[0]/2);if(this.lastAngle_!==void 0){const l=o-this.lastAngle_;n.adjustRotationInternal(-l)}this.lastAngle_=o}handleUpEvent(t){return Gy(t)?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){return Gy(t)&&aC(t)&&this.condition_(t)?(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class x7 extends qh{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,e=this.endPixel_,n="px",s=this.element_.style;s.left=Math.min(t[0],e[0])+n,s.top=Math.min(t[1],e[1])+n,s.width=Math.abs(e[0]-t[0])+n,s.height=Math.abs(e[1]-t[1])+n}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const t=this.startPixel_,e=this.endPixel_,s=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);s[4]=s[0].slice(),this.geometry_?this.geometry_.setCoordinates([s]):this.geometry_=new wr([s])}getGeometry(){return this.geometry_}}const Ol={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class wc extends xs{constructor(t,e,n){super(t),this.coordinate=e,this.mapBrowserEvent=n}}class b7 extends nf{constructor(t){super(),this.on,this.once,this.un,t=t??{},this.box_=new x7(t.className||"ol-dragbox"),this.minArea_=t.minArea??64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition??aC,this.boxEndCondition_=t.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,n){const s=n[0]-e[0],r=n[1]-e[1];return s*s+r*r>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.startPixel_&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new wc(Ol.BOXDRAG,t.coordinate,t)))}handleUpEvent(t){if(!this.startPixel_)return!1;const e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new wc(e?Ol.BOXEND:Ol.BOXCANCEL,t.coordinate,t)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new wc(Ol.BOXSTART,t.coordinate,t)),!0):!1}onBoxEnd(t){}setActive(t){t||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new wc(Ol.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(t)}setMap(t){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new wc(Ol.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(t)}}class E7 extends b7{constructor(t){t=t||{};const e=t.condition?t.condition:p7;super({condition:e,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=t.duration!==void 0?t.duration:200,this.out_=t.out!==void 0?t.out:!1}onBoxEnd(t){const n=this.getMap().getView();let s=this.getGeometry();if(this.out_){const r=n.rotatedExtentForGeometry(s),o=n.getResolutionForExtentInternal(r),l=n.getResolution()/o;s=s.clone(),s.scale(l*l)}n.fitInternal(s,{duration:this.duration_,easing:xu})}}const Qa={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class S7 extends ef{constructor(t){super(),t=t||{},this.defaultCondition_=function(e){return oC(e)&&lC(e)},this.condition_=t.condition!==void 0?t.condition:this.defaultCondition_,this.duration_=t.duration!==void 0?t.duration:100,this.pixelDelta_=t.pixelDelta!==void 0?t.pixelDelta:128}handleEvent(t){let e=!1;if(t.type==St.KEYDOWN){const n=t.originalEvent,s=n.key;if(this.condition_(t)&&(s==Qa.DOWN||s==Qa.LEFT||s==Qa.RIGHT||s==Qa.UP)){const o=t.map.getView(),l=o.getResolution()*this.pixelDelta_;let c=0,f=0;s==Qa.DOWN?f=-l:s==Qa.LEFT?c=-l:s==Qa.RIGHT?c=l:f=l;const g=[c,f];S1(g,o.getRotation()),c7(o,g,this.duration_),n.preventDefault(),e=!0}}return!e}}class M7 extends ef{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:function(e){return!m7(e)&&lC(e)},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:100}handleEvent(t){let e=!1;if(t.type==St.KEYDOWN||t.type==St.KEYPRESS){const n=t.originalEvent,s=n.key;if(this.condition_(t)&&(s==="+"||s==="-")){const r=t.map,o=s==="+"?this.delta_:-this.delta_,l=r.getView();nv(l,o,void 0,this.duration_),n.preventDefault(),e=!0}}return!e}}const w7=40,T7=300;class C7 extends ef{constructor(t){t=t||{},super(t),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=t.maxDelta!==void 0?t.maxDelta:1,this.duration_=t.duration!==void 0?t.duration:250,this.timeout_=t.timeout!==void 0?t.timeout:80,this.useAnchor_=t.useAnchor!==void 0?t.useAnchor:!0,this.constrainResolution_=t.constrainResolution!==void 0?t.constrainResolution:!1;const e=t.condition?t.condition:g7;this.condition_=t.onFocusOnly?U_(rC,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?t.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(t){if(!this.condition_(t)||t.type!==St.WHEEL)return!0;const n=t.map,s=t.originalEvent;s.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.pixel);let r=s.deltaY;switch(s.deltaMode){case WheelEvent.DOM_DELTA_LINE:r*=w7;break;case WheelEvent.DOM_DELTA_PAGE:r*=T7;break}if(r===0)return!1;this.lastDelta_=r;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(r)<4?"trackpad":"wheel");const l=n.getView();if(this.mode_==="trackpad"&&!(l.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(l.getAnimating()&&l.cancelAnimations(),l.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),l.adjustZoom(-r/this.deltaPerZoom_,this.lastAnchor_?n.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=o,!1;this.totalDelta_+=r;const c=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),c),!1}handleWheelZoom_(t){const e=t.getView();e.getAnimating()&&e.cancelAnimations();let n=-Oe(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),nv(e,n,this.lastAnchor_?t.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}class R7 extends nf{constructor(t){t=t||{};const e=t;e.stopDown||(e.stopDown=_0),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=t.threshold!==void 0?t.threshold:.3,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){let e=0;const n=this.targetPointers[0],s=this.targetPointers[1],r=Math.atan2(s.clientY-n.clientY,s.clientX-n.clientX);if(this.lastAngle_!==void 0){const c=r-this.lastAngle_;this.rotationDelta_+=c,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=c}this.lastAngle_=r;const o=t.map,l=o.getView();l.getConstraints().rotation!==J1&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(sv(this.targetPointers))),this.rotating_&&(o.render(),l.adjustRotationInternal(e,this.anchor_)))}handleUpEvent(t){return this.targetPointers.length<2?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}class A7 extends nf{constructor(t){t=t||{};const e=t;e.stopDown||(e.stopDown=_0),super(e),this.anchor_=null,this.duration_=t.duration!==void 0?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1;const n=this.targetPointers[0],s=this.targetPointers[1],r=n.clientX-s.clientX,o=n.clientY-s.clientY,l=Math.sqrt(r*r+o*o);this.lastDistance_!==void 0&&(e=this.lastDistance_/l),this.lastDistance_=l;const c=t.map,f=c.getView();e!=1&&(this.lastScaleDelta_=e),this.anchor_=c.getCoordinateFromPixelInternal(c.getEventPixel(sv(this.targetPointers))),c.render(),f.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const n=t.map.getView(),s=this.lastScaleDelta_>1?1:-1;return n.endInteraction(this.duration_,s),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}function O7(i){i=i||{};const t=new Xn,e=new a7(-.005,.05,100);return(i.altShiftDragRotate!==void 0?i.altShiftDragRotate:!0)&&t.push(new v7),(i.doubleClickZoom!==void 0?i.doubleClickZoom:!0)&&t.push(new h7({delta:i.zoomDelta,duration:i.zoomDuration})),(i.dragPan!==void 0?i.dragPan:!0)&&t.push(new _7({onFocusOnly:i.onFocusOnly,kinetic:e})),(i.pinchRotate!==void 0?i.pinchRotate:!0)&&t.push(new R7),(i.pinchZoom!==void 0?i.pinchZoom:!0)&&t.push(new A7({duration:i.zoomDuration})),(i.keyboard!==void 0?i.keyboard:!0)&&(t.push(new S7),t.push(new M7({delta:i.zoomDelta,duration:i.zoomDuration}))),(i.mouseWheelZoom!==void 0?i.mouseWheelZoom:!0)&&t.push(new C7({onFocusOnly:i.onFocusOnly,duration:i.zoomDuration})),(i.shiftDragZoom!==void 0?i.shiftDragZoom:!0)&&t.push(new E7({duration:i.zoomDuration})),t}const ra={ADDLAYER:"addlayer",REMOVELAYER:"removelayer"};class ha extends xs{constructor(t,e){super(t),this.layer=e}}const ky={LAYERS:"layers"};class Tr extends iC{constructor(t){t=t||{};const e=Object.assign({},t);delete e.layers;let n=t.layers;super(e),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(ky.LAYERS,this.handleLayersChanged_),n?Array.isArray(n)?n=new Xn(n.slice(),{unique:!0}):se(typeof n.getArray=="function","Expected `layers` to be an array or a `Collection`"):n=new Xn(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Me),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(Wt(t,rn.ADD,this.handleLayersAdd_,this),Wt(t,rn.REMOVE,this.handleLayersRemove_,this));for(const n in this.listenerKeys_)this.listenerKeys_[n].forEach(Me);Bh(this.listenerKeys_);const e=t.getArray();for(let n=0,s=e.length;n<s;n++){const r=e[n];this.registerLayerListeners_(r),this.dispatchEvent(new ha(ra.ADDLAYER,r))}this.changed()}registerLayerListeners_(t){const e=[Wt(t,lu.PROPERTYCHANGE,this.handleLayerChange_,this),Wt(t,St.CHANGE,this.handleLayerChange_,this)];t instanceof Tr&&e.push(Wt(t,ra.ADDLAYER,this.handleLayerGroupAdd_,this),Wt(t,ra.REMOVELAYER,this.handleLayerGroupRemove_,this)),this.listenerKeys_[At(t)]=e}handleLayerGroupAdd_(t){this.dispatchEvent(new ha(ra.ADDLAYER,t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new ha(ra.REMOVELAYER,t.layer))}handleLayersAdd_(t){const e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new ha(ra.ADDLAYER,e)),this.changed()}handleLayersRemove_(t){const e=t.element,n=At(e);this.listenerKeys_[n].forEach(Me),delete this.listenerKeys_[n],this.dispatchEvent(new ha(ra.REMOVELAYER,e)),this.changed()}getLayers(){return this.get(ky.LAYERS)}setLayers(t){const e=this.getLayers();if(e){const n=e.getArray();for(let s=0,r=n.length;s<r;++s)this.dispatchEvent(new ha(ra.REMOVELAYER,n[s]))}this.set(ky.LAYERS,t)}getLayersArray(t){return t=t!==void 0?t:[],this.getLayers().forEach(function(e){e.getLayersArray(t)}),t}getLayerStatesArray(t){const e=t!==void 0?t:[],n=e.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(e)});const s=this.getLayerState();let r=s.zIndex;!t&&s.zIndex===void 0&&(r=0);for(let o=n,l=e.length;o<l;o++){const c=e[o];c.opacity*=s.opacity,c.visible=c.visible&&s.visible,c.maxResolution=Math.min(c.maxResolution,s.maxResolution),c.minResolution=Math.max(c.minResolution,s.minResolution),c.minZoom=Math.max(c.minZoom,s.minZoom),c.maxZoom=Math.min(c.maxZoom,s.maxZoom),s.extent!==void 0&&(c.extent!==void 0?c.extent=_s(c.extent,s.extent):c.extent=s.extent),c.zIndex===void 0&&(c.zIndex=r)}return e}getSourceState(){return"ready"}}class D7 extends qh{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){Ct()}calculateMatrices2D(t){const e=t.viewState,n=t.coordinateToPixelTransform,s=t.pixelToCoordinateTransform;Bs(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),pT(s,n)}forEachFeatureAtCoordinate(t,e,n,s,r,o,l,c){let f;const g=e.viewState;function m(A,T,L,I){return r.call(o,T,A?L:null,I)}const p=g.projection,v=M1(t.slice(),p),x=[[0,0]];if(p.canWrapX()&&s){const A=p.getExtent(),T=Ht(A);x.push([-T,0],[T,0])}const E=e.layerStatesArray,b=E.length,M=[],w=[];for(let A=0;A<x.length;A++)for(let T=b-1;T>=0;--T){const L=E[T],I=L.layer;if(I.hasRenderer()&&ev(L,g)&&l.call(c,I)){const P=I.getRenderer(),k=I.getSource();if(P&&k){const Y=k.getWrapX()?v:t,F=m.bind(null,L.managed);w[0]=Y[0]+x[A][0],w[1]=Y[1]+x[A][1],f=P.forEachFeatureAtCoordinate(w,e,n,F,M)}if(f)return f}}if(M.length===0)return;const R=1/M.length;return M.forEach((A,T)=>A.distanceSq+=T*R),M.sort((A,T)=>A.distanceSq-T.distanceSq),M.some(A=>f=A.callback(A.feature,A.layer,A.geometry)),f}hasFeatureAtCoordinate(t,e,n,s,r,o){return this.forEachFeatureAtCoordinate(t,e,n,s,uh,this,r,o)!==void 0}getMap(){return this.map_}renderFrame(t){Ct()}scheduleExpireIconCache(t){Kn.canExpireCache()&&t.postRenderFunctions.push(I7)}}function I7(i,t){Kn.expire()}class L7 extends D7{constructor(t){super(t),this.fontChangeListenerKey_=Wt(uo,lu.PROPERTYCHANGE,t.redrawText,t),this.element_=ji?fT():document.createElement("div");const e=this.element_.style;e.position="absolute",e.width="100%",e.height="100%",e.zIndex="0",this.element_.className=Hh+" ol-layers";const n=t.getViewport();n&&n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,e){const n=this.getMap();if(n.hasListener(t)){const s=new XT(t,void 0,e);n.dispatchEvent(s)}}disposeInternal(){Me(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(Wn.PRECOMPOSE,t);const e=t.layerStatesArray.sort((f,g)=>f.zIndex-g.zIndex);e.some(f=>f.layer instanceof iv&&f.layer.getDeclutter())&&(t.declutter={});const s=t.viewState;this.children_.length=0;const r=[];let o=null;for(let f=0,g=e.length;f<g;++f){const m=e[f];t.layerIndex=f;const p=m.layer,v=p.getSourceState();if(!ev(m,s)||v!="ready"&&v!="undefined"){p.unrender();continue}const x=p.render(t,o);x&&(x!==o&&(this.children_.push(x),o=x),r.push(m))}this.declutter(t,r),RL(this.element_,this.children_);const c=this.getMap().getTargetElement();if(ga(c)){const f=c.getContext("2d");for(const g of this.children_){const m=g.firstElementChild||g,p=g.style.backgroundColor;if(p&&(!ga(m)||m.width>0)&&(f.fillStyle=p,f.fillRect(0,0,c.width,c.height)),ga(m)&&m.width>0){const v=g.style.opacity||m.style.opacity;f.globalAlpha=v===""?1:Number(v);const x=m.style.transform;if(x)f.setTransform(...L_(x));else{const E=parseFloat(m.style.width)/m.width,b=parseFloat(m.style.height)/m.height;f.setTransform(E,0,0,b,0,0)}f.drawImage(m,0,0)}}f.globalAlpha=1,f.setTransform(1,0,0,1,0,0)}this.dispatchRenderEvent(Wn.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}declutter(t,e){if(t.declutter){for(let n=e.length-1;n>=0;--n){const s=e[n],r=s.layer;r.getDeclutter()&&r.renderDeclutter(t,s)}e.forEach(n=>n.layer.renderDeferred(t))}}}function uC(i){if(i instanceof Eu){i.setMapInternal(null);return}i instanceof Tr&&i.getLayers().forEach(uC)}function cC(i,t){if(i instanceof Eu){i.setMapInternal(t);return}if(i instanceof Tr){const e=i.getLayers().getArray();for(let n=0,s=e.length;n<s;++n)cC(e[n],t)}}let Eh=class extends Us{constructor(t){super(),t=t||{},this.on,this.once,this.un;const e=P7(t);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,this.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:wL,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=dn(),this.pixelToCoordinateTransform_=dn(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,ji||(this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_)),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,ji||(this.resizeObserver_=new ResizeObserver(()=>this.updateSize())),this.controls=e.controls||(ji?new Xn:gT()),this.interactions=e.interactions||(ji?new Xn:O7({onFocusOnly:!0})),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new sC(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Ni.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Ni.VIEW,this.handleViewChanged_),this.addChangeListener(Ni.SIZE,this.handleSizeChanged_),this.addChangeListener(Ni.TARGET,this.handleTargetChanged_),this.setProperties(e.values);const n=this;t.view&&!(t.view instanceof hs)&&t.view.then(function(s){n.setView(new hs(s))}),this.controls.addEventListener(rn.ADD,s=>{s.element.setMap(this)}),this.controls.addEventListener(rn.REMOVE,s=>{s.element.setMap(null)}),this.interactions.addEventListener(rn.ADD,s=>{s.element.setMap(this)}),this.interactions.addEventListener(rn.REMOVE,s=>{s.element.setMap(null)}),this.overlays_.addEventListener(rn.ADD,s=>{this.addOverlayInternal_(s.element)}),this.overlays_.addEventListener(rn.REMOVE,s=>{const r=s.element.getId();r!==void 0&&delete this.overlayIdIndex_[r.toString()],s.element.setMap(null)}),this.controls.forEach(s=>{s.setMap(this)}),this.interactions.forEach(s=>{s.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){cC(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const e=t.getId();e!==void 0&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_?.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,n){if(!this.frameState_||!this.renderer_)return;const s=this.getCoordinateFromPixelInternal(t);n=n!==void 0?n:{};const r=n.hitTolerance!==void 0?n.hitTolerance:0,o=n.layerFilter!==void 0?n.layerFilter:uh,l=n.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(s,this.frameState_,r,l,e,null,o,null)}getFeaturesAtPixel(t,e){const n=[];return this.forEachFeatureAtPixel(t,function(s){n.push(s)},e),n}getAllLayers(){const t=[];function e(n){n.forEach(function(s){s instanceof Tr?e(s.getLayers()):t.push(s)})}return e(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;const n=this.getCoordinateFromPixelInternal(t);e=e!==void 0?e:{};const s=e.layerFilter!==void 0?e.layerFilter:uh,r=e.hitTolerance!==void 0?e.hitTolerance:0,o=e.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,r,o,s,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const n=this.viewport_.getBoundingClientRect(),s=this.getSize(),r=n.width/s[0],o=n.height/s[1],l="changedTouches"in t?t.changedTouches[0]:t;return[(l.clientX-n.left)/r,(l.clientY-n.top)/o]}getTarget(){return this.get(Ni.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return O_(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const e=this.frameState_;return e?oi(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const e=this.overlayIdIndex_[t.toString()];return e!==void 0?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Ni.LAYERGROUP)}setLayers(t){const e=this.getLayerGroup();if(t instanceof Xn){e.setLayers(t);return}const n=e.getLayers();n.clear(),n.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,n=t.length;e<n;++e){const s=t[e];if(!s.visible)continue;const r=s.layer.getRenderer();if(r&&!r.ready)return!0;const o=s.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(t){const e=hr(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){const e=this.frameState_;return e?oi(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Ni.SIZE)}getView(){return this.get(Ni.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,n,s){return u7(this.frameState_,t,e,n,s)}handleBrowserEvent(t,e){e=e||t.type;const n=new ua(e,this,t);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(t){if(!this.frameState_)return;const e=t.originalEvent,n=e.type;if(n===B_.POINTERDOWN||n===St.WHEEL||n===St.KEYDOWN){const s=this.getOwnerDocument(),r=this.viewport_.getRootNode?this.viewport_.getRootNode():s,o=e.target,l=r instanceof ShadowRoot?r.host===o?r.host.ownerDocument:r:r===s?s.documentElement:r;if(this.overlayContainerStopEvent_.contains(o)||!l.contains(o))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1){const s=this.getInteractions().getArray().slice();for(let r=s.length-1;r>=0;r--){const o=s[r];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){const t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let s=this.maxTilesLoading_,r=s;if(t){const o=t.viewHints;if(o[Pe.ANIMATING]||o[Pe.INTERACTING]){const l=Date.now()-t.time>8;s=l?0:8,r=l?0:2}}e.getTilesLoading()<s&&(e.reprioritize(),e.loadMoreTiles(s,r))}t&&this.renderer_&&!t.animate&&(this.renderComplete_?(this.hasListener(Wn.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Wn.RENDERCOMPLETE,t),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new jl(la.LOADEND,this,t)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new jl(la.LOADSTART,this,t))));const n=this.postRenderFunctions_;if(t)for(let s=0,r=n.length;s<r;++s)n[s](this,t);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let n=0,s=this.targetChangeHandlerKeys_.length;n<s;++n)Me(this.targetChangeHandlerKeys_[n]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(St.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(St.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_&&!ga(this.targetElement_)){this.resizeObserver_?.unobserve(this.targetElement_);const n=this.targetElement_.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.unobserve(n.host),this.setSize(void 0)}const t=this.getTarget(),e=typeof t=="string"?document.getElementById(t):t;if(this.targetElement_=e,!e)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{if(ga(e)||e.appendChild(this.viewport_),this.renderer_||(this.renderer_=new L7(this)),!ga(e)){this.mapBrowserEventHandler_=new o7(this,this.moveTolerance_);for(const s in We)this.mapBrowserEventHandler_.addEventListener(We[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(St.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(St.WHEEL,this.boundHandleBrowserEvent_,hT?{passive:!1}:!1);let n;if(this.keyboardEventTarget_)n=this.keyboardEventTarget_;else{const s=e.getRootNode();n=s instanceof ShadowRoot?s.host:e}if(this.targetChangeHandlerKeys_=[Wt(n,St.KEYDOWN,this.handleBrowserEvent,this),Wt(n,St.KEYPRESS,this.handleBrowserEvent,this)],e instanceof HTMLElement){const s=e.getRootNode();s instanceof ShadowRoot&&this.resizeObserver_.observe(s.host),this.resizeObserver_?.observe(e)}}this.updateSize()}}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Me(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Me(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Wt(t,lu.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Wt(t,St.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Me),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new ha("addlayer",t)),this.layerGroupPropertyListenerKeys_=[Wt(t,lu.PROPERTYCHANGE,this.render,this),Wt(t,St.CHANGE,this.render,this),Wt(t,"addlayer",this.handleLayerAdd_,this),Wt(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const t=this.frameState_.layerStatesArray;for(let e=0,n=t.length;e<n;++e){const s=t[e].layer;s.hasRenderer()&&s.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){uC(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const e=this.getSize(),n=this.getView(),s=this.frameState_;let r=null;if(e!==void 0&&KS(e)&&n&&n.isDef()){const o=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),l=n.getState();if(r={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:Eg(l.center,l.resolution,l.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:l,viewHints:o,wantedTiles:{},mapId:At(this),renderTargets:{}},l.nextCenter&&l.nextResolution){const c=isNaN(l.nextRotation)?l.rotation:l.nextRotation;r.nextExtent=Eg(l.nextCenter,l.nextResolution,c,e)}}this.frameState_=r,this.renderer_.renderFrame(r),r&&(r.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,r.postRenderFunctions),s&&(!this.previousExtent_||!Go(this.previousExtent_)&&!Sr(r.extent,this.previousExtent_))&&(this.dispatchEvent(new jl(la.MOVESTART,this,s)),this.previousExtent_=_u(this.previousExtent_)),this.previousExtent_&&!r.viewHints[Pe.ANIMATING]&&!r.viewHints[Pe.INTERACTING]&&!Sr(r.extent,this.previousExtent_)&&(this.dispatchEvent(new jl(la.MOVEEND,this,r)),Y4(r.extent,this.previousExtent_))),this.dispatchEvent(new jl(la.POSTRENDER,this,r)),this.renderComplete_=(this.hasListener(la.LOADSTART)||this.hasListener(la.LOADEND)||this.hasListener(Wn.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){const e=this.getLayerGroup();e&&this.handleLayerRemove_(new ha("removelayer",e)),this.set(Ni.LAYERGROUP,t)}setSize(t){this.set(Ni.SIZE,t)}setTarget(t){this.set(Ni.TARGET,t)}setView(t){if(!t||t instanceof hs){this.set(Ni.VIEW,t);return}this.set(Ni.VIEW,new hs);const e=this;t.then(function(n){e.setView(new hs(n))})}updateSize(){const t=this.getTargetElement();let e;if(t){let s,r;if(ga(t))s=t.width,r=t.height;else{const o=getComputedStyle(t);s=t.offsetWidth-parseFloat(o.borderLeftWidth)-parseFloat(o.paddingLeft)-parseFloat(o.paddingRight)-parseFloat(o.borderRightWidth),r=t.offsetHeight-parseFloat(o.borderTopWidth)-parseFloat(o.paddingTop)-parseFloat(o.paddingBottom)-parseFloat(o.borderBottomWidth)}!isNaN(s)&&!isNaN(r)&&(e=[Math.max(0,s),Math.max(0,r)],!KS(e)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&V4("No map visible because the map container's width or height are 0."))}const n=this.getSize();e&&(!n||!Ia(e,n))&&(this.setSize(e),this.updateViewportSize_(e))}updateViewportSize_(t){const e=this.getView();e&&e.setViewportSize(t)}};function P7(i){let t=null;i.keyboardEventTarget!==void 0&&(t=typeof i.keyboardEventTarget=="string"?document.getElementById(i.keyboardEventTarget):i.keyboardEventTarget);const e={},n=i.layers&&typeof i.layers.getLayers=="function"?i.layers:new Tr({layers:i.layers});e[Ni.LAYERGROUP]=n,e[Ni.TARGET]=i.target,e[Ni.VIEW]=i.view instanceof hs?i.view:new hs;let s;i.controls!==void 0&&(Array.isArray(i.controls)?s=new Xn(i.controls.slice()):(se(typeof i.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),s=i.controls));let r;i.interactions!==void 0&&(Array.isArray(i.interactions)?r=new Xn(i.interactions.slice()):(se(typeof i.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),r=i.interactions));let o;return i.overlays!==void 0?Array.isArray(i.overlays)?o=new Xn(i.overlays.slice()):(se(typeof i.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),o=i.overlays):o=new Xn,{controls:s,interactions:r,keyboardEventTarget:t,overlays:o,values:e}}class rv{constructor(t,e,n,s){this.minX=t,this.maxX=e,this.minY=n,this.maxY=s}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function Dl(i,t,e,n,s){return s!==void 0?(s.minX=i,s.maxX=t,s.minY=e,s.maxY=n,s):new rv(i,t,e,n)}const mM=[];class N7 extends tf{constructor(t,e,n,s,r){super(t,e,{transition:0}),this.context_=null,this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=s.bind(void 0,this),this.removeSourceTiles_=r,this.wrappedTileCoord=n}getContext(){return this.context_||(this.context_=Ue(1,1,mM)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(t){const e=At(t);return e in this.replayState_||(this.replayState_[e]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[e]}load(){this.getSourceTiles()}release(){this.context_&&(Xh(this.context_),mM.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}let hC=class extends tf{constructor(t,e,n,s,r,o){super(t,e,o),this.extent=null,this.format_=s,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=r,this.url_=n,this.key=n}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==ht.IDLE&&(this.setState(ht.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(t,e){this.setFeatures(t)}onError(){this.setState(ht.ERROR)}setFeatures(t){this.features_=t,this.setState(ht.LOADED)}setLoader(t){this.loader_=t}};class fC{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=Wh,this.supportedMediaTypes=null}getReadOptions(t,e){if(e){let n=e.dataProjection?ee(e.dataProjection):this.readProjection(t);e.extent&&n&&n.getUnits()==="tile-pixels"&&(n=ee(n),n.setWorldExtent(e.extent)),e={dataProjection:n,featureProjection:e.featureProjection}}return this.adaptOptions(e)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},t)}getType(){return Ct()}readFeature(t,e){return Ct()}readFeatures(t,e){return Ct()}readGeometry(t,e){return Ct()}readProjection(t){return Ct()}writeFeature(t,e){return Ct()}writeFeatures(t,e){return Ct()}writeGeometry(t,e){return Ct()}}function R0(i,t,e){const n=e?ee(e.featureProjection):null,s=e?ee(e.dataProjection):null;let r=i;if(n&&s&&!ki(n,s)){t&&(r=i.clone());const o=t?n:s,l=t?s:n;o.getUnits()==="tile-pixels"?r.transform(o,l):r.applyTransform(Ao(o,l))}if(t&&e&&e.decimals!==void 0){const o=Math.pow(10,e.decimals),l=function(c){for(let f=0,g=c.length;f<g;++f)c[f]=Math.round(c[f]*o)/o;return c};r===i&&(r=i.clone()),r.applyTransform(l)}return r}const z7={Point:Do,LineString:Io,Polygon:wr,MultiPoint:Zh,MultiLineString:yh,MultiPolygon:_h};function G7(i,t,e){return Array.isArray(t[0])?(CT(i,0,t,e)||(i=i.slice(),N_(i,0,t,e)),i):(B1(i,0,t,e)||(i=i.slice(),Og(i,0,t,e)),i)}function dC(i,t){const e=i.geometry;if(!e)return[];if(Array.isArray(e))return e.map(r=>dC({...i,geometry:r})).flat();const n=e.type==="MultiPolygon"?"Polygon":e.type;if(n==="GeometryCollection"||n==="Circle")throw new Error("Unsupported geometry type: "+n);const s=e.layout.length;return R0(new Fi(n,n==="Polygon"?G7(e.flatCoordinates,e.ends,s):e.flatCoordinates,e.ends?.flat(),s,i.properties||{},i.id).enableSimplifyTransformed(),!1,t)}function av(i,t){if(!i)return null;if(Array.isArray(i)){const n=i.map(s=>av(s,t));return new Ng(n)}const e=z7[i.type];return R0(new e(i.flatCoordinates,i.layout||"XY",i.ends),!1,t)}class k7 extends fC{constructor(){super()}getType(){return"json"}readFeature(t,e){return this.readFeatureFromObject(Ld(t),this.getReadOptions(t,e))}readFeatures(t,e){return this.readFeaturesFromObject(Ld(t),this.getReadOptions(t,e))}readFeatureFromObject(t,e){return Ct()}readFeaturesFromObject(t,e){return Ct()}readGeometry(t,e){return this.readGeometryFromObject(Ld(t),this.getReadOptions(t,e))}readGeometryFromObject(t,e){return Ct()}readProjection(t){return this.readProjectionFromObject(Ld(t))}readProjectionFromObject(t){return Ct()}writeFeature(t,e){return JSON.stringify(this.writeFeatureObject(t,e))}writeFeatureObject(t,e){return Ct()}writeFeatures(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))}writeFeaturesObject(t,e){return Ct()}writeGeometry(t,e){return JSON.stringify(this.writeGeometryObject(t,e))}writeGeometryObject(t,e){return Ct()}}function Ld(i){if(typeof i=="string"){const t=JSON.parse(i);return t||null}return i!==null?i:null}class Bg extends k7{constructor(t){t=t||{},super(),this.dataProjection=ee(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=ee(t.featureProjection)),t.featureClass&&(this.featureClass=t.featureClass),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,e){let n=null;t.type==="Feature"?n=t:n={type:"Feature",geometry:t,properties:null};const s=ov(n.geometry);if(this.featureClass===Fi)return dC({geometry:s,id:n.id,properties:n.properties},e);const r=new Wh;return this.geometryName_?r.setGeometryName(this.geometryName_):this.extractGeometryName_&&n.geometry_name&&r.setGeometryName(n.geometry_name),r.setGeometry(av(s,e)),"id"in n&&r.setId(n.id),n.properties&&r.setProperties(n.properties,!0),r}readFeaturesFromObject(t,e){const n=t;let s=null;if(n.type==="FeatureCollection"){const r=t;s=[];const o=r.features;for(let l=0,c=o.length;l<c;++l){const f=this.readFeatureFromObject(o[l],e);f&&s.push(f)}}else s=[this.readFeatureFromObject(t,e)];return s.flat()}readGeometryFromObject(t,e){return F7(t,e)}readProjectionFromObject(t){const e=t.crs;let n;if(e)if(e.type=="name")n=ee(e.properties.name);else if(e.type==="EPSG")n=ee("EPSG:"+e.properties.code);else throw new Error("Unknown SRS type");else n=this.dataProjection;return n}writeFeatureObject(t,e){e=this.adaptOptions(e);const n={type:"Feature",geometry:null,properties:null},s=t.getId();if(s!==void 0&&(n.id=s),!t.hasProperties())return n;const r=t.getProperties(),o=t.getGeometry();return o&&(n.geometry=H_(o,e),delete r[t.getGeometryName()]),Aa(r)||(n.properties=r),n}writeFeaturesObject(t,e){e=this.adaptOptions(e);const n=[];for(let s=0,r=t.length;s<r;++s)n.push(this.writeFeatureObject(t[s],e));return{type:"FeatureCollection",features:n}}writeGeometryObject(t,e){return H_(t,this.adaptOptions(e))}}function ov(i,t){if(!i)return null;let e;switch(i.type){case"Point":{e=B7(i);break}case"LineString":{e=U7(i);break}case"Polygon":{e=Y7(i);break}case"MultiPoint":{e=q7(i);break}case"MultiLineString":{e=H7(i);break}case"MultiPolygon":{e=V7(i);break}case"GeometryCollection":{e=j7(i);break}default:throw new Error("Unsupported GeoJSON type: "+i.type)}return e}function F7(i,t){const e=ov(i);return av(e,t)}function j7(i,t){return i.geometries.map(function(n){return ov(n)})}function B7(i){const t=i.coordinates;return{type:"Point",flatCoordinates:t,layout:Fo(t.length)}}function U7(i){const t=i.coordinates,e=t.flat();return{type:"LineString",flatCoordinates:e,ends:[e.length],layout:Fo(t[0]?.length||2)}}function H7(i){const t=i.coordinates,e=t[0]?.[0]?.length||2,n=[],s=Kh(n,0,t,e);return{type:"MultiLineString",flatCoordinates:n,ends:s,layout:Fo(e)}}function q7(i){const t=i.coordinates;return{type:"MultiPoint",flatCoordinates:t.flat(),layout:Fo(t[0]?.length||2)}}function V7(i){const t=i.coordinates,e=[],n=t[0]?.[0]?.[0].length||2,s=bT(e,0,t,n);return{type:"MultiPolygon",flatCoordinates:e,ends:s,layout:Fo(n)}}function Y7(i){const t=i.coordinates,e=[],n=t[0]?.[0]?.length,s=Kh(e,0,t,n);return{type:"Polygon",flatCoordinates:e,ends:s,layout:Fo(n)}}function H_(i,t){i=R0(i,!0,t);const e=i.getType();let n;switch(e){case"Point":{n=Q7(i);break}case"LineString":{n=W7(i);break}case"Polygon":{n=J7(i,t);break}case"MultiPoint":{n=Z7(i);break}case"MultiLineString":{n=K7(i);break}case"MultiPolygon":{n=$7(i,t);break}case"GeometryCollection":{n=X7(i,t);break}case"Circle":{n={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+e)}return n}function X7(i,t){return t=Object.assign({},t),delete t.featureProjection,{type:"GeometryCollection",geometries:i.getGeometriesArray().map(function(n){return H_(n,t)})}}function W7(i,t){return{type:"LineString",coordinates:i.getCoordinates()}}function K7(i,t){return{type:"MultiLineString",coordinates:i.getCoordinates()}}function Z7(i,t){return{type:"MultiPoint",coordinates:i.getCoordinates()}}function $7(i,t){let e;return t&&(e=t.rightHanded),{type:"MultiPolygon",coordinates:i.getCoordinates(e)}}function Q7(i,t){return{type:"Point",coordinates:i.getCoordinates()}}function J7(i,t){let e;return t&&(e=t.rightHanded),{type:"Polygon",coordinates:i.getCoordinates(e)}}const q_=65536*65536,pM=1/q_,t9=12,yM=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),Fy=0,Pd=1,Tc=2,Nd=5;class e9{constructor(t=new Uint8Array(16)){this.buf=ArrayBuffer.isView(t)?t:new Uint8Array(t),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(t,e,n=this.length){for(;this.pos<n;){const s=this.readVarint(),r=s>>3,o=this.pos;this.type=s&7,t(r,e,this),this.pos===o&&this.skip(s)}return e}readMessage(t,e){return this.readFields(t,e,this.readVarint()+this.pos)}readFixed32(){const t=this.dataView.getUint32(this.pos,!0);return this.pos+=4,t}readSFixed32(){const t=this.dataView.getInt32(this.pos,!0);return this.pos+=4,t}readFixed64(){const t=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*q_;return this.pos+=8,t}readSFixed64(){const t=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*q_;return this.pos+=8,t}readFloat(){const t=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,t}readDouble(){const t=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,t}readVarint(t){const e=this.buf;let n,s;return s=e[this.pos++],n=s&127,s<128||(s=e[this.pos++],n|=(s&127)<<7,s<128)||(s=e[this.pos++],n|=(s&127)<<14,s<128)||(s=e[this.pos++],n|=(s&127)<<21,s<128)?n:(s=e[this.pos],n|=(s&15)<<28,i9(n,t,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){const t=this.readVarint();return t%2===1?(t+1)/-2:t/2}readBoolean(){return!!this.readVarint()}readString(){const t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=t9&&yM?yM.decode(this.buf.subarray(e,t)):m9(this.buf,e,t)}readBytes(){const t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e}readPackedVarint(t=[],e){const n=this.readPackedEnd();for(;this.pos<n;)t.push(this.readVarint(e));return t}readPackedSVarint(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readSVarint());return t}readPackedBoolean(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readBoolean());return t}readPackedFloat(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readFloat());return t}readPackedDouble(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readDouble());return t}readPackedFixed32(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readFixed32());return t}readPackedSFixed32(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readSFixed32());return t}readPackedFixed64(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readFixed64());return t}readPackedSFixed64(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readSFixed64());return t}readPackedEnd(){return this.type===Tc?this.readVarint()+this.pos:this.pos+1}skip(t){const e=t&7;if(e===Fy)for(;this.buf[this.pos++]>127;);else if(e===Tc)this.pos=this.readVarint()+this.pos;else if(e===Nd)this.pos+=4;else if(e===Pd)this.pos+=8;else throw new Error(`Unimplemented type: ${e}`)}writeTag(t,e){this.writeVarint(t<<3|e)}realloc(t){let e=this.length||16;for(;e<this.pos+t;)e*=2;if(e!==this.length){const n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.dataView=new DataView(n.buffer),this.length=e}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(t){this.realloc(4),this.dataView.setInt32(this.pos,t,!0),this.pos+=4}writeSFixed32(t){this.realloc(4),this.dataView.setInt32(this.pos,t,!0),this.pos+=4}writeFixed64(t){this.realloc(8),this.dataView.setInt32(this.pos,t&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(t*pM),!0),this.pos+=8}writeSFixed64(t){this.realloc(8),this.dataView.setInt32(this.pos,t&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(t*pM),!0),this.pos+=8}writeVarint(t){if(t=+t||0,t>268435455||t<0){n9(t,this);return}this.realloc(4),this.buf[this.pos++]=t&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=(t>>>=7)&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=(t>>>=7)&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=t>>>7&127)))}writeSVarint(t){this.writeVarint(t<0?-t*2-1:t*2)}writeBoolean(t){this.writeVarint(+t)}writeString(t){t=String(t),this.realloc(t.length*4),this.pos++;const e=this.pos;this.pos=p9(this.buf,t,this.pos);const n=this.pos-e;n>=128&&_M(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n}writeFloat(t){this.realloc(4),this.dataView.setFloat32(this.pos,t,!0),this.pos+=4}writeDouble(t){this.realloc(8),this.dataView.setFloat64(this.pos,t,!0),this.pos+=8}writeBytes(t){const e=t.length;this.writeVarint(e),this.realloc(e);for(let n=0;n<e;n++)this.buf[this.pos++]=t[n]}writeRawMessage(t,e){this.pos++;const n=this.pos;t(e,this);const s=this.pos-n;s>=128&&_M(n,s,this),this.pos=n-1,this.writeVarint(s),this.pos+=s}writeMessage(t,e,n){this.writeTag(t,Tc),this.writeRawMessage(e,n)}writePackedVarint(t,e){e.length&&this.writeMessage(t,a9,e)}writePackedSVarint(t,e){e.length&&this.writeMessage(t,o9,e)}writePackedBoolean(t,e){e.length&&this.writeMessage(t,c9,e)}writePackedFloat(t,e){e.length&&this.writeMessage(t,l9,e)}writePackedDouble(t,e){e.length&&this.writeMessage(t,u9,e)}writePackedFixed32(t,e){e.length&&this.writeMessage(t,h9,e)}writePackedSFixed32(t,e){e.length&&this.writeMessage(t,f9,e)}writePackedFixed64(t,e){e.length&&this.writeMessage(t,d9,e)}writePackedSFixed64(t,e){e.length&&this.writeMessage(t,g9,e)}writeBytesField(t,e){this.writeTag(t,Tc),this.writeBytes(e)}writeFixed32Field(t,e){this.writeTag(t,Nd),this.writeFixed32(e)}writeSFixed32Field(t,e){this.writeTag(t,Nd),this.writeSFixed32(e)}writeFixed64Field(t,e){this.writeTag(t,Pd),this.writeFixed64(e)}writeSFixed64Field(t,e){this.writeTag(t,Pd),this.writeSFixed64(e)}writeVarintField(t,e){this.writeTag(t,Fy),this.writeVarint(e)}writeSVarintField(t,e){this.writeTag(t,Fy),this.writeSVarint(e)}writeStringField(t,e){this.writeTag(t,Tc),this.writeString(e)}writeFloatField(t,e){this.writeTag(t,Nd),this.writeFloat(e)}writeDoubleField(t,e){this.writeTag(t,Pd),this.writeDouble(e)}writeBooleanField(t,e){this.writeVarintField(t,+e)}}function i9(i,t,e){const n=e.buf;let s,r;if(r=n[e.pos++],s=(r&112)>>4,r<128||(r=n[e.pos++],s|=(r&127)<<3,r<128)||(r=n[e.pos++],s|=(r&127)<<10,r<128)||(r=n[e.pos++],s|=(r&127)<<17,r<128)||(r=n[e.pos++],s|=(r&127)<<24,r<128)||(r=n[e.pos++],s|=(r&1)<<31,r<128))return Il(i,s,t);throw new Error("Expected varint not more than 10 bytes")}function Il(i,t,e){return e?t*4294967296+(i>>>0):(t>>>0)*4294967296+(i>>>0)}function n9(i,t){let e,n;if(i>=0?(e=i%4294967296|0,n=i/4294967296|0):(e=~(-i%4294967296),n=~(-i/4294967296),e^4294967295?e=e+1|0:(e=0,n=n+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),s9(e,n,t),r9(n,t)}function s9(i,t,e){e.buf[e.pos++]=i&127|128,i>>>=7,e.buf[e.pos++]=i&127|128,i>>>=7,e.buf[e.pos++]=i&127|128,i>>>=7,e.buf[e.pos++]=i&127|128,i>>>=7,e.buf[e.pos]=i&127}function r9(i,t){const e=(i&7)<<4;t.buf[t.pos++]|=e|((i>>>=3)?128:0),i&&(t.buf[t.pos++]=i&127|((i>>>=7)?128:0),i&&(t.buf[t.pos++]=i&127|((i>>>=7)?128:0),i&&(t.buf[t.pos++]=i&127|((i>>>=7)?128:0),i&&(t.buf[t.pos++]=i&127|((i>>>=7)?128:0),i&&(t.buf[t.pos++]=i&127)))))}function _M(i,t,e){const n=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(Math.LN2*7));e.realloc(n);for(let s=e.pos-1;s>=i;s--)e.buf[s+n]=e.buf[s]}function a9(i,t){for(let e=0;e<i.length;e++)t.writeVarint(i[e])}function o9(i,t){for(let e=0;e<i.length;e++)t.writeSVarint(i[e])}function l9(i,t){for(let e=0;e<i.length;e++)t.writeFloat(i[e])}function u9(i,t){for(let e=0;e<i.length;e++)t.writeDouble(i[e])}function c9(i,t){for(let e=0;e<i.length;e++)t.writeBoolean(i[e])}function h9(i,t){for(let e=0;e<i.length;e++)t.writeFixed32(i[e])}function f9(i,t){for(let e=0;e<i.length;e++)t.writeSFixed32(i[e])}function d9(i,t){for(let e=0;e<i.length;e++)t.writeFixed64(i[e])}function g9(i,t){for(let e=0;e<i.length;e++)t.writeSFixed64(i[e])}function m9(i,t,e){let n="",s=t;for(;s<e;){const r=i[s];let o=null,l=r>239?4:r>223?3:r>191?2:1;if(s+l>e)break;let c,f,g;l===1?r<128&&(o=r):l===2?(c=i[s+1],(c&192)===128&&(o=(r&31)<<6|c&63,o<=127&&(o=null))):l===3?(c=i[s+1],f=i[s+2],(c&192)===128&&(f&192)===128&&(o=(r&15)<<12|(c&63)<<6|f&63,(o<=2047||o>=55296&&o<=57343)&&(o=null))):l===4&&(c=i[s+1],f=i[s+2],g=i[s+3],(c&192)===128&&(f&192)===128&&(g&192)===128&&(o=(r&15)<<18|(c&63)<<12|(f&63)<<6|g&63,(o<=65535||o>=1114112)&&(o=null))),o===null?(o=65533,l=1):o>65535&&(o-=65536,n+=String.fromCharCode(o>>>10&1023|55296),o=56320|o&1023),n+=String.fromCharCode(o),s+=l}return n}function p9(i,t,e){for(let n=0,s,r;n<t.length;n++){if(s=t.charCodeAt(n),s>55295&&s<57344)if(r)if(s<56320){i[e++]=239,i[e++]=191,i[e++]=189,r=s;continue}else s=r-55296<<10|s-56320|65536,r=null;else{s>56319||n+1===t.length?(i[e++]=239,i[e++]=191,i[e++]=189):r=s;continue}else r&&(i[e++]=239,i[e++]=191,i[e++]=189,r=null);s<128?i[e++]=s:(s<2048?i[e++]=s>>6|192:(s<65536?i[e++]=s>>12|224:(i[e++]=s>>18|240,i[e++]=s>>12&63|128),i[e++]=s>>6&63|128),i[e++]=s&63|128)}return e}class gC extends fC{constructor(t){super(),t=t||{},this.dataProjection=new vu({code:"",units:"tile-pixels"}),this.featureClass=t.featureClass?t.featureClass:Fi,this.geometryName_=t.geometryName,this.layerName_=t.layerName?t.layerName:"layer",this.layers_=t.layers?t.layers:null,this.idProperty_=t.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(t,e,n,s){t.pos=e.geometry;const r=t.readVarint()+t.pos;let o=1,l=0,c=0,f=0,g=0,m=0;for(;t.pos<r;){if(!l){const p=t.readVarint();o=p&7,l=p>>3}if(l--,o===1||o===2)c+=t.readSVarint(),f+=t.readSVarint(),o===1&&g>m&&(s.push(g),m=g),n.push(c,f),g+=2;else if(o===7)g>m&&(n.push(n[m],n[m+1]),g+=2);else throw new Error("Invalid command found in the PBF")}g>m&&(s.push(g),m=g)}createFeature_(t,e,n){const s=e.type;if(s===0)return null;let r;const o=e.properties;let l;this.idProperty_?(l=o[this.idProperty_],delete o[this.idProperty_]):l=e.id,o[this.layerName_]=e.layer.name;const c=[],f=[];this.readRawGeometry_(t,e,c,f);const g=b9(s,f.length);if(this.featureClass===Fi)r=new this.featureClass(g,c,f,2,o,l),r.transform(n.dataProjection);else{let m;if(g=="Polygon"){const x=RT(c,f);m=x.length>1?new _h(c,"XY",x):new wr(c,"XY",f)}else m=g==="Point"?new Do(c,"XY"):g==="LineString"?new Io(c,"XY"):g==="MultiPoint"?new Zh(c,"XY"):g==="MultiLineString"?new yh(c,"XY",f):null;const p=this.featureClass;r=new p,this.geometryName_&&r.setGeometryName(this.geometryName_);const v=R0(m,!1,n);r.setGeometry(v),l!==void 0&&r.setId(l),r.setProperties(o,!0)}return r}getType(){return"arraybuffer"}readFeatures(t,e){const n=this.layers_;e=this.adaptOptions(e);const s=ee(e.dataProjection);s.setWorldExtent(e.extent),e.dataProjection=s;const r=new e9(t),o=r.readFields(y9,{}),l=[];for(const c in o){if(n&&!n.includes(c))continue;const f=o[c],g=f?[0,0,f.extent,f.extent]:null;s.setExtent(g);for(let m=0,p=f.length;m<p;++m){const v=x9(r,f,m),x=this.createFeature_(r,v,e);x!==null&&l.push(x)}}return l}readProjection(t){return this.dataProjection}setLayers(t){this.layers_=t}}function y9(i,t,e){if(i===3){const n={keys:[],values:[],features:[]},s=e.readVarint()+e.pos;e.readFields(_9,n,s),n.length=n.features.length,n.length&&(t[n.name]=n)}}function _9(i,t,e){if(i===15)t.version=e.readVarint();else if(i===1)t.name=e.readString();else if(i===5)t.extent=e.readVarint();else if(i===2)t.features.push(e.pos);else if(i===3)t.keys.push(e.readString());else if(i===4){let n=null;const s=e.readVarint()+e.pos;for(;e.pos<s;)i=e.readVarint()>>3,n=i===1?e.readString():i===2?e.readFloat():i===3?e.readDouble():i===4?e.readVarint64():i===5?e.readVarint():i===6?e.readSVarint():i===7?e.readBoolean():null;t.values.push(n)}}function v9(i,t,e){if(i==1)t.id=e.readVarint();else if(i==2){const n=e.readVarint()+e.pos;for(;e.pos<n;){const s=t.layer.keys[e.readVarint()],r=t.layer.values[e.readVarint()];t.properties[s]=r}}else i==3?t.type=e.readVarint():i==4&&(t.geometry=e.pos)}function x9(i,t,e){i.pos=t.features[e];const n=i.readVarint()+i.pos,s={layer:t,type:0,properties:{}};return i.readFields(v9,s,n),s}function b9(i,t){let e;return i===1?e=t===1?"Point":"MultiPoint":i===2?e=t===1?"LineString":"MultiLineString":i===3&&(e="Polygon"),e}function V_(i){return i instanceof Image||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageBitmap?i:null}const E9=new Error("disposed"),S9=[256,256];class vM extends tf{constructor(t){const e=ht.IDLE;super(t.tileCoord,e,{transition:t.transition,interpolate:t.interpolate}),this.loader_=t.loader,this.data_=null,this.error_=null,this.size_=t.size||null,this.controller_=t.controller||null}getSize(){if(this.size_)return this.size_;const t=V_(this.data_);return t?[t.width,t.height]:S9}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==ht.IDLE&&this.state!==ht.ERROR)return;this.state=ht.LOADING,this.changed();const t=this;this.loader_().then(function(e){t.data_=e,t.state=ht.LOADED,t.changed()}).catch(function(e){t.error_=e,t.state=ht.ERROR,t.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(E9),this.controller_=null),super.disposeInternal()}}let jy;const eu=[];function xM(i,t,e,n,s){i.beginPath(),i.moveTo(0,0),i.lineTo(t,e),i.lineTo(n,s),i.closePath(),i.save(),i.clip(),i.fillRect(0,0,Math.max(t,n)+1,Math.max(e,s)),i.restore()}function By(i,t){return Math.abs(i[t*4]-210)>2||Math.abs(i[t*4+3]-.75*255)>2}function M9(){if(jy===void 0){const i=Ue(6,6,eu);i.globalCompositeOperation="lighter",i.fillStyle="rgba(210, 0, 0, 0.75)",xM(i,4,5,4,0),xM(i,4,5,0,5);const t=i.getImageData(0,0,3,3).data;jy=By(t,0)||By(t,4)||By(t,8),Xh(i),eu.push(i.canvas)}return jy}function Y_(i,t,e,n){const s=p0(e,t,i);let r=lh(t,n,e);const o=t.getMetersPerUnit();o!==void 0&&(r*=o);const l=i.getMetersPerUnit();l!==void 0&&(r/=l);const c=i.getExtent();if(!c||Co(c,s)){const f=lh(i,r,s)/r;isFinite(f)&&f>0&&(r/=f)}return r}function w9(i,t,e,n){const s=Dn(e);let r=Y_(i,t,s,n);return(!isFinite(r)||r<=0)&&Z4(e,function(o){return r=Y_(i,t,o,n),isFinite(r)&&r>0}),r}function mC(i,t,e,n,s,r,o,l,c,f,g,m,p,v){const x=Ue(Math.round(e*i),Math.round(e*t),eu);if(m||(x.imageSmoothingEnabled=!1),c.length===0)return x.canvas;x.scale(e,e);function E(T){return Math.round(T*e)/e}x.globalCompositeOperation="lighter";const b=ts();c.forEach(function(T,L,I){W4(b,T.extent)});let M;const w=e/n,R=(m?1:1+Math.pow(2,-24))/w;(!p||c.length!==1||f!==0)&&(M=Ue(Math.round(Ht(b)*w),Math.round(li(b)*w),eu),m||(M.imageSmoothingEnabled=!1),c.forEach(function(T,L,I){if(T.image.width>0&&T.image.height>0){if(T.clipExtent){M.save();const G=(T.clipExtent[0]-b[0])*w,K=-(T.clipExtent[3]-b[3])*w,$=Ht(T.clipExtent)*w,q=li(T.clipExtent)*w;M.rect(m?G:Math.round(G),m?K:Math.round(K),m?$:Math.round(G+$)-Math.round(G),m?q:Math.round(K+q)-Math.round(K)),M.clip()}const P=(T.extent[0]-b[0])*w,k=-(T.extent[3]-b[3])*w,Y=Ht(T.extent)*w,F=li(T.extent)*w;M.drawImage(T.image,f,f,T.image.width-2*f,T.image.height-2*f,m?P:Math.round(P),m?k:Math.round(k),m?Y:Math.round(P+Y)-Math.round(P),m?F:Math.round(k+F)-Math.round(k)),T.clipExtent&&M.restore()}}));const A=Ar(o);return l.getTriangles().forEach(function(T,L,I){const P=T.source,k=T.target;let Y=P[0][0],F=P[0][1],G=P[1][0],K=P[1][1],$=P[2][0],q=P[2][1];const D=E((k[0][0]-A[0])/r),j=E(-(k[0][1]-A[1])/r),U=E((k[1][0]-A[0])/r),J=E(-(k[1][1]-A[1])/r),st=E((k[2][0]-A[0])/r),O=E(-(k[2][1]-A[1])/r),N=Y,it=F;Y=0,F=0,G-=N,K-=it,$-=N,q-=it;const at=[[G,K,0,0,U-D],[$,q,0,0,st-D],[0,0,G,K,J-j],[0,0,$,q,O-j]],ct=II(at);if(!ct)return;if(x.save(),x.beginPath(),M9()||!m){x.moveTo(U,J);const yt=4,Gt=D-U,Mt=j-J;for(let le=0;le<yt;le++)x.lineTo(U+E((le+1)*Gt/yt),J+E(le*Mt/(yt-1))),le!=yt-1&&x.lineTo(U+E((le+1)*Gt/yt),J+E((le+1)*Mt/(yt-1)));x.lineTo(st,O)}else x.moveTo(U,J),x.lineTo(D,j),x.lineTo(st,O);x.clip(),x.transform(ct[0],ct[2],ct[1],ct[3],D,j),x.translate(b[0]-N,b[3]-it);let gt;if(M)gt=M.canvas,x.scale(R,-R);else{const yt=c[0],Gt=yt.extent;gt=yt.image,x.scale(Ht(Gt)/gt.width,-li(Gt)/gt.height)}x.drawImage(gt,0,0),x.restore()}),M&&(Xh(M),eu.push(M.canvas)),g&&(x.save(),x.globalCompositeOperation="source-over",x.strokeStyle="black",x.lineWidth=1,l.getTriangles().forEach(function(T,L,I){const P=T.target,k=(P[0][0]-A[0])/r,Y=-(P[0][1]-A[1])/r,F=(P[1][0]-A[0])/r,G=-(P[1][1]-A[1])/r,K=(P[2][0]-A[0])/r,$=-(P[2][1]-A[1])/r;x.beginPath(),x.moveTo(F,G),x.lineTo(k,Y),x.lineTo(K,$),x.closePath(),x.stroke()}),x.restore()),x.canvas}const T9=10,bM=.25;class pC{constructor(t,e,n,s,r,o,l){this.sourceProj_=t,this.targetProj_=e;let c={};const f=l?A_(R=>oi(l,p0(R,this.targetProj_,this.sourceProj_))):Ao(this.targetProj_,this.sourceProj_);this.transformInv_=function(R){const A=R[0]+"/"+R[1];return c[A]||(c[A]=f(R)),c[A]},this.maxSourceExtent_=s,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!s&&!!this.sourceProj_.getExtent()&&Ht(s)>=Ht(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Ht(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Ht(this.targetProj_.getExtent()):null;const g=Ar(n),m=f0(n),p=h0(n),v=c0(n),x=this.transformInv_(g),E=this.transformInv_(m),b=this.transformInv_(p),M=this.transformInv_(v),w=T9+(o?Math.max(0,Math.ceil(Math.log2(M_(n)/(o*o*256*256)))):0);if(this.addQuad_(g,m,p,v,x,E,b,M,w),this.wrapsXInSource_){let R=1/0;this.triangles_.forEach(function(A,T,L){R=Math.min(R,A.source[0][0],A.source[1][0],A.source[2][0])}),this.triangles_.forEach(A=>{if(Math.max(A.source[0][0],A.source[1][0],A.source[2][0])-R>this.sourceWorldWidth_/2){const T=[[A.source[0][0],A.source[0][1]],[A.source[1][0],A.source[1][1]],[A.source[2][0],A.source[2][1]]];T[0][0]-R>this.sourceWorldWidth_/2&&(T[0][0]-=this.sourceWorldWidth_),T[1][0]-R>this.sourceWorldWidth_/2&&(T[1][0]-=this.sourceWorldWidth_),T[2][0]-R>this.sourceWorldWidth_/2&&(T[2][0]-=this.sourceWorldWidth_);const L=Math.min(T[0][0],T[1][0],T[2][0]);Math.max(T[0][0],T[1][0],T[2][0])-L<this.sourceWorldWidth_/2&&(A.source=T)}})}c={}}addTriangle_(t,e,n,s,r,o){this.triangles_.push({source:[s,r,o],target:[t,e,n]})}addQuad_(t,e,n,s,r,o,l,c,f){const g=E_([r,o,l,c]),m=this.sourceWorldWidth_?Ht(g)/this.sourceWorldWidth_:null,p=this.sourceWorldWidth_,v=this.sourceProj_.canWrapX()&&m>.5&&m<1;let x=!1;if(f>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const b=E_([t,e,n,s]);x=Ht(b)/this.targetWorldWidth_>bM||x}!v&&this.sourceProj_.isGlobal()&&m&&(x=m>bM||x)}if(!x&&this.maxSourceExtent_&&isFinite(g[0])&&isFinite(g[1])&&isFinite(g[2])&&isFinite(g[3])&&!Ze(g,this.maxSourceExtent_))return;let E=0;if(!x&&(!isFinite(r[0])||!isFinite(r[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(l[0])||!isFinite(l[1])||!isFinite(c[0])||!isFinite(c[1]))){if(f>0)x=!0;else if(E=(!isFinite(r[0])||!isFinite(r[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(l[0])||!isFinite(l[1])?2:0)+(!isFinite(c[0])||!isFinite(c[1])?1:0),E!=1&&E!=2&&E!=4&&E!=8)return}if(f>0){if(!x){const b=[(t[0]+n[0])/2,(t[1]+n[1])/2],M=this.transformInv_(b);let w;v?w=($l(r[0],p)+$l(l[0],p))/2-$l(M[0],p):w=(r[0]+l[0])/2-M[0];const R=(r[1]+l[1])/2-M[1];x=w*w+R*R>this.errorThresholdSquared_}if(x){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){const b=[(e[0]+n[0])/2,(e[1]+n[1])/2],M=this.transformInv_(b),w=[(s[0]+t[0])/2,(s[1]+t[1])/2],R=this.transformInv_(w);this.addQuad_(t,e,b,w,r,o,M,R,f-1),this.addQuad_(w,b,n,s,R,M,l,c,f-1)}else{const b=[(t[0]+e[0])/2,(t[1]+e[1])/2],M=this.transformInv_(b),w=[(n[0]+s[0])/2,(n[1]+s[1])/2],R=this.transformInv_(w);this.addQuad_(t,b,w,s,r,M,R,c,f-1),this.addQuad_(b,e,n,w,M,o,l,R,f-1)}return}}if(v){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(E&11)==0&&this.addTriangle_(t,n,s,r,l,c),(E&14)==0&&this.addTriangle_(t,n,e,r,l,o),E&&((E&13)==0&&this.addTriangle_(e,s,t,o,c,r),(E&7)==0&&this.addTriangle_(e,s,n,o,c,l))}calculateSourceExtent(){const t=ts();return this.triangles_.forEach(function(e,n,s){const r=e.source;$c(t,r[0]),$c(t,r[1]),$c(t,r[2])}),t}getTriangles(){return this.triangles_}}const yC=.5;class _C extends tf{constructor(t,e,n,s,r,o,l,c,f,g,m,p){super(r,ht.IDLE,p),this.renderEdges_=m!==void 0?m:!1,this.pixelRatio_=l,this.gutter_=c,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=s,this.wrappedTileCoord_=o||r,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=t.canWrapX()?t.getExtent():void 0;const v=s.getTileCoordExtent(this.wrappedTileCoord_),x=this.targetTileGrid_.getExtent();let E=this.sourceTileGrid_.getExtent();const b=x?_s(v,x):v;if(M_(b)===0){this.state=ht.EMPTY;return}const M=t.getExtent();M&&(E?E=_s(E,M):E=M);const w=s.getResolution(this.wrappedTileCoord_[0]),R=w9(t,n,b,w);if(!isFinite(R)||R<=0){this.state=ht.EMPTY;return}const A=g!==void 0?g:yC;if(this.triangulation_=new pC(t,n,b,E,R*A,w),this.triangulation_.getTriangles().length===0){this.state=ht.EMPTY;return}this.sourceZ_=e.getZForResolution(R);let T=this.triangulation_.calculateSourceExtent();if(E&&(t.canWrapX()?(T[1]=Oe(T[1],E[1],E[3]),T[3]=Oe(T[3],E[1],E[3])):T=_s(T,E)),!M_(T))this.state=ht.EMPTY;else{let L=0,I=0;t.canWrapX()&&(L=Ht(M),I=Math.floor((T[0]-M[0])/L)),tT(T.slice(),t,!0).forEach(k=>{const Y=e.getTileRangeForExtentAndZ(k,this.sourceZ_);for(let F=Y.minX;F<=Y.maxX;F++)for(let G=Y.minY;G<=Y.maxY;G++){const K=f(this.sourceZ_,F,G,l);if(K){const $=I*L;this.sourceTiles_.push({tile:K,offset:$})}}++I}),this.sourceTiles_.length===0&&(this.state=ht.EMPTY)}}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach(e=>{const n=e.tile;if(n&&n.getState()==ht.LOADED){const s=this.sourceTileGrid_.getTileCoordExtent(n.tileCoord);s[0]+=e.offset,s[2]+=e.offset;const r=this.clipExtent_?.slice();r&&(r[0]+=e.offset,r[2]+=e.offset),t.push({extent:s,clipExtent:r,image:n.getImage()})}}),this.sourceTiles_.length=0,t.length===0)this.state=ht.ERROR;else{const e=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(e),s=typeof n=="number"?n:n[0],r=typeof n=="number"?n:n[1],o=this.targetTileGrid_.getResolution(e),l=this.sourceTileGrid_.getResolution(this.sourceZ_),c=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=mC(s,r,this.pixelRatio_,l,this.sourceTileGrid_.getExtent(),o,c,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=ht.LOADED}this.changed()}load(){if(this.state==ht.IDLE){this.state=ht.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:e})=>{const n=e.getState();if(n==ht.IDLE||n==ht.LOADING){t++;const s=Wt(e,St.CHANGE,r=>{const o=e.getState();(o==ht.LOADED||o==ht.ERROR||o==ht.EMPTY)&&(Me(s),t--,t===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(s)}}),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:e},n,s){e.getState()==ht.IDLE&&e.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Me),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Xh(this.canvas_.getContext("2d")),eu.push(this.canvas_),this.canvas_=null),super.release()}}class EM{constructor(t){this.highWaterMark=t!==void 0?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const t=this.pop();t instanceof qh&&t.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let e=this.oldest_;for(;e;)t(e.value_,e.key_,this),e=e.newer}get(t,e){const n=this.entries_[t];return se(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(t){const e=this.entries_[t];return se(e!==void 0,"Tried to get a value for a key that does not exist in the cache"),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let e=0,n;for(n=this.newest_;n;n=n.older)t[e++]=n.key_;return t}getValues(){const t=new Array(this.count_);let e=0,n;for(n=this.newest_;n;n=n.older)t[e++]=n.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){return this.entries_[t]?.value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,e){this.get(t),this.entries_[t].value_=e}set(t,e){se(!(t in this.entries_),"Tried to set a value for a key that is used already");const n={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_}setSize(t){this.highWaterMark=t}}function Ug(i,t,e,n){return n!==void 0?(n[0]=i,n[1]=t,n[2]=e,n):[i,t,e]}function C9(i,t,e){return i+"/"+t+"/"+e}function lg(i,t,e,n,s){return`${At(i)},${t},${C9(e,n,s)}`}function R9(i){return A9(i[0],i[1],i[2])}function A9(i,t,e){return(t<<i)+e}function O9(i,t){const e=i[0],n=i[1],s=i[2];if(t.getMinZoom()>e||e>t.getMaxZoom())return!1;const r=t.getFullTileRange(e);return r?r.containsXY(n,s):!0}class D9 extends W1{constructor(t){super(t),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(t){const e=t.layerStatesArray[t.layerIndex],n=t.pixelRatio,s=t.viewState,r=s.resolution,o=this.getLayer().getSource(),l=t.viewHints;let c=t.extent;if(e.extent!==void 0&&(c=_s(c,Ds(e.extent,s.projection))),!l[Pe.ANIMATING]&&!l[Pe.INTERACTING]&&!Go(c))if(o){const f=s.projection,g=o.getImage(c,r,n,f);g&&(this.loadImage(g)?this.image=g:g.getState()===mt.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(t){const e=this.frameState;if(!e)return null;const n=this.getLayer(),s=oi(e.pixelToCoordinateTransform,t.slice()),r=n.getExtent();if(r&&!Co(r,s))return null;const o=this.image.getExtent(),l=this.image.getImage(),c=Ht(o),f=Math.floor(l.width*((s[0]-o[0])/c));if(f<0||f>=l.width)return null;const g=li(o),m=Math.floor(l.height*((o[3]-s[1])/g));return m<0||m>=l.height?null:this.getImageData(l,f,m)}renderFrame(t,e){const n=this.image,s=n.getExtent(),r=n.getResolution(),[o,l]=Array.isArray(r)?r:[r,r],c=n.getPixelRatio(),f=t.layerStatesArray[t.layerIndex],g=t.pixelRatio,m=t.viewState,p=m.center,v=m.resolution,x=g*o/(v*c),E=g*l/(v*c);this.prepareContainer(t,e);const b=this.context.canvas.width,M=this.context.canvas.height,w=this.getRenderContext(t);let R=!1,A=!0;if(f.extent){const k=Ds(f.extent,m.projection);A=Ze(k,t.extent),R=A&&!pr(k,t.extent),R&&this.clipUnrotated(w,t,k)}const T=n.getImage(),L=Bs(this.tempTransform,b/2,M/2,x,E,0,c*(s[0]-p[0])/o,c*(p[1]-s[3])/l);this.renderedResolution=l*g/c;const I=T.width*L[0],P=T.height*L[3];if(this.getLayer().getSource().getInterpolate()||(w.imageSmoothingEnabled=!1),this.preRender(w,t),A&&I>=.5&&P>=.5){const k=L[4],Y=L[5],F=f.opacity;F!==1&&(w.save(),w.globalAlpha=F),w.drawImage(T,0,0,+T.width,+T.height,k,Y,I,P),F!==1&&w.restore()}return this.postRender(this.context,t),R&&w.restore(),w.imageSmoothingEnabled=!0,this.container}}class I9 extends Eu{constructor(t){t=t||{},super(t)}}class vC extends I9{constructor(t){super(t)}createRenderer(){return new D9(this)}getData(t){return super.getData(t)}}function Uy(i,t,e){if(!(e in i))return i[e]=new Set([t]),!0;const n=i[e],s=n.has(t);return s||n.add(t),!s}function L9(i,t,e){const n=i[e];return n?n.delete(t):!1}function SM(i,t){const e=i.layerStatesArray[i.layerIndex];e.extent&&(t=_s(t,Ds(e.extent,i.viewState.projection)));const n=e.layer.getRenderSource();if(!n.getWrapX()){const s=n.getTileGridForProjection(i.viewState.projection).getExtent();s&&(t=_s(t,s))}return t}class xC extends W1{constructor(t,e){super(t),e=e||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=ts(),this.tempTileRange_=new rv(0,0,0,0),this.tempTileCoord_=Ug(0,0,0);const n=e.cacheSize!==void 0?e.cacheSize:512;this.tileCache_=new EM(n),this.sourceTileCache_=null,this.maxStaleKeys=n*.5}getTileCache(){return this.tileCache_}getSourceTileCache(){return this.sourceTileCache_||(this.sourceTileCache_=new EM(512)),this.sourceTileCache_}getOrCreateTile(t,e,n,s){const r=this.tileCache_,l=this.getLayer().getSource(),c=lg(l,l.getKey(),t,e,n);let f;if(r.containsKey(c))f=r.get(c);else{const g=s.viewState.projection,m=l.getProjection();if(f=l.getTile(t,e,n,s.pixelRatio,g,!m||ki(m,g)?void 0:this.getSourceTileCache()),!f)return null;r.set(c,f)}return f}getTile(t,e,n,s){const r=this.getOrCreateTile(t,e,n,s);return r||null}getData(t){const e=this.frameState;if(!e)return null;const n=this.getLayer(),s=oi(e.pixelToCoordinateTransform,t.slice()),r=n.getExtent();if(r&&!Co(r,s))return null;const o=e.viewState,l=n.getRenderSource(),c=l.getTileGridForProjection(o.projection),f=l.getTilePixelRatio(e.pixelRatio);for(let g=c.getZForResolution(o.resolution);g>=c.getMinZoom();--g){const m=c.getTileCoordForCoordAndZ(s,g),p=this.getTile(g,m[1],m[2],e);if(!p||p.getState()!==ht.LOADED)continue;const v=c.getOrigin(g),x=Bi(c.getTileSize(g)),E=c.getResolution(g);let b;if(p instanceof nC||p instanceof _C)b=p.getImage();else if(p instanceof vM){if(b=V_(p.getData()),!b)continue}else continue;const M=Math.floor(f*((s[0]-v[0])/E-m[1]*x[0])),w=Math.floor(f*((v[1]-s[1])/E-m[2]*x[1])),R=Math.round(f*l.getGutterForProjection(o.projection));return this.getImageData(b,M+R,w+R)}return null}prepareFrame(t){this.renderedProjection?t.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=t.viewState.projection):this.renderedProjection=t.viewState.projection;const e=this.getLayer().getSource();if(!e)return!1;const n=e.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==n&&(this.renderedSourceRevision_=n,this.renderedSourceKey_===e.getKey()&&(this.tileCache_.clear(),this.sourceTileCache_?.clear())):this.renderedSourceRevision_=n,!0}enqueueTilesForNextExtent(){return!0}enqueueTiles(t,e,n,s,r){const o=t.viewState,l=this.getLayer(),c=l.getRenderSource(),f=c.getTileGridForProjection(o.projection),g=At(c);g in t.wantedTiles||(t.wantedTiles[g]={});const m=t.wantedTiles[g],p=l.getMapInternal(),v=Math.max(n-r,f.getMinZoom(),f.getZForResolution(Math.min(l.getMaxResolution(),p?p.getView().getResolutionForZoom(Math.max(l.getMinZoom(),0)):f.getResolution(0)),c.zDirection)),x=o.rotation,E=x?$4(o.center,o.resolution,x,t.size):void 0;for(let b=n;b>=v;--b){const M=f.getTileRangeForExtentAndZ(e,b,this.tempTileRange_),w=f.getResolution(b);for(let R=M.minX;R<=M.maxX;++R)for(let A=M.minY;A<=M.maxY;++A){if(x&&!f.tileCoordIntersectsViewport([b,R,A],E))continue;const T=this.getTile(b,R,A,t);if(!T||!Uy(s,T,b))continue;const I=T.getKey();if(m[I]=!0,T.getState()===ht.IDLE&&!t.tileQueue.isKeyQueued(I)){const P=Ug(b,R,A,this.tempTileCoord_);t.tileQueue.enqueue([T,g,f.getTileCoordCenter(P),w])}}}}findStaleTile_(t,e){const n=this.tileCache_,s=t[0],r=t[1],o=t[2],l=this.getStaleKeys();for(let c=0;c<l.length;++c){const f=lg(this.getLayer().getSource(),l[c],s,r,o);if(n.containsKey(f)){const g=n.peek(f);if(g.getState()===ht.LOADED)return g.endTransition(At(this)),Uy(e,g,s),!0}}return!1}findAltTiles_(t,e,n,s){const r=t.getTileRangeForTileCoordAndZ(e,n,this.tempTileRange_);if(!r)return!1;let o=!0;const l=this.tileCache_,c=this.getLayer().getRenderSource(),f=c.getKey();for(let g=r.minX;g<=r.maxX;++g)for(let m=r.minY;m<=r.maxY;++m){const p=lg(c,f,n,g,m);let v=!1;if(l.containsKey(p)){const x=l.peek(p);x.getState()===ht.LOADED&&(Uy(s,x,n),v=!0)}v||(o=!1)}return o}renderFrame(t,e){this.renderComplete=!0;const n=t.layerStatesArray[t.layerIndex],s=t.viewState,r=s.projection,o=s.resolution,l=s.center,c=t.pixelRatio,f=this.getLayer(),g=f.getSource(),m=g.getTileGridForProjection(r),p=m.getZForResolution(o,g.zDirection),v=m.getResolution(p),x=g.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==x&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=x):this.renderedSourceKey_=x;let E=t.extent;const b=g.getTilePixelRatio(c);this.prepareContainer(t,e);const M=this.context.canvas.width,w=this.context.canvas.height,R=n.extent&&Ds(n.extent);R&&(E=_s(E,Ds(n.extent)));const A=v*M/2/b,T=v*w/2/b,L=[l[0]-A,l[1]-T,l[0]+A,l[1]+T],I={};this.renderedTiles.length=0;const P=f.getPreload();if(t.nextExtent&&this.enqueueTilesForNextExtent()){const U=m.getZForResolution(s.nextResolution,g.zDirection),J=SM(t,t.nextExtent);this.enqueueTiles(t,J,U,I,P)}const k=SM(t,E);if(this.enqueueTiles(t,k,p,I,0),P>0&&setTimeout(()=>{this.enqueueTiles(t,k,p-1,I,P-1)},0),!(p in I))return this.container;const Y=At(this),F=t.time;for(const U of I[p]){const J=U.getState();if(J===ht.EMPTY)continue;const st=U.tileCoord;if(J===ht.LOADED&&U.getAlpha(Y,F)===1){U.endTransition(Y);continue}if(J!==ht.ERROR&&(this.renderComplete=!1),this.findStaleTile_(st,I)){L9(I,U,p),t.animate=!0;continue}if(this.findAltTiles_(m,st,p+1,I))continue;const it=m.getMinZoom();for(let at=p-1;at>=it&&!this.findAltTiles_(m,st,at,I);--at);}const G=v/o*c/b,K=this.getRenderContext(t);Bs(this.tempTransform,M/2,w/2,G,G,0,-M/2,-w/2),n.extent&&this.clipUnrotated(K,t,R),g.getInterpolate()||(K.imageSmoothingEnabled=!1),this.preRender(K,t);const $=Object.keys(I).map(Number);$.sort(Ls);let q;const D=[],j=[];for(let U=$.length-1;U>=0;--U){const J=$[U],st=g.getTilePixelSize(J,c,r),N=m.getResolution(J)/v,it=st[0]*N*G,at=st[1]*N*G,ct=m.getTileCoordForCoordAndZ(Ar(L),J),gt=m.getTileCoordExtent(ct),yt=oi(this.tempTransform,[b*(gt[0]-L[0])/v,b*(L[3]-gt[3])/v]),Gt=b*g.getGutterForProjection(r);for(const Mt of I[J]){if(Mt.getState()!==ht.LOADED)continue;const le=Mt.tileCoord,ft=ct[1]-le[1],Xi=Math.round(yt[0]-(ft-1)*it),mn=ct[2]-le[2],wt=Math.round(yt[1]-(mn-1)*at),hi=Math.round(yt[0]-ft*it),$e=Math.round(yt[1]-mn*at),De=Xi-hi,pn=wt-$e,_e=$.length===1;let Si=!1;q=[hi,$e,hi+De,$e,hi+De,$e+pn,hi,$e+pn];for(let Li=0,Mi=D.length;Li<Mi;++Li)if(!_e&&J<j[Li]){const Ee=D[Li];Ze([hi,$e,hi+De,$e+pn],[Ee[0],Ee[3],Ee[4],Ee[7]])&&(Si||(K.save(),Si=!0),K.beginPath(),K.moveTo(q[0],q[1]),K.lineTo(q[2],q[3]),K.lineTo(q[4],q[5]),K.lineTo(q[6],q[7]),K.moveTo(Ee[6],Ee[7]),K.lineTo(Ee[4],Ee[5]),K.lineTo(Ee[2],Ee[3]),K.lineTo(Ee[0],Ee[1]),K.clip())}D.push(q),j.push(J),this.drawTile(Mt,t,hi,$e,De,pn,Gt,_e),Si&&K.restore(),this.renderedTiles.unshift(Mt),this.updateUsedTiles(t.usedTiles,g,Mt)}}if(this.renderedResolution=v,this.extentChanged=!this.renderedExtent_||!Sr(this.renderedExtent_,L),this.renderedExtent_=L,this.renderedPixelRatio=c,this.postRender(this.context,t),n.extent&&K.restore(),K.imageSmoothingEnabled=!0,this.renderComplete){const U=(J,st)=>{const O=At(g),N=st.wantedTiles[O],it=N?Object.keys(N).length:0;this.updateCacheSize(it),this.tileCache_.expireCache(),this.sourceTileCache_?.expireCache()};t.postRenderFunctions.push(U)}return this.container}updateCacheSize(t){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,t*2)}drawTile(t,e,n,s,r,o,l,c){let f;if(t instanceof vM){if(f=V_(t.getData()),!f)throw new Error("Rendering array data is not yet supported")}else f=this.getTileImage(t);if(!f)return;const g=this.getRenderContext(e),m=At(this),p=e.layerStatesArray[e.layerIndex],v=p.opacity*(c?t.getAlpha(m,e.time):1),x=v!==g.globalAlpha;x&&(g.save(),g.globalAlpha=v),g.drawImage(f,l,l,f.width-2*l,f.height-2*l,n,s,r,o),x&&g.restore(),v!==p.opacity?e.animate=!0:c&&t.endTransition(m)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}updateUsedTiles(t,e,n){const s=At(e);s in t||(t[s]={}),t[s][n.getKey()]=!0}}const ya={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class P9 extends Eu{constructor(t){t=t||{};const e=Object.assign({},t),n=t.cacheSize;delete t.cacheSize,delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.cacheSize_=n,this.setPreload(t.preload!==void 0?t.preload:0),this.setUseInterimTilesOnError(t.useInterimTilesOnError!==void 0?t.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(ya.PRELOAD)}setPreload(t){this.set(ya.PRELOAD,t)}getUseInterimTilesOnError(){return this.get(ya.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(t){this.set(ya.USE_INTERIM_TILES_ON_ERROR,t)}getData(t){return super.getData(t)}}class bC extends P9{constructor(t){super(t)}createRenderer(){return new xC(this,{cacheSize:this.getCacheSize()})}}function X_(i){return Array.isArray(i)?Math.min(...i):i}const N9={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},MM={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class z9 extends xC{constructor(t,e){super(t,e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=dn(),this.tileClipContexts_=null}enqueueTilesForNextExtent(){return this.getLayer().getRenderMode()!=="vector"}drawTile(t,e,n,s,r,o,l,c){this.updateExecutorGroup_(t,e.pixelRatio,e.viewState.projection),this.tileImageNeedsRender_(t)&&this.renderTileImage_(t,e),super.drawTile(t,e,n,s,r,o,l,c)}getTile(t,e,n,s){const r=this.getOrCreateTile(t,e,n,s);if(!r)return null;const o=s.viewState,l=o.resolution,c=s.viewHints,f=this.getLayer().getSource(),g=f.getTileGridForProjection(o.projection),m=!(c[Pe.ANIMATING]||c[Pe.INTERACTING]),p=g.getZForResolution(l,f.zDirection)===t;return m&&p?r.wantedResolution=l:r.wantedResolution||(r.wantedResolution=g.getResolution(t)),r}prepareFrame(t){const e=this.getLayer().getRevision();return this.renderedLayerRevision_!==e&&(this.renderedLayerRevision_=e,this.renderedTiles.length=0),super.prepareFrame(t)}updateExecutorGroup_(t,e,n){const s=this.getLayer(),r=s.getRevision(),o=s.getRenderOrder()||null,l=t.wantedResolution,c=t.getReplayState(s);if(!c.dirty&&c.renderedResolution===l&&c.renderedRevision==r&&c.renderedRenderOrder==o)return;const f=s.getSource(),g=!!s.getDeclutter(),m=f.getTileGrid(),v=f.getTileGridForProjection(n).getTileCoordExtent(t.wrappedTileCoord),x=f.getSourceTiles(e,n,t),E=At(s);delete t.hitDetectionImageData[E],t.executorGroups[E]=[],c.dirty=!1;for(let b=0,M=x.length;b<M;++b){const w=x[b];if(w.getState()!=ht.LOADED)continue;const R=f.getProjection(),A=w.tileCoord;let T=m.getTileCoordExtent(A);n&&R&&!ki(n,R)&&(T=og(T,R,n,32));const L=_s(v,T),I=Sa(L,s.getRenderBuffer()*l,this.tempExtent),P=Sr(T,L)?null:I,k=new HT(0,L,l,e),Y=k_(l,e),F=function(D,j){let U;const J=D.getStyleFunction()||s.getStyleFunction();if(J&&(U=J(D,l)),U){const st=this.renderFeature(D,Y,U,k,g,j);c.dirty=c.dirty||st}},G=w.getFeatures();o&&o!==c.renderedRenderOrder&&G.sort(o);for(let D=0,j=G.length;D<j;++D){let U=G[D];n&&w.projection&&!ki(n,w.projection)&&(U=U.clone(),U.getGeometry().applyTransform(Ao(w.projection,n))),(!P||Ze(P,U.getGeometry().getExtent()))&&F.call(this,U,D)}const K=k.finish(),$=s.getRenderMode()!=="vector"&&g&&x.length===1?null:L,q=new qT($,l,e,f.getOverlaps(),K,s.getRenderBuffer(),!0);t.executorGroups[E].push(q)}c.renderedRevision=r,c.renderedRenderOrder=o,c.renderedResolution=l}forEachFeatureAtCoordinate(t,e,n,s,r){const o=e.viewState.resolution,l=e.viewState.rotation;n=n??0;const c=this.getLayer(),g=c.getSource().getTileGridForProjection(e.viewState.projection),m=E_([t]);Sa(m,o*n,m);const p={},v=function(R,A,T){let L=R.getId();L===void 0&&(L=At(R));const I=p[L];if(I){if(I!==!0&&T<I.distanceSq){if(T===0)return p[L]=!0,r.splice(r.lastIndexOf(I),1),s(R,c,A);I.geometry=A,I.distanceSq=T}}else{if(T===0)return p[L]=!0,s(R,c,A);r.push(p[L]={feature:R,layer:c,geometry:A,distanceSq:T,callback:s})}},x=this.renderedTiles,E=At(c),b=c.getDeclutter(),M=b?e.declutter?.[b]?.all().map(R=>R.value):null;let w;t:for(let R=0,A=x.length;R<A;++R){const T=x[R],L=g.getTileCoordExtent(T.wrappedTileCoord);if(!Ze(L,m))continue;const I=T.executorGroups[E];for(let P=0,k=I.length;P<k;++P)if(w=I[P].forEachFeatureAtCoordinate(t,o,l,n,v,M),w)break t}return w}getFeatures(t){return this.renderedTiles.length===0?Promise.resolve([]):new Promise((e,n)=>{const s=this.getLayer(),r=s.getSource(),o=this.renderedProjection,l=o.getExtent(),c=this.renderedResolution,f=r.getTileGridForProjection(o),g=oi(this.renderedPixelToCoordinateTransform_,t.slice()),m=f.getTileCoordForCoordAndResolution(g,c).toString(),p=this.renderedTiles.find(R=>R.tileCoord.toString()===m&&R.getState()===ht.LOADED);if(!p||p.loadingSourceTiles>0){e([]);return}r.getWrapX()&&o.canWrapX()&&!pr(l,f.getTileCoordExtent(p.tileCoord))&&M1(g,o);const v=At(s),x=f.getTileCoordExtent(p.wrappedTileCoord),E=Ar(x),b=[(g[0]-E[0])/c,(E[1]-g[1])/c],M=p.getSourceTiles().reduce((R,A)=>R.concat(A.getFeatures()),[]);let w=p.hitDetectionImageData[v];if(!w){const R=Bi(f.getTileSize(f.getZForResolution(c,r.zDirection))),A=this.renderedRotation_,T=[this.getRenderTransform(f.getTileCoordCenter(p.wrappedTileCoord),c,0,Tn,R[0]*Tn,R[1]*Tn,0)];w=VT(R,T,M,s.getStyleFunction(),f.getTileCoordExtent(p.wrappedTileCoord),p.getReplayState(s).renderedResolution,A),p.hitDetectionImageData[v]=w}e(YT(b,M,w))})}getFeaturesInExtent(t){const e=[],n=this.getTileCache();if(n.getCount()===0)return e;const r=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),o=r.getZForResolution(this.renderedResolution),l={};return n.forEach(c=>{if(c.tileCoord[0]!==o||c.getState()!==ht.LOADED)return;const f=c.getSourceTiles();for(let g=0,m=f.length;g<m;++g){const p=f[g],v=p.getKey();if(v in l)continue;l[v]=!0;const x=p.tileCoord;if(Ze(t,r.getTileCoordExtent(x))){const E=p.getFeatures();if(E)for(let b=0,M=E.length;b<M;++b){const w=E[b],R=w.getGeometry();Ze(t,R.getExtent())&&e.push(w)}}}}),e}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.renderedLayerRevision_!==void 0&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}renderDeclutter(t,e){const n=this.context,s=n.globalAlpha;n.globalAlpha=e.opacity;const r=t.viewHints,o=!(r[Pe.ANIMATING]||r[Pe.INTERACTING]),l=[this.context.canvas.width,this.context.canvas.height],c=this.getLayer().getDeclutter(),f=c?t.declutter?.[c]:void 0,g=At(this.getLayer()),m=this.renderedTiles;for(let p=0,v=m.length;p<v;++p){const x=m[p],E=x.executorGroups[g];if(E)for(let b=E.length-1;b>=0;--b)E[b].execute(this.context,l,this.getTileRenderTransform(x,t),t.viewState.rotation,o,Gg,f)}n.globalAlpha=s}renderDeferredInternal(t){const e=this.renderedTiles,n=At(this.getLayer()),s=e.reduce((c,f,g)=>(f.executorGroups[n].forEach(m=>c.push({executorGroup:m,index:g})),c),[]),r=s.map(({executorGroup:c})=>c.getDeferredZIndexContexts()),o={};for(let c=0,f=s.length;c<f;++c){const g=s[c].executorGroup.getDeferredZIndexContexts();for(const m in g)o[m]=!0}Object.keys(o).map(Number).sort(Ls).forEach(c=>{r.forEach((f,g)=>{f[c]&&(f[c].forEach(m=>{const{executorGroup:p,index:v}=s[g],x=p.getRenderedContext(),E=x.globalAlpha;x.globalAlpha=this.renderedOpacity_;const b=this.tileClipContexts_[v];b&&b.draw(x),m.draw(x),b&&x.restore(),x.globalAlpha=E,m.clear()}),f[c].length=0)})})}getTileRenderTransform(t,e){const n=e.pixelRatio,s=e.viewState,r=s.center,o=s.resolution,l=s.rotation,c=e.size,f=Math.round(c[0]*n),g=Math.round(c[1]*n),p=this.getLayer().getSource().getTileGridForProjection(e.viewState.projection),v=t.tileCoord,x=p.getTileCoordExtent(t.wrappedTileCoord),E=p.getTileCoordExtent(v,this.tempExtent)[0]-x[0];return D1(xy(this.inversePixelTransform.slice(),1/n,1/n),this.getRenderTransform(r,o,l,n,f,g,E))}postRender(t,e){const n=e.viewHints,s=!(n[Pe.ANIMATING]||n[Pe.INTERACTING]);this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice(),this.renderedRotation_=e.viewState.rotation,this.renderedOpacity_=e.layerStatesArray[e.layerIndex].opacity;const r=this.getLayer(),o=r.getRenderMode(),l=t.globalAlpha;t.globalAlpha=this.renderedOpacity_;const c=r.getDeclutter(),f=c?MM[o].filter(T=>!Gg.includes(T)):MM[o],g=e.viewState,m=g.rotation,p=r.getSource(),x=p.getTileGridForProjection(g.projection).getZForResolution(g.resolution,p.zDirection),E=this.renderedTiles,b=[],M=[],w=[],R=At(r);let A=!0;for(let T=E.length-1;T>=0;--T){const L=E[T];A=A&&!L.getReplayState(r).dirty;const I=L.executorGroups[R].filter($=>$.hasExecutors(f));if(I.length===0)continue;const P=this.getTileRenderTransform(L,e),k=L.tileCoord[0];let Y=!1;const F=I[0].getClipCoords(P);let G=t,K;if(F){K=new X1,G=K.getContext();for(let $=0,q=b.length;$<q;++$)if(x!==k&&k<M[$]){const D=b[$];Ze([F[0],F[3],F[4],F[7]],[D[0],D[3],D[4],D[7]])&&(Y||(G.save(),Y=!0),G.beginPath(),G.moveTo(F[0],F[1]),G.lineTo(F[2],F[3]),G.lineTo(F[4],F[5]),G.lineTo(F[6],F[7]),G.moveTo(D[6],D[7]),G.lineTo(D[4],D[5]),G.lineTo(D[2],D[3]),G.lineTo(D[0],D[1]),G.clip())}b.push(F),M.push(k)}for(let $=0,q=I.length;$<q;++$)I[$].execute(t,[t.canvas.width,t.canvas.height],P,m,s,f,e.declutter?.[c]);Y&&(G===t?G.restore():w[T]=K)}t.globalAlpha=l,this.ready=A,this.tileClipContexts_=w,e.declutter||this.renderDeferredInternal(e),super.postRender(t,e)}renderFeature(t,e,n,s,r,o){if(!n)return!1;let l=!1;if(Array.isArray(n))for(let c=0,f=n.length;c<f;++c)l=Pg(s,t,n[c],e,this.boundHandleStyleImageChange_,void 0,r,o)||l;else l=Pg(s,t,n,e,this.boundHandleStyleImageChange_,void 0,r,o);return l}tileImageNeedsRender_(t){const e=this.getLayer();if(e.getRenderMode()==="vector")return!1;const n=t.getReplayState(e),s=e.getRevision(),r=t.wantedResolution;return n.renderedTileResolution!==r||n.renderedTileRevision!==s}renderTileImage_(t,e){const n=this.getLayer(),s=t.getReplayState(n),r=n.getRevision(),o=t.executorGroups[At(n)];s.renderedTileRevision=r;const l=t.wrappedTileCoord,c=l[0],f=n.getSource();let g=e.pixelRatio;const p=e.viewState.projection,v=f.getTileGridForProjection(p),x=v.getResolution(t.tileCoord[0]),E=e.pixelRatio/t.wantedResolution*x,b=v.getResolution(c),M=t.getContext();g=Math.round(Math.max(g,E/g));const w=f.getTilePixelSize(c,g,p);M.canvas.width=w[0],M.canvas.height=w[1];const R=g/E;if(R!==1){const I=zS(this.tmpTransform_);xy(I,R,R),M.setTransform.apply(M,I)}const A=v.getTileCoordExtent(l,this.tempExtent),T=E/b,L=zS(this.tmpTransform_);xy(L,T,-T),zL(L,-A[0],-A[3]);for(let I=0,P=o.length;I<P;++I)o[I].execute(M,[M.canvas.width*R,M.canvas.height*R],L,0,!0,N9[n.getRenderMode()],null);s.renderedTileResolution=t.wantedResolution}}class Jc extends iv{constructor(t){t=t||{};const e=Object.assign({},t);delete e.preload;const n=t.cacheSize===void 0?0:t.cacheSize;delete t.cacheSize,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.cacheSize_=n;const s=t.renderMode||"hybrid";se(s=="hybrid"||s=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=s,this.setPreload(t.preload?t.preload:0),this.setUseInterimTilesOnError(t.useInterimTilesOnError!==void 0?t.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new z9(this,{cacheSize:this.cacheSize_})}getFeatures(t){return super.getFeatures(t)}getFeaturesInExtent(t){return this.getRenderer().getFeaturesInExtent(t)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(ya.PRELOAD)}getUseInterimTilesOnError(){return this.get(ya.USE_INTERIM_TILES_ON_ERROR)}setPreload(t){this.set(ya.PRELOAD,t)}setUseInterimTilesOnError(t){this.set(ya.USE_INTERIM_TILES_ON_ERROR,t)}}const Ll=[0,0,0],aa=5;class A0{constructor(t){this.minZoom=t.minZoom!==void 0?t.minZoom:0,this.resolutions_=t.resolutions,se(_L(this.resolutions_,(s,r)=>r-s),"`resolutions` must be sorted in descending order");let e;if(!t.origins){for(let s=0,r=this.resolutions_.length-1;s<r;++s)if(!e)e=this.resolutions_[s]/this.resolutions_[s+1];else if(this.resolutions_[s]/this.resolutions_[s+1]!==e){e=void 0;break}}this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=t.origin!==void 0?t.origin:null,this.origins_=null,t.origins!==void 0&&(this.origins_=t.origins,se(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const n=t.extent;n!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Ar(n)),se(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,t.tileSizes!==void 0&&(this.tileSizes_=t.tileSizes,se(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=t.tileSize!==void 0?t.tileSize:this.tileSizes_?null:tv,se(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=n!==void 0?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],t.sizes!==void 0?this.fullTileRanges_=t.sizes.map((s,r)=>{const o=new rv(Math.min(0,s[0]),Math.max(s[0]-1,-1),Math.min(0,s[1]),Math.max(s[1]-1,-1));if(n){const l=this.getTileRangeForExtentAndZ(n,r);o.minX=Math.max(l.minX,o.minX),o.maxX=Math.min(l.maxX,o.maxX),o.minY=Math.max(l.minY,o.minY),o.maxY=Math.min(l.maxY,o.maxY)}return o}):n&&this.calculateTileRanges_(n)}forEachTileCoord(t,e,n){const s=this.getTileRangeForExtentAndZ(t,e);for(let r=s.minX,o=s.maxX;r<=o;++r)for(let l=s.minY,c=s.maxY;l<=c;++l)n([e,r,l])}forEachTileCoordParentTileRange(t,e,n,s){let r,o,l,c=null,f=t[0]-1;for(this.zoomFactor_===2?(o=t[1],l=t[2]):c=this.getTileCoordExtent(t,s);f>=this.minZoom;){if(o!==void 0&&l!==void 0?(o=Math.floor(o/2),l=Math.floor(l/2),r=Dl(o,o,l,l,n)):r=this.getTileRangeForExtentAndZ(c,f,n),e(f,r))return!0;--f}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,e,n){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){const r=t[1]*2,o=t[2]*2;return Dl(r,r+1,o,o+1,e)}const s=this.getTileCoordExtent(t,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,t[0]+1,e)}return null}getTileRangeForTileCoordAndZ(t,e,n){if(e>this.maxZoom||e<this.minZoom)return null;const s=t[0],r=t[1],o=t[2];if(e===s)return Dl(r,o,r,o,n);if(this.zoomFactor_){const c=Math.pow(this.zoomFactor_,e-s),f=Math.floor(r*c),g=Math.floor(o*c);if(e<s)return Dl(f,f,g,g,n);const m=Math.floor(c*(r+1))-1,p=Math.floor(c*(o+1))-1;return Dl(f,m,g,p,n)}const l=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(l,e,n)}getTileRangeForExtentAndZ(t,e,n){this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,Ll);const s=Ll[1],r=Ll[2];this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,Ll);const o=Ll[1],l=Ll[2];return Dl(s,o,r,l,n)}getTileCoordCenter(t){const e=this.getOrigin(t[0]),n=this.getResolution(t[0]),s=Bi(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*s[0]*n,e[1]-(t[2]+.5)*s[1]*n]}getTileCoordExtent(t,e){const n=this.getOrigin(t[0]),s=this.getResolution(t[0]),r=Bi(this.getTileSize(t[0]),this.tmpSize_),o=n[0]+t[1]*r[0]*s,l=n[1]-(t[2]+1)*r[1]*s,c=o+r[0]*s,f=l+r[1]*s;return Er(o,l,c,f,e)}getTileCoordForCoordAndResolution(t,e,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,n)}getTileCoordForXYAndResolution_(t,e,n,s,r){const o=this.getZForResolution(n),l=n/this.getResolution(o),c=this.getOrigin(o),f=Bi(this.getTileSize(o),this.tmpSize_);let g=l*(t-c[0])/n/f[0],m=l*(c[1]-e)/n/f[1];return s?(g=da(g,aa)-1,m=da(m,aa)-1):(g=Sd(g,aa),m=Sd(m,aa)),Ug(o,g,m,r)}getTileCoordForXYAndZ_(t,e,n,s,r){const o=this.getOrigin(n),l=this.getResolution(n),c=Bi(this.getTileSize(n),this.tmpSize_);let f=(t-o[0])/l/c[0],g=(o[1]-e)/l/c[1];return s?(f=da(f,aa)-1,g=da(g,aa)-1):(f=Sd(f,aa),g=Sd(g,aa)),Ug(n,f,g,r)}getTileCoordForCoordAndZ(t,e,n){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,n)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,e){const n=y0(this.resolutions_,t,e||0);return Oe(n,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,e){return wT(e,0,e.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const e=this.resolutions_.length,n=new Array(e);for(let s=this.minZoom;s<e;++s)n[s]=this.getTileRangeForExtentAndZ(t,s);this.fullTileRanges_=n}}function lv(i){let t=i.getDefaultTileGrid();return t||(t=F9(i),i.setDefaultTileGrid(t)),t}function G9(i,t,e){const n=t[0],s=i.getTileCoordCenter(t),r=O0(e);if(!Co(r,s)){const o=Ht(r),l=Math.ceil((r[0]-s[0])/o);return s[0]+=o*l,i.getTileCoordForCoordAndZ(s,n)}return t}function k9(i,t,e,n){n=n!==void 0?n:"top-left";const s=EC(i,t,e);return new A0({extent:i,origin:RI(i,n),resolutions:s,tileSize:e})}function uv(i){const t=i||{},e=t.extent||ee("EPSG:3857").getExtent(),n={extent:e,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:EC(e,t.maxZoom,t.tileSize,t.maxResolution)};return new A0(n)}function EC(i,t,e,n){t=t!==void 0?t:eC,e=Bi(e!==void 0?e:tv);const s=li(i),r=Ht(i);n=n>0?n:Math.max(r/e[0],s/e[1]);const o=t+1,l=new Array(o);for(let c=0;c<o;++c)l[c]=n/Math.pow(2,c);return l}function F9(i,t,e,n){const s=O0(i);return k9(s,t,e,n)}function O0(i){i=ee(i);let t=i.getExtent();if(!t){const e=180*Mr.degrees/i.getMetersPerUnit();t=Er(-e,-e,e,e)}return t}const j9=/\{z\}/g,B9=/\{x\}/g,U9=/\{y\}/g,H9=/\{-y\}/g;function q9(i,t,e,n,s){return i.replace(j9,t.toString()).replace(B9,e.toString()).replace(U9,n.toString()).replace(H9,function(){if(s===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(s-n).toString()})}function V9(i){const t=[];let e=/\{([a-z])-([a-z])\}/.exec(i);if(e){const n=e[1].charCodeAt(0),s=e[2].charCodeAt(0);let r;for(r=n;r<=s;++r)t.push(i.replace(e[0],String.fromCharCode(r)));return t}if(e=/\{(\d+)-(\d+)\}/.exec(i),e){const n=parseInt(e[2],10);for(let s=parseInt(e[1],10);s<=n;s++)t.push(i.replace(e[0],s.toString()));return t}return t.push(i),t}function Y9(i,t){return(function(e,n,s){if(!e)return;let r;const o=e[0];if(t){const l=t.getFullTileRange(o);l&&(r=l.getHeight()-1)}return q9(i,o,e[1],e[2],r)})}function SC(i,t){const e=i.length,n=new Array(e);for(let s=0;s<e;++s)n[s]=Y9(i[s],t);return X9(n)}function X9(i){return i.length===1?i[0]:(function(t,e,n){if(!t)return;const s=R9(t),r=$l(s,i.length);return i[r](t,e,n)})}class MC extends bu{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,this.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;const e=[256,256];this.tileGrid&&Bi(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),e),this.tmpSize=[0,0],this.key_=t.key||At(this),this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getResolutions(t){const e=t?this.getTileGridForProjection(t):this.tileGrid;return e?e.getResolutions():null}getTile(t,e,n,s,r,o){return Ct()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:lv(t)}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,e,n){const s=this.getTileGridForProjection(n),r=this.getTilePixelRatio(e),o=Bi(s.getTileSize(t),this.tmpSize);return r==1?o:VP(o,r,this.tmpSize)}getTileCoordForTileUrlFunction(t,e){const n=e!==void 0?e:this.getProjection(),s=e!==void 0?this.getTileGridForProjection(n):this.tileGrid||this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(t=G9(s,t,n)),O9(t,s)?t:null}clear(){}refresh(){this.clear(),super.refresh()}}class W9 extends xs{constructor(t,e){super(t),this.tile=e}}const Hy={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class D0 extends MC{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===D0.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const e=t.target,n=At(e),s=e.getState();let r;s==ht.LOADING?(this.tileLoadingKeys_[n]=!0,r=Hy.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],r=s==ht.ERROR?Hy.TILELOADERROR:s==ht.LOADED?Hy.TILELOADEND:void 0),r!=null&&this.dispatchEvent(new W9(r,e))}setTileLoadFunction(t){this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,e){this.tileUrlFunction=t,typeof e<"u"?this.setKey(e):this.changed()}setUrl(t){const e=V9(t);this.urls=e,this.setUrls(e)}setUrls(t){this.urls=t;const e=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(SC(t,this.tileGrid),e):this.setKey(e)}tileUrlFunction(t,e,n){}}class K9 extends D0{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:Z9,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate!==void 0?t.interpolate:!0,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=t.crossOrigin!==void 0?t.crossOrigin:null,this.tileClass=t.tileClass!==void 0?t.tileClass:nC,this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(t){return this.getProjection()&&t&&!ki(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getTileGridForProjection(t){const e=this.getProjection();if(this.tileGrid&&(!e||ki(e,t)))return this.tileGrid;const n=At(t);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=lv(t)),this.tileGridForProjection[n]}createTile_(t,e,n,s,r,o){const l=[t,e,n],c=this.getTileCoordForTileUrlFunction(l,r),f=c?this.tileUrlFunction(c,s,r):void 0,g=new this.tileClass(l,f!==void 0?ht.IDLE:ht.EMPTY,f!==void 0?f:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return g.key=o,g.addEventListener(St.CHANGE,this.handleTileChange.bind(this)),g}getTile(t,e,n,s,r,o){const l=this.getProjection();if(!l||!r||ki(l,r))return this.getTileInternal(t,e,n,s,l||r);const c=[t,e,n],f=this.getKey(),g=this.getTileGridForProjection(l),m=this.getTileGridForProjection(r),p=this.getTileCoordForTileUrlFunction(c,r),v=new _C(l,g,r,m,c,p,this.getTilePixelRatio(s),this.getGutter(),(x,E,b,M)=>this.getTileInternal(x,E,b,M,l,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return v.key=f,v}getTileInternal(t,e,n,s,r,o){const l=this.getKey(),c=lg(this,l,t,e,n);if(o&&o.containsKey(c))return o.get(c);const f=this.createTile_(t,e,n,s,r,l);return o?.set(c,f),f}setRenderReprojectionEdges(t){this.renderReprojectionEdges_!=t&&(this.renderReprojectionEdges_=t,this.changed())}setTileGridForProjection(t,e){const n=ee(t);if(n){const s=At(n);s in this.tileGridForProjection||(this.tileGridForProjection[s]=e)}}}function Z9(i,t){if(ji){const e=i.getCrossOrigin();let n="same-origin",s="same-origin";e==="anonymous"||e===""?(n="cors",s="omit"):e==="use-credentials"&&(n="cors",s="include"),fetch(t,{mode:n,credentials:s}).then(r=>{if(!r.ok)throw new Error(`HTTP ${r.status}`);return r.blob()}).then(r=>createImageBitmap(r)).then(r=>{const o=i.getImage();o.width=r.width,o.height=r.height,o.getContext("2d").drawImage(r,0,0),r.close?.(),o.dispatchEvent(new Event("load"))}).catch(()=>{i.getImage().dispatchEvent(new Event("error"))});return}i.getImage().src=t}const $9={},Q9=Object.freeze(Object.defineProperty({__proto__:null,default:$9},Symbol.toStringTag,{value:"Module"}));class J9 extends Y1{constructor(t,e,n,s,r,o,l){let c=t.getExtent();c&&t.canWrapX()&&(c=c.slice(),c[0]=-1/0,c[2]=1/0);let f=e.getExtent();f&&e.canWrapX()&&(f=f.slice(),f[0]=-1/0,f[2]=1/0);const g=f?_s(n,f):n,m=Dn(g),p=Y_(t,e,m,s),v=yC,x=new pC(t,e,g,c,p*v,s),E=x.calculateSourceExtent(),b=Go(E)?null:o(E,p,r),M=b?mt.IDLE:mt.EMPTY,w=b?b.getPixelRatio():1;super(n,s,w,M),this.targetProj_=e,this.maxSourceExtent_=c,this.triangulation_=x,this.targetResolution_=s,this.targetExtent_=n,this.sourceImage_=b,this.sourcePixelRatio_=w,this.interpolate_=l,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==mt.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const t=this.sourceImage_.getState();if(t==mt.LOADED){const e=Ht(this.targetExtent_)/this.targetResolution_,n=li(this.targetExtent_)/this.targetResolution_;this.canvas_=mC(e,n,this.sourcePixelRatio_,X_(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=t,this.changed()}load(){if(this.state==mt.IDLE){this.state=mt.LOADING,this.changed();const t=this.sourceImage_.getState();t==mt.LOADED||t==mt.ERROR?this.reproject_():(this.sourceListenerKey_=Wt(this.sourceImage_,St.CHANGE,e=>{const n=this.sourceImage_.getState();(n==mt.LOADED||n==mt.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){Me(this.sourceListenerKey_),this.sourceListenerKey_=null}}const zd=4,qy={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class tz extends xs{constructor(t,e){super(t),this.image=e}}class wC extends bu{constructor(t){super({attributions:t.attributions,projection:t.projection,state:t.state,interpolate:t.interpolate!==void 0?t.interpolate:!0}),this.on,this.once,this.un,this.loader=t.loader||null,this.resolutions_=t.resolutions!==void 0?t.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=t.loader?t.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(t){this.resolutions_=t}findNearestResolution(t){const e=this.getResolutions();if(e){const n=y0(e,t,0);t=e[n]}return t}getImage(t,e,n,s){const r=this.getProjection();if(!r||!s||ki(r,s))return r&&(s=r),this.getImageInternal(t,e,n,s);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&ki(this.reprojectedImage_.getProjection(),s)&&this.reprojectedImage_.getResolution()==e&&Sr(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new J9(r,s,t,e,n,(o,l,c)=>this.getImageInternal(o,l,c,r),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(t,e,n,s){if(this.loader){const r=ez(t,e,n,1),o=this.findNearestResolution(e);if(this.image&&(this.static_||this.wantedProjection_===s&&(this.wantedExtent_&&pr(this.wantedExtent_,r)||pr(this.image.getExtent(),r))&&(this.wantedResolution_&&X_(this.wantedResolution_)===o||X_(this.image.getResolution())===o)))return this.image;this.wantedProjection_=s,this.wantedExtent_=r,this.wantedResolution_=o,this.image=new Y1(r,o,n,this.loader),this.image.addEventListener(St.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(t){const e=t.target;let n;switch(e.getState()){case mt.LOADING:this.loading=!0,n=qy.IMAGELOADSTART;break;case mt.LOADED:this.loading=!1,n=qy.IMAGELOADEND;break;case mt.ERROR:this.loading=!1,n=qy.IMAGELOADERROR;break;default:return}this.hasListener(n)&&this.dispatchEvent(new tz(n,e))}}function ez(i,t,e,n){const s=t/e,r=Dn(i),o=da(Ht(i)/s,zd),l=da(li(i)/s,zd),c=da((n-1)*o/2,zd),f=o+2*c,g=da((n-1)*l/2,zd),m=l+2*g;return Eg(r,s,0,[f,m])}function iz(i,t,e,n){const s=document.createElement("script"),r="olc_"+At(t);function o(){delete window[r],s.parentNode.removeChild(s)}s.async=!0,s.src=i+(i.includes("?")?"&":"?")+"callback="+r;const l=setTimeout(function(){o(),e&&e()},1e4);window[r]=function(c){clearTimeout(l),o(),t(c)},document.head.appendChild(s)}class cv extends D0{constructor(t){const e=t.projection||"EPSG:3857",n=t.extent||O0(e),s=t.tileGrid||uv({extent:n,maxResolution:t.maxResolution,maxZoom:t.maxZoom!==void 0?t.maxZoom:22,minZoom:t.minZoom,tileSize:t.tileSize||512});super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,interpolate:!0,projection:e,state:t.state,tileGrid:s,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:TC,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX===void 0?!0:t.wrapX,transition:t.transition,zDirection:t.zDirection===void 0?1:t.zDirection}),this.format_=t.format?t.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=t.overlaps==null?!0:t.overlaps,this.tileClass=t.tileClass?t.tileClass:hC,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(t,e,n){if(n.getState()===ht.IDLE){n.setState(ht.LOADING);const s=n.wrappedTileCoord,r=this.getTileGridForProjection(e);let o=r.getTileCoordExtent(s);const l=s[0],c=r.getResolution(l);Sa(o,-c,o);const f=this.projection;e&&this.projection&&!ki(e,f)&&(o=og(o,e,f));const g=this.tileGrid,m=g.getExtent();m&&_s(o,m,o);let p=c;e&&f&&!ki(e,f)&&(p=c/f.getMetersPerUnit()/e.getMetersPerUnit());const v=g.getZForResolution(p,this.zDirection);g.forEachTileCoord(o,v,x=>{const E=this.tileUrlFunction(x,t,e);this.sourceTiles_[E]||(this.sourceTiles_[E]=new this.tileClass(x,E?ht.IDLE:ht.EMPTY,E,this.format_,this.tileLoadFunction));const b=this.sourceTiles_[E];n.sourceTiles.push(b),this.tileKeysBySourceTileUrl_[E]||(this.tileKeysBySourceTileUrl_[E]=[]),this.tileKeysBySourceTileUrl_[E].push(n.getKey());const M=b.getState();if(M<ht.LOADED){const w=R=>{this.handleTileChange(R);const A=b.getState();if(A===ht.LOADED||A===ht.ERROR){const T=b.getKey();T in n.errorTileKeys?b.getState()===ht.LOADED&&delete n.errorTileKeys[T]:n.loadingSourceTiles--,A===ht.ERROR?n.errorTileKeys[T]=!0:b.removeEventListener(St.CHANGE,w),n.loadingSourceTiles===0&&n.setState(Aa(n.errorTileKeys)?ht.LOADED:ht.ERROR)}};b.addEventListener(St.CHANGE,w),n.loadingSourceTiles++}M===ht.IDLE&&(b.extent=g.getTileCoordExtent(x),b.projection=this.projection,b.resolution=g.getResolution(x[0]),b.load())}),n.loadingSourceTiles||n.setState(n.sourceTiles.some(x=>x.getState()===ht.ERROR)?ht.ERROR:ht.LOADED)}return n.sourceTiles}removeSourceTiles(t){const e=t.getKey(),n=t.sourceTiles;for(let s=0,r=n.length;s<r;++s){const o=n[s].getTileUrl();if(!this.tileKeysBySourceTileUrl_[o])return;const l=this.tileKeysBySourceTileUrl_[o].indexOf(e);l!==-1&&(this.tileKeysBySourceTileUrl_[o].splice(l,1),this.tileKeysBySourceTileUrl_[o].length===0&&(delete this.tileKeysBySourceTileUrl_[o],delete this.sourceTiles_[o]))}}getTile(t,e,n,s,r){const o=[t,e,n];let l=this.getTileCoordForTileUrlFunction(o,r);const c=this.getTileGrid().getExtent(),f=this.projection,g=this.getTileGridForProjection(r);if(l&&c){const v=g.getTileCoordExtent(l);Sa(v,-g.getResolution(t),v),Ze(c,!r||!f||ki(r,f)?v:og(v,r,f))||(l=null)}let m=!0;if(l!==null){const v=this.tileGrid,x=g.getResolution(t);let E=x;r&&f&&!ki(r,f)&&(E=x/f.getMetersPerUnit()/r.getMetersPerUnit());const b=v.getZForResolution(E,1),M=g.getTileCoordExtent(l);Sa(M,-x,M),v.forEachTileCoord(!r||!f||ki(r,f)?M:og(M,r,f),b,w=>{m=m&&!this.tileUrlFunction(w,s,f)})}const p=new N7(o,m?ht.EMPTY:ht.IDLE,l,this.getSourceTiles.bind(this,s,r),this.removeSourceTiles.bind(this));return p.key=this.getKey(),p}getTileGridForProjection(t){const e=t.getCode();let n=this.tileGrids_[e];if(!n){const s=this.projection;if(s!==null&&!ki(s,t))return lv(t);const r=this.tileGrid,o=r.getResolutions().slice(),l=o.map(function(g,m){return r.getOrigin(m)}),c=o.map(function(g,m){return r.getTileSize(m)}),f=eC+1;for(let g=o.length;g<f;++g)o.push(o[g-1]/2),l.push(l[g-1]),c.push(c[g-1]);n=new A0({extent:r.getExtent(),origins:l,resolutions:o,tileSizes:c}),this.tileGrids_[e]=n}return n}getTilePixelRatio(t){return t}getTilePixelSize(t,e,n){const s=this.getTileGridForProjection(n),r=Bi(s.getTileSize(t),this.tmpSize);return[Math.round(r[0]*e),Math.round(r[1]*e)]}setOverlaps(t){this.overlaps_=t,this.changed()}}function TC(i,t){i.setLoader(function(e,n,s){kT(t,i.getFormat(),e,n,s,i.onLoad.bind(i),i.onError.bind(i))})}function CC(i){return function(t){const e=t.buffers,n=t.meta,s=t.imageOps,r=t.width,o=t.height,l=e.length,c=e[0].byteLength;if(s){const p=new Array(l);for(let x=0;x<l;++x)p[x]=new ImageData(new Uint8ClampedArray(e[x]),r,o);return i(p,n).data.buffer}const f=new Uint8ClampedArray(c),g=new Array(l),m=new Array(l);for(let p=0;p<l;++p)g[p]=new Uint8ClampedArray(e[p]),m[p]=[0,0,0,0];for(let p=0;p<c;p+=4){for(let x=0;x<l;++x){const E=g[x];m[x][0]=E[p],m[x][1]=E[p+1],m[x][2]=E[p+2],m[x][3]=E[p+3]}const v=i(m,n);f[p]=v[0],f[p+1]=v[1],f[p+2]=v[2],f[p+3]=v[3]}return f.buffer}}function nz(i,t){const n=Object.keys(i.lib||{}).map(function(r){return"const "+r+" = "+i.lib[r].toString()+";"}).concat(["const __minion__ = ("+CC.toString()+")(",i.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),s=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(n.join(`
`),"binary").toString("base64"):URL.createObjectURL(new Blob(n,{type:"text/javascript"})));return s.addEventListener("message",t),s}function sz(i,t){const e=CC(i.operation);let n=!1;return{postMessage:function(s){setTimeout(function(){n||t({data:{buffer:e(s),meta:s.meta}})},0)},terminate:function(){n=!0}}}class rz extends qh{constructor(t){super(),this.imageOps_=!!t.imageOps;let e;t.threads===0?e=0:this.imageOps_?e=1:e=t.threads||1;const n=new Array(e);if(e)for(let s=0;s<e;++s)n[s]=nz(t,this.onWorkerMessage_.bind(this,s));else n[0]=sz(t,this.onWorkerMessage_.bind(this,0));this.workers_=n,this.queue_=[],this.maxQueueLength_=t.queue||1/0,this.running_=0,this.dataLookup_={},this.job_=null}process(t,e,n){this.enqueue_({inputs:t,meta:e,callback:n}),this.dispatch_()}enqueue_(t){for(this.queue_.push(t);this.queue_.length>this.maxQueueLength_;)this.queue_.shift().callback(null,null)}dispatch_(){if(this.running_||this.queue_.length===0)return;const t=this.queue_.shift();this.job_=t;const e=t.inputs[0].width,n=t.inputs[0].height,s=t.inputs.map(function(c){return c.data.buffer}),r=this.workers_.length;if(this.running_=r,r===1){this.workers_[0].postMessage({buffers:s,meta:t.meta,imageOps:this.imageOps_,width:e,height:n},s);return}const o=t.inputs[0].data.length,l=4*Math.ceil(o/4/r);for(let c=0;c<r;++c){const f=c*l,g=[];for(let m=0,p=s.length;m<p;++m)g.push(s[m].slice(f,f+l));this.workers_[c].postMessage({buffers:g,meta:t.meta,imageOps:this.imageOps_,width:e,height:n},g)}}onWorkerMessage_(t,e){this.disposed||(this.dataLookup_[t]=e.data,--this.running_,this.running_===0&&this.resolveJob_())}resolveJob_(){const t=this.job_,e=this.workers_.length;let n,s;if(e===1)n=new Uint8ClampedArray(this.dataLookup_[0].buffer),s=this.dataLookup_[0].meta;else{const r=t.inputs[0].data.length;n=new Uint8ClampedArray(r),s=new Array(e);const o=4*Math.ceil(r/4/e);for(let l=0;l<e;++l){const c=this.dataLookup_[l].buffer,f=l*o;n.set(new Uint8ClampedArray(c),f),s[l]=this.dataLookup_[l].meta}}this.job_=null,this.dataLookup_={},t.callback(null,new ImageData(n,t.inputs[0].width,t.inputs[0].height),s),this.dispatch_()}disposeInternal(){for(let t=0;t<this.workers_.length;++t)this.workers_[t].terminate();this.workers_.length=0}}const wM={BEFOREOPERATIONS:"beforeoperations",AFTEROPERATIONS:"afteroperations"};class TM extends xs{constructor(t,e,n){super(t),this.extent=e.extent,this.resolution=e.viewState.resolution/e.pixelRatio,this.data=n}}class RC extends wC{constructor(t){super({projection:null}),this.on,this.once,this.un,this.processor_=null,this.operationType_=t.operationType!==void 0?t.operationType:"pixel",this.threads_=t.threads!==void 0?t.threads:1,this.layers_=lz(t.sources);const e=this.changed.bind(this);for(let n=0,s=this.layers_.length;n<s;++n)this.layers_[n].addEventListener(St.CHANGE,e);this.useResolutions_=t.resolutions!==null,this.tileQueue_=new sC(function(){return 1},this.processSources_.bind(this)),this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:dn(),declutter:null,extent:null,index:0,layerIndex:0,layerStatesArray:oz(this.layers_),pixelRatio:1,pixelToCoordinateTransform:dn(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:At(this),renderTargets:{}},this.setAttributions(function(n){const s=[];for(let r=0,o=t.sources.length;r<o;++r){const l=t.sources[r],c=l instanceof bu?l:l.getSource();if(!c)continue;const f=c.getAttributions()?.(n);typeof f=="string"?s.push(f):f!==void 0&&s.push(...f)}return s}),t.operation!==void 0&&this.setOperation(t.operation,t.lib)}setOperation(t,e){this.processor_&&this.processor_.dispose(),this.processor_=new rz({operation:t,imageOps:this.operationType_==="image",queue:1,lib:e,threads:this.threads_}),this.changed()}updateFrameState_(t,e,n){const s=Object.assign({},this.frameState_);s.viewState=Object.assign({},s.viewState);const r=Dn(t);s.size[0]=Math.ceil(Ht(t)/e),s.size[1]=Math.ceil(li(t)/e),s.extent=[r[0]-s.size[0]*e/2,r[1]-s.size[1]*e/2,r[0]+s.size[0]*e/2,r[1]+s.size[1]*e/2],s.time=Date.now();const o=s.viewState;return o.center=r,o.projection=n,o.resolution=e,s}allSourcesReady_(){let t=!0,e;for(let n=0,s=this.layers_.length;n<s;++n)if(e=this.layers_[n].getSource(),!e||e.getState()!=="ready"){t=!1;break}return t}getImage(t,e,n,s){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),e=this.findNearestResolution(e);const r=this.updateFrameState_(t,e,s);if(this.requestedFrameState_=r,this.renderedImageCanvas_){const o=this.renderedImageCanvas_.getResolution(),l=this.renderedImageCanvas_.getExtent();(e!==o||!Sr(r.extent,l))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),r.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const t=this.requestedFrameState_,e=this.layers_.length,n=new Array(e);for(let r=0;r<e;++r){t.layerIndex=r,t.renderTargets={};const o=az(this.layers_[r],t);if(o)n[r]=o;else return}const s={};this.dispatchEvent(new TM(wM.BEFOREOPERATIONS,t,s)),this.processor_.process(n,s,this.onWorkerComplete_.bind(this,t))}onWorkerComplete_(t,e,n,s){if(e||!n)return;const r=t.extent,o=t.viewState.resolution;if(o!==this.requestedFrameState_.viewState.resolution||!Sr(r,this.requestedFrameState_.extent))return;let l;if(this.renderedImageCanvas_)l=this.renderedImageCanvas_.getImage().getContext("2d");else{const c=Math.round(Ht(r)/o),f=Math.round(li(r)/o);l=Ue(c,f),this.renderedImageCanvas_=new s7(r,o,1,l.canvas)}l.putImageData(n,0,0),t.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new TM(wM.AFTEROPERATIONS,t,s))}getResolutions(t){if(!this.useResolutions_)return null;let e=super.getResolutions();if(!e)for(let n=0,s=this.layers_.length;n<s&&(e=this.layers_[n].getSource().getResolutions(t),!e);++n);return e}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}RC.prototype.dispose;let Ja=null;function az(i,t){const e=i.getRenderer();if(!e)throw new Error("Unsupported layer type: "+i);if(!e.prepareFrame(t))return null;const n=t.size[0],s=t.size[1];if(n===0||s===0)return null;const r=e.renderFrame(t,null);let o;if(r instanceof HTMLCanvasElement)o=r;else{if(r&&(o=r.firstElementChild),!(o instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+o);if(o.width===n&&o.height===s)return o.getContext("2d").getImageData(0,0,n,s)}if(!Ja)Ja=Ue(n,s,void 0,{willReadFrequently:!0});else{const l=Ja.canvas;l.width!==n||l.height!==s?Ja=Ue(n,s,void 0,{willReadFrequently:!0}):Ja.clearRect(0,0,n,s)}return Ja.drawImage(o,0,0,n,s),Ja.getImageData(0,0,n,s)}function oz(i){return i.map(function(t){return t.getLayerState()})}function lz(i){const t=i.length,e=new Array(t);for(let n=0;n<t;++n)e[n]=uz(i[n]);return e}function uz(i){let t;return i instanceof bu?i instanceof MC?t=new bC({source:i}):i instanceof wC&&(t=new vC({source:i})):t=i,t}class AC extends K9{constructor(t){if(super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:ee("EPSG:3857"),reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,zDirection:t.zDirection}),this.tileJSON_=null,this.tileSize_=t.tileSize,t.url)if(t.jsonp)iz(t.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const e=new XMLHttpRequest;e.addEventListener("load",this.onXHRLoad_.bind(this)),e.addEventListener("error",this.onXHRError_.bind(this)),e.open("GET",t.url),e.send()}else if(t.tileJSON)this.handleTileJSONResponse(t.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(t){const e=t.target;if(!e.status||e.status>=200&&e.status<300){let n;try{n=JSON.parse(e.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(n)}else this.handleTileJSONError()}onXHRError_(t){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(t){const e=ee("EPSG:4326"),n=this.getProjection();let s;if(t.bounds!==void 0){const f=Uh(e,n);s=Q4(t.bounds,f)}const r=O0(n),o=t.minzoom||0,l=t.maxzoom||22,c=uv({extent:r,maxZoom:l,minZoom:o,tileSize:this.tileSize_});if(this.tileGrid=c,this.tileUrlFunction=SC(t.tiles,c),t.attribution&&!this.getAttributions()){const f=s!==void 0?s:r;this.setAttributions(function(g){return Ze(f,g.extent)?[t.attribution]:null})}this.tileJSON_=t,this.setState("ready")}handleTileJSONError(){this.setState("error")}}var cz=8,hz={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},fz={"*":{type:"source"}},dz=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],gz={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},mz={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},pz={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},yz={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},_z={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},vz={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},xz={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},bz=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],Ez={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Sz={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Mz={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},wz={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Tz={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Cz={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Rz={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Az={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Oz={type:"array",value:"*"},Dz={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},Iz={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},Lz={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},Pz={type:"array",value:"*",minimum:1},Nz={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},zz={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},Gz={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},kz={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},Fz=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],jz={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},Bz={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},Uz={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},Hz={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},qz={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},Vz={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Yz={"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},Xz={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Wz={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},Kz={"*":{type:"string"}},Zz={$version:cz,$root:hz,sources:fz,source:dz,source_vector:gz,source_raster:mz,source_raster_dem:pz,source_geojson:yz,source_video:_z,source_image:vz,layer:xz,layout:bz,layout_background:Ez,layout_fill:Sz,layout_circle:Mz,layout_heatmap:wz,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:Tz,layout_symbol:Cz,layout_raster:Rz,layout_hillshade:Az,"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:Oz,filter_operator:Dz,geometry_type:Iz,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:Lz,expression:Pz,light:Nz,sky:zz,terrain:Gz,projection:kz,paint:Fz,paint_fill:jz,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:Bz,paint_circle:Uz,paint_heatmap:Hz,paint_symbol:qz,paint_raster:Vz,paint_hillshade:Yz,"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:Xz,transition:Wz,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:Kz};const $z=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Qz(i,t){const e={};for(const n in i)n!=="ref"&&(e[n]=i[n]);return $z.forEach(n=>{n in t&&(e[n]=t[n])}),e}function OC(i){i=i.slice();const t=Object.create(null);for(let e=0;e<i.length;e++)t[i[e].id]=i[e];for(let e=0;e<i.length;e++)"ref"in i[e]&&(i[e]=Qz(i[e],t[i[e].ref]));return i}class Os extends Error{constructor(t,e){super(e),this.message=e,this.key=t}}class hv{constructor(t,e=[]){this.parent=t,this.bindings={};for(const[n,s]of e)this.bindings[n]=s}concat(t){return new hv(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return this.bindings[t]?!0:this.parent?this.parent.has(t):!1}}const I0={kind:"null"},lt={kind:"number"},zt={kind:"string"},It={kind:"boolean"},Ns={kind:"color"},L0={kind:"projectionDefinition"},vo={kind:"object"},Ot={kind:"value"},Jz={kind:"error"},P0={kind:"collator"},N0={kind:"formatted"},z0={kind:"padding"},Sh={kind:"colorArray"},G0={kind:"numberArray"},sf={kind:"resolvedImage"},k0={kind:"variableAnchorOffsetCollection"};function Cn(i,t){return{kind:"array",itemType:i,N:t}}function Ne(i){if(i.kind==="array"){const t=Ne(i.itemType);return typeof i.N=="number"?`array<${t}, ${i.N}>`:i.itemType.kind==="value"?"array":`array<${t}>`}else return i.kind}const tG=[I0,lt,zt,It,Ns,L0,N0,vo,Cn(Ot),z0,G0,Sh,sf,k0];function Mh(i,t){if(t.kind==="error")return null;if(i.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!Mh(i.itemType,t.itemType))&&(typeof i.N!="number"||i.N===t.N))return null}else{if(i.kind===t.kind)return null;if(i.kind==="value"){for(const e of tG)if(!Mh(e,t))return null}}return`Expected ${Ne(i)} but found ${Ne(t)} instead.`}function fv(i,t){return t.some(e=>e.kind===i.kind)}function xo(i,t){return t.some(e=>e==="null"?i===null:e==="array"?Array.isArray(i):e==="object"?i&&!Array.isArray(i)&&typeof i=="object":e===typeof i)}function oa(i,t){return i.kind==="array"&&t.kind==="array"?i.itemType.kind===t.itemType.kind&&typeof i.N=="number":i.kind===t.kind}const DC=.96422,IC=1,LC=.82521,PC=4/29,iu=6/29,NC=3*iu*iu,eG=iu*iu*iu,iG=Math.PI/180,nG=180/Math.PI;function zC(i){return i=i%360,i<0&&(i+=360),i}function GC([i,t,e,n]){i=Vy(i),t=Vy(t),e=Vy(e);let s,r;const o=Yy((.2225045*i+.7168786*t+.0606169*e)/IC);i===t&&t===e?s=r=o:(s=Yy((.4360747*i+.3850649*t+.1430804*e)/DC),r=Yy((.0139322*i+.0971045*t+.7141733*e)/LC));const l=116*o-16;return[l<0?0:l,500*(s-o),200*(o-r),n]}function Vy(i){return i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function Yy(i){return i>eG?Math.pow(i,1/3):i/NC+PC}function kC([i,t,e,n]){let s=(i+16)/116,r=isNaN(t)?s:s+t/500,o=isNaN(e)?s:s-e/200;return s=IC*Wy(s),r=DC*Wy(r),o=LC*Wy(o),[Xy(3.1338561*r-1.6168667*s-.4906146*o),Xy(-.9787684*r+1.9161415*s+.033454*o),Xy(.0719453*r-.2289914*s+1.4052427*o),n]}function Xy(i){return i=i<=.00304?12.92*i:1.055*Math.pow(i,1/2.4)-.055,i<0?0:i>1?1:i}function Wy(i){return i>iu?i*i*i:NC*(i-PC)}function sG(i){const[t,e,n,s]=GC(i),r=Math.sqrt(e*e+n*n);return[Math.round(r*1e4)?zC(Math.atan2(n,e)*nG):NaN,r,t,s]}function rG([i,t,e,n]){return i=isNaN(i)?0:i*iG,kC([e,Math.cos(i)*t,Math.sin(i)*t,n])}function aG([i,t,e,n]){i=zC(i),t/=100,e/=100;function s(r){const o=(r+i/30)%12,l=t*Math.min(e,1-e);return e-l*Math.max(-1,Math.min(o-3,9-o,1))}return[s(0),s(8),s(4),n]}const oG=Object.hasOwn||function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};function FC(i,t){return oG(i,t)?i[t]:void 0}function lG(i){if(i=i.toLowerCase().trim(),i==="transparent")return[0,0,0,0];const t=FC(uG,i);if(t){const[s,r,o]=t;return[s/255,r/255,o/255,1]}if(i.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(i)){const r=i.length<6?1:2;let o=1;return[Gd(i.slice(o,o+=r)),Gd(i.slice(o,o+=r)),Gd(i.slice(o,o+=r)),Gd(i.slice(o,o+r)||"ff")]}if(i.startsWith("rgb")){const s=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,r=i.match(s);if(r){const[o,l,c,f,g,m,p,v,x,E,b,M]=r,w=[f||" ",p||" ",E].join("");if(w==="  "||w==="  /"||w===",,"||w===",,,"){const R=[c,m,x].join(""),A=R==="%%%"?100:R===""?255:0;if(A){const T=[Bl(+l/A,0,1),Bl(+g/A,0,1),Bl(+v/A,0,1),b?CM(+b,M):1];if(RM(T))return T}}return}}const e=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,n=i.match(e);if(n){const[s,r,o,l,c,f,g,m,p]=n,v=[o||" ",c||" ",g].join("");if(v==="  "||v==="  /"||v===",,"||v===",,,"){const x=[+r,Bl(+l,0,100),Bl(+f,0,100),m?CM(+m,p):1];if(RM(x))return aG(x)}}}function Gd(i){return parseInt(i.padEnd(2,i),16)/255}function CM(i,t){return Bl(t?i/100:i,0,1)}function Bl(i,t,e){return Math.min(Math.max(t,i),e)}function RM(i){return!i.some(Number.isNaN)}const uG={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function bo(i,t,e){return i+e*(t-i)}function wh(i,t,e){return i.map((n,s)=>bo(n,t[s],e))}let ze=class Ul{constructor(t,e,n,s=1,r=!0){this.r=t,this.g=e,this.b=n,this.a=s,r||(this.r*=s,this.g*=s,this.b*=s,s||this.overwriteGetter("rgb",[t,e,n,s]))}static parse(t){if(t instanceof Ul)return t;if(typeof t!="string")return;const e=lG(t);if(e)return new Ul(...e,!1)}get rgb(){const{r:t,g:e,b:n,a:s}=this,r=s||1/0;return this.overwriteGetter("rgb",[t/r,e/r,n/r,s])}get hcl(){return this.overwriteGetter("hcl",sG(this.rgb))}get lab(){return this.overwriteGetter("lab",GC(this.rgb))}overwriteGetter(t,e){return Object.defineProperty(this,t,{value:e}),e}toString(){const[t,e,n,s]=this.rgb;return`rgba(${[t,e,n].map(r=>Math.round(r*255)).join(",")},${s})`}static interpolate(t,e,n,s="rgb"){switch(s){case"rgb":{const[r,o,l,c]=wh(t.rgb,e.rgb,n);return new Ul(r,o,l,c,!1)}case"hcl":{const[r,o,l,c]=t.hcl,[f,g,m,p]=e.hcl;let v,x;if(!isNaN(r)&&!isNaN(f)){let R=f-r;f>r&&R>180?R-=360:f<r&&r-f>180&&(R+=360),v=r+n*R}else isNaN(r)?isNaN(f)?v=NaN:(v=f,(l===1||l===0)&&(x=g)):(v=r,(m===1||m===0)&&(x=o));const[E,b,M,w]=rG([v,x??bo(o,g,n),bo(l,m,n),bo(c,p,n)]);return new Ul(E,b,M,w,!1)}case"lab":{const[r,o,l,c]=kC(wh(t.lab,e.lab,n));return new Ul(r,o,l,c,!1)}}}};ze.black=new ze(0,0,0,1);ze.white=new ze(1,1,1,1);ze.transparent=new ze(0,0,0,0);ze.red=new ze(1,0,0,1);class dv{constructor(t,e,n){t?this.sensitivity=e?"variant":"case":this.sensitivity=e?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,e){return this.collator.compare(t,e)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const cG=["bottom","center","top"];class W_{constructor(t,e,n,s,r,o){this.text=t,this.image=e,this.scale=n,this.fontStack=s,this.textColor=r,this.verticalAlign=o}}class br{constructor(t){this.sections=t}static fromString(t){return new br([new W_(t,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(t=>t.text.length!==0||t.image&&t.image.name.length!==0)}static factory(t){return t instanceof br?t:br.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map(t=>t.text).join("")}}class ms{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof ms)return t;if(typeof t=="number")return new ms([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(const e of t)if(typeof e!="number")return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]];break}return new ms(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,e,n){return new ms(wh(t.values,e.values,n))}}class ps{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof ps)return t;if(typeof t=="number")return new ps([t]);if(Array.isArray(t)){for(const e of t)if(typeof e!="number")return;return new ps(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,e,n){return new ps(wh(t.values,e.values,n))}}class Rn{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Rn)return t;if(typeof t=="string"){const n=ze.parse(t);return n?new Rn([n]):void 0}if(!Array.isArray(t))return;const e=[];for(const n of t){if(typeof n!="string")return;const s=ze.parse(n);if(!s)return;e.push(s)}return new Rn(e)}toString(){return JSON.stringify(this.values)}static interpolate(t,e,n,s="rgb"){const r=[];if(t.values.length!=e.values.length)throw new Error(`colorArray: Arrays have mismatched length (${t.values.length} vs. ${e.values.length}), cannot interpolate.`);for(let o=0;o<t.values.length;o++)r.push(ze.interpolate(t.values[o],e.values[o],n,s));return new Rn(r)}}class je extends Error{constructor(t){super(t),this.name="RuntimeError"}toJSON(){return this.message}}const hG=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class zs{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof zs)return t;if(!(!Array.isArray(t)||t.length<1||t.length%2!==0)){for(let e=0;e<t.length;e+=2){const n=t[e],s=t[e+1];if(typeof n!="string"||!hG.has(n)||!Array.isArray(s)||s.length!==2||typeof s[0]!="number"||typeof s[1]!="number")return}return new zs(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,e,n){const s=t.values,r=e.values;if(s.length!==r.length)throw new je(`Cannot interpolate values of different length. from: ${t.toString()}, to: ${e.toString()}`);const o=[];for(let l=0;l<s.length;l+=2){if(s[l]!==r[l])throw new je(`Cannot interpolate values containing mismatched anchors. from[${l}]: ${s[l]}, to[${l}]: ${r[l]}`);o.push(s[l]);const[c,f]=s[l+1],[g,m]=r[l+1];o.push([bo(c,g,n),bo(f,m,n)])}return new zs(o)}}class La{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new La({name:t,available:!1}):null}}class fs{constructor(t,e,n){this.from=t,this.to=e,this.transition=n}static interpolate(t,e,n){return new fs(t,e,n)}static parse(t){if(t instanceof fs)return t;if(Array.isArray(t)&&t.length===3&&typeof t[0]=="string"&&typeof t[1]=="string"&&typeof t[2]=="number")return new fs(t[0],t[1],t[2]);if(typeof t=="object"&&typeof t.from=="string"&&typeof t.to=="string"&&typeof t.transition=="number")return new fs(t.from,t.to,t.transition);if(typeof t=="string")return new fs(t,t,1)}}function jC(i,t,e,n){return typeof i=="number"&&i>=0&&i<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof e=="number"&&e>=0&&e<=255?typeof n>"u"||typeof n=="number"&&n>=0&&n<=1?null:`Invalid rgba value [${[i,t,e,n].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof n=="number"?[i,t,e,n]:[i,t,e]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Th(i){if(i===null||typeof i=="string"||typeof i=="boolean"||typeof i=="number"||i instanceof fs||i instanceof ze||i instanceof dv||i instanceof br||i instanceof ms||i instanceof ps||i instanceof Rn||i instanceof zs||i instanceof La)return!0;if(Array.isArray(i)){for(const t of i)if(!Th(t))return!1;return!0}else if(typeof i=="object"){for(const t in i)if(!Th(i[t]))return!1;return!0}else return!1}function ui(i){if(i===null)return I0;if(typeof i=="string")return zt;if(typeof i=="boolean")return It;if(typeof i=="number")return lt;if(i instanceof ze)return Ns;if(i instanceof fs)return L0;if(i instanceof dv)return P0;if(i instanceof br)return N0;if(i instanceof ms)return z0;if(i instanceof ps)return G0;if(i instanceof Rn)return Sh;if(i instanceof zs)return k0;if(i instanceof La)return sf;if(Array.isArray(i)){const t=i.length;let e;for(const n of i){const s=ui(n);if(!e)e=s;else{if(e===s)continue;e=Ot;break}}return Cn(e||Ot,t)}else return vo}function th(i){const t=typeof i;return i===null?"":t==="string"||t==="number"||t==="boolean"?String(i):i instanceof ze||i instanceof fs||i instanceof br||i instanceof ms||i instanceof ps||i instanceof Rn||i instanceof zs||i instanceof La?i.toString():JSON.stringify(i)}class gu{constructor(t,e){this.type=t,this.value=e}static parse(t,e){if(t.length!==2)return e.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!Th(t[1]))return e.error("invalid value");const n=t[1];let s=ui(n);const r=e.expectedType;return s.kind==="array"&&s.N===0&&r&&r.kind==="array"&&(typeof r.N!="number"||r.N===0)&&(s=r),new gu(s,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const kd={string:zt,number:lt,boolean:It,object:vo};class ds{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");let n=1,s;const r=t[0];if(r==="array"){let l;if(t.length>2){const f=t[1];if(typeof f!="string"||!(f in kd)||f==="object")return e.error('The item type argument of "array" must be one of string, number, boolean',1);l=kd[f],n++}else l=Ot;let c;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);c=t[2],n++}s=Cn(l,c)}else{if(!kd[r])throw new Error(`Types doesn't contain name = ${r}`);s=kd[r]}const o=[];for(;n<t.length;n++){const l=e.parse(t[n],n,Ot);if(!l)return null;o.push(l)}return new ds(s,o)}evaluate(t){for(let e=0;e<this.args.length;e++){const n=this.args[e].evaluate(t);if(Mh(this.type,ui(n))){if(e===this.args.length-1)throw new je(`Expected value to be of type ${Ne(this.type)}, but found ${Ne(ui(n))} instead.`)}else return n}throw new Error}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const AM={"to-boolean":It,"to-color":Ns,"to-number":lt,"to-string":zt};class _a{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const n=t[0];if(!AM[n])throw new Error(`Can't parse ${n} as it is not part of the known types`);if((n==="to-boolean"||n==="to-string")&&t.length!==2)return e.error("Expected one argument.");const s=AM[n],r=[];for(let o=1;o<t.length;o++){const l=e.parse(t[o],o,Ot);if(!l)return null;r.push(l)}return new _a(s,r)}evaluate(t){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(t);case"color":{let e,n;for(const s of this.args){if(e=s.evaluate(t),n=null,e instanceof ze)return e;if(typeof e=="string"){const r=t.parseColor(e);if(r)return r}else if(Array.isArray(e)&&(e.length<3||e.length>4?n=`Invalid rgba value ${JSON.stringify(e)}: expected an array containing either three or four numeric values.`:n=jC(e[0],e[1],e[2],e[3]),!n))return new ze(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new je(n||`Could not parse color from value '${typeof e=="string"?e:JSON.stringify(e)}'`)}case"padding":{let e;for(const n of this.args){e=n.evaluate(t);const s=ms.parse(e);if(s)return s}throw new je(`Could not parse padding from value '${typeof e=="string"?e:JSON.stringify(e)}'`)}case"numberArray":{let e;for(const n of this.args){e=n.evaluate(t);const s=ps.parse(e);if(s)return s}throw new je(`Could not parse numberArray from value '${typeof e=="string"?e:JSON.stringify(e)}'`)}case"colorArray":{let e;for(const n of this.args){e=n.evaluate(t);const s=Rn.parse(e);if(s)return s}throw new je(`Could not parse colorArray from value '${typeof e=="string"?e:JSON.stringify(e)}'`)}case"variableAnchorOffsetCollection":{let e;for(const n of this.args){e=n.evaluate(t);const s=zs.parse(e);if(s)return s}throw new je(`Could not parse variableAnchorOffsetCollection from value '${typeof e=="string"?e:JSON.stringify(e)}'`)}case"number":{let e=null;for(const n of this.args){if(e=n.evaluate(t),e===null)return 0;const s=Number(e);if(!isNaN(s))return s}throw new je(`Could not convert ${JSON.stringify(e)} to number.`)}case"formatted":return br.fromString(th(this.args[0].evaluate(t)));case"resolvedImage":return La.fromString(th(this.args[0].evaluate(t)));case"projectionDefinition":return this.args[0].evaluate(t);default:return th(this.args[0].evaluate(t))}}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const fG=["Unknown","Point","LineString","Polygon"];class BC{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?fG[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let e=this._parseColorCache.get(t);return e||(e=ze.parse(t),this._parseColorCache.set(t,e)),e}}class F0{constructor(t,e,n=[],s,r=new hv,o=[]){this.registry=t,this.path=n,this.key=n.map(l=>`[${l}]`).join(""),this.scope=r,this.errors=o,this.expectedType=s,this._isConstant=e}parse(t,e,n,s,r={}){return e?this.concat(e,n,s)._parse(t,r):this._parse(t,r)}_parse(t,e){(t===null||typeof t=="string"||typeof t=="boolean"||typeof t=="number")&&(t=["literal",t]);function n(s,r,o){return o==="assert"?new ds(r,[s]):o==="coerce"?new _a(r,[s]):s}if(Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const s=t[0];if(typeof s!="string")return this.error(`Expression name must be a string, but found ${typeof s} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const r=this.registry[s];if(r){let o=r.parse(t,this);if(!o)return null;if(this.expectedType){const l=this.expectedType,c=o.type;if((l.kind==="string"||l.kind==="number"||l.kind==="boolean"||l.kind==="object"||l.kind==="array")&&c.kind==="value")o=n(o,l,e.typeAnnotation||"assert");else if(l.kind==="projectionDefinition"&&["string","array"].includes(c.kind)||["color","formatted","resolvedImage"].includes(l.kind)&&["value","string"].includes(c.kind)||["padding","numberArray"].includes(l.kind)&&["value","number","array"].includes(c.kind)||l.kind==="colorArray"&&["value","string","array"].includes(c.kind)||l.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(c.kind))o=n(o,l,e.typeAnnotation||"coerce");else if(this.checkSubtype(l,c))return null}if(!(o instanceof gu)&&o.type.kind!=="resolvedImage"&&this._isConstant(o)){const l=new BC;try{o=new gu(o.type,o.evaluate(l))}catch(c){return this.error(c.message),null}}return o}return this.error(`Unknown expression "${s}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof t>"u"?this.error("'undefined' value invalid. Use null instead."):typeof t=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof t} instead.`)}concat(t,e,n){const s=typeof t=="number"?this.path.concat(t):this.path,r=n?this.scope.concat(n):this.scope;return new F0(this.registry,this._isConstant,s,e||null,r,this.errors)}error(t,...e){const n=`${this.key}${e.map(s=>`[${s}]`).join("")}`;this.errors.push(new Os(n,t))}checkSubtype(t,e){const n=Mh(t,e);return n&&this.error(n),n}}class j0{constructor(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const e of this.bindings)t(e[1]);t(this.result)}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const n=[];for(let r=1;r<t.length-1;r+=2){const o=t[r];if(typeof o!="string")return e.error(`Expected string, but found ${typeof o} instead.`,r);if(/[^a-zA-Z0-9_]/.test(o))return e.error("Variable names must contain only alphanumeric characters or '_'.",r);const l=e.parse(t[r+1],r+1);if(!l)return null;n.push([o,l])}const s=e.parse(t[t.length-1],t.length-1,e.expectedType,n);return s?new j0(n,s):null}outputDefined(){return this.result.outputDefined()}}class B0{constructor(t,e){this.type=e.type,this.name=t,this.boundExpression=e}static parse(t,e){if(t.length!==2||typeof t[1]!="string")return e.error("'var' expression requires exactly one string literal argument.");const n=t[1];return e.scope.has(n)?new B0(n,e.scope.get(n)):e.error(`Unknown variable "${n}". Make sure "${n}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}}class gv{constructor(t,e,n){this.type=t,this.index=e,this.input=n}static parse(t,e){if(t.length!==3)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,lt),s=e.parse(t[2],2,Cn(e.expectedType||Ot));if(!n||!s)return null;const r=s.type;return new gv(r.itemType,n,s)}evaluate(t){const e=this.index.evaluate(t),n=this.input.evaluate(t);if(e<0)throw new je(`Array index out of bounds: ${e} < 0.`);if(e>=n.length)throw new je(`Array index out of bounds: ${e} > ${n.length-1}.`);if(e!==Math.floor(e))throw new je(`Array index must be an integer, but found ${e} instead.`);return n[e]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}}class mv{constructor(t,e){this.type=It,this.needle=t,this.haystack=e}static parse(t,e){if(t.length!==3)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,Ot),s=e.parse(t[2],2,Ot);return!n||!s?null:fv(n.type,[It,zt,lt,I0,Ot])?new mv(n,s):e.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ne(n.type)} instead`)}evaluate(t){const e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!n)return!1;if(!xo(e,["boolean","string","number","null"]))throw new je(`Expected first argument to be of type boolean, string, number or null, but found ${Ne(ui(e))} instead.`);if(!xo(n,["string","array"]))throw new je(`Expected second argument to be of type array or string, but found ${Ne(ui(n))} instead.`);return n.indexOf(e)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}}class Hg{constructor(t,e,n){this.type=lt,this.needle=t,this.haystack=e,this.fromIndex=n}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,Ot),s=e.parse(t[2],2,Ot);if(!n||!s)return null;if(!fv(n.type,[It,zt,lt,I0,Ot]))return e.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ne(n.type)} instead`);if(t.length===4){const r=e.parse(t[3],3,lt);return r?new Hg(n,s,r):null}else return new Hg(n,s)}evaluate(t){const e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!xo(e,["boolean","string","number","null"]))throw new je(`Expected first argument to be of type boolean, string, number or null, but found ${Ne(ui(e))} instead.`);let s;if(this.fromIndex&&(s=this.fromIndex.evaluate(t)),xo(n,["string"])){const r=n.indexOf(e,s);return r===-1?-1:[...n.slice(0,r)].length}else{if(xo(n,["array"]))return n.indexOf(e,s);throw new je(`Expected second argument to be of type array or string, but found ${Ne(ui(n))} instead.`)}}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}}class pv{constructor(t,e,n,s,r,o){this.inputType=t,this.type=e,this.input=n,this.cases=s,this.outputs=r,this.otherwise=o}static parse(t,e){if(t.length<5)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!==1)return e.error("Expected an even number of arguments.");let n,s;e.expectedType&&e.expectedType.kind!=="value"&&(s=e.expectedType);const r={},o=[];for(let f=2;f<t.length-1;f+=2){let g=t[f];const m=t[f+1];Array.isArray(g)||(g=[g]);const p=e.concat(f);if(g.length===0)return p.error("Expected at least one branch label.");for(const x of g){if(typeof x!="number"&&typeof x!="string")return p.error("Branch labels must be numbers or strings.");if(typeof x=="number"&&Math.abs(x)>Number.MAX_SAFE_INTEGER)return p.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof x=="number"&&Math.floor(x)!==x)return p.error("Numeric branch labels must be integer values.");if(!n)n=ui(x);else if(p.checkSubtype(n,ui(x)))return null;if(typeof r[String(x)]<"u")return p.error("Branch labels must be unique.");r[String(x)]=o.length}const v=e.parse(m,f,s);if(!v)return null;s=s||v.type,o.push(v)}const l=e.parse(t[1],1,Ot);if(!l)return null;const c=e.parse(t[t.length-1],t.length-1,s);return!c||l.type.kind!=="value"&&e.concat(1).checkSubtype(n,l.type)?null:new pv(n,s,l,r,o,c)}evaluate(t){const e=this.input.evaluate(t);return(ui(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}}class yv{constructor(t,e,n){this.type=t,this.branches=e,this.otherwise=n}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!==0)return e.error("Expected an odd number of arguments.");let n;e.expectedType&&e.expectedType.kind!=="value"&&(n=e.expectedType);const s=[];for(let o=1;o<t.length-1;o+=2){const l=e.parse(t[o],o,It);if(!l)return null;const c=e.parse(t[o+1],o+1,n);if(!c)return null;s.push([l,c]),n=n||c.type}const r=e.parse(t[t.length-1],t.length-1,n);if(!r)return null;if(!n)throw new Error("Can't infer output type");return new yv(n,s,r)}evaluate(t){for(const[e,n]of this.branches)if(e.evaluate(t))return n.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[e,n]of this.branches)t(e),t(n);t(this.otherwise)}outputDefined(){return this.branches.every(([t,e])=>e.outputDefined())&&this.otherwise.outputDefined()}}class qg{constructor(t,e,n,s){this.type=t,this.input=e,this.beginIndex=n,this.endIndex=s}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,Ot),s=e.parse(t[2],2,lt);if(!n||!s)return null;if(!fv(n.type,[Cn(Ot),zt,Ot]))return e.error(`Expected first argument to be of type array or string, but found ${Ne(n.type)} instead`);if(t.length===4){const r=e.parse(t[3],3,lt);return r?new qg(n.type,n,s,r):null}else return new qg(n.type,n,s)}evaluate(t){const e=this.input.evaluate(t),n=this.beginIndex.evaluate(t);let s;if(this.endIndex&&(s=this.endIndex.evaluate(t)),xo(e,["string"]))return[...e].slice(n,s).join("");if(xo(e,["array"]))return e.slice(n,s);throw new je(`Expected first argument to be of type array or string, but found ${Ne(ui(e))} instead.`)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}}function UC(i,t){const e=i.length-1;let n=0,s=e,r=0,o,l;for(;n<=s;)if(r=Math.floor((n+s)/2),o=i[r],l=i[r+1],o<=t){if(r===e||t<l)return r;n=r+1}else if(o>t)s=r-1;else throw new je("Input is not a number.");return 0}class U0{constructor(t,e,n){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(const[s,r]of n)this.labels.push(s),this.outputs.push(r)}static parse(t,e){if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!==0)return e.error("Expected an even number of arguments.");const n=e.parse(t[1],1,lt);if(!n)return null;const s=[];let r=null;e.expectedType&&e.expectedType.kind!=="value"&&(r=e.expectedType);for(let o=1;o<t.length;o+=2){const l=o===1?-1/0:t[o],c=t[o+1],f=o,g=o+1;if(typeof l!="number")return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',f);if(s.length&&s[s.length-1][0]>=l)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',f);const m=e.parse(c,g,r);if(!m)return null;r=r||m.type,s.push([l,m])}return new U0(r,n,s)}evaluate(t){const e=this.labels,n=this.outputs;if(e.length===1)return n[0].evaluate(t);const s=this.input.evaluate(t);if(s<=e[0])return n[0].evaluate(t);const r=e.length;if(s>=e[r-1])return n[r-1].evaluate(t);const o=UC(e,s);return n[o].evaluate(t)}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function dG(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Ky,OM;function gG(){if(OM)return Ky;OM=1,Ky=i;function i(t,e,n,s){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(s-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=e,this.p2x=n,this.p2y=s}return i.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,e){if(e===void 0&&(e=1e-6),t<0)return 0;if(t>1)return 1;for(var n=t,s=0;s<8;s++){var r=this.sampleCurveX(n)-t;if(Math.abs(r)<e)return n;var o=this.sampleCurveDerivativeX(n);if(Math.abs(o)<1e-6)break;n=n-r/o}var l=0,c=1;for(n=t,s=0;s<20&&(r=this.sampleCurveX(n),!(Math.abs(r-t)<e));s++)t>r?l=n:c=n,n=(c-l)*.5+l;return n},solve:function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}},Ky}var mG=gG(),pG=dG(mG);class Gs{constructor(t,e,n,s,r){this.type=t,this.operator=e,this.interpolation=n,this.input=s,this.labels=[],this.outputs=[];for(const[o,l]of r)this.labels.push(o),this.outputs.push(l)}static interpolationFactor(t,e,n,s){let r=0;if(t.name==="exponential")r=Zy(e,t.base,n,s);else if(t.name==="linear")r=Zy(e,1,n,s);else if(t.name==="cubic-bezier"){const o=t.controlPoints;r=new pG(o[0],o[1],o[2],o[3]).solve(Zy(e,1,n,s))}return r}static parse(t,e){let[n,s,r,...o]=t;if(!Array.isArray(s)||s.length===0)return e.error("Expected an interpolation type expression.",1);if(s[0]==="linear")s={name:"linear"};else if(s[0]==="exponential"){const f=s[1];if(typeof f!="number")return e.error("Exponential interpolation requires a numeric base.",1,1);s={name:"exponential",base:f}}else if(s[0]==="cubic-bezier"){const f=s.slice(1);if(f.length!==4||f.some(g=>typeof g!="number"||g<0||g>1))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);s={name:"cubic-bezier",controlPoints:f}}else return e.error(`Unknown interpolation type ${String(s[0])}`,1,0);if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!==0)return e.error("Expected an even number of arguments.");if(r=e.parse(r,2,lt),!r)return null;const l=[];let c=null;(n==="interpolate-hcl"||n==="interpolate-lab")&&e.expectedType!=Sh?c=Ns:e.expectedType&&e.expectedType.kind!=="value"&&(c=e.expectedType);for(let f=0;f<o.length;f+=2){const g=o[f],m=o[f+1],p=f+3,v=f+4;if(typeof g!="number")return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',p);if(l.length&&l[l.length-1][0]>=g)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',p);const x=e.parse(m,v,c);if(!x)return null;c=c||x.type,l.push([g,x])}return!oa(c,lt)&&!oa(c,L0)&&!oa(c,Ns)&&!oa(c,z0)&&!oa(c,G0)&&!oa(c,Sh)&&!oa(c,k0)&&!oa(c,Cn(lt))?e.error(`Type ${Ne(c)} is not interpolatable.`):new Gs(c,n,s,r,l)}evaluate(t){const e=this.labels,n=this.outputs;if(e.length===1)return n[0].evaluate(t);const s=this.input.evaluate(t);if(s<=e[0])return n[0].evaluate(t);const r=e.length;if(s>=e[r-1])return n[r-1].evaluate(t);const o=UC(e,s),l=e[o],c=e[o+1],f=Gs.interpolationFactor(this.interpolation,s,l,c),g=n[o].evaluate(t),m=n[o+1].evaluate(t);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return bo(g,m,f);case"color":return ze.interpolate(g,m,f);case"padding":return ms.interpolate(g,m,f);case"colorArray":return Rn.interpolate(g,m,f);case"numberArray":return ps.interpolate(g,m,f);case"variableAnchorOffsetCollection":return zs.interpolate(g,m,f);case"array":return wh(g,m,f);case"projectionDefinition":return fs.interpolate(g,m,f)}case"interpolate-hcl":switch(this.type.kind){case"color":return ze.interpolate(g,m,f,"hcl");case"colorArray":return Rn.interpolate(g,m,f,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return ze.interpolate(g,m,f,"lab");case"colorArray":return Rn.interpolate(g,m,f,"lab")}}}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function Zy(i,t,e,n){const s=n-e,r=i-e;return s===0?0:t===1?r/s:(Math.pow(t,r)-1)/(Math.pow(t,s)-1)}class Ch{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");let n=null;const s=e.expectedType;s&&s.kind!=="value"&&(n=s);const r=[];for(const l of t.slice(1)){const c=e.parse(l,1+r.length,n,void 0,{typeAnnotation:"omit"});if(!c)return null;n=n||c.type,r.push(c)}if(!n)throw new Error("No output type");return s&&r.some(l=>Mh(s,l.type))?new Ch(Ot,r):new Ch(n,r)}evaluate(t){let e=null,n=0,s;for(const r of this.args)if(n++,e=r.evaluate(t),e&&e instanceof La&&!e.available&&(s||(s=e.name),e=null,n===this.args.length&&(e=s)),e!==null)break;return e}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}function DM(i,t){return i==="=="||i==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function yG(i,t,e){return t===e}function _G(i,t,e){return t!==e}function vG(i,t,e){return t<e}function xG(i,t,e){return t>e}function bG(i,t,e){return t<=e}function EG(i,t,e){return t>=e}function HC(i,t,e,n){return n.compare(t,e)===0}function SG(i,t,e,n){return!HC(i,t,e,n)}function MG(i,t,e,n){return n.compare(t,e)<0}function wG(i,t,e,n){return n.compare(t,e)>0}function TG(i,t,e,n){return n.compare(t,e)<=0}function CG(i,t,e,n){return n.compare(t,e)>=0}function Su(i,t,e){const n=i!=="=="&&i!=="!=";return class qC{constructor(r,o,l){this.type=It,this.lhs=r,this.rhs=o,this.collator=l,this.hasUntypedArgument=r.type.kind==="value"||o.type.kind==="value"}static parse(r,o){if(r.length!==3&&r.length!==4)return o.error("Expected two or three arguments.");const l=r[0];let c=o.parse(r[1],1,Ot);if(!c)return null;if(!DM(l,c.type))return o.concat(1).error(`"${l}" comparisons are not supported for type '${Ne(c.type)}'.`);let f=o.parse(r[2],2,Ot);if(!f)return null;if(!DM(l,f.type))return o.concat(2).error(`"${l}" comparisons are not supported for type '${Ne(f.type)}'.`);if(c.type.kind!==f.type.kind&&c.type.kind!=="value"&&f.type.kind!=="value")return o.error(`Cannot compare types '${Ne(c.type)}' and '${Ne(f.type)}'.`);n&&(c.type.kind==="value"&&f.type.kind!=="value"?c=new ds(f.type,[c]):c.type.kind!=="value"&&f.type.kind==="value"&&(f=new ds(c.type,[f])));let g=null;if(r.length===4){if(c.type.kind!=="string"&&f.type.kind!=="string"&&c.type.kind!=="value"&&f.type.kind!=="value")return o.error("Cannot use collator to compare non-string types.");if(g=o.parse(r[3],3,P0),!g)return null}return new qC(c,f,g)}evaluate(r){const o=this.lhs.evaluate(r),l=this.rhs.evaluate(r);if(n&&this.hasUntypedArgument){const c=ui(o),f=ui(l);if(c.kind!==f.kind||!(c.kind==="string"||c.kind==="number"))throw new je(`Expected arguments for "${i}" to be (string, string) or (number, number), but found (${c.kind}, ${f.kind}) instead.`)}if(this.collator&&!n&&this.hasUntypedArgument){const c=ui(o),f=ui(l);if(c.kind!=="string"||f.kind!=="string")return t(r,o,l)}return this.collator?e(r,o,l,this.collator.evaluate(r)):t(r,o,l)}eachChild(r){r(this.lhs),r(this.rhs),this.collator&&r(this.collator)}outputDefined(){return!0}}}const RG=Su("==",yG,HC),AG=Su("!=",_G,SG),OG=Su("<",vG,MG),DG=Su(">",xG,wG),IG=Su("<=",bG,TG),LG=Su(">=",EG,CG);class H0{constructor(t,e,n){this.type=P0,this.locale=n,this.caseSensitive=t,this.diacriticSensitive=e}static parse(t,e){if(t.length!==2)return e.error("Expected one argument.");const n=t[1];if(typeof n!="object"||Array.isArray(n))return e.error("Collator options argument must be an object.");const s=e.parse(n["case-sensitive"]===void 0?!1:n["case-sensitive"],1,It);if(!s)return null;const r=e.parse(n["diacritic-sensitive"]===void 0?!1:n["diacritic-sensitive"],1,It);if(!r)return null;let o=null;return n.locale&&(o=e.parse(n.locale,1,zt),!o)?null:new H0(s,r,o)}evaluate(t){return new dv(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}}class _v{constructor(t,e,n,s,r){this.type=zt,this.number=t,this.locale=e,this.currency=n,this.minFractionDigits=s,this.maxFractionDigits=r}static parse(t,e){if(t.length!==3)return e.error("Expected two arguments.");const n=e.parse(t[1],1,lt);if(!n)return null;const s=t[2];if(typeof s!="object"||Array.isArray(s))return e.error("NumberFormat options argument must be an object.");let r=null;if(s.locale&&(r=e.parse(s.locale,1,zt),!r))return null;let o=null;if(s.currency&&(o=e.parse(s.currency,1,zt),!o))return null;let l=null;if(s["min-fraction-digits"]&&(l=e.parse(s["min-fraction-digits"],1,lt),!l))return null;let c=null;return s["max-fraction-digits"]&&(c=e.parse(s["max-fraction-digits"],1,lt),!c)?null:new _v(n,r,o,l,c)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}}class vv{constructor(t){this.type=N0,this.sections=t}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const n=t[1];if(!Array.isArray(n)&&typeof n=="object")return e.error("First argument must be an image or text section.");const s=[];let r=!1;for(let o=1;o<=t.length-1;++o){const l=t[o];if(r&&typeof l=="object"&&!Array.isArray(l)){r=!1;let c=null;if(l["font-scale"]&&(c=e.parse(l["font-scale"],1,lt),!c))return null;let f=null;if(l["text-font"]&&(f=e.parse(l["text-font"],1,Cn(zt)),!f))return null;let g=null;if(l["text-color"]&&(g=e.parse(l["text-color"],1,Ns),!g))return null;let m=null;if(l["vertical-align"]){if(typeof l["vertical-align"]=="string"&&!cG.includes(l["vertical-align"]))return e.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${l["vertical-align"]}' instead.`);if(m=e.parse(l["vertical-align"],1,zt),!m)return null}const p=s[s.length-1];p.scale=c,p.font=f,p.textColor=g,p.verticalAlign=m}else{const c=e.parse(t[o],1,Ot);if(!c)return null;const f=c.type.kind;if(f!=="string"&&f!=="value"&&f!=="null"&&f!=="resolvedImage")return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");r=!0,s.push({content:c,scale:null,font:null,textColor:null,verticalAlign:null})}}return new vv(s)}evaluate(t){const e=n=>{const s=n.content.evaluate(t);return ui(s)===sf?new W_("",s,null,null,null,n.verticalAlign?n.verticalAlign.evaluate(t):null):new W_(th(s),null,n.scale?n.scale.evaluate(t):null,n.font?n.font.evaluate(t).join(","):null,n.textColor?n.textColor.evaluate(t):null,n.verticalAlign?n.verticalAlign.evaluate(t):null)};return new br(this.sections.map(e))}eachChild(t){for(const e of this.sections)t(e.content),e.scale&&t(e.scale),e.font&&t(e.font),e.textColor&&t(e.textColor),e.verticalAlign&&t(e.verticalAlign)}outputDefined(){return!1}}class xv{constructor(t){this.type=sf,this.input=t}static parse(t,e){if(t.length!==2)return e.error("Expected two arguments.");const n=e.parse(t[1],1,zt);return n?new xv(n):e.error("No image name provided.")}evaluate(t){const e=this.input.evaluate(t),n=La.fromString(e);return n&&t.availableImages&&(n.available=t.availableImages.indexOf(e)>-1),n}eachChild(t){t(this.input)}outputDefined(){return!1}}class bv{constructor(t){this.type=lt,this.input=t}static parse(t,e){if(t.length!==2)return e.error(`Expected 1 argument, but found ${t.length-1} instead.`);const n=e.parse(t[1],1);return n?n.type.kind!=="array"&&n.type.kind!=="string"&&n.type.kind!=="value"?e.error(`Expected argument of type string or array, but found ${Ne(n.type)} instead.`):new bv(n):null}evaluate(t){const e=this.input.evaluate(t);if(typeof e=="string")return[...e].length;if(Array.isArray(e))return e.length;throw new je(`Expected value to be of type string or array, but found ${Ne(ui(e))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}}const ks=8192;function PG(i,t){const e=NG(i[0]),n=GG(i[1]),s=Math.pow(2,t.z);return[Math.round(e*s*ks),Math.round(n*s*ks)]}function Ev(i,t){const e=Math.pow(2,t.z),n=(i[0]/ks+t.x)/e,s=(i[1]/ks+t.y)/e;return[zG(n),kG(s)]}function NG(i){return(180+i)/360}function zG(i){return i*360-180}function GG(i){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360}function kG(i){return 360/Math.PI*Math.atan(Math.exp((180-i*360)*Math.PI/180))-90}function rf(i,t){i[0]=Math.min(i[0],t[0]),i[1]=Math.min(i[1],t[1]),i[2]=Math.max(i[2],t[0]),i[3]=Math.max(i[3],t[1])}function Rh(i,t){return!(i[0]<=t[0]||i[2]>=t[2]||i[1]<=t[1]||i[3]>=t[3])}function FG(i,t,e){return t[1]>i[1]!=e[1]>i[1]&&i[0]<(e[0]-t[0])*(i[1]-t[1])/(e[1]-t[1])+t[0]}function jG(i,t,e){const n=i[0]-t[0],s=i[1]-t[1],r=i[0]-e[0],o=i[1]-e[1];return n*o-r*s===0&&n*r<=0&&s*o<=0}function q0(i,t,e,n){const s=[t[0]-i[0],t[1]-i[1]],r=[n[0]-e[0],n[1]-e[1]];return qG(r,s)===0?!1:!!(IM(i,t,e,n)&&IM(e,n,i,t))}function BG(i,t,e){for(const n of e)for(let s=0;s<n.length-1;++s)if(q0(i,t,n[s],n[s+1]))return!0;return!1}function Mu(i,t,e=!1){let n=!1;for(const s of t)for(let r=0;r<s.length-1;r++){if(jG(i,s[r],s[r+1]))return e;FG(i,s[r],s[r+1])&&(n=!n)}return n}function UG(i,t){for(const e of t)if(Mu(i,e))return!0;return!1}function VC(i,t){for(const e of i)if(!Mu(e,t))return!1;for(let e=0;e<i.length-1;++e)if(BG(i[e],i[e+1],t))return!1;return!0}function HG(i,t){for(const e of t)if(VC(i,e))return!0;return!1}function qG(i,t){return i[0]*t[1]-i[1]*t[0]}function IM(i,t,e,n){const s=i[0]-e[0],r=i[1]-e[1],o=t[0]-e[0],l=t[1]-e[1],c=n[0]-e[0],f=n[1]-e[1],g=s*f-c*r,m=o*f-c*l;return g>0&&m<0||g<0&&m>0}function Sv(i,t,e){const n=[];for(let s=0;s<i.length;s++){const r=[];for(let o=0;o<i[s].length;o++){const l=PG(i[s][o],e);rf(t,l),r.push(l)}n.push(r)}return n}function YC(i,t,e){const n=[];for(let s=0;s<i.length;s++){const r=Sv(i[s],t,e);n.push(r)}return n}function XC(i,t,e,n){if(i[0]<e[0]||i[0]>e[2]){const s=n*.5;let r=i[0]-e[0]>s?-n:e[0]-i[0]>s?n:0;r===0&&(r=i[0]-e[2]>s?-n:e[2]-i[0]>s?n:0),i[0]+=r}rf(t,i)}function VG(i){i[0]=i[1]=1/0,i[2]=i[3]=-1/0}function LM(i,t,e,n){const s=Math.pow(2,n.z)*ks,r=[n.x*ks,n.y*ks],o=[];for(const l of i)for(const c of l){const f=[c.x+r[0],c.y+r[1]];XC(f,t,e,s),o.push(f)}return o}function PM(i,t,e,n){const s=Math.pow(2,n.z)*ks,r=[n.x*ks,n.y*ks],o=[];for(const l of i){const c=[];for(const f of l){const g=[f.x+r[0],f.y+r[1]];rf(t,g),c.push(g)}o.push(c)}if(t[2]-t[0]<=s/2){VG(t);for(const l of o)for(const c of l)XC(c,t,e,s)}return o}function YG(i,t){const e=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],s=i.canonicalID();if(t.type==="Polygon"){const r=Sv(t.coordinates,n,s),o=LM(i.geometry(),e,n,s);if(!Rh(e,n))return!1;for(const l of o)if(!Mu(l,r))return!1}if(t.type==="MultiPolygon"){const r=YC(t.coordinates,n,s),o=LM(i.geometry(),e,n,s);if(!Rh(e,n))return!1;for(const l of o)if(!UG(l,r))return!1}return!0}function XG(i,t){const e=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],s=i.canonicalID();if(t.type==="Polygon"){const r=Sv(t.coordinates,n,s),o=PM(i.geometry(),e,n,s);if(!Rh(e,n))return!1;for(const l of o)if(!VC(l,r))return!1}if(t.type==="MultiPolygon"){const r=YC(t.coordinates,n,s),o=PM(i.geometry(),e,n,s);if(!Rh(e,n))return!1;for(const l of o)if(!HG(l,r))return!1}return!0}class Eo{constructor(t,e){this.type=It,this.geojson=t,this.geometries=e}static parse(t,e){if(t.length!==2)return e.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Th(t[1])){const n=t[1];if(n.type==="FeatureCollection"){const s=[];for(const r of n.features){const{type:o,coordinates:l}=r.geometry;o==="Polygon"&&s.push(l),o==="MultiPolygon"&&s.push(...l)}if(s.length){const r={type:"MultiPolygon",coordinates:s};return new Eo(n,r)}}else if(n.type==="Feature"){const s=n.geometry.type;if(s==="Polygon"||s==="MultiPolygon")return new Eo(n,n.geometry)}else if(n.type==="Polygon"||n.type==="MultiPolygon")return new Eo(n,n)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return YG(t,this.geometries);if(t.geometryType()==="LineString")return XG(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class WC{constructor(t=[],e=(n,s)=>n<s?-1:n>s?1:0){if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(t){this.data.push(t),this._up(this.length++)}pop(){if(this.length===0)return;const t=this.data[0],e=this.data.pop();return--this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:n}=this,s=e[t];for(;t>0;){const r=t-1>>1,o=e[r];if(n(s,o)>=0)break;e[t]=o,t=r}e[t]=s}_down(t){const{data:e,compare:n}=this,s=this.length>>1,r=e[t];for(;t<s;){let o=(t<<1)+1;const l=o+1;if(l<this.length&&n(e[l],e[o])<0&&(o=l),n(e[o],r)>=0)break;e[t]=e[o],t=o}e[t]=r}}function WG(i,t){if(i.length<=1)return[i];const n=[];let s,r;for(const o of i){const l=KG(o);l!==0&&(o.area=Math.abs(l),r===void 0&&(r=l<0),r===l<0?(s&&n.push(s),s=[o]):s.push(o))}return s&&n.push(s),n}function KG(i){let t=0;for(let e=0,n=i.length,s=n-1,r,o;e<n;s=e++)r=i[e],o=i[s],t+=(o.x-r.x)*(r.y+o.y);return t}const ZG=6378.137,NM=1/298.257223563,zM=NM*(2-NM),GM=Math.PI/180;class Mv{constructor(t){const e=GM*ZG*1e3,n=Math.cos(t*GM),s=1/(1-zM*(1-n*n)),r=Math.sqrt(s);this.kx=e*r*n,this.ky=e*r*s*(1-zM)}distance(t,e){const n=this.wrap(t[0]-e[0])*this.kx,s=(t[1]-e[1])*this.ky;return Math.sqrt(n*n+s*s)}pointOnLine(t,e){let n=1/0,s,r,o,l;for(let c=0;c<t.length-1;c++){let f=t[c][0],g=t[c][1],m=this.wrap(t[c+1][0]-f)*this.kx,p=(t[c+1][1]-g)*this.ky,v=0;(m!==0||p!==0)&&(v=(this.wrap(e[0]-f)*this.kx*m+(e[1]-g)*this.ky*p)/(m*m+p*p),v>1?(f=t[c+1][0],g=t[c+1][1]):v>0&&(f+=m/this.kx*v,g+=p/this.ky*v)),m=this.wrap(e[0]-f)*this.kx,p=(e[1]-g)*this.ky;const x=m*m+p*p;x<n&&(n=x,s=f,r=g,o=c,l=v)}return{point:[s,r],index:o,t:Math.max(0,Math.min(1,l))}}wrap(t){for(;t<-180;)t+=360;for(;t>180;)t-=360;return t}}const K_=100,Z_=50;function KC(i,t){return t[0]-i[0]}function Vg(i){return i[1]-i[0]+1}function Cr(i,t){return i[1]>=i[0]&&i[1]<t}function $_(i,t){if(i[0]>i[1])return[null,null];const e=Vg(i);if(t){if(e===2)return[i,null];const s=Math.floor(e/2);return[[i[0],i[0]+s],[i[0]+s,i[1]]]}if(e===1)return[i,null];const n=Math.floor(e/2)-1;return[[i[0],i[0]+n],[i[0]+n+1,i[1]]]}function Q_(i,t){if(!Cr(t,i.length))return[1/0,1/0,-1/0,-1/0];const e=[1/0,1/0,-1/0,-1/0];for(let n=t[0];n<=t[1];++n)rf(e,i[n]);return e}function J_(i){const t=[1/0,1/0,-1/0,-1/0];for(const e of i)for(const n of e)rf(t,n);return t}function kM(i){return i[0]!==-1/0&&i[1]!==-1/0&&i[2]!==1/0&&i[3]!==1/0}function wv(i,t,e){if(!kM(i)||!kM(t))return NaN;let n=0,s=0;return i[2]<t[0]&&(n=t[0]-i[2]),i[0]>t[2]&&(n=i[0]-t[2]),i[1]>t[3]&&(s=i[1]-t[3]),i[3]<t[1]&&(s=t[1]-i[3]),e.distance([0,0],[n,s])}function po(i,t,e){const n=e.pointOnLine(t,i);return e.distance(i,n.point)}function Tv(i,t,e,n,s){const r=Math.min(po(i,[e,n],s),po(t,[e,n],s)),o=Math.min(po(e,[i,t],s),po(n,[i,t],s));return Math.min(r,o)}function $G(i,t,e,n,s){if(!(Cr(t,i.length)&&Cr(n,e.length)))return 1/0;let o=1/0;for(let l=t[0];l<t[1];++l){const c=i[l],f=i[l+1];for(let g=n[0];g<n[1];++g){const m=e[g],p=e[g+1];if(q0(c,f,m,p))return 0;o=Math.min(o,Tv(c,f,m,p,s))}}return o}function QG(i,t,e,n,s){if(!(Cr(t,i.length)&&Cr(n,e.length)))return NaN;let o=1/0;for(let l=t[0];l<=t[1];++l)for(let c=n[0];c<=n[1];++c)if(o=Math.min(o,s.distance(i[l],e[c])),o===0)return o;return o}function JG(i,t,e){if(Mu(i,t,!0))return 0;let n=1/0;for(const s of t){const r=s[0],o=s[s.length-1];if(r!==o&&(n=Math.min(n,po(i,[o,r],e)),n===0))return n;const l=e.pointOnLine(s,i);if(n=Math.min(n,e.distance(i,l.point)),n===0)return n}return n}function tk(i,t,e,n){if(!Cr(t,i.length))return NaN;for(let r=t[0];r<=t[1];++r)if(Mu(i[r],e,!0))return 0;let s=1/0;for(let r=t[0];r<t[1];++r){const o=i[r],l=i[r+1];for(const c of e)for(let f=0,g=c.length,m=g-1;f<g;m=f++){const p=c[m],v=c[f];if(q0(o,l,p,v))return 0;s=Math.min(s,Tv(o,l,p,v,n))}}return s}function FM(i,t){for(const e of i)for(const n of e)if(Mu(n,t,!0))return!0;return!1}function ek(i,t,e,n=1/0){const s=J_(i),r=J_(t);if(n!==1/0&&wv(s,r,e)>=n)return n;if(Rh(s,r)){if(FM(i,t))return 0}else if(FM(t,i))return 0;let o=1/0;for(const l of i)for(let c=0,f=l.length,g=f-1;c<f;g=c++){const m=l[g],p=l[c];for(const v of t)for(let x=0,E=v.length,b=E-1;x<E;b=x++){const M=v[b],w=v[x];if(q0(m,p,M,w))return 0;o=Math.min(o,Tv(m,p,M,w,e))}}return o}function jM(i,t,e,n,s,r){if(!r)return;const o=wv(Q_(n,r),s,e);o<t&&i.push([o,r,[0,0]])}function Fd(i,t,e,n,s,r,o){if(!r||!o)return;const l=wv(Q_(n,r),Q_(s,o),e);l<t&&i.push([l,r,o])}function Yg(i,t,e,n,s=1/0){let r=Math.min(n.distance(i[0],e[0][0]),s);if(r===0)return r;const o=new WC([[0,[0,i.length-1],[0,0]]],KC),l=J_(e);for(;o.length>0;){const c=o.pop();if(c[0]>=r)continue;const f=c[1],g=t?Z_:K_;if(Vg(f)<=g){if(!Cr(f,i.length))return NaN;if(t){const m=tk(i,f,e,n);if(isNaN(m)||m===0)return m;r=Math.min(r,m)}else for(let m=f[0];m<=f[1];++m){const p=JG(i[m],e,n);if(r=Math.min(r,p),r===0)return 0}}else{const m=$_(f,t);jM(o,r,n,i,l,m[0]),jM(o,r,n,i,l,m[1])}}return r}function Xg(i,t,e,n,s,r=1/0){let o=Math.min(r,s.distance(i[0],e[0]));if(o===0)return o;const l=new WC([[0,[0,i.length-1],[0,e.length-1]]],KC);for(;l.length>0;){const c=l.pop();if(c[0]>=o)continue;const f=c[1],g=c[2],m=t?Z_:K_,p=n?Z_:K_;if(Vg(f)<=m&&Vg(g)<=p){if(!Cr(f,i.length)&&Cr(g,e.length))return NaN;let v;if(t&&n)v=$G(i,f,e,g,s),o=Math.min(o,v);else if(t&&!n){const x=i.slice(f[0],f[1]+1);for(let E=g[0];E<=g[1];++E)if(v=po(e[E],x,s),o=Math.min(o,v),o===0)return o}else if(!t&&n){const x=e.slice(g[0],g[1]+1);for(let E=f[0];E<=f[1];++E)if(v=po(i[E],x,s),o=Math.min(o,v),o===0)return o}else v=QG(i,f,e,g,s),o=Math.min(o,v)}else{const v=$_(f,t),x=$_(g,n);Fd(l,o,s,i,e,v[0],x[0]),Fd(l,o,s,i,e,v[0],x[1]),Fd(l,o,s,i,e,v[1],x[0]),Fd(l,o,s,i,e,v[1],x[1])}}return o}function ik(i,t){const e=i.geometry(),n=e.flat().map(o=>Ev([o.x,o.y],i.canonical));if(e.length===0)return NaN;const s=new Mv(n[0][1]);let r=1/0;for(const o of t){switch(o.type){case"Point":r=Math.min(r,Xg(n,!1,[o.coordinates],!1,s,r));break;case"LineString":r=Math.min(r,Xg(n,!1,o.coordinates,!0,s,r));break;case"Polygon":r=Math.min(r,Yg(n,!1,o.coordinates,s,r));break}if(r===0)return r}return r}function nk(i,t){const e=i.geometry(),n=e.flat().map(o=>Ev([o.x,o.y],i.canonical));if(e.length===0)return NaN;const s=new Mv(n[0][1]);let r=1/0;for(const o of t){switch(o.type){case"Point":r=Math.min(r,Xg(n,!0,[o.coordinates],!1,s,r));break;case"LineString":r=Math.min(r,Xg(n,!0,o.coordinates,!0,s,r));break;case"Polygon":r=Math.min(r,Yg(n,!0,o.coordinates,s,r));break}if(r===0)return r}return r}function sk(i,t){const e=i.geometry();if(e.length===0||e[0].length===0)return NaN;const n=WG(e).map(o=>o.map(l=>l.map(c=>Ev([c.x,c.y],i.canonical)))),s=new Mv(n[0][0][0][1]);let r=1/0;for(const o of t)for(const l of n){switch(o.type){case"Point":r=Math.min(r,Yg([o.coordinates],!1,l,s,r));break;case"LineString":r=Math.min(r,Yg(o.coordinates,!0,l,s,r));break;case"Polygon":r=Math.min(r,ek(l,o.coordinates,s,r));break}if(r===0)return r}return r}function $y(i){return i.type==="MultiPolygon"?i.coordinates.map(t=>({type:"Polygon",coordinates:t})):i.type==="MultiLineString"?i.coordinates.map(t=>({type:"LineString",coordinates:t})):i.type==="MultiPoint"?i.coordinates.map(t=>({type:"Point",coordinates:t})):[i]}class So{constructor(t,e){this.type=lt,this.geojson=t,this.geometries=e}static parse(t,e){if(t.length!==2)return e.error(`'distance' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Th(t[1])){const n=t[1];if(n.type==="FeatureCollection")return new So(n,n.features.map(s=>$y(s.geometry)).flat());if(n.type==="Feature")return new So(n,$y(n.geometry));if("type"in n&&"coordinates"in n)return new So(n,$y(n))}return e.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return ik(t,this.geometries);if(t.geometryType()==="LineString")return nk(t,this.geometries);if(t.geometryType()==="Polygon")return sk(t,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class af{constructor(t){this.type=Ot,this.key=t}static parse(t,e){if(t.length!==2)return e.error(`Expected 1 argument, but found ${t.length-1} instead.`);const n=t[1];return n==null?e.error("Global state property must be defined."):typeof n!="string"?e.error(`Global state property must be string, but found ${typeof t[1]} instead.`):new af(n)}evaluate(t){var e;const n=(e=t.globals)===null||e===void 0?void 0:e.globalState;return!n||Object.keys(n).length===0?null:FC(n,this.key)}eachChild(){}outputDefined(){return!1}}const V0={"==":RG,"!=":AG,">":DG,"<":OG,">=":LG,"<=":IG,array:ds,at:gv,boolean:ds,case:yv,coalesce:Ch,collator:H0,format:vv,image:xv,in:mv,"index-of":Hg,interpolate:Gs,"interpolate-hcl":Gs,"interpolate-lab":Gs,length:bv,let:j0,literal:gu,match:pv,number:ds,"number-format":_v,object:ds,slice:qg,step:U0,string:ds,"to-boolean":_a,"to-color":_a,"to-number":_a,"to-string":_a,var:B0,within:Eo,distance:So,"global-state":af};class An{constructor(t,e,n,s){this.name=t,this.type=e,this._evaluate=n,this.args=s}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,e){const n=t[0],s=An.definitions[n];if(!s)return e.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0);const r=Array.isArray(s)?s[0]:s.type,o=Array.isArray(s)?[[s[1],s[2]]]:s.overloads,l=o.filter(([f])=>!Array.isArray(f)||f.length===t.length-1);let c=null;for(const[f,g]of l){c=new F0(e.registry,Wg,e.path,null,e.scope);const m=[];let p=!1;for(let v=1;v<t.length;v++){const x=t[v],E=Array.isArray(f)?f[v-1]:f.type,b=c.parse(x,1+m.length,E);if(!b){p=!0;break}m.push(b)}if(!p){if(Array.isArray(f)&&f.length!==m.length){c.error(`Expected ${f.length} arguments, but found ${m.length} instead.`);continue}for(let v=0;v<m.length;v++){const x=Array.isArray(f)?f[v]:f.type,E=m[v];c.concat(v+1).checkSubtype(x,E.type)}if(c.errors.length===0)return new An(n,r,g,m)}}if(l.length===1)e.errors.push(...c.errors);else{const g=(l.length?l:o).map(([p])=>ak(p)).join(" | "),m=[];for(let p=1;p<t.length;p++){const v=e.parse(t[p],1+m.length);if(!v)return null;m.push(Ne(v.type))}e.error(`Expected arguments of type ${g}, but found (${m.join(", ")}) instead.`)}return null}static register(t,e){An.definitions=e;for(const n in e)t[n]=An}}function BM(i,[t,e,n,s]){t=t.evaluate(i),e=e.evaluate(i),n=n.evaluate(i);const r=s?s.evaluate(i):1,o=jC(t,e,n,r);if(o)throw new je(o);return new ze(t/255,e/255,n/255,r,!1)}function UM(i,t){return i in t}function Qy(i,t){const e=t[i];return typeof e>"u"?null:e}function rk(i,t,e,n){for(;e<=n;){const s=e+n>>1;if(t[s]===i)return!0;t[s]>i?n=s-1:e=s+1}return!1}function to(i){return{type:i}}An.register(V0,{error:[Jz,[zt],(i,[t])=>{throw new je(t.evaluate(i))}],typeof:[zt,[Ot],(i,[t])=>Ne(ui(t.evaluate(i)))],"to-rgba":[Cn(lt,4),[Ns],(i,[t])=>{const[e,n,s,r]=t.evaluate(i).rgb;return[e*255,n*255,s*255,r]}],rgb:[Ns,[lt,lt,lt],BM],rgba:[Ns,[lt,lt,lt,lt],BM],has:{type:It,overloads:[[[zt],(i,[t])=>UM(t.evaluate(i),i.properties())],[[zt,vo],(i,[t,e])=>UM(t.evaluate(i),e.evaluate(i))]]},get:{type:Ot,overloads:[[[zt],(i,[t])=>Qy(t.evaluate(i),i.properties())],[[zt,vo],(i,[t,e])=>Qy(t.evaluate(i),e.evaluate(i))]]},"feature-state":[Ot,[zt],(i,[t])=>Qy(t.evaluate(i),i.featureState||{})],properties:[vo,[],i=>i.properties()],"geometry-type":[zt,[],i=>i.geometryType()],id:[Ot,[],i=>i.id()],zoom:[lt,[],i=>i.globals.zoom],"heatmap-density":[lt,[],i=>i.globals.heatmapDensity||0],elevation:[lt,[],i=>i.globals.elevation||0],"line-progress":[lt,[],i=>i.globals.lineProgress||0],accumulated:[Ot,[],i=>i.globals.accumulated===void 0?null:i.globals.accumulated],"+":[lt,to(lt),(i,t)=>{let e=0;for(const n of t)e+=n.evaluate(i);return e}],"*":[lt,to(lt),(i,t)=>{let e=1;for(const n of t)e*=n.evaluate(i);return e}],"-":{type:lt,overloads:[[[lt,lt],(i,[t,e])=>t.evaluate(i)-e.evaluate(i)],[[lt],(i,[t])=>-t.evaluate(i)]]},"/":[lt,[lt,lt],(i,[t,e])=>t.evaluate(i)/e.evaluate(i)],"%":[lt,[lt,lt],(i,[t,e])=>t.evaluate(i)%e.evaluate(i)],ln2:[lt,[],()=>Math.LN2],pi:[lt,[],()=>Math.PI],e:[lt,[],()=>Math.E],"^":[lt,[lt,lt],(i,[t,e])=>Math.pow(t.evaluate(i),e.evaluate(i))],sqrt:[lt,[lt],(i,[t])=>Math.sqrt(t.evaluate(i))],log10:[lt,[lt],(i,[t])=>Math.log(t.evaluate(i))/Math.LN10],ln:[lt,[lt],(i,[t])=>Math.log(t.evaluate(i))],log2:[lt,[lt],(i,[t])=>Math.log(t.evaluate(i))/Math.LN2],sin:[lt,[lt],(i,[t])=>Math.sin(t.evaluate(i))],cos:[lt,[lt],(i,[t])=>Math.cos(t.evaluate(i))],tan:[lt,[lt],(i,[t])=>Math.tan(t.evaluate(i))],asin:[lt,[lt],(i,[t])=>Math.asin(t.evaluate(i))],acos:[lt,[lt],(i,[t])=>Math.acos(t.evaluate(i))],atan:[lt,[lt],(i,[t])=>Math.atan(t.evaluate(i))],min:[lt,to(lt),(i,t)=>Math.min(...t.map(e=>e.evaluate(i)))],max:[lt,to(lt),(i,t)=>Math.max(...t.map(e=>e.evaluate(i)))],abs:[lt,[lt],(i,[t])=>Math.abs(t.evaluate(i))],round:[lt,[lt],(i,[t])=>{const e=t.evaluate(i);return e<0?-Math.round(-e):Math.round(e)}],floor:[lt,[lt],(i,[t])=>Math.floor(t.evaluate(i))],ceil:[lt,[lt],(i,[t])=>Math.ceil(t.evaluate(i))],"filter-==":[It,[zt,Ot],(i,[t,e])=>i.properties()[t.value]===e.value],"filter-id-==":[It,[Ot],(i,[t])=>i.id()===t.value],"filter-type-==":[It,[zt],(i,[t])=>i.geometryType()===t.value],"filter-<":[It,[zt,Ot],(i,[t,e])=>{const n=i.properties()[t.value],s=e.value;return typeof n==typeof s&&n<s}],"filter-id-<":[It,[Ot],(i,[t])=>{const e=i.id(),n=t.value;return typeof e==typeof n&&e<n}],"filter->":[It,[zt,Ot],(i,[t,e])=>{const n=i.properties()[t.value],s=e.value;return typeof n==typeof s&&n>s}],"filter-id->":[It,[Ot],(i,[t])=>{const e=i.id(),n=t.value;return typeof e==typeof n&&e>n}],"filter-<=":[It,[zt,Ot],(i,[t,e])=>{const n=i.properties()[t.value],s=e.value;return typeof n==typeof s&&n<=s}],"filter-id-<=":[It,[Ot],(i,[t])=>{const e=i.id(),n=t.value;return typeof e==typeof n&&e<=n}],"filter->=":[It,[zt,Ot],(i,[t,e])=>{const n=i.properties()[t.value],s=e.value;return typeof n==typeof s&&n>=s}],"filter-id->=":[It,[Ot],(i,[t])=>{const e=i.id(),n=t.value;return typeof e==typeof n&&e>=n}],"filter-has":[It,[Ot],(i,[t])=>t.value in i.properties()],"filter-has-id":[It,[],i=>i.id()!==null&&i.id()!==void 0],"filter-type-in":[It,[Cn(zt)],(i,[t])=>t.value.indexOf(i.geometryType())>=0],"filter-id-in":[It,[Cn(Ot)],(i,[t])=>t.value.indexOf(i.id())>=0],"filter-in-small":[It,[zt,Cn(Ot)],(i,[t,e])=>e.value.indexOf(i.properties()[t.value])>=0],"filter-in-large":[It,[zt,Cn(Ot)],(i,[t,e])=>rk(i.properties()[t.value],e.value,0,e.value.length-1)],all:{type:It,overloads:[[[It,It],(i,[t,e])=>t.evaluate(i)&&e.evaluate(i)],[to(It),(i,t)=>{for(const e of t)if(!e.evaluate(i))return!1;return!0}]]},any:{type:It,overloads:[[[It,It],(i,[t,e])=>t.evaluate(i)||e.evaluate(i)],[to(It),(i,t)=>{for(const e of t)if(e.evaluate(i))return!0;return!1}]]},"!":[It,[It],(i,[t])=>!t.evaluate(i)],"is-supported-script":[It,[zt],(i,[t])=>{const e=i.globals&&i.globals.isSupportedScript;return e?e(t.evaluate(i)):!0}],upcase:[zt,[zt],(i,[t])=>t.evaluate(i).toUpperCase()],downcase:[zt,[zt],(i,[t])=>t.evaluate(i).toLowerCase()],concat:[zt,to(Ot),(i,t)=>t.map(e=>th(e.evaluate(i))).join("")],"resolved-locale":[zt,[P0],(i,[t])=>t.evaluate(i).resolvedLocale()]});function ak(i){return Array.isArray(i)?`(${i.map(Ne).join(", ")})`:`(${Ne(i.type)}...)`}function Wg(i){if(i instanceof B0)return Wg(i.boundExpression);if(i instanceof An&&i.name==="error")return!1;if(i instanceof H0)return!1;if(i instanceof Eo)return!1;if(i instanceof So)return!1;if(i instanceof af)return!1;const t=i instanceof _a||i instanceof ds;let e=!0;return i.eachChild(n=>{t?e=e&&Wg(n):e=e&&n instanceof gu}),e?Cv(i)&&Av(i,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"]):!1}function Cv(i){if(i instanceof An){if(i.name==="get"&&i.args.length===1)return!1;if(i.name==="feature-state")return!1;if(i.name==="has"&&i.args.length===1)return!1;if(i.name==="properties"||i.name==="geometry-type"||i.name==="id")return!1;if(/^filter-/.test(i.name))return!1}if(i instanceof Eo||i instanceof So)return!1;let t=!0;return i.eachChild(e=>{t&&!Cv(e)&&(t=!1)}),t}function Rv(i){if(i instanceof An&&i.name==="feature-state")return!1;let t=!0;return i.eachChild(e=>{t&&!Rv(e)&&(t=!1)}),t}function Av(i,t){if(i instanceof An&&t.indexOf(i.name)>=0)return!1;let e=!0;return i.eachChild(n=>{e&&!Av(n,t)&&(e=!1)}),e}function t1(i){return{result:"success",value:i}}function Hl(i){return{result:"error",value:i}}function ok(i){return i["property-type"]==="data-driven"||i["property-type"]==="cross-faded-data-driven"}function lk(i){return!!i.expression&&i.expression.parameters.indexOf("zoom")>-1}function uk(i){return!!i.expression&&i.expression.interpolated}function ZC(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)&&ui(i)===vo}class ck{constructor(t,e){this.expression=t,this._warningHistory={},this._evaluator=new BC,this._defaultValue=e?gk(e):null,this._enumValues=e&&e.type==="enum"?e.values:null}evaluateWithoutErrorHandling(t,e,n,s,r,o){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n,this._evaluator.canonical=s,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)}evaluate(t,e,n,s,r,o){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=n||null,this._evaluator.canonical=s,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=o||null;try{const l=this.expression.evaluate(this._evaluator);if(l==null||typeof l=="number"&&l!==l)return this._defaultValue;if(this._enumValues&&!(l in this._enumValues))throw new je(`Expected value to be one of ${Object.keys(this._enumValues).map(c=>JSON.stringify(c)).join(", ")}, but found ${JSON.stringify(l)} instead.`);return l}catch(l){return this._warningHistory[l.message]||(this._warningHistory[l.message]=!0,typeof console<"u"&&console.warn(l.message)),this._defaultValue}}}function hk(i){return Array.isArray(i)&&i.length>0&&typeof i[0]=="string"&&i[0]in V0}function $C(i,t){const e=new F0(V0,Wg,[],t?dk(t):void 0),n=e.parse(i,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return n?t1(new ck(n,t)):Hl(e.errors)}class HM{constructor(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent=t!=="constant"&&!Rv(e.expression),this.globalStateRefs=Y0(e.expression)}evaluateWithoutErrorHandling(t,e,n,s,r,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,s,r,o)}evaluate(t,e,n,s,r,o){return this._styleExpression.evaluate(t,e,n,s,r,o)}}class qM{constructor(t,e,n,s){this.kind=t,this.zoomStops=n,this._styleExpression=e,this.isStateDependent=t!=="camera"&&!Rv(e.expression),this.globalStateRefs=Y0(e.expression),this.interpolationType=s}evaluateWithoutErrorHandling(t,e,n,s,r,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,s,r,o)}evaluate(t,e,n,s,r,o){return this._styleExpression.evaluate(t,e,n,s,r,o)}interpolationFactor(t,e,n){return this.interpolationType?Gs.interpolationFactor(this.interpolationType,t,e,n):0}}function fk(i,t){const e=$C(i,t);if(e.result==="error")return e;const n=e.value.expression,s=Cv(n);if(!s&&!ok(t))return Hl([new Os("","data expressions not supported")]);const r=Av(n,["zoom"]);if(!r&&!lk(t))return Hl([new Os("","zoom expressions not supported")]);const o=ug(n);if(!o&&!r)return Hl([new Os("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(o instanceof Os)return Hl([o]);if(o instanceof Gs&&!uk(t))return Hl([new Os("",'"interpolate" expressions cannot be used with this property')]);if(!o)return t1(s?new HM("constant",e.value):new HM("source",e.value));const l=o instanceof Gs?o.interpolation:void 0;return t1(s?new qM("camera",e.value,o.labels,l):new qM("composite",e.value,o.labels,l))}function ug(i){let t=null;if(i instanceof j0)t=ug(i.result);else if(i instanceof Ch){for(const e of i.args)if(t=ug(e),t)break}else(i instanceof U0||i instanceof Gs)&&i.input instanceof An&&i.input.name==="zoom"&&(t=i);return t instanceof Os||i.eachChild(e=>{const n=ug(e);n instanceof Os?t=n:!t&&n?t=new Os("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&n&&t!==n&&(t=new Os("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function Y0(i,t=new Set){return i instanceof af&&t.add(i.key),i.eachChild(e=>{Y0(e,t)}),t}function dk(i){const t={color:Ns,string:zt,number:lt,enum:zt,boolean:It,formatted:N0,padding:z0,numberArray:G0,colorArray:Sh,projectionDefinition:L0,resolvedImage:sf,variableAnchorOffsetCollection:k0};return i.type==="array"?Cn(t[i.value]||Ot,i.length):t[i.type]}function gk(i){if(i.type==="color"&&ZC(i.default))return new ze(0,0,0,0);switch(i.type){case"color":return ze.parse(i.default)||null;case"padding":return ms.parse(i.default)||null;case"numberArray":return ps.parse(i.default)||null;case"colorArray":return Rn.parse(i.default)||null;case"variableAnchorOffsetCollection":return zs.parse(i.default)||null;case"projectionDefinition":return fs.parse(i.default)||null;default:return i.default===void 0?null:i.default}}function QC(i){if(i===!0||i===!1)return!0;if(!Array.isArray(i)||i.length===0)return!1;switch(i[0]){case"has":return i.length>=2&&i[1]!=="$id"&&i[1]!=="$type";case"in":return i.length>=3&&(typeof i[1]!="string"||Array.isArray(i[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return i.length!==3||Array.isArray(i[1])||Array.isArray(i[2]);case"any":case"all":for(const t of i.slice(1))if(!QC(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}const mk={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function pk(i){if(i==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};QC(i)||(i=Kg(i));const t=$C(i,mk);if(t.result==="error")throw new Error(t.value.map(e=>`${e.key}: ${e.message}`).join(", "));{const e=JC(i);return{filter:(n,s,r)=>t.value.evaluate(n,s,{},r),needGeometry:e,getGlobalStateRefs:()=>Y0(t.value.expression)}}}function yk(i,t){return i<t?-1:i>t?1:0}function JC(i){if(!Array.isArray(i))return!1;if(i[0]==="within"||i[0]==="distance")return!0;for(let t=1;t<i.length;t++)if(JC(i[t]))return!0;return!1}function Kg(i){if(!i)return!0;const t=i[0];return i.length<=1?t!=="any":t==="=="?Jy(i[1],i[2],"=="):t==="!="?jd(Jy(i[1],i[2],"==")):t==="<"||t===">"||t==="<="||t===">="?Jy(i[1],i[2],t):t==="any"?_k(i.slice(1)):t==="all"?["all"].concat(i.slice(1).map(Kg)):t==="none"?["all"].concat(i.slice(1).map(Kg).map(jd)):t==="in"?VM(i[1],i.slice(2)):t==="!in"?jd(VM(i[1],i.slice(2))):t==="has"?YM(i[1]):t==="!has"?jd(YM(i[1])):!0}function Jy(i,t,e){switch(i){case"$type":return[`filter-type-${e}`,t];case"$id":return[`filter-id-${e}`,t];default:return[`filter-${e}`,i,t]}}function _k(i){return["any"].concat(i.map(Kg))}function VM(i,t){if(t.length===0)return!1;switch(i){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(e=>typeof e!=typeof t[0])?["filter-in-large",i,["literal",t.sort(yk)]]:["filter-in-small",i,["literal",t]]}}function YM(i){switch(i){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",i]}}function jd(i){return["!",i]}function Ah(i){return typeof i=="object"?["literal",i]:i}function vk(i,t){let e=i.stops;if(!e)return xk(i,t);const n=e&&typeof e[0][0]=="object",s=n||i.property!==void 0,r=n||!s;return e=e.map(o=>!s&&t.tokens&&typeof o[1]=="string"?[o[0],Mk(o[1])]:[o[0],Ah(o[1])]),n?bk(i,t,e):r?Sk(i,t,e):e1(i,t,e)}function xk(i,t){const e=["get",i.property];if(i.default===void 0)return t.type==="string"?["string",e]:e;if(t.type==="enum")return["match",e,Object.keys(t.values),e,i.default];{const n=[t.type==="color"?"to-color":t.type,e,Ah(i.default)];return t.type==="array"&&n.splice(1,0,t.value,t.length||null),n}}function Ov(i){switch(i.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function bk(i,t,e){const n={},s={},r=[];for(let l=0;l<e.length;l++){const c=e[l],f=c[0].zoom;n[f]===void 0&&(n[f]={zoom:f,type:i.type,property:i.property,default:i.default},s[f]=[],r.push(f)),s[f].push([c[0].value,c[1]])}if(Iv({},t)==="exponential"){const l=[Ov(i),["linear"],["zoom"]];for(const c of r){const f=e1(n[c],t,s[c]);nu(l,c,f,!1)}return l}else{const l=["step",["zoom"]];for(const c of r){const f=e1(n[c],t,s[c]);nu(l,c,f,!0)}return Dv(l),l}}function Ek(i,t){if(i!==void 0)return i;if(t!==void 0)return t}function XM(i,t){const e=Ah(Ek(i.default,t.default));return e===void 0&&t.type==="resolvedImage"?"":e}function e1(i,t,e){const n=Iv(i,t),s=["get",i.property];if(n==="categorical"&&typeof e[0][0]=="boolean"){const r=["case"];for(const o of e)r.push(["==",s,o[0]],o[1]);return r.push(XM(i,t)),r}else if(n==="categorical"){const r=["match",s];for(const o of e)nu(r,o[0],o[1],!1);return r.push(XM(i,t)),r}else if(n==="interval"){const r=["step",["number",s]];for(const o of e)nu(r,o[0],o[1],!0);return Dv(r),i.default===void 0?r:["case",["==",["typeof",s],"number"],r,Ah(i.default)]}else if(n==="exponential"){const r=i.base!==void 0?i.base:1,o=[Ov(i),r===1?["linear"]:["exponential",r],["number",s]];for(const l of e)nu(o,l[0],l[1],!1);return i.default===void 0?o:["case",["==",["typeof",s],"number"],o,Ah(i.default)]}else throw new Error(`Unknown property function type ${n}`)}function Sk(i,t,e,n=["zoom"]){const s=Iv(i,t);let r,o=!1;if(s==="interval")r=["step",n],o=!0;else if(s==="exponential"){const l=i.base!==void 0?i.base:1;r=[Ov(i),l===1?["linear"]:["exponential",l],n]}else throw new Error(`Unknown zoom function type "${s}"`);for(const l of e)nu(r,l[0],l[1],o);return Dv(r),r}function Dv(i){i[0]==="step"&&i.length===3&&(i.push(0),i.push(i[3]))}function nu(i,t,e,n){i.length>3&&t===i[i.length-2]||(n&&i.length===2||i.push(t),i.push(e))}function Iv(i,t){return i.type?i.type:t.expression.interpolated?"exponential":"interval"}function Mk(i){const t=["concat"],e=/{([^{}]+)}/g;let n=0;for(let s=e.exec(i);s!==null;s=e.exec(i)){const r=i.slice(n,e.lastIndex-s[0].length);n=e.lastIndex,r.length>0&&t.push(r),t.push(["get",s[1]])}if(t.length===1)return i;if(n<i.length)t.push(i.slice(n));else if(t.length===2)return["to-string",t[1]];return t}const wk=Zz;var WM={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},Cc=" ",KM=/(italic|oblique)$/i,ZM={};function i1(i,t,e){var n=ZM[i];if(!n){Array.isArray(i)||(i=[i]);for(var s=400,r="normal",o=[],l,c,f=0,g=i.length;f<g;++f){var m=i[f],p=m.split(" "),v=p[p.length-1].toLowerCase();v=="normal"||v=="italic"||v=="oblique"?(r=c?r:v,c=!0,p.pop(),v=p[p.length-1].toLowerCase()):KM.test(v)&&(v=v.replace(KM,""),r=c?r:p[p.length-1].replace(v,""),c=!0);for(var x in WM){var E=p.length>1?p[p.length-2].toLowerCase():"";if(v==x||v==x.replace("-","")||E+"-"+v==x){s=l?s:WM[x],p.pop(),E&&x.startsWith(E)&&p.pop();break}}!l&&typeof v=="number"&&(s=v,l=!0);var b=p.join(Cc).replace("Klokantech Noto Sans","Noto Sans").replace("DIN Pro","Barlow").replace("Arial Unicode MS","Arial");b.indexOf(Cc)!==-1&&(b='"'+b+'"'),o.push(b)}n=ZM[i]=[r,s,o]}return n[0]+Cc+n[1]+Cc+t+"px"+(e?"/"+e:"")+Cc+n[2]}const t3="https://api.mapbox.com";function Lv(i){const t="mapbox://";return i.indexOf(t)!==0?"":i.slice(t.length)}function Tk(i,t,e){if(typeof i=="string")return[{id:"default",url:$M(i,t,e)}];for(const n of i)n.url=$M(n.url,t,e);return i}function $M(i,t,e){const n=Lv(i);if(!n)return decodeURI(new URL(i,e).href);const s="sprites/";if(n.indexOf(s)!==0)throw new Error(`unexpected sprites url: ${i}`);const r=n.slice(s.length);return`${t3}/styles/v1/${r}/sprite?access_token=${t}`}function Zg(i,t){const e=Lv(i);if(!e)return decodeURI(new URL(i,location.href).href);const n="styles/";if(e.indexOf(n)!==0)throw new Error(`unexpected style url: ${i}`);const s=e.slice(n.length);return`${t3}/styles/v1/${s}?&access_token=${t}`}const Ck=["a","b","c","d"];function cg(i,t,e,n){const s=new URL(i,n||location.href),r=Lv(i);if(!r)return t?(s.searchParams.has(e)||s.searchParams.set(e,t),[decodeURI(s.href)]):[decodeURI(s.href)];if(r==="mapbox.satellite"){const o=window.devicePixelRatio>=1.5?"@2x":"";return[`https://api.mapbox.com/v4/${r}/{z}/{x}/{y}${o}.webp?access_token=${t}`]}return Ck.map(o=>`https://${o}.tiles.mapbox.com/v4/${r}/{z}/{x}/{y}.vector.pbf?access_token=${t}`)}const gs=Object.freeze({}),QM={},JM={};let Rk=0;function Pv(i){return i.id||(i.id=Rk++),i.id}function Ak(i,t){return Pv(i)+"."+At(t)}function e3(i){let t=QM[i.id];return t||(t={},QM[Pv(i)]=t),t}function Ok(i){let t=JM[i.id];return t||(t={},JM[Pv(i)]=t),t}function t_(i){return i*Math.PI/180}const Fs=(function(){const i=[];for(let t=78271.51696402048;i.length<=24;t/=2)i.push(t);return i})();function X0(i,t){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(i,t);const e=document.createElement("canvas");return e.width=i,e.height=t,e}function Nv(i,t){let e=0;const n=t.length;for(;e<n;++e)if(t[e]<i&&e+1<n){const r=t[e]/t[e+1];return e+Math.log(t[e]/i)/Math.log(r)}return n-1}function Uc(i,t){const e=Math.floor(i),n=Math.pow(2,i-e);return t[e]/n}const Pl={};function mu(i,t,e={},n){if(t in Pl)return n&&(n.url=Pl[t][0].url),Pl[t][1];const s=e.transformRequest&&e.transformRequest(t,i)||t,r=function(c){return delete Pl[t],Promise.reject(new Error("Error fetching source "+t))},o=function(c){return delete Pl[t],c.ok?c.json():Promise.reject(new Error("Error fetching source "+t))},l=uu(()=>s).then(c=>c instanceof Response?(n&&(n.url=c.url),o(c)):(c instanceof Request||(c=new Request(c)),c.headers.get("Accept")||c.headers.set("Accept","application/json"),n&&(n.url=c.url),fetch(c).then(o).catch(r))).catch(r);return Pl[t]=[s,l],l}function i3(i,t){if(typeof i=="string")if(i.trim().startsWith("{"))try{const e=JSON.parse(i);return Promise.resolve(e)}catch(e){return Promise.reject(e)}else return i=Zg(i,t.accessToken),mu("Style",i,t);else return Promise.resolve(i)}const tw={};function n3(i,t,e={}){const n=[t,JSON.stringify(i)].toString();let s=tw[n];if(!s||e.transformRequest){let r;e.transformRequest&&(r=(l,c)=>{const f=e.transformRequest&&e.transformRequest(c,"Tiles")||c;if(l instanceof hC)l.setLoader((g,m,p)=>{const v=function(x){x.arrayBuffer().then(E=>{const M=l.getFormat().readFeatures(E,{extent:g,featureProjection:p});l.setFeatures(M)})};uu(()=>f).then(x=>{if(x instanceof Response)return v(x);fetch(x).then(v).catch(E=>l.setState(ht.ERROR))}).catch(x=>l.setState(ht.ERROR))});else{const g=l.getImage();uu(()=>f).then(m=>{if(typeof m=="string"){g.src=m;return}const p=v=>v.blob().then(x=>{const E=URL.createObjectURL(x);g.addEventListener("load",()=>URL.revokeObjectURL(E)),g.addEventListener("error",()=>URL.revokeObjectURL(E)),g.src=E});if(m instanceof Response)return p(m);fetch(m).then(p).catch(v=>l.setState(ht.ERROR))}).catch(m=>l.setState(ht.ERROR))}});const o=i.url;if(o&&!i.tiles){const l=cg(o,e.accessToken,e.accessTokenParam||"access_token",t||location.href);if(o.startsWith("mapbox://"))s=Promise.resolve({tileJson:Object.assign({},i,{url:void 0,tiles:l}),tileLoadFunction:r});else{const c={};s=mu("Source",l[0],e,c).then(function(f){return f.tiles=f.tiles.map(function(g){return f.scheme==="tms"&&(g=g.replace("{y}","{-y}")),cg(g,e.accessToken,e.accessTokenParam||"access_token",c.url)[0]}),Promise.resolve({tileJson:f,tileLoadFunction:r})})}}else i.tiles?(i=Object.assign({},i,{tiles:i.tiles.map(function(l){return i.scheme==="tms"&&(l=l.replace("{y}","{-y}")),cg(l,e.accessToken,e.accessTokenParam||"access_token",t||location.href)[0]})}),s=Promise.resolve({tileJson:Object.assign({},i),tileLoadFunction:r})):s=Promise.reject(new Error("source has no `tiles` nor `url`"));tw[n]=s}return s}function ew(i,t,e,n){const s=[2*e*t.pixelRatio+t.width,2*e*t.pixelRatio+t.height],r=X0(s[0],s[1]),o=r.getContext("2d");o.drawImage(i,t.x,t.y,t.width,t.height,e*t.pixelRatio,e*t.pixelRatio,t.width,t.height);const l=o.getImageData(0,0,s[0],s[1]);o.globalCompositeOperation="destination-over",o.fillStyle=`rgba(${n.r*255},${n.g*255},${n.b*255},${n.a})`;const c=l.data;for(let f=0,g=l.width;f<g;++f)for(let m=0,p=l.height;m<p;++m){const v=(m*g+f)*4;c[v+3]>0&&o.arc(f,m,e*t.pixelRatio,0,2*Math.PI)}return o.fill(),r}function Dk(i,t,e){const n=Math.max(0,Math.min(1,(e-i)/(t-i)));return n*n*(3-2*n)}function iw(i,t,e){const n=X0(t.width,t.height),s=n.getContext("2d");s.drawImage(i,t.x,t.y,t.width,t.height,0,0,t.width,t.height);const r=s.getImageData(0,0,t.width,t.height),o=r.data;for(let l=0,c=r.width;l<c;++l)for(let f=0,g=r.height;f<g;++f){const m=(f*c+l)*4,p=o[m+3]/255,v=.75,x=.1,E=Dk(v-x,v+x,p);E>0?(o[m+0]=Math.round(255*e.r*E),o[m+1]=Math.round(255*e.g*E),o[m+2]=Math.round(255*e.b*E),o[m+3]=Math.round(255*E)):o[m+3]=0}return s.putImageData(r,0,0),n}const Ik=Array(256).join("");function n1(i,t){if(t>=.05){let e="";const n=i.split(`
`),s=Ik.slice(0,Math.round(t/.1));for(let r=0,o=n.length;r<o;++r)r>0&&(e+=`
`),e+=n[r].split("").join(s);return e}return i}let e_;function s3(){return e_||(e_=X0(1,1).getContext("2d")),e_}function eo(i,t){return s3().measureText(i).width+(i.length-1)*t}const $g={};uo.on("propertychange",()=>{for(const i in $g)delete $g[i]});function s1(i,t,e,n){if(i.indexOf(`
`)!==-1){const o=i.split(`
`),l=[];for(let c=0,f=o.length;c<f;++c)l.push(s1(o[c],t,e,n));return l.join(`
`)}const s=e+","+t+","+i+","+n;let r=$g[s];if(!r){const o=i.split(" ");if(o.length>1){const l=s3();l.font=t;const f=l.measureText("M").width*e;let g="";const m=[];for(let p=0,v=o.length;p<v;++p){const x=o[p],E=g+(g?" ":"")+x;eo(E,n)<=f?g=E:(g&&m.push(g),g=x)}g&&m.push(g);for(let p=0,v=m.length;p<v&&v>1;++p){const x=m[p];if(eo(x,n)<f*.35){const E=p>0?eo(m[p-1],n):1/0,b=p<v-1?eo(m[p+1],n):1/0;m.splice(p,1),v-=1,E<b?(m[p-1]+=" "+x,p-=1):m[p]=x+" "+m[p]}}for(let p=0,v=m.length-1;p<v;++p){const x=m[p],E=m[p+1];if(eo(x,n)>f*.7&&eo(E,n)<f*.6){const b=x.split(" "),M=b.pop();eo(M,n)<f*.2&&(m[p]=b.join(" "),m[p+1]=M+" "+E),v-=1}}r=m.join(`
`)}else r=i;r=n1(r,n),$g[s]=r}return r}const Lk=["Arial","Courier New","Times New Roman","Verdana","sans-serif","serif","monospace","cursive","fantasy"],nw={};function Pk(i,t="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){if(ji)return i;let e;for(let n=0,s=i.length;n<s;++n){const r=i[n];if(r in nw)continue;nw[r]=!0;const l=i1(r,16).split(" ");e||(e=[]),e.push([l.slice(3).join(" ").replace(/"/g,""),l[1],l[0]])}return e&&(async()=>{await document.fonts.ready;for(let n=0,s=e.length;n<s;++n){const r=e[n],o=r[0];if(Lk.includes(o))continue;const l=r[1],c=r[2];if(!(await document.fonts.load(`${c} ${l} 16px "${o}"`)).some(g=>g.family.replace(/^['"]|['"]$/g,"").toLowerCase()===o.toLowerCase()&&g.weight==l&&g.style===c)){const g=t.replace("{font-family}",o.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",o.replace(/ /g,"+")).replace("{fontweight}",l).replace("{-fontstyle}",c.replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",c);if(!document.querySelector('link[href="'+g+'"]')){const m=document.createElement("link");m.href=g,m.rel="stylesheet",document.head.appendChild(m)}}}})(),i}const Nk={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},zk={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},Gk=function(i,t){const e=fk(i,t);if(e.result==="error")throw new Error(e.value.map(n=>`${n.key}: ${n.message}`).join(", "));return e.value},On={zoom:0,distanceFromCenter:0};An.register(V0,{...An.definitions,pitch:[{kind:"number"},[],i=>On.pitch||90],"distance-from-center":[{kind:"number"},[],i=>On.distanceFromCenter||0]});let Bd,i_;function vt(i,t,e,n,s,r){const o=i.id;s||(s={},console.warn("No functionCache provided to getValue()")),s[o]||(s[o]={});const l=s[o];if(!l[e]){let c=(i[t]||gs)[e];const f=wk[`${t}_${i.type}`][e];c===void 0&&(c=f.default);let g=hk(c);if(!g&&ZC(c)&&(c=vk(c,f),g=!0),g){const m=Gk(c,f);l[e]=m.evaluate.bind(m)}else f.type=="color"&&(c=ze.parse(c)),l[e]=function(){return c}}return l[e](On,n,r)}function sw(i,t,e,n){return vt(i,"layout",`${e}-allow-overlap`,t,n)?vt(i,"layout",`${e}-ignore-placement`,t,n)?"none":"obstacle":"declutter"}function kk(i,t,e,n){if(n||console.warn("No filterCache provided to evaluateFilter()"),!(i in n))try{n[i]=pk(t).filter}catch(s){console.warn("Filter will evaluate to false: "+s.message),n[i]=function(){return!1}}return n[i](On,e)}function ca(i,t){if(i){if(i.a===0||t===0)return;const e=i.a;return t=t===void 0?1:t,e===0?"transparent":"rgba("+Math.round(i.r*255/e)+","+Math.round(i.g*255/e)+","+Math.round(i.b*255/e)+","+e*t+")"}return i}const Fk=/\{[^{}}]*\}/g;function n_(i,t){return i.replace(Fk,function(e){return t[e.slice(1,-1)]||""})}function rw(i,t){let e=i.split(":")[0];return e===i&&(e="default"),t[e]}const jk={};function Bk(i,t,e,n=Fs,s=void 0,r=void 0,o=void 0,l=void 0){if(typeof t=="string"&&(t=JSON.parse(t)),t.version!=8)throw new Error("glStyle version 8 required.");jk[Ak(t,i)]=Array.from(arguments);const c={};(typeof r=="string"||r instanceof Request||r instanceof Response||r instanceof Promise)&&(r={default:r});for(const T in r){const L=r[T];uu(()=>L).then(async I=>{let P;if(typeof Image<"u"){const k=new Image;if(typeof I=="string")k.crossOrigin="anonymous",k.src=I;else{let Y;I instanceof Request?Y=await fetch(I):I instanceof Response&&(Y=I);const F=await Y.blob();P=URL.createObjectURL(F),k.src=P}k.addEventListener("load",function Y(){k.removeEventListener("load",Y),c[T]={image:k,size:[k.width,k.height]},i.changed(),P&&URL.revokeObjectURL(P)}),k.addEventListener("error",function Y(){URL.revokeObjectURL(P),k.removeEventListener("error",Y)})}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const k=self;k.postMessage({action:"loadImage",src:I}),k.addEventListener("message",function(F){F.data.action==="imageLoaded"&&F.data.src===I&&(c[T]={image:F.data.image,size:[F.data.image.width,F.data.image.height]})})}})}const f=OC(t.layers),g={},m=[],p={},v={},x=e3(t),E=Ok(t);let b;for(let T=0,L=f.length;T<L;++T){const I=f[T],P=I.id;if(typeof e=="string"&&I.source==e||Array.isArray(e)&&e.indexOf(P)!==-1){const k=I["source-layer"];if(b){if(I.source!==b)throw new Error(`Layer "${P}" does not use source "${b}`)}else{b=I.source;const F=t.sources[b];if(!F)throw new Error(`Source "${b}" is not defined`);const G=F.type;if(G!=="vector"&&G!=="geojson")throw new Error(`Source "${b}" is not of type "vector" or "geojson", but "${G}"`)}let Y=g[k];Y||(Y=[],g[k]=Y),Y.push({layer:I,index:T}),m.push(P)}}const M=new yr,w=new Zn,R=[],A=function(T,L,I){const P=i.getSource?.()?.format_?.layerName_??"mvt:layer",k=T.getProperties(),Y=g[k[P]];if(!Y)return;let F=n.indexOf(L);F==-1&&(F=Nv(L,n)),On.zoom=F,On.distanceFromCenter=0;const G=T.getGeometry(),K=Nk[G.getType()],$=i.get("map");if($&&$ instanceof Eh&&K===1){const U=$.getSize();if(U){const J=$.getView().getCenter(),st=Dn(G.getExtent());On.distanceFromCenter=zI(J,st)/L/U[1]}}const q={id:T.getId(),properties:k,type:K},D=i.get("mapbox-featurestate")[T.getId()];let j=-1;for(let U=0,J=Y.length;U<J;++U){const st=Y[U],O=st.layer,N=O.id;if(I!==void 0&&I!==N)continue;const it=O.layout||gs,at=O.paint||gs;if(it.visibility==="none"||"minzoom"in O&&F<O.minzoom||"maxzoom"in O&&F>=O.maxzoom)continue;const ct=O.filter;if(!ct||kk(N,ct,q,E)){let gt,yt,Gt,Mt,le,ft;const Xi=st.index;if(K==3&&(O.type=="fill"||O.type=="fill-extrusion"))if(yt=vt(O,"paint",O.type+"-opacity",q,x,D),O.type+"-pattern"in at){const ue=vt(O,"paint",O.type+"-pattern",q,x,D);if(ue){const Qt=typeof ue=="string"?n_(ue,k):ue.toString(),Xt=rw(Qt,c);if(s&&s[Qt]&&Xt){++j,ft=R[j],(!ft||!ft.getFill()||ft.getStroke()||ft.getText())&&(ft=new qi({fill:new Zn}),R[j]=ft),Gt=ft.getFill(),ft.setZIndex(Xi);const qt=Qt+"."+yt;let Ie=v[qt];if(!Ie){const Lt=s[Qt],kt=X0(Lt.width,Lt.height),He=kt.getContext("2d");He.globalAlpha=yt,He.drawImage(Xt.image,Lt.x,Lt.y,Lt.width,Lt.height,0,0,Lt.width,Lt.height),Ie=He.createPattern(kt,"repeat"),v[qt]=Ie}Gt.setColor(Ie)}}}else gt=ca(vt(O,"paint",O.type+"-color",q,x,D),yt),O.type+"-outline-color"in at&&(le=ca(vt(O,"paint",O.type+"-outline-color",q,x,D),yt)),le||(le=gt),(gt||le)&&(++j,ft=R[j],(!ft||gt&&!ft.getFill()||!gt&&ft.getFill()||le&&!ft.getStroke()||!le&&ft.getStroke()||ft.getText())&&(ft=new qi({fill:gt?new Zn:void 0,stroke:le?new yr:void 0}),R[j]=ft),gt&&(Gt=ft.getFill(),Gt.setColor(gt)),le&&(Mt=ft.getStroke(),Mt.setColor(le),Mt.setWidth(.5)),ft.setZIndex(Xi));if(K!=1&&O.type=="line"){"line-pattern"in at?gt=void 0:gt=ca(vt(O,"paint","line-color",q,x,D),vt(O,"paint","line-opacity",q,x,D));const ue=vt(O,"paint","line-width",q,x,D);gt&&ue>0&&(++j,ft=R[j],(!ft||!ft.getStroke()||ft.getFill()||ft.getText())&&(ft=new qi({stroke:new yr}),R[j]=ft),Mt=ft.getStroke(),Mt.setLineCap(vt(O,"layout","line-cap",q,x,D)),Mt.setLineJoin(vt(O,"layout","line-join",q,x,D)),Mt.setMiterLimit(vt(O,"layout","line-miter-limit",q,x,D)),Mt.setColor(gt),Mt.setWidth(ue),Mt.setLineDash(at["line-dasharray"]?vt(O,"paint","line-dasharray",q,x,D).map(function(Qt){return Qt*ue}):null),ft.setZIndex(Xi))}let mn=!1,wt=null,hi=0,$e,De,pn;if((K==1||K==2)&&"icon-image"in it){const ue=vt(O,"layout","icon-image",q,x,D);if(ue){$e=typeof ue=="string"?n_(ue,k):ue.toString();let Qt;const Xt=l?l(i,$e):void 0,qt=rw($e,c);if(s&&s[$e]&&qt||Xt){const Ie=vt(O,"layout","icon-rotation-alignment",q,x,D);if(K==2){const Lt=T.getGeometry();if(Lt.getFlatMidpoint||Lt.getFlatMidpoints){const kt=Lt.getExtent();if(Math.sqrt(Math.max(Math.pow((kt[2]-kt[0])/L,2),Math.pow((kt[3]-kt[1])/L,2)))>150){const we=Lt.getType()==="MultiLineString"?Lt.getFlatMidpoints():Lt.getFlatMidpoint();if(i_||(Bd=[NaN,NaN],i_=new Fi("Point",Bd,[],2,{},void 0)),Qt=i_,Bd[0]=we[0],Bd[1]=we[1],vt(O,"layout","symbol-placement",q,x,D)==="line"&&Ie==="map"){const Ge=Lt.getStride(),Kt=Lt.getFlatCoordinates();for(let pi=0,Se=Kt.length-Ge;pi<Se;pi+=Ge){const qe=Kt[pi],ke=Kt[pi+1],Zt=Kt[pi+Ge],fi=Kt[pi+Ge+1],In=Math.min(qe,Zt),Hs=Math.max(qe,Zt),Ve=we[0],ns=we[1],wi=(fi-ke)*(Ve-qe)-(Zt-qe)*(ns-ke);if(Math.abs(wi)<.001&&Ve<=Hs&&Ve>=In){hi=Math.atan2(ke-fi,Zt-qe);break}}}}}}if(K!==2||Qt){const Lt=vt(O,"layout","icon-size",q,x,D),kt=at["icon-color"]!==void 0?vt(O,"paint","icon-color",q,x,D):null;if(!kt||kt.a!==0){const He=vt(O,"paint","icon-halo-color",q,x,D),we=vt(O,"paint","icon-halo-width",q,x,D);let ve=`${$e}.${Lt}.${we}.${He}`;if(kt!==null&&(ve+=`.${kt}`),De=p[ve],!De){const Ge=sw(O,q,"icon",x);let Kt;"icon-offset"in it&&(Kt=vt(O,"layout","icon-offset",q,x,D).slice(0),Kt[0]*=Lt,Kt[1]*=-Lt);let pi=kt?[kt.r*255,kt.g*255,kt.b*255,kt.a]:void 0;if(Xt){const Se={color:pi,rotateWithView:Ie==="map",displacement:Kt,declutterMode:Ge,scale:Lt};typeof Xt=="string"?Se.src=Xt:(Se.img=Xt,Se.imgSize=[Xt.width,Xt.height]),De=new du(Se)}else{const Se=s[$e];let qe,ke,Zt;if(we)Se.sdf?(qe=ew(iw(qt.image,Se,kt||[0,0,0,1]),{x:0,y:0,width:Se.width,height:Se.height,pixelRatio:Se.pixelRatio},we,He),pi=void 0):qe=ew(qt.image,Se,we,He);else{if(Se.sdf&&!qt.unSDFed){const fi=iw(qt.image,{x:0,y:0,width:qt.size[0],height:qt.size[1]},{r:1,g:1,b:1});qt.image=fi,qt.unSDFed=!0}qe=qt.image,ke=[Se.width,Se.height],Zt=[Se.x,Se.y]}De=new du({color:pi,img:qe,imgSize:qt.size,size:ke,offset:Zt,rotateWithView:Ie==="map",scale:Lt/Se.pixelRatio,displacement:Kt,declutterMode:Ge})}p[ve]=De}}De&&(++j,ft=R[j],(!ft||!ft.getImage()||ft.getFill()||ft.getStroke())&&(ft=new qi,R[j]=ft),ft.setGeometry(Qt),De.setRotation(hi+t_(vt(O,"layout","icon-rotate",q,x,D))),De.setOpacity(vt(O,"paint","icon-opacity",q,x,D)),De.setAnchor(zk[vt(O,"layout","icon-anchor",q,x,D)]),ft.setImage(De),wt=ft.getText(),ft.setText(void 0),ft.setZIndex(Xi),mn=!0,pn=!1)}else pn=!0}}}if(K==1&&O.type==="circle"){++j,ft=R[j],(!ft||!ft.getImage()||ft.getFill()||ft.getStroke())&&(ft=new qi,R[j]=ft);const ue="circle-radius"in at?vt(O,"paint","circle-radius",q,x,D):5,Qt=ca(vt(O,"paint","circle-stroke-color",q,x,D),vt(O,"paint","circle-stroke-opacity",q,x,D)),Xt=vt(O,"paint","circle-translate",q,x,D),qt=ca(vt(O,"paint","circle-color",q,x,D),vt(O,"paint","circle-opacity",q,x,D)),Ie=vt(O,"paint","circle-stroke-width",q,x,D),Lt=ue+"."+Qt+"."+qt+"."+Ie+"."+Xt[0]+"."+Xt[1];De=p[Lt],De||(De=new $h({radius:ue,displacement:[Xt[0],-Xt[1]],stroke:Qt&&Ie>0?new yr({width:Ie,color:Qt}):void 0,fill:qt?new Zn({color:qt}):void 0,declutterMode:"none"}),p[Lt]=De),ft.setImage(De),wt=ft.getText(),ft.setText(void 0),ft.setGeometry(void 0),ft.setZIndex(Xi),mn=!0}let _e,Si,Li,Mi,Ee,Qe;if("text-field"in it){Mi=Math.round(vt(O,"layout","text-size",q,x,D));const ue=vt(O,"layout","text-font",q,x,D);Li=vt(O,"layout","text-line-height",q,x,D),Si=i1(o?o(ue,t.metadata?t.metadata["ol:webfonts"]:void 0):ue,Mi,Li),Si.includes("sans-serif")||(Si+=",sans-serif"),Ee=vt(O,"layout","text-letter-spacing",q,x,D),Qe=vt(O,"layout","text-max-width",q,x,D);const Qt=vt(O,"layout","text-field",q,x,D);typeof Qt=="object"&&Qt.sections?Qt.sections.length===1?_e=Qt.toString():_e=Qt.sections.reduce((Xt,qt,Ie)=>{const Lt=qt.fontStack?qt.fontStack.split(","):ue,kt=i1(o?o(Lt):Lt,Mi*(qt.scale||1),Li);let He=qt.text;if(He===`
`)return Xt.push(`
`,""),Xt;if(K==2)return Xt.push(n1(He,Ee),kt),Xt;He=s1(He,kt,Qe,Ee).split(`
`);for(let we=0,ve=He.length;we<ve;++we)we>0&&Xt.push(`
`,""),Xt.push(He[we],kt);return Xt},[]):_e=n_(Qt,k).trim(),yt=vt(O,"paint","text-opacity",q,x,D)}if(_e&&yt&&!pn){mn||(++j,ft=R[j],(!ft||!ft.getText()||ft.getFill()||ft.getStroke())&&(ft=new qi,R[j]=ft),ft.setImage(void 0),ft.setGeometry(void 0));const ue=sw(O,q,"text",x);ft.getText()||ft.setText(wt),wt=ft.getText(),(!wt||"getDeclutterMode"in wt&&wt.getDeclutterMode()!==ue)&&(wt=new w0({padding:[2,2,2,2],declutterMode:ue}),ft.setText(wt));const Qt=vt(O,"layout","text-transform",q,x,D);Qt=="uppercase"?_e=Array.isArray(_e)?_e.map((Zt,fi)=>fi%2?Zt:Zt.toUpperCase()):_e.toUpperCase():Qt=="lowercase"&&(_e=Array.isArray(_e)?_e.map((Zt,fi)=>fi%2?Zt:Zt.toLowerCase()):_e.toLowerCase());const Xt=Array.isArray(_e)?_e:K==2?n1(_e,Ee):s1(_e,Si,Qe,Ee);if(wt.setText(Xt),wt.setFont(Si),wt.setRotation(t_(vt(O,"layout","text-rotate",q,x,D))),typeof wt.setKeepUpright=="function"){const Zt=vt(O,"layout","text-keep-upright",q,x,D);wt.setKeepUpright(Zt)}const qt=vt(O,"layout","text-anchor",q,x,D),Ie=mn||K==1?"point":vt(O,"layout","symbol-placement",q,x,D);let Lt;if(Ie==="line-center"?(wt.setPlacement("line"),Lt="center"):wt.setPlacement(Ie),Ie==="line"&&typeof wt.setRepeat=="function"){const Zt=vt(O,"layout","symbol-spacing",q,x,D);wt.setRepeat(Zt*2)}wt.setOverflow(Ie==="point");let kt=vt(O,"paint","text-halo-width",q,x,D);const He=vt(O,"layout","text-offset",q,x,D),we=vt(O,"paint","text-translate",q,x,D);let ve=0,Ge=0;if(Ie=="point"){Lt="center",qt.indexOf("left")!==-1?(Lt="left",Ge=kt):qt.indexOf("right")!==-1&&(Lt="right",Ge=-kt);const Zt=vt(O,"layout","text-rotation-alignment",q,x,D);wt.setRotateWithView(Zt=="map")}else wt.setMaxAngle(t_(vt(O,"layout","text-max-angle",q,x,D))*_e.length/Xt.length),wt.setRotateWithView(!1);wt.setTextAlign(Lt);let Kt="middle";qt.indexOf("bottom")==0?(Kt="bottom",ve=-kt-.5*(Li-1)*Mi):qt.indexOf("top")==0&&(Kt="top",ve=kt+.5*(Li-1)*Mi),wt.setTextBaseline(Kt);const pi=vt(O,"layout","text-justify",q,x,D);wt.setJustify(pi==="auto"?void 0:pi),wt.setOffsetX(He[0]*Mi+Ge+we[0]),wt.setOffsetY(He[1]*Mi+ve+we[1]),w.setColor(ca(vt(O,"paint","text-color",q,x,D),yt)),wt.setFill(w);const Se=ca(vt(O,"paint","text-halo-color",q,x,D),yt);if(Se&&kt>0){M.setColor(Se),kt*=2;const Zt=.5*Mi;M.setWidth(kt<=Zt?kt:Zt),wt.setStroke(M)}else wt.setStroke(void 0);const qe=vt(O,"layout","text-padding",q,x,D),ke=wt.getPadding();qe!==ke[0]&&(ke[0]=qe,ke[1]=qe,ke[2]=qe,ke[3]=qe),ft.setZIndex(Xi)}}}if(j>-1)return R.length=j+1,R};return i.setStyle(A),i.set("mapbox-layers",m),i.set("mapbox-source",b),i.set("mapbox-featurestate",i.get("mapbox-featurestate")||{}),A}function Uk(i,t){const e=i[0],n=e.width,s=e.height,r=e.data,o=new Uint8ClampedArray(r.length),l=t.resolution*2,c=n-1,f=s-1,g=[0,0,0,0],m=2*Math.PI,p=Math.PI/2,v=Math.PI*t.sunEl/180,x=Math.PI*t.sunAz/180,E=Math.cos(v),b=Math.sin(v),M=t.highlightColor,w=t.shadowColor,R=t.accentColor,A=t.encoding;let T,L,I,P,k,Y,F,G,K,$,q,D,j,U,J,st,O,N,it,at,ct,gt;function yt(Gt,Mt="mapbox"){if(Mt==="mapbox")return(Gt[0]*256*256+Gt[1]*256+Gt[2])*.1-1e4;if(Mt==="terrarium")return Gt[0]*256+Gt[1]+Gt[2]/256-32768}for(L=0;L<=f;++L)for(k=L===0?0:L-1,Y=L===f?f:L+1,T=0;T<=c;++T)I=T===0?0:T-1,P=T===c?c:T+1,F=(L*n+I)*4,g[0]=r[F],g[1]=r[F+1],g[2]=r[F+2],g[3]=r[F+3],G=t.vert*yt(g,A),F=(L*n+P)*4,g[0]=r[F],g[1]=r[F+1],g[2]=r[F+2],g[3]=r[F+3],K=t.vert*yt(g,A),$=(K-G)/l,F=(k*n+T)*4,g[0]=r[F],g[1]=r[F+1],g[2]=r[F+2],g[3]=r[F+3],G=t.vert*yt(g,A),F=(Y*n+T)*4,g[0]=r[F],g[1]=r[F+1],g[2]=r[F+2],g[3]=r[F+3],K=t.vert*yt(g,A),q=(K-G)/l,j=Math.atan2(q,-$),j<0?j=p-j:j>p?j=m-j+p:j=p-j,D=Math.atan(Math.sqrt($*$+q*q)),gt=b*Math.cos(D)+E*Math.sin(D)*Math.cos(x-j),U=Math.cos(D),J=255*gt,it=Math.min(Math.max(2*t.sunEl,0),1),at=1.875-t.opacity*1.75,ct=t.opacity!==.5?p*((Math.pow(at,D)-1)/(Math.pow(at,p)-1)):D,O={r:(1-U)*R.r*it*255,g:(1-U)*R.g*it*255,b:(1-U)*R.b*it*255,a:(1-U)*R.a*it*255},st=Math.abs(((j+x)/Math.PI+.5)%2-1),N={r:(M.r*(1-st)+w.r*st)*J,g:(M.g*(1-st)+w.g*st)*J,b:(M.b*(1-st)+w.b*st)*J,a:(M.a*(1-st)+w.a*st)*J},F=(L*n+T)*4,o[F]=O.r*(1-st)+N.r,o[F+1]=O.g*(1-st)+N.g,o[F+2]=O.b*(1-st)+N.b,o[F+3]=r[F+3]*t.opacity*it*Math.sin(ct);return new ImageData(o,n,s)}function Hk(i,t=512){return i.getExtent()?uv({extent:i.getExtent(),tileSize:t,maxZoom:22}).getResolutions():Fs}function r3(i,t){return t.accessToken||(t=Object.assign({},t),new URL(i).searchParams.forEach((n,s)=>{t.accessToken=n,t.accessTokenParam=s})),t}function qk(i,t,e="",n={},s=void 0){let r,o,l,c,f=!0;return typeof e!="string"&&!Array.isArray(e)?(l=e,c=l.source||l.layers,n=l):c=e,typeof n=="string"?(r=n,l={}):(r=n.styleUrl,l=n),l.updateSource===!1&&(f=!1),s||(s=l.resolutions),!r&&typeof t=="string"&&!t.trim().startsWith("{")&&(r=t),r&&(r=r.startsWith("data:")?location.href:Zg(r,l.accessToken),l=r3(r,l)),new Promise(function(g,m){i3(t,l).then(function(p){if(p.version!=8)return m(new Error("glStyle version 8 required."));if(!(i instanceof bh||i instanceof Jc))return m(new Error("Can only apply to VectorLayer or VectorTileLayer"));const v=i instanceof Jc?"vector":"geojson";if(c?Array.isArray(c)?o=p.layers.find(function(A){return A.id===c[0]}).source:o=c:(o=p.layers.find(function(A){return A.source&&p.sources[A.source].type===v}).source,c=o),!o)return m(new Error(`No ${v} source found in the glStyle.`));function x(){if(!f)return Promise.resolve();if(i instanceof Jc)return l3(p.sources[o],r,l).then(function(I){const P=i.getSource();P?I!==P&&(P.setTileUrlFunction(I.getTileUrlFunction()),typeof P.setUrls=="function"&&typeof I.getUrls=="function"&&P.setUrls(I.getUrls()),P.format_||(P.format_=I.format_),P.getAttributions()||P.setAttributions(I.getAttributions()),P.getTileLoadFunction()===TC&&P.setTileLoadFunction(I.getTileLoadFunction()),ki(P.getProjection(),I.getProjection())&&(P.tileGrid=I.getTileGrid())):i.setSource(I);const k=i.getSource().getTileGrid();!isFinite(i.getMaxResolution())&&!isFinite(i.getMinZoom())&&k.getMinZoom()>0&&i.setMaxResolution(Uc(Math.max(0,k.getMinZoom()-1e-12),k.getResolutions()))});const A=p.sources[o];let T=i.getSource();(!T||T.get("mapbox-source")!==A)&&(T=h3(A,r,l));const L=i.getSource();return L?T!==L&&(L.getAttributions()||L.setAttributions(T.getAttributions()),L.format_||(L.format_=T.getFormat()),L.url_=T.getUrl()):i.setSource(T),Promise.resolve()}let E,b;const M={},w={};function R(){if(!b&&(!p.sprite||M)){if(l.projection&&!s){const I=ee(l.projection).getUnits();I!=="m"&&(s=Fs.map(P=>P/Mr[I]))}let A;const T=i.getSource();T instanceof cv&&T.format_ instanceof gC&&(A=T.format_.layerName_),b=Bk(i,p,c,s,M,w,(L,I=l.webfonts)=>Pk(L,I),l.getImage,A),i.getStyle()?x().then(g).catch(m):m(new Error(`Nothing to show for source [${o}]`))}else b?(i.setStyle(b),x().then(g).catch(m)):m(new Error("Something went wrong trying to apply style."))}if(p.sprite){const A=Tk(p.sprite,l.accessToken,r||location.href);E=ji?1:window.devicePixelRatio>=1.5?.5:1;const T=E==.5?"@2x":"";Promise.all(A.map(function(L){const I=new URL(L.url);let P=I.origin+I.pathname+T+".json"+I.search;return new Promise(function(k,Y){mu("Sprite",P,l).then(k).catch(function(F){P=I.origin+I.pathname+".json"+I.search,mu("Sprite",P,l).then(k).catch(Y)})}).then(function(k){k===void 0&&m(new Error("No sprites found."));let Y;if(Y=I.origin+I.pathname+T+".png"+I.search,l.transformRequest){const F=l.transformRequest(Y,"SpriteImage")||Y;(F instanceof Request||F instanceof Promise)&&(Y=F)}w[L.id]=Y;for(const F in k){const G=L.id=="default"?F:`${L.id}:${F}`;M[G]=k[F]}}).catch(function(k){m(new Error(`Sprites cannot be loaded: ${P}: ${k.message}`))})})).then(R).catch(m)}else R()}).catch(m)})}function a3(i,t){let e;return i.some(function(n){if(n.id==t)return e=n.source,!0}),e}function Vk(i,t){const e=i.bounds;if(e){const n=Cg([e[0],e[1]],t),s=Cg([e[2],e[3]],t);return[n[0],n[1],s[0],s[1]]}return ee(t).getExtent()}function o3(i,t,e){const n=new AC({tileJSON:t,tileSize:i.tileSize||t.tileSize||512}),s=n.getTileJSON(),r=n.getTileGrid(),o=ee(e.projection||"EPSG:3857"),l=Vk(s,o),c=o.getExtent(),f=s.minzoom||0,g=s.maxzoom||22,m={attributions:n.getAttributions(),projection:o,tileGrid:new A0({origin:c?Ar(c):r.getOrigin(0),extent:l||r.getExtent(),minZoom:f,resolutions:Hk(o,t.tileSize).slice(0,g+1),tileSize:r.getTileSize(0)})};return Array.isArray(s.tiles)?m.urls=s.tiles:m.url=s.tiles,m}function Yk(i,t,e,n){const s={id:i.id,type:i.type},r=i.layout||{},o=i.paint||{};s.paint=o,On.zoom=Nv(t,e.resolutions||Fs),On.distanceFromCenter=0;let l;const c=vt(s,"paint","background-color",gs,n);return o["background-opacity"]!==void 0&&(l=vt(s,"paint","background-opacity",gs,n)),r.visibility=="none"?void 0:ca(c,l)}function Xk(i,t,e){const n=ji?{style:{}}:document.createElement("div");return n.className="ol-mapbox-style-background",n.style.position="absolute",n.style.width="100%",n.style.height="100%",new Eu({source:new bu({}),render(s){const r=Yk(i,s.viewState.resolution,t,e);return n.style.backgroundColor=r,n}})}function l3(i,t,e){return new Promise(function(n,s){n3(i,t,e).then(function({tileJson:r,tileLoadFunction:o}){const l=o3(i,r,e);l.tileLoadFunction=o,l.format=new gC({layerName:"mvt:layer"});const c=new cv(l);c.set("mapbox-source",i),n(c)}).catch(s)})}function Wk(i,t,e){const n=new Jc({declutter:!0,visible:!1});return l3(i,t,e).then(function(s){n.setSource(s)}).catch(function(s){n.setSource(void 0)}),n}function u3(i){return`{bbox-${(i?i.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}function Kk(i,t,e){return new Promise(function(n,s){n3(i,t,e).then(function({tileJson:r,tileLoadFunction:o}){const l=new AC({interpolate:e.interpolate===void 0?!0:e.interpolate,transition:0,crossOrigin:"anonymous",tileJSON:r});l.tileGrid=o3(i,r,e).tileGrid,e.projection&&(l.projection=ee(e.projection));const c=l.getTileUrlFunction();o&&l.setTileLoadFunction(o),l.setTileUrlFunction(function(f,g,m){const p=u3(m);let v=c(f,g,m);if(v.indexOf(p)!=-1){const x=l.getTileGrid().getTileCoordExtent(f);v=v.replace(p,x.toString())}return v}),l.set("mapbox-source",i),n(l)}).catch(function(r){s(r)})})}function c3(i,t,e){const n=new bC;return Kk(i,t,e).then(function(s){n.setSource(s)}).catch(function(){n.setSource(void 0)}),n}function Zk(i,t,e){const n=c3(i,t,e);return new vC({source:new RC({operationType:"image",operation:Uk,sources:[n]})})}function h3(i,t,e){const n=e.projection?new Bg({dataProjection:e.projection}):new Bg,s=i.data,r={};if(typeof s=="string"){const[l]=cg(s,e.accessToken,e.accessTokenParam||"access_token",t||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(l)){const f=(m,p,v)=>{const x=u3(v);return l.replace(x,`${m.join(",")}`)},g=new Jl({attributions:i.attribution,format:n,loader:(m,p,v,x,E)=>{const b=typeof f=="function"?f(m,p,v):f;mu("GeoJSON",b,e).then(M=>{const w=g.getFormat().readFeatures(M,{featureProjection:v});g.addFeatures(w),x(w)}).catch(M=>{g.removeLoadedExtent(m),E()})},strategy:kP});return g.set("mapbox-source",i),g}const c=new Jl({attributions:i.attribution,format:n,url:l,loader:(f,g,m,p,v)=>{mu("GeoJSON",l,e).then(x=>{const E=c.getFormat().readFeatures(x,{featureProjection:m});c.addFeatures(E),p(E)}).catch(x=>{c.removeLoadedExtent(f),v()})}});return c}r.features=n.readFeatures(s,{featureProjection:"EPSG:3857"});const o=new Jl(Object.assign({attributions:i.attribution,format:n},r));return o.set("mapbox-source",i),o}function $k(i,t,e){return new bh({declutter:!0,source:h3(i,t,e),visible:!1})}function Qk(i,t,e){let n=null;return function(s){i.paint&&"raster-opacity"in i.paint&&s.frameState.viewState.zoom!==n&&(n=s.frameState.viewState.zoom,delete e[i.id],Jk(i,t,n,e))}}function Jk(i,t,e,n){On.zoom=e,On.distanceFromCenter=0;const s=vt(i,"paint","raster-opacity",gs,n);t.setOpacity(s)}function tF(i,t){function e(){const n=t.get("mapbox-style");if(!n)return;const s=OC(n.layers),r=i.get("mapbox-layers"),o=s.filter(function(l){return r.includes(l.id)}).some(function(l){return!l.layout||!l.layout.visibility||l.layout.visibility==="visible"});i.get("visible")!==o&&i.setVisible(o)}i.on("change",e),e()}function eF(i,t,e,n){const s=e3(i),r=i.layers,o=e.type,l=e.source||a3(r,e.ref),c=i.sources[l];let f;if(o=="background")f=Xk(e,n,s);else if(c.type=="vector")f=Wk(c,t,n);else if(c.type=="raster")f=c3(c,t,n),f.setVisible(e.layout?e.layout.visibility!=="none":!0),f.on("prerender",Qk(e,f,s));else if(c.type=="geojson")f=$k(c,t,n);else if(c.type=="raster-dem"&&e.type=="hillshade"){const m=Zk(c,t,n);f=m,m.getSource().on("beforeoperations",function(p){const v=p.data;v.resolution=lh(n.projection||"EPSG:3857",p.resolution,Dn(p.extent),"m"),On.zoom=Nv(p.resolution,n.resolutions||Fs),On.distanceFromCenter=0,v.encoding=c.encoding,v.vert=5*vt(e,"paint","hillshade-exaggeration",gs,s),v.sunAz=vt(e,"paint","hillshade-illumination-direction",gs,s),v.sunEl=35,v.opacity=.3,v.highlightColor=vt(e,"paint","hillshade-highlight-color",gs,s),v.shadowColor=vt(e,"paint","hillshade-shadow-color",gs,s),v.accentColor=vt(e,"paint","hillshade-accent-color",gs,s)}),f.setVisible(e.layout?e.layout.visibility!=="none":!0)}const g=l;return f&&f.set("mapbox-source",g),f}function aw(i,t,e,n){const s=[];let r=null;if(t instanceof Eh){if(r=t.getView(),!r.isDef()&&!r.getRotation()&&!r.getResolutions()){const m=n.projection?ee(n.projection):r.getProjection();r=new hs(Object.assign(r.getProperties(),{maxResolution:Fs[0]/Mr[m.getUnits()],projection:n.projection||r.getProjection()})),t.setView(r)}"center"in i&&!r.getCenter()&&r.setCenter(Cg(i.center,r.getProjection())),"zoom"in i&&r.getZoom()===void 0&&r.setResolution(Fs[0]/Mr[r.getProjection().getUnits()]/Math.pow(2,i.zoom)),(!r.getCenter()||r.getZoom()===void 0)&&r.fit(r.getProjection().getExtent(),{nearest:!0,size:t.getSize()})}t.set("mapbox-style",i),t.set("mapbox-metadata",{styleUrl:e,options:n});const o=i.layers;let l=[],c,f,g;for(let m=0,p=o.length;m<p;++m){const v=o[m],x=v.type;if(x=="heatmap"){console.debug(`layers[${m}].type "${x}" not supported`);continue}else g=v.source||a3(o,v.ref),(!g||g!=f)&&(l.length&&(s.push(lw(c,l,i,e,t,n)),l=[]),c=eF(i,e,v,n),c instanceof bh||c instanceof Jc||(l=[]),f=c.get("mapbox-source")),l.push(v.id)}return s.push(lw(c,l,i,e,t,n)),Promise.all(s)}function ow(i,t,e={}){let n,s;if(ji){if(!(i instanceof Eh)&&!(i instanceof Tr))throw new Error("ol-mapbox-style in a web worker requires a Map or a LayerGroup as first argument");s=i}else typeof i=="string"||i instanceof HTMLElement?s=new Eh({target:i}):s=i;if(typeof t=="string"){const r=t.startsWith("data:")?location.href:Zg(t,e.accessToken);e=r3(r,e),n=new Promise(function(o,l){i3(t,e).then(function(c){aw(c,s,r,e).then(function(){o(s)}).catch(l)}).catch(function(c){l(new Error(`Could not load ${t}: ${c.message}`))})})}else n=new Promise(function(r,o){aw(t,s,!e.styleUrl||e.styleUrl.startsWith("data:")?location.href:Zg(e.styleUrl,e.accessToken),e).then(function(){r(s)}).catch(o)});return n}function lw(i,t,e,n,s,r={}){let o=24,l=0;const c=e.layers;for(let f=0,g=c.length;f<g;++f){const m=c[f];t.indexOf(m.id)!==-1&&(o=Math.min("minzoom"in m?m.minzoom:0,o),l=Math.max("maxzoom"in m?m.maxzoom:24,l))}return new Promise(function(f,g){const m=function(){const v=i.getSource();if(!v||v.getState()==="error"){g(new Error("Error accessing data for source "+i.get("mapbox-source")));return}if("getTileGrid"in v){const x=v.getTileGrid();if(x){const E=x.getMinZoom();(o>0||E>0)&&i.setMaxResolution(Math.min(Uc(Math.max(0,o-1e-12),Fs),Uc(Math.max(0,E-1e-12),x.getResolutions()))),l<24&&i.setMinResolution(Uc(l,Fs))}}else o>0&&i.setMaxResolution(Uc(Math.max(0,o-1e-12),Fs));v instanceof Jl||v instanceof cv?qk(i,e,t,Object.assign({styleUrl:n},r)).then(function(){tF(i,s),f()}).catch(g):f()};i.set("mapbox-layers",t);const p=s.getLayers();p.getArray().indexOf(i)===-1&&p.push(i),i.getSource()?m():i.once("change:source",m)})}function of(i){return i+.5|0}const va=(i,t,e)=>Math.max(Math.min(i,e),t);function Hc(i){return va(of(i*2.55),0,255)}function Ta(i){return va(of(i*255),0,255)}function mr(i){return va(of(i/2.55)/100,0,1)}function uw(i){return va(of(i*100),0,100)}const Vn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},r1=[..."0123456789ABCDEF"],iF=i=>r1[i&15],nF=i=>r1[(i&240)>>4]+r1[i&15],Ud=i=>(i&240)>>4===(i&15),sF=i=>Ud(i.r)&&Ud(i.g)&&Ud(i.b)&&Ud(i.a);function rF(i){var t=i.length,e;return i[0]==="#"&&(t===4||t===5?e={r:255&Vn[i[1]]*17,g:255&Vn[i[2]]*17,b:255&Vn[i[3]]*17,a:t===5?Vn[i[4]]*17:255}:(t===7||t===9)&&(e={r:Vn[i[1]]<<4|Vn[i[2]],g:Vn[i[3]]<<4|Vn[i[4]],b:Vn[i[5]]<<4|Vn[i[6]],a:t===9?Vn[i[7]]<<4|Vn[i[8]]:255})),e}const aF=(i,t)=>i<255?t(i):"";function oF(i){var t=sF(i)?iF:nF;return i?"#"+t(i.r)+t(i.g)+t(i.b)+aF(i.a,t):void 0}const lF=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function f3(i,t,e){const n=t*Math.min(e,1-e),s=(r,o=(r+i/30)%12)=>e-n*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function uF(i,t,e){const n=(s,r=(s+i/60)%6)=>e-e*t*Math.max(Math.min(r,4-r,1),0);return[n(5),n(3),n(1)]}function cF(i,t,e){const n=f3(i,1,.5);let s;for(t+e>1&&(s=1/(t+e),t*=s,e*=s),s=0;s<3;s++)n[s]*=1-t-e,n[s]+=t;return n}function hF(i,t,e,n,s){return i===s?(t-e)/n+(t<e?6:0):t===s?(e-i)/n+2:(i-t)/n+4}function zv(i){const e=i.r/255,n=i.g/255,s=i.b/255,r=Math.max(e,n,s),o=Math.min(e,n,s),l=(r+o)/2;let c,f,g;return r!==o&&(g=r-o,f=l>.5?g/(2-r-o):g/(r+o),c=hF(e,n,s,g,r),c=c*60+.5),[c|0,f||0,l]}function Gv(i,t,e,n){return(Array.isArray(t)?i(t[0],t[1],t[2]):i(t,e,n)).map(Ta)}function kv(i,t,e){return Gv(f3,i,t,e)}function fF(i,t,e){return Gv(cF,i,t,e)}function dF(i,t,e){return Gv(uF,i,t,e)}function d3(i){return(i%360+360)%360}function gF(i){const t=lF.exec(i);let e=255,n;if(!t)return;t[5]!==n&&(e=t[6]?Hc(+t[5]):Ta(+t[5]));const s=d3(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?n=fF(s,r,o):t[1]==="hsv"?n=dF(s,r,o):n=kv(s,r,o),{r:n[0],g:n[1],b:n[2],a:e}}function mF(i,t){var e=zv(i);e[0]=d3(e[0]+t),e=kv(e),i.r=e[0],i.g=e[1],i.b=e[2]}function pF(i){if(!i)return;const t=zv(i),e=t[0],n=uw(t[1]),s=uw(t[2]);return i.a<255?`hsla(${e}, ${n}%, ${s}%, ${mr(i.a)})`:`hsl(${e}, ${n}%, ${s}%)`}const cw={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},hw={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function yF(){const i={},t=Object.keys(hw),e=Object.keys(cw);let n,s,r,o,l;for(n=0;n<t.length;n++){for(o=l=t[n],s=0;s<e.length;s++)r=e[s],l=l.replace(r,cw[r]);r=parseInt(hw[o],16),i[l]=[r>>16&255,r>>8&255,r&255]}return i}let Hd;function _F(i){Hd||(Hd=yF(),Hd.transparent=[0,0,0,0]);const t=Hd[i.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const vF=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function xF(i){const t=vF.exec(i);let e=255,n,s,r;if(t){if(t[7]!==n){const o=+t[7];e=t[8]?Hc(o):va(o*255,0,255)}return n=+t[1],s=+t[3],r=+t[5],n=255&(t[2]?Hc(n):va(n,0,255)),s=255&(t[4]?Hc(s):va(s,0,255)),r=255&(t[6]?Hc(r):va(r,0,255)),{r:n,g:s,b:r,a:e}}}function bF(i){return i&&(i.a<255?`rgba(${i.r}, ${i.g}, ${i.b}, ${mr(i.a)})`:`rgb(${i.r}, ${i.g}, ${i.b})`)}const s_=i=>i<=.0031308?i*12.92:Math.pow(i,1/2.4)*1.055-.055,Nl=i=>i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4);function EF(i,t,e){const n=Nl(mr(i.r)),s=Nl(mr(i.g)),r=Nl(mr(i.b));return{r:Ta(s_(n+e*(Nl(mr(t.r))-n))),g:Ta(s_(s+e*(Nl(mr(t.g))-s))),b:Ta(s_(r+e*(Nl(mr(t.b))-r))),a:i.a+e*(t.a-i.a)}}function qd(i,t,e){if(i){let n=zv(i);n[t]=Math.max(0,Math.min(n[t]+n[t]*e,t===0?360:1)),n=kv(n),i.r=n[0],i.g=n[1],i.b=n[2]}}function g3(i,t){return i&&Object.assign(t||{},i)}function fw(i){var t={r:0,g:0,b:0,a:255};return Array.isArray(i)?i.length>=3&&(t={r:i[0],g:i[1],b:i[2],a:255},i.length>3&&(t.a=Ta(i[3]))):(t=g3(i,{r:0,g:0,b:0,a:1}),t.a=Ta(t.a)),t}function SF(i){return i.charAt(0)==="r"?xF(i):gF(i)}class Oh{constructor(t){if(t instanceof Oh)return t;const e=typeof t;let n;e==="object"?n=fw(t):e==="string"&&(n=rF(t)||_F(t)||SF(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=g3(this._rgb);return t&&(t.a=mr(t.a)),t}set rgb(t){this._rgb=fw(t)}rgbString(){return this._valid?bF(this._rgb):void 0}hexString(){return this._valid?oF(this._rgb):void 0}hslString(){return this._valid?pF(this._rgb):void 0}mix(t,e){if(t){const n=this.rgb,s=t.rgb;let r;const o=e===r?.5:e,l=2*o-1,c=n.a-s.a,f=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;r=1-f,n.r=255&f*n.r+r*s.r+.5,n.g=255&f*n.g+r*s.g+.5,n.b=255&f*n.b+r*s.b+.5,n.a=o*n.a+(1-o)*s.a,this.rgb=n}return this}interpolate(t,e){return t&&(this._rgb=EF(this._rgb,t._rgb,e)),this}clone(){return new Oh(this.rgb)}alpha(t){return this._rgb.a=Ta(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=of(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return qd(this._rgb,2,t),this}darken(t){return qd(this._rgb,2,-t),this}saturate(t){return qd(this._rgb,1,t),this}desaturate(t){return qd(this._rgb,1,-t),this}rotate(t){return mF(this._rgb,t),this}}function cr(){}const MF=(()=>{let i=0;return()=>i++})();function Be(i){return i==null}function Ei(i){if(Array.isArray&&Array.isArray(i))return!0;const t=Object.prototype.toString.call(i);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function $t(i){return i!==null&&Object.prototype.toString.call(i)==="[object Object]"}function es(i){return(typeof i=="number"||i instanceof Number)&&isFinite(+i)}function ws(i,t){return es(i)?i:t}function oe(i,t){return typeof i>"u"?t:i}const wF=(i,t)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100:+i/t,m3=(i,t)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100*t:+i;function Ae(i,t,e){if(i&&typeof i.call=="function")return i.apply(e,t)}function de(i,t,e,n){let s,r,o;if(Ei(i))for(r=i.length,s=0;s<r;s++)t.call(e,i[s],s);else if($t(i))for(o=Object.keys(i),r=o.length,s=0;s<r;s++)t.call(e,i[o[s]],o[s])}function Qg(i,t){let e,n,s,r;if(!i||!t||i.length!==t.length)return!1;for(e=0,n=i.length;e<n;++e)if(s=i[e],r=t[e],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function Jg(i){if(Ei(i))return i.map(Jg);if($t(i)){const t=Object.create(null),e=Object.keys(i),n=e.length;let s=0;for(;s<n;++s)t[e[s]]=Jg(i[e[s]]);return t}return i}function p3(i){return["__proto__","prototype","constructor"].indexOf(i)===-1}function TF(i,t,e,n){if(!p3(i))return;const s=t[i],r=e[i];$t(s)&&$t(r)?Dh(s,r,n):t[i]=Jg(r)}function Dh(i,t,e){const n=Ei(t)?t:[t],s=n.length;if(!$t(i))return i;e=e||{};const r=e.merger||TF;let o;for(let l=0;l<s;++l){if(o=n[l],!$t(o))continue;const c=Object.keys(o);for(let f=0,g=c.length;f<g;++f)r(c[f],i,o,e)}return i}function eh(i,t){return Dh(i,t,{merger:CF})}function CF(i,t,e){if(!p3(i))return;const n=t[i],s=e[i];$t(n)&&$t(s)?eh(n,s):Object.prototype.hasOwnProperty.call(t,i)||(t[i]=Jg(s))}const dw={"":i=>i,x:i=>i.x,y:i=>i.y};function RF(i){const t=i.split("."),e=[];let n="";for(const s of t)n+=s,n.endsWith("\\")?n=n.slice(0,-1)+".":(e.push(n),n="");return e}function AF(i){const t=RF(i);return e=>{for(const n of t){if(n==="")break;e=e&&e[n]}return e}}function Ih(i,t){return(dw[t]||(dw[t]=AF(t)))(i)}function Fv(i){return i.charAt(0).toUpperCase()+i.slice(1)}const t0=i=>typeof i<"u",Oa=i=>typeof i=="function",gw=(i,t)=>{if(i.size!==t.size)return!1;for(const e of i)if(!t.has(e))return!1;return!0};function OF(i){return i.type==="mouseup"||i.type==="click"||i.type==="contextmenu"}const be=Math.PI,ci=2*be,e0=Number.POSITIVE_INFINITY,DF=be/180,mi=be/2,io=be/4,mw=be*2/3,y3=Math.log10,i0=Math.sign;function hg(i,t,e){return Math.abs(i-t)<e}function pw(i){const t=Math.round(i);i=hg(i,t,i/1e3)?t:i;const e=Math.pow(10,Math.floor(y3(i))),n=i/e;return(n<=1?1:n<=2?2:n<=5?5:10)*e}function IF(i){const t=[],e=Math.sqrt(i);let n;for(n=1;n<e;n++)i%n===0&&(t.push(n),t.push(i/n));return e===(e|0)&&t.push(e),t.sort((s,r)=>s-r).pop(),t}function LF(i){return typeof i=="symbol"||typeof i=="object"&&i!==null&&!(Symbol.toPrimitive in i||"toString"in i||"valueOf"in i)}function n0(i){return!LF(i)&&!isNaN(parseFloat(i))&&isFinite(i)}function PF(i,t){const e=Math.round(i);return e-t<=i&&e+t>=i}function NF(i,t,e){let n,s,r;for(n=0,s=i.length;n<s;n++)r=i[n][e],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function _r(i){return i*(be/180)}function zF(i){return i*(180/be)}function yw(i){if(!es(i))return;let t=1,e=0;for(;Math.round(i*t)/t!==i;)t*=10,e++;return e}function _3(i,t){const e=t.x-i.x,n=t.y-i.y,s=Math.sqrt(e*e+n*n);let r=Math.atan2(n,e);return r<-.5*be&&(r+=ci),{angle:r,distance:s}}function GF(i,t){return Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2))}function As(i){return(i%ci+ci)%ci}function s0(i,t,e,n){const s=As(i),r=As(t),o=As(e),l=As(r-s),c=As(o-s),f=As(s-r),g=As(s-o);return s===r||s===o||n&&r===o||l>c&&f<g}function fn(i,t,e){return Math.max(t,Math.min(e,i))}function kF(i){return fn(i,-32768,32767)}function yo(i,t,e,n=1e-6){return i>=Math.min(t,e)-n&&i<=Math.max(t,e)+n}function jv(i,t,e){e=e||(o=>i[o]<t);let n=i.length-1,s=0,r;for(;n-s>1;)r=s+n>>1,e(r)?s=r:n=r;return{lo:s,hi:n}}const a1=(i,t,e,n)=>jv(i,e,n?s=>{const r=i[s][t];return r<e||r===e&&i[s+1][t]===e}:s=>i[s][t]<e),FF=(i,t,e)=>jv(i,e,n=>i[n][t]>=e);function jF(i,t,e){let n=0,s=i.length;for(;n<s&&i[n]<t;)n++;for(;s>n&&i[s-1]>e;)s--;return n>0||s<i.length?i.slice(n,s):i}const v3=["push","pop","shift","splice","unshift"];function BF(i,t){if(i._chartjs){i._chartjs.listeners.push(t);return}Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),v3.forEach(e=>{const n="_onData"+Fv(e),s=i[e];Object.defineProperty(i,e,{configurable:!0,enumerable:!1,value(...r){const o=s.apply(this,r);return i._chartjs.listeners.forEach(l=>{typeof l[n]=="function"&&l[n](...r)}),o}})})}function _w(i,t){const e=i._chartjs;if(!e)return;const n=e.listeners,s=n.indexOf(t);s!==-1&&n.splice(s,1),!(n.length>0)&&(v3.forEach(r=>{delete i[r]}),delete i._chartjs)}function UF(i){const t=new Set(i);return t.size===i.length?i:Array.from(t)}const x3=(function(){return typeof window>"u"?function(i){return i()}:window.requestAnimationFrame})();function b3(i,t){let e=[],n=!1;return function(...s){e=s,n||(n=!0,x3.call(window,()=>{n=!1,i.apply(t,e)}))}}function HF(i,t){let e;return function(...n){return t?(clearTimeout(e),e=setTimeout(i,t,n)):i.apply(this,n),t}}const Bv=i=>i==="start"?"left":i==="end"?"right":"center",zi=(i,t,e)=>i==="start"?t:i==="end"?e:(t+e)/2,qF=(i,t,e,n)=>i===(n?"left":"right")?e:i==="center"?(t+e)/2:t,Vd=i=>i===0||i===1,vw=(i,t,e)=>-(Math.pow(2,10*(i-=1))*Math.sin((i-t)*ci/e)),xw=(i,t,e)=>Math.pow(2,-10*i)*Math.sin((i-t)*ci/e)+1,ih={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>-i*(i-2),easeInOutQuad:i=>(i/=.5)<1?.5*i*i:-.5*(--i*(i-2)-1),easeInCubic:i=>i*i*i,easeOutCubic:i=>(i-=1)*i*i+1,easeInOutCubic:i=>(i/=.5)<1?.5*i*i*i:.5*((i-=2)*i*i+2),easeInQuart:i=>i*i*i*i,easeOutQuart:i=>-((i-=1)*i*i*i-1),easeInOutQuart:i=>(i/=.5)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2),easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>(i-=1)*i*i*i*i+1,easeInOutQuint:i=>(i/=.5)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2),easeInSine:i=>-Math.cos(i*mi)+1,easeOutSine:i=>Math.sin(i*mi),easeInOutSine:i=>-.5*(Math.cos(be*i)-1),easeInExpo:i=>i===0?0:Math.pow(2,10*(i-1)),easeOutExpo:i=>i===1?1:-Math.pow(2,-10*i)+1,easeInOutExpo:i=>Vd(i)?i:i<.5?.5*Math.pow(2,10*(i*2-1)):.5*(-Math.pow(2,-10*(i*2-1))+2),easeInCirc:i=>i>=1?i:-(Math.sqrt(1-i*i)-1),easeOutCirc:i=>Math.sqrt(1-(i-=1)*i),easeInOutCirc:i=>(i/=.5)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1),easeInElastic:i=>Vd(i)?i:vw(i,.075,.3),easeOutElastic:i=>Vd(i)?i:xw(i,.075,.3),easeInOutElastic(i){return Vd(i)?i:i<.5?.5*vw(i*2,.1125,.45):.5+.5*xw(i*2-1,.1125,.45)},easeInBack(i){return i*i*((1.70158+1)*i-1.70158)},easeOutBack(i){return(i-=1)*i*((1.70158+1)*i+1.70158)+1},easeInOutBack(i){let t=1.70158;return(i/=.5)<1?.5*(i*i*(((t*=1.525)+1)*i-t)):.5*((i-=2)*i*(((t*=1.525)+1)*i+t)+2)},easeInBounce:i=>1-ih.easeOutBounce(1-i),easeOutBounce(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},easeInOutBounce:i=>i<.5?ih.easeInBounce(i*2)*.5:ih.easeOutBounce(i*2-1)*.5+.5};function E3(i){if(i&&typeof i=="object"){const t=i.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function bw(i){return E3(i)?i:new Oh(i)}function r_(i){return E3(i)?i:new Oh(i).saturate(.5).darken(.1).hexString()}const VF=["x","y","borderWidth","radius","tension"],YF=["color","borderColor","backgroundColor"];function XF(i){i.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),i.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),i.set("animations",{colors:{type:"color",properties:YF},numbers:{type:"number",properties:VF}}),i.describe("animations",{_fallback:"animation"}),i.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function WF(i){i.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Ew=new Map;function KF(i,t){t=t||{};const e=i+JSON.stringify(t);let n=Ew.get(e);return n||(n=new Intl.NumberFormat(i,t),Ew.set(e,n)),n}function Uv(i,t,e){return KF(t,e).format(i)}const ZF={values(i){return Ei(i)?i:""+i},numeric(i,t,e){if(i===0)return"0";const n=this.chart.options.locale;let s,r=i;if(e.length>1){const f=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(f<1e-4||f>1e15)&&(s="scientific"),r=$F(i,e)}const o=y3(Math.abs(r)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:s,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),Uv(i,n,c)}};function $F(i,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&i!==Math.floor(i)&&(e=i-Math.floor(i)),e}var S3={formatters:ZF};function QF(i){i.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:S3.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),i.route("scale.ticks","color","","color"),i.route("scale.grid","color","","borderColor"),i.route("scale.border","color","","borderColor"),i.route("scale.title","color","","color"),i.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),i.describe("scales",{_fallback:"scale"}),i.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Po=Object.create(null),o1=Object.create(null);function nh(i,t){if(!t)return i;const e=t.split(".");for(let n=0,s=e.length;n<s;++n){const r=e[n];i=i[r]||(i[r]=Object.create(null))}return i}function a_(i,t,e){return typeof t=="string"?Dh(nh(i,t),e):Dh(nh(i,""),t)}class JF{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,s)=>r_(s.backgroundColor),this.hoverBorderColor=(n,s)=>r_(s.borderColor),this.hoverColor=(n,s)=>r_(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return a_(this,t,e)}get(t){return nh(this,t)}describe(t,e){return a_(o1,t,e)}override(t,e){return a_(Po,t,e)}route(t,e,n,s){const r=nh(this,t),o=nh(this,n),l="_"+e;Object.defineProperties(r,{[l]:{value:r[e],writable:!0},[e]:{enumerable:!0,get(){const c=this[l],f=o[s];return $t(c)?Object.assign({},f,c):oe(c,f)},set(c){this[l]=c}}})}apply(t){t.forEach(e=>e(this))}}var ii=new JF({_scriptable:i=>!i.startsWith("on"),_indexable:i=>i!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[XF,WF,QF]);function tj(i){return!i||Be(i.size)||Be(i.family)?null:(i.style?i.style+" ":"")+(i.weight?i.weight+" ":"")+i.size+"px "+i.family}function Sw(i,t,e,n,s){let r=t[s];return r||(r=t[s]=i.measureText(s).width,e.push(s)),r>n&&(n=r),n}function no(i,t,e){const n=i.currentDevicePixelRatio,s=e!==0?Math.max(e/2,.5):0;return Math.round((t-s)*n)/n+s}function Mw(i,t){!t&&!i||(t=t||i.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,i.width,i.height),t.restore())}function ww(i,t,e,n){M3(i,t,e,n,null)}function M3(i,t,e,n,s){let r,o,l,c,f,g,m,p;const v=t.pointStyle,x=t.rotation,E=t.radius;let b=(x||0)*DF;if(v&&typeof v=="object"&&(r=v.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){i.save(),i.translate(e,n),i.rotate(b),i.drawImage(v,-v.width/2,-v.height/2,v.width,v.height),i.restore();return}if(!(isNaN(E)||E<=0)){switch(i.beginPath(),v){default:s?i.ellipse(e,n,s/2,E,0,0,ci):i.arc(e,n,E,0,ci),i.closePath();break;case"triangle":g=s?s/2:E,i.moveTo(e+Math.sin(b)*g,n-Math.cos(b)*E),b+=mw,i.lineTo(e+Math.sin(b)*g,n-Math.cos(b)*E),b+=mw,i.lineTo(e+Math.sin(b)*g,n-Math.cos(b)*E),i.closePath();break;case"rectRounded":f=E*.516,c=E-f,o=Math.cos(b+io)*c,m=Math.cos(b+io)*(s?s/2-f:c),l=Math.sin(b+io)*c,p=Math.sin(b+io)*(s?s/2-f:c),i.arc(e-m,n-l,f,b-be,b-mi),i.arc(e+p,n-o,f,b-mi,b),i.arc(e+m,n+l,f,b,b+mi),i.arc(e-p,n+o,f,b+mi,b+be),i.closePath();break;case"rect":if(!x){c=Math.SQRT1_2*E,g=s?s/2:c,i.rect(e-g,n-c,2*g,2*c);break}b+=io;case"rectRot":m=Math.cos(b)*(s?s/2:E),o=Math.cos(b)*E,l=Math.sin(b)*E,p=Math.sin(b)*(s?s/2:E),i.moveTo(e-m,n-l),i.lineTo(e+p,n-o),i.lineTo(e+m,n+l),i.lineTo(e-p,n+o),i.closePath();break;case"crossRot":b+=io;case"cross":m=Math.cos(b)*(s?s/2:E),o=Math.cos(b)*E,l=Math.sin(b)*E,p=Math.sin(b)*(s?s/2:E),i.moveTo(e-m,n-l),i.lineTo(e+m,n+l),i.moveTo(e+p,n-o),i.lineTo(e-p,n+o);break;case"star":m=Math.cos(b)*(s?s/2:E),o=Math.cos(b)*E,l=Math.sin(b)*E,p=Math.sin(b)*(s?s/2:E),i.moveTo(e-m,n-l),i.lineTo(e+m,n+l),i.moveTo(e+p,n-o),i.lineTo(e-p,n+o),b+=io,m=Math.cos(b)*(s?s/2:E),o=Math.cos(b)*E,l=Math.sin(b)*E,p=Math.sin(b)*(s?s/2:E),i.moveTo(e-m,n-l),i.lineTo(e+m,n+l),i.moveTo(e+p,n-o),i.lineTo(e-p,n+o);break;case"line":o=s?s/2:Math.cos(b)*E,l=Math.sin(b)*E,i.moveTo(e-o,n-l),i.lineTo(e+o,n+l);break;case"dash":i.moveTo(e,n),i.lineTo(e+Math.cos(b)*(s?s/2:E),n+Math.sin(b)*E);break;case!1:i.closePath();break}i.fill(),t.borderWidth>0&&i.stroke()}}function w3(i,t,e){return e=e||.5,!t||i&&i.x>t.left-e&&i.x<t.right+e&&i.y>t.top-e&&i.y<t.bottom+e}function Hv(i,t){i.save(),i.beginPath(),i.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),i.clip()}function qv(i){i.restore()}function ej(i,t){t.translation&&i.translate(t.translation[0],t.translation[1]),Be(t.rotation)||i.rotate(t.rotation),t.color&&(i.fillStyle=t.color),t.textAlign&&(i.textAlign=t.textAlign),t.textBaseline&&(i.textBaseline=t.textBaseline)}function ij(i,t,e,n,s){if(s.strikethrough||s.underline){const r=i.measureText(n),o=t-r.actualBoundingBoxLeft,l=t+r.actualBoundingBoxRight,c=e-r.actualBoundingBoxAscent,f=e+r.actualBoundingBoxDescent,g=s.strikethrough?(c+f)/2:f;i.strokeStyle=i.fillStyle,i.beginPath(),i.lineWidth=s.decorationWidth||2,i.moveTo(o,g),i.lineTo(l,g),i.stroke()}}function nj(i,t){const e=i.fillStyle;i.fillStyle=t.color,i.fillRect(t.left,t.top,t.width,t.height),i.fillStyle=e}function Lh(i,t,e,n,s,r={}){const o=Ei(t)?t:[t],l=r.strokeWidth>0&&r.strokeColor!=="";let c,f;for(i.save(),i.font=s.string,ej(i,r),c=0;c<o.length;++c)f=o[c],r.backdrop&&nj(i,r.backdrop),l&&(r.strokeColor&&(i.strokeStyle=r.strokeColor),Be(r.strokeWidth)||(i.lineWidth=r.strokeWidth),i.strokeText(f,e,n,r.maxWidth)),i.fillText(f,e,n,r.maxWidth),ij(i,e,n,f,r),n+=Number(s.lineHeight);i.restore()}function r0(i,t){const{x:e,y:n,w:s,h:r,radius:o}=t;i.arc(e+o.topLeft,n+o.topLeft,o.topLeft,1.5*be,be,!0),i.lineTo(e,n+r-o.bottomLeft),i.arc(e+o.bottomLeft,n+r-o.bottomLeft,o.bottomLeft,be,mi,!0),i.lineTo(e+s-o.bottomRight,n+r),i.arc(e+s-o.bottomRight,n+r-o.bottomRight,o.bottomRight,mi,0,!0),i.lineTo(e+s,n+o.topRight),i.arc(e+s-o.topRight,n+o.topRight,o.topRight,0,-mi,!0),i.lineTo(e+o.topLeft,n)}const sj=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,rj=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function aj(i,t){const e=(""+i).match(sj);if(!e||e[1]==="normal")return t*1.2;switch(i=+e[2],e[3]){case"px":return i;case"%":i/=100;break}return t*i}const oj=i=>+i||0;function Vv(i,t){const e={},n=$t(t),s=n?Object.keys(t):t,r=$t(i)?n?o=>oe(i[o],i[t[o]]):o=>i[o]:()=>i;for(const o of s)e[o]=oj(r(o));return e}function T3(i){return Vv(i,{top:"y",right:"x",bottom:"y",left:"x"})}function su(i){return Vv(i,["topLeft","topRight","bottomLeft","bottomRight"])}function is(i){const t=T3(i);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Ui(i,t){i=i||{},t=t||ii.font;let e=oe(i.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let n=oe(i.style,t.style);n&&!(""+n).match(rj)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const s={family:oe(i.family,t.family),lineHeight:aj(oe(i.lineHeight,t.lineHeight),e),size:e,style:n,weight:oe(i.weight,t.weight),string:""};return s.string=tj(s),s}function Yd(i,t,e,n){let s,r,o;for(s=0,r=i.length;s<r;++s)if(o=i[s],o!==void 0&&o!==void 0)return o}function lj(i,t,e){const{min:n,max:s}=i,r=m3(t,(s-n)/2),o=(l,c)=>e&&l===0?0:l+c;return{min:o(n,-Math.abs(r)),max:o(s,r)}}function wu(i,t){return Object.assign(Object.create(i),t)}function Yv(i,t=[""],e,n,s=()=>i[0]){const r=e||i;typeof n>"u"&&(n=O3("_fallback",i));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:i,_rootScopes:r,_fallback:n,_getTarget:s,override:l=>Yv([l,...i],t,r,n)};return new Proxy(o,{deleteProperty(l,c){return delete l[c],delete l._keys,delete i[0][c],!0},get(l,c){return R3(l,c,()=>pj(c,t,i,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(i[0])},has(l,c){return Cw(l).includes(c)},ownKeys(l){return Cw(l)},set(l,c,f){const g=l._storage||(l._storage=s());return l[c]=g[c]=f,delete l._keys,!0}})}function pu(i,t,e,n){const s={_cacheable:!1,_proxy:i,_context:t,_subProxy:e,_stack:new Set,_descriptors:C3(i,n),setContext:r=>pu(i,r,e,n),override:r=>pu(i.override(r),t,e,n)};return new Proxy(s,{deleteProperty(r,o){return delete r[o],delete i[o],!0},get(r,o,l){return R3(r,o,()=>cj(r,o,l))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(i,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(i,o)},getPrototypeOf(){return Reflect.getPrototypeOf(i)},has(r,o){return Reflect.has(i,o)},ownKeys(){return Reflect.ownKeys(i)},set(r,o,l){return i[o]=l,delete r[o],!0}})}function C3(i,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:n=t.indexable,_allKeys:s=t.allKeys}=i;return{allKeys:s,scriptable:e,indexable:n,isScriptable:Oa(e)?e:()=>e,isIndexable:Oa(n)?n:()=>n}}const uj=(i,t)=>i?i+Fv(t):t,Xv=(i,t)=>$t(t)&&i!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function R3(i,t,e){if(Object.prototype.hasOwnProperty.call(i,t)||t==="constructor")return i[t];const n=e();return i[t]=n,n}function cj(i,t,e){const{_proxy:n,_context:s,_subProxy:r,_descriptors:o}=i;let l=n[t];return Oa(l)&&o.isScriptable(t)&&(l=hj(t,l,i,e)),Ei(l)&&l.length&&(l=fj(t,l,i,o.isIndexable)),Xv(t,l)&&(l=pu(l,s,r&&r[t],o)),l}function hj(i,t,e,n){const{_proxy:s,_context:r,_subProxy:o,_stack:l}=e;if(l.has(i))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+i);l.add(i);let c=t(r,o||n);return l.delete(i),Xv(i,c)&&(c=Wv(s._scopes,s,i,c)),c}function fj(i,t,e,n){const{_proxy:s,_context:r,_subProxy:o,_descriptors:l}=e;if(typeof r.index<"u"&&n(i))return t[r.index%t.length];if($t(t[0])){const c=t,f=s._scopes.filter(g=>g!==c);t=[];for(const g of c){const m=Wv(f,s,i,g);t.push(pu(m,r,o&&o[i],l))}}return t}function A3(i,t,e){return Oa(i)?i(t,e):i}const dj=(i,t)=>i===!0?t:typeof i=="string"?Ih(t,i):void 0;function gj(i,t,e,n,s){for(const r of t){const o=dj(e,r);if(o){i.add(o);const l=A3(o._fallback,e,s);if(typeof l<"u"&&l!==e&&l!==n)return l}else if(o===!1&&typeof n<"u"&&e!==n)return null}return!1}function Wv(i,t,e,n){const s=t._rootScopes,r=A3(t._fallback,e,n),o=[...i,...s],l=new Set;l.add(n);let c=Tw(l,o,e,r||e,n);return c===null||typeof r<"u"&&r!==e&&(c=Tw(l,o,r,c,n),c===null)?!1:Yv(Array.from(l),[""],s,r,()=>mj(t,e,n))}function Tw(i,t,e,n,s){for(;e;)e=gj(i,t,e,n,s);return e}function mj(i,t,e){const n=i._getTarget();t in n||(n[t]={});const s=n[t];return Ei(s)&&$t(e)?e:s||{}}function pj(i,t,e,n){let s;for(const r of t)if(s=O3(uj(r,i),e),typeof s<"u")return Xv(i,s)?Wv(e,n,i,s):s}function O3(i,t){for(const e of t){if(!e)continue;const n=e[i];if(typeof n<"u")return n}}function Cw(i){let t=i._keys;return t||(t=i._keys=yj(i._scopes)),t}function yj(i){const t=new Set;for(const e of i)for(const n of Object.keys(e).filter(s=>!s.startsWith("_")))t.add(n);return Array.from(t)}function Kv(){return typeof window<"u"&&typeof document<"u"}function Zv(i){let t=i.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function a0(i,t,e){let n;return typeof i=="string"?(n=parseInt(i,10),i.indexOf("%")!==-1&&(n=n/100*t.parentNode[e])):n=i,n}const W0=i=>i.ownerDocument.defaultView.getComputedStyle(i,null);function _j(i,t){return W0(i).getPropertyValue(t)}const vj=["top","right","bottom","left"];function Mo(i,t,e){const n={};e=e?"-"+e:"";for(let s=0;s<4;s++){const r=vj[s];n[r]=parseFloat(i[t+"-"+r+e])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const xj=(i,t,e)=>(i>0||t>0)&&(!e||!e.shadowRoot);function bj(i,t){const e=i.touches,n=e&&e.length?e[0]:i,{offsetX:s,offsetY:r}=n;let o=!1,l,c;if(xj(s,r,i.target))l=s,c=r;else{const f=t.getBoundingClientRect();l=n.clientX-f.left,c=n.clientY-f.top,o=!0}return{x:l,y:c,box:o}}function lo(i,t){if("native"in i)return i;const{canvas:e,currentDevicePixelRatio:n}=t,s=W0(e),r=s.boxSizing==="border-box",o=Mo(s,"padding"),l=Mo(s,"border","width"),{x:c,y:f,box:g}=bj(i,e),m=o.left+(g&&l.left),p=o.top+(g&&l.top);let{width:v,height:x}=t;return r&&(v-=o.width+l.width,x-=o.height+l.height),{x:Math.round((c-m)/v*e.width/n),y:Math.round((f-p)/x*e.height/n)}}function Ej(i,t,e){let n,s;if(t===void 0||e===void 0){const r=i&&Zv(i);if(!r)t=i.clientWidth,e=i.clientHeight;else{const o=r.getBoundingClientRect(),l=W0(r),c=Mo(l,"border","width"),f=Mo(l,"padding");t=o.width-f.width-c.width,e=o.height-f.height-c.height,n=a0(l.maxWidth,r,"clientWidth"),s=a0(l.maxHeight,r,"clientHeight")}}return{width:t,height:e,maxWidth:n||e0,maxHeight:s||e0}}const xa=i=>Math.round(i*10)/10;function Sj(i,t,e,n){const s=W0(i),r=Mo(s,"margin"),o=a0(s.maxWidth,i,"clientWidth")||e0,l=a0(s.maxHeight,i,"clientHeight")||e0,c=Ej(i,t,e);let{width:f,height:g}=c;if(s.boxSizing==="content-box"){const p=Mo(s,"border","width"),v=Mo(s,"padding");f-=v.width+p.width,g-=v.height+p.height}return f=Math.max(0,f-r.width),g=Math.max(0,n?f/n:g-r.height),f=xa(Math.min(f,o,c.maxWidth)),g=xa(Math.min(g,l,c.maxHeight)),f&&!g&&(g=xa(f/2)),(t!==void 0||e!==void 0)&&n&&c.height&&g>c.height&&(g=c.height,f=xa(Math.floor(g*n))),{width:f,height:g}}function Rw(i,t,e){const n=t||1,s=xa(i.height*n),r=xa(i.width*n);i.height=xa(i.height),i.width=xa(i.width);const o=i.canvas;return o.style&&(e||!o.style.height&&!o.style.width)&&(o.style.height=`${i.height}px`,o.style.width=`${i.width}px`),i.currentDevicePixelRatio!==n||o.height!==s||o.width!==r?(i.currentDevicePixelRatio=n,o.height=s,o.width=r,i.ctx.setTransform(n,0,0,n,0,0),!0):!1}const Mj=(function(){let i=!1;try{const t={get passive(){return i=!0,!1}};Kv()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return i})();function Aw(i,t){const e=_j(i,t),n=e&&e.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}const wj=function(i,t){return{x(e){return i+i+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,n){return e-n},leftForLtr(e,n){return e-n}}},Tj=function(){return{x(i){return i},setWidth(i){},textAlign(i){return i},xPlus(i,t){return i+t},leftForLtr(i,t){return i}}};function ru(i,t,e){return i?wj(t,e):Tj()}function D3(i,t){let e,n;(t==="ltr"||t==="rtl")&&(e=i.canvas.style,n=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),i.prevTextDirection=n)}function I3(i,t){t!==void 0&&(delete i.prevTextDirection,i.canvas.style.setProperty("direction",t[0],t[1]))}function Xd(i,t,e){return i.options.clip?i[e]:t[e]}function Cj(i,t){const{xScale:e,yScale:n}=i;return e&&n?{left:Xd(e,t,"left"),right:Xd(e,t,"right"),top:Xd(n,t,"top"),bottom:Xd(n,t,"bottom")}:t}function Rj(i,t){const e=t._clip;if(e.disabled)return!1;const n=Cj(t,i.chartArea);return{left:e.left===!1?0:n.left-(e.left===!0?0:e.left),right:e.right===!1?i.width:n.right+(e.right===!0?0:e.right),top:e.top===!1?0:n.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?i.height:n.bottom+(e.bottom===!0?0:e.bottom)}}class Aj{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,s){const r=e.listeners[s],o=e.duration;r.forEach(l=>l({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(n-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=x3.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((n,s)=>{if(!n.running||!n.items.length)return;const r=n.items;let o=r.length-1,l=!1,c;for(;o>=0;--o)c=r[o],c._active?(c._total>n.duration&&(n.duration=c._total),c.tick(t),l=!0):(r[o]=r[r.length-1],r.pop());l&&(s.draw(),this._notify(s,n,t,"progress")),r.length||(n.running=!1,this._notify(s,n,t,"complete"),n.initial=!1),e+=r.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((n,s)=>Math.max(n,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const n=e.items;let s=n.length-1;for(;s>=0;--s)n[s].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var fr=new Aj;const Ow="transparent",Oj={boolean(i,t,e){return e>.5?t:i},color(i,t,e){const n=bw(i||Ow),s=n.valid&&bw(t||Ow);return s&&s.valid?s.mix(n,e).hexString():t},number(i,t,e){return i+(t-i)*e}};class Dj{constructor(t,e,n,s){const r=e[n];s=Yd([t.to,s,r,t.from]);const o=Yd([t.from,r,s]);this._active=!0,this._fn=t.fn||Oj[t.type||typeof o],this._easing=ih[t.easing]||ih.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);const s=this._target[this._prop],r=n-this._start,o=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=Yd([t.to,e,s,t.from]),this._from=Yd([t.from,s,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,n=this._duration,s=this._prop,r=this._from,o=this._loop,l=this._to;let c;if(this._active=r!==l&&(o||e<n),!this._active){this._target[s]=l,this._notify(!0);return}if(e<0){this._target[s]=r;return}c=e/n%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[s]=this._fn(r,l,c)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,n)=>{t.push({res:e,rej:n})})}_notify(t){const e=t?"res":"rej",n=this._promises||[];for(let s=0;s<n.length;s++)n[s][e]()}}class L3{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!$t(t))return;const e=Object.keys(ii.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{const r=t[s];if(!$t(r))return;const o={};for(const l of e)o[l]=r[l];(Ei(r.properties)&&r.properties||[s]).forEach(l=>{(l===s||!n.has(l))&&n.set(l,o)})})}_animateOptions(t,e){const n=e.options,s=Lj(t,n);if(!s)return[];const r=this._createAnimations(s,n);return n.$shared&&Ij(t.options.$animations,n).then(()=>{t.options=n},()=>{}),r}_createAnimations(t,e){const n=this._properties,s=[],r=t.$animations||(t.$animations={}),o=Object.keys(e),l=Date.now();let c;for(c=o.length-1;c>=0;--c){const f=o[c];if(f.charAt(0)==="$")continue;if(f==="options"){s.push(...this._animateOptions(t,e));continue}const g=e[f];let m=r[f];const p=n.get(f);if(m)if(p&&m.active()){m.update(p,g,l);continue}else m.cancel();if(!p||!p.duration){t[f]=g;continue}r[f]=m=new Dj(p,t,f,g),s.push(m)}return s}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const n=this._createAnimations(t,e);if(n.length)return fr.add(this._chart,n),!0}}function Ij(i,t){const e=[],n=Object.keys(t);for(let s=0;s<n.length;s++){const r=i[n[s]];r&&r.active()&&e.push(r.wait())}return Promise.all(e)}function Lj(i,t){if(!t)return;let e=i.options;if(!e){i.options=t;return}return e.$shared&&(i.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function Dw(i,t){const e=i&&i.options||{},n=e.reverse,s=e.min===void 0?t:0,r=e.max===void 0?t:0;return{start:n?r:s,end:n?s:r}}function Pj(i,t,e){if(e===!1)return!1;const n=Dw(i,e),s=Dw(t,e);return{top:s.end,right:n.end,bottom:s.start,left:n.start}}function Nj(i){let t,e,n,s;return $t(i)?(t=i.top,e=i.right,n=i.bottom,s=i.left):t=e=n=s=i,{top:t,right:e,bottom:n,left:s,disabled:i===!1}}function P3(i,t){const e=[],n=i._getSortedDatasetMetas(t);let s,r;for(s=0,r=n.length;s<r;++s)e.push(n[s].index);return e}function Iw(i,t,e,n={}){const s=i.keys,r=n.mode==="single";let o,l,c,f;if(t===null)return;let g=!1;for(o=0,l=s.length;o<l;++o){if(c=+s[o],c===e){if(g=!0,n.all)continue;break}f=i.values[c],es(f)&&(r||t===0||i0(t)===i0(f))&&(t+=f)}return!g&&!n.all?0:t}function zj(i,t){const{iScale:e,vScale:n}=t,s=e.axis==="x"?"x":"y",r=n.axis==="x"?"x":"y",o=Object.keys(i),l=new Array(o.length);let c,f,g;for(c=0,f=o.length;c<f;++c)g=o[c],l[c]={[s]:g,[r]:i[g]};return l}function o_(i,t){const e=i&&i.options.stacked;return e||e===void 0&&t.stack!==void 0}function Gj(i,t,e){return`${i.id}.${t.id}.${e.stack||e.type}`}function kj(i){const{min:t,max:e,minDefined:n,maxDefined:s}=i.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:s?e:Number.POSITIVE_INFINITY}}function Fj(i,t,e){const n=i[t]||(i[t]={});return n[e]||(n[e]={})}function Lw(i,t,e,n){for(const s of t.getMatchingVisibleMetas(n).reverse()){const r=i[s.index];if(e&&r>0||!e&&r<0)return s.index}return null}function Pw(i,t){const{chart:e,_cachedMeta:n}=i,s=e._stacks||(e._stacks={}),{iScale:r,vScale:o,index:l}=n,c=r.axis,f=o.axis,g=Gj(r,o,n),m=t.length;let p;for(let v=0;v<m;++v){const x=t[v],{[c]:E,[f]:b}=x,M=x._stacks||(x._stacks={});p=M[f]=Fj(s,g,E),p[l]=b,p._top=Lw(p,o,!0,n.type),p._bottom=Lw(p,o,!1,n.type);const w=p._visualValues||(p._visualValues={});w[l]=b}}function l_(i,t){const e=i.scales;return Object.keys(e).filter(n=>e[n].axis===t).shift()}function jj(i,t){return wu(i,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function Bj(i,t,e){return wu(i,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function Rc(i,t){const e=i.controller.index,n=i.vScale&&i.vScale.axis;if(n){t=t||i._parsed;for(const s of t){const r=s._stacks;if(!r||r[n]===void 0||r[n][e]===void 0)return;delete r[n][e],r[n]._visualValues!==void 0&&r[n]._visualValues[e]!==void 0&&delete r[n]._visualValues[e]}}}const u_=i=>i==="reset"||i==="none",Nw=(i,t)=>t?i:Object.assign({},i),Uj=(i,t,e)=>i&&!t.hidden&&t._stacked&&{keys:P3(e,!0),values:null};class N3{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=o_(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Rc(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,n=this.getDataset(),s=(m,p,v,x)=>m==="x"?p:m==="r"?x:v,r=e.xAxisID=oe(n.xAxisID,l_(t,"x")),o=e.yAxisID=oe(n.yAxisID,l_(t,"y")),l=e.rAxisID=oe(n.rAxisID,l_(t,"r")),c=e.indexAxis,f=e.iAxisID=s(c,r,o,l),g=e.vAxisID=s(c,o,r,l);e.xScale=this.getScaleForId(r),e.yScale=this.getScaleForId(o),e.rScale=this.getScaleForId(l),e.iScale=this.getScaleForId(f),e.vScale=this.getScaleForId(g)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&_w(this._data,this),t._stacked&&Rc(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),n=this._data;if($t(e)){const s=this._cachedMeta;this._data=zj(e,s)}else if(n!==e){if(n){_w(n,this);const s=this._cachedMeta;Rc(s),s._parsed=[]}e&&Object.isExtensible(e)&&BF(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,n=this.getDataset();let s=!1;this._dataCheck();const r=e._stacked;e._stacked=o_(e.vScale,e),e.stack!==n.stack&&(s=!0,Rc(e),e.stack=n.stack),this._resyncElements(t),(s||r!==e._stacked)&&(Pw(this,e._parsed),e._stacked=o_(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:n,_data:s}=this,{iScale:r,_stacked:o}=n,l=r.axis;let c=t===0&&e===s.length?!0:n._sorted,f=t>0&&n._parsed[t-1],g,m,p;if(this._parsing===!1)n._parsed=s,n._sorted=!0,p=s;else{Ei(s[t])?p=this.parseArrayData(n,s,t,e):$t(s[t])?p=this.parseObjectData(n,s,t,e):p=this.parsePrimitiveData(n,s,t,e);const v=()=>m[l]===null||f&&m[l]<f[l];for(g=0;g<e;++g)n._parsed[g+t]=m=p[g],c&&(v()&&(c=!1),f=m);n._sorted=c}o&&Pw(this,p)}parsePrimitiveData(t,e,n,s){const{iScale:r,vScale:o}=t,l=r.axis,c=o.axis,f=r.getLabels(),g=r===o,m=new Array(s);let p,v,x;for(p=0,v=s;p<v;++p)x=p+n,m[p]={[l]:g||r.parse(f[x],x),[c]:o.parse(e[x],x)};return m}parseArrayData(t,e,n,s){const{xScale:r,yScale:o}=t,l=new Array(s);let c,f,g,m;for(c=0,f=s;c<f;++c)g=c+n,m=e[g],l[c]={x:r.parse(m[0],g),y:o.parse(m[1],g)};return l}parseObjectData(t,e,n,s){const{xScale:r,yScale:o}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,f=new Array(s);let g,m,p,v;for(g=0,m=s;g<m;++g)p=g+n,v=e[p],f[g]={x:r.parse(Ih(v,l),p),y:o.parse(Ih(v,c),p)};return f}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,n){const s=this.chart,r=this._cachedMeta,o=e[t.axis],l={keys:P3(s,!0),values:e._stacks[t.axis]._visualValues};return Iw(l,o,r.index,{mode:n})}updateRangeFromParsed(t,e,n,s){const r=n[e.axis];let o=r===null?NaN:r;const l=s&&n._stacks[e.axis];s&&l&&(s.values=l,o=Iw(s,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,e){const n=this._cachedMeta,s=n._parsed,r=n._sorted&&t===n.iScale,o=s.length,l=this._getOtherScale(t),c=Uj(e,n,this.chart),f={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:g,max:m}=kj(l);let p,v;function x(){v=s[p];const E=v[l.axis];return!es(v[t.axis])||g>E||m<E}for(p=0;p<o&&!(!x()&&(this.updateRangeFromParsed(f,t,v,c),r));++p);if(r){for(p=o-1;p>=0;--p)if(!x()){this.updateRangeFromParsed(f,t,v,c);break}}return f}getAllParsedValues(t){const e=this._cachedMeta._parsed,n=[];let s,r,o;for(s=0,r=e.length;s<r;++s)o=e[s][t.axis],es(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,n=e.iScale,s=e.vScale,r=this.getParsed(t);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:s?""+s.getLabelForValue(r[s.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=Nj(oe(this.options.clip,Pj(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,n=this._cachedMeta,s=n.data||[],r=e.chartArea,o=[],l=this._drawStart||0,c=this._drawCount||s.length-l,f=this.options.drawActiveElementsOnTop;let g;for(n.dataset&&n.dataset.draw(t,r,l,c),g=l;g<l+c;++g){const m=s[g];m.hidden||(m.active&&f?o.push(m):m.draw(t,r))}for(g=0;g<o.length;++g)o[g].draw(t,r)}getStyle(t,e){const n=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,e,n){const s=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];r=o.$context||(o.$context=Bj(this.getContext(),t,o)),r.parsed=this.getParsed(t),r.raw=s.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=jj(this.chart.getContext(),this.index)),r.dataset=s,r.index=r.datasetIndex=this.index;return r.active=!!e,r.mode=n,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",n){const s=e==="active",r=this._cachedDataOpts,o=t+"-"+e,l=r[o],c=this.enableOptionSharing&&t0(n);if(l)return Nw(l,c);const f=this.chart.config,g=f.datasetElementScopeKeys(this._type,t),m=s?[`${t}Hover`,"hover",t,""]:[t,""],p=f.getOptionScopes(this.getDataset(),g),v=Object.keys(ii.elements[t]),x=()=>this.getContext(n,s,e),E=f.resolveNamedOptions(p,v,x,m);return E.$shared&&(E.$shared=c,r[o]=Object.freeze(Nw(E,c))),E}_resolveAnimations(t,e,n){const s=this.chart,r=this._cachedDataOpts,o=`animation-${e}`,l=r[o];if(l)return l;let c;if(s.options.animation!==!1){const g=this.chart.config,m=g.datasetAnimationScopeKeys(this._type,e),p=g.getOptionScopes(this.getDataset(),m);c=g.createResolver(p,this.getContext(t,n,e))}const f=new L3(s,c&&c.animations);return c&&c._cacheable&&(r[o]=Object.freeze(f)),f}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||u_(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const n=this.resolveDataElementOptions(t,e),s=this._sharedOptions,r=this.getSharedOptions(n),o=this.includeOptions(e,r)||r!==s;return this.updateSharedOptions(r,e,n),{sharedOptions:r,includeOptions:o}}updateElement(t,e,n,s){u_(s)?Object.assign(t,n):this._resolveAnimations(e,s).update(t,n)}updateSharedOptions(t,e,n){t&&!u_(e)&&this._resolveAnimations(void 0,e).update(t,n)}_setStyle(t,e,n,s){t.active=s;const r=this.getStyle(e,s);this._resolveAnimations(e,n,s).update(t,{options:!s&&this.getSharedOptions(r)||r})}removeHoverStyle(t,e,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,e,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,n=this._cachedMeta.data;for(const[l,c,f]of this._syncList)this[l](c,f);this._syncList=[];const s=n.length,r=e.length,o=Math.min(r,s);o&&this.parse(0,o),r>s?this._insertElements(s,r-s,t):r<s&&this._removeElements(r,s-r)}_insertElements(t,e,n=!0){const s=this._cachedMeta,r=s.data,o=t+e;let l;const c=f=>{for(f.length+=e,l=f.length-1;l>=o;l--)f[l]=f[l-e]};for(c(r),l=t;l<o;++l)r[l]=new this.dataElementType;this._parsing&&c(s._parsed),this.parse(t,e),n&&this.updateElements(r,t,e,"reset")}updateElements(t,e,n,s){}_removeElements(t,e){const n=this._cachedMeta;if(this._parsing){const s=n._parsed.splice(t,e);n._stacked&&Rc(n,s)}n.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,n,s]=t;this[e](n,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Hj(i,t,e){let n=1,s=1,r=0,o=0;if(t<ci){const l=i,c=l+t,f=Math.cos(l),g=Math.sin(l),m=Math.cos(c),p=Math.sin(c),v=(R,A,T)=>s0(R,l,c,!0)?1:Math.max(A,A*e,T,T*e),x=(R,A,T)=>s0(R,l,c,!0)?-1:Math.min(A,A*e,T,T*e),E=v(0,f,m),b=v(mi,g,p),M=x(be,f,m),w=x(be+mi,g,p);n=(E-M)/2,s=(b-w)/2,r=-(E+M)/2,o=-(b+w)/2}return{ratioX:n,ratioY:s,offsetX:r,offsetY:o}}class qj extends N3{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data,{labels:{pointStyle:n,textAlign:s,color:r,useBorderRadius:o,borderRadius:l}}=t.legend.options;return e.labels.length&&e.datasets.length?e.labels.map((c,f)=>{const m=t.getDatasetMeta(0).controller.getStyle(f);return{text:c,fillStyle:m.backgroundColor,fontColor:r,hidden:!t.getDataVisibility(f),lineDash:m.borderDash,lineDashOffset:m.borderDashOffset,lineJoin:m.borderJoinStyle,lineWidth:m.borderWidth,strokeStyle:m.borderColor,textAlign:s,pointStyle:n,borderRadius:o&&(l||m.borderRadius),index:f}}):[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}}};constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const n=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=n;else{let r=c=>+n[c];if($t(n[t])){const{key:c="value"}=this._parsing;r=f=>+Ih(n[f],c)}let o,l;for(o=t,l=t+e;o<l;++o)s._parsed[o]=r(o)}}_getRotation(){return _r(this.options.rotation-90)}_getCircumference(){return _r(this.options.circumference)}_getRotationExtents(){let t=ci,e=-ci;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const s=this.chart.getDatasetMeta(n).controller,r=s._getRotation(),o=s._getCircumference();t=Math.min(t,r),e=Math.max(e,r+o)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:n}=e,s=this._cachedMeta,r=s.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,l=Math.max((Math.min(n.width,n.height)-o)/2,0),c=Math.min(wF(this.options.cutout,l),1),f=this._getRingWeight(this.index),{circumference:g,rotation:m}=this._getRotationExtents(),{ratioX:p,ratioY:v,offsetX:x,offsetY:E}=Hj(m,g,c),b=(n.width-o)/p,M=(n.height-o)/v,w=Math.max(Math.min(b,M)/2,0),R=m3(this.options.radius,w),A=Math.max(R*c,0),T=(R-A)/this._getVisibleDatasetWeightTotal();this.offsetX=x*R,this.offsetY=E*R,s.total=this.calculateTotal(),this.outerRadius=R-T*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-T*f,0),this.updateElements(r,0,r.length,t)}_circumference(t,e){const n=this.options,s=this._cachedMeta,r=this._getCircumference();return e&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||s._parsed[t]===null||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*r/ci)}updateElements(t,e,n,s){const r=s==="reset",o=this.chart,l=o.chartArea,f=o.options.animation,g=(l.left+l.right)/2,m=(l.top+l.bottom)/2,p=r&&f.animateScale,v=p?0:this.innerRadius,x=p?0:this.outerRadius,{sharedOptions:E,includeOptions:b}=this._getSharedOptions(e,s);let M=this._getRotation(),w;for(w=0;w<e;++w)M+=this._circumference(w,r);for(w=e;w<e+n;++w){const R=this._circumference(w,r),A=t[w],T={x:g+this.offsetX,y:m+this.offsetY,startAngle:M,endAngle:M+R,circumference:R,outerRadius:x,innerRadius:v};b&&(T.options=E||this.resolveDataElementOptions(w,A.active?"active":s)),M+=R,this.updateElement(A,w,T,s)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let n=0,s;for(s=0;s<e.length;s++){const r=t._parsed[s];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(s)&&!e[s].hidden&&(n+=Math.abs(r))}return n}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?ci*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,s=n.data.labels||[],r=Uv(e._parsed[t],n.options.locale);return{label:s[t]||"",value:r}}getMaxBorderWidth(t){let e=0;const n=this.chart;let s,r,o,l,c;if(!t){for(s=0,r=n.data.datasets.length;s<r;++s)if(n.isDatasetVisible(s)){o=n.getDatasetMeta(s),t=o.data,l=o.controller;break}}if(!t)return 0;for(s=0,r=t.length;s<r;++s)c=l.resolveDataElementOptions(s),c.borderAlign!=="inner"&&(e=Math.max(e,c.borderWidth||0,c.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let n=0,s=t.length;n<s;++n){const r=this.resolveDataElementOptions(n);e=Math.max(e,r.offset||0,r.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(e+=this._getRingWeight(n));return e}_getRingWeight(t){return Math.max(oe(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}function so(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class $v{static override(t){Object.assign($v.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return so()}parse(){return so()}format(){return so()}add(){return so()}diff(){return so()}startOf(){return so()}endOf(){return so()}}var Vj={_date:$v};function Yj(i,t,e,n){const{controller:s,data:r,_sorted:o}=i,l=s._cachedMeta.iScale,c=i.dataset&&i.dataset.options?i.dataset.options.spanGaps:null;if(l&&t===l.axis&&t!=="r"&&o&&r.length){const f=l._reversePixels?FF:a1;if(n){if(s._sharedOptions){const g=r[0],m=typeof g.getRange=="function"&&g.getRange(t);if(m){const p=f(r,t,e-m),v=f(r,t,e+m);return{lo:p.lo,hi:v.hi}}}}else{const g=f(r,t,e);if(c){const{vScale:m}=s._cachedMeta,{_parsed:p}=i,v=p.slice(0,g.lo+1).reverse().findIndex(E=>!Be(E[m.axis]));g.lo-=Math.max(0,v);const x=p.slice(g.hi).findIndex(E=>!Be(E[m.axis]));g.hi+=Math.max(0,x)}return g}}return{lo:0,hi:r.length-1}}function K0(i,t,e,n,s){const r=i.getSortedVisibleDatasetMetas(),o=e[t];for(let l=0,c=r.length;l<c;++l){const{index:f,data:g}=r[l],{lo:m,hi:p}=Yj(r[l],t,o,s);for(let v=m;v<=p;++v){const x=g[v];x.skip||n(x,f,v)}}}function Xj(i){const t=i.indexOf("x")!==-1,e=i.indexOf("y")!==-1;return function(n,s){const r=t?Math.abs(n.x-s.x):0,o=e?Math.abs(n.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function c_(i,t,e,n,s){const r=[];return!s&&!i.isPointInArea(t)||K0(i,e,t,function(l,c,f){!s&&!w3(l,i.chartArea,0)||l.inRange(t.x,t.y,n)&&r.push({element:l,datasetIndex:c,index:f})},!0),r}function Wj(i,t,e,n){let s=[];function r(o,l,c){const{startAngle:f,endAngle:g}=o.getProps(["startAngle","endAngle"],n),{angle:m}=_3(o,{x:t.x,y:t.y});s0(m,f,g)&&s.push({element:o,datasetIndex:l,index:c})}return K0(i,e,t,r),s}function Kj(i,t,e,n,s,r){let o=[];const l=Xj(e);let c=Number.POSITIVE_INFINITY;function f(g,m,p){const v=g.inRange(t.x,t.y,s);if(n&&!v)return;const x=g.getCenterPoint(s);if(!(!!r||i.isPointInArea(x))&&!v)return;const b=l(t,x);b<c?(o=[{element:g,datasetIndex:m,index:p}],c=b):b===c&&o.push({element:g,datasetIndex:m,index:p})}return K0(i,e,t,f),o}function h_(i,t,e,n,s,r){return!r&&!i.isPointInArea(t)?[]:e==="r"&&!n?Wj(i,t,e,s):Kj(i,t,e,n,s,r)}function zw(i,t,e,n,s){const r=[],o=e==="x"?"inXRange":"inYRange";let l=!1;return K0(i,e,t,(c,f,g)=>{c[o]&&c[o](t[e],s)&&(r.push({element:c,datasetIndex:f,index:g}),l=l||c.inRange(t.x,t.y,s))}),n&&!l?[]:r}var Zj={modes:{index(i,t,e,n){const s=lo(t,i),r=e.axis||"x",o=e.includeInvisible||!1,l=e.intersect?c_(i,s,r,n,o):h_(i,s,r,!1,n,o),c=[];return l.length?(i.getSortedVisibleDatasetMetas().forEach(f=>{const g=l[0].index,m=f.data[g];m&&!m.skip&&c.push({element:m,datasetIndex:f.index,index:g})}),c):[]},dataset(i,t,e,n){const s=lo(t,i),r=e.axis||"xy",o=e.includeInvisible||!1;let l=e.intersect?c_(i,s,r,n,o):h_(i,s,r,!1,n,o);if(l.length>0){const c=l[0].datasetIndex,f=i.getDatasetMeta(c).data;l=[];for(let g=0;g<f.length;++g)l.push({element:f[g],datasetIndex:c,index:g})}return l},point(i,t,e,n){const s=lo(t,i),r=e.axis||"xy",o=e.includeInvisible||!1;return c_(i,s,r,n,o)},nearest(i,t,e,n){const s=lo(t,i),r=e.axis||"xy",o=e.includeInvisible||!1;return h_(i,s,r,e.intersect,n,o)},x(i,t,e,n){const s=lo(t,i);return zw(i,s,"x",e.intersect,n)},y(i,t,e,n){const s=lo(t,i);return zw(i,s,"y",e.intersect,n)}}};const z3=["left","top","right","bottom"];function Ac(i,t){return i.filter(e=>e.pos===t)}function Gw(i,t){return i.filter(e=>z3.indexOf(e.pos)===-1&&e.box.axis===t)}function Oc(i,t){return i.sort((e,n)=>{const s=t?n:e,r=t?e:n;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function $j(i){const t=[];let e,n,s,r,o,l;for(e=0,n=(i||[]).length;e<n;++e)s=i[e],{position:r,options:{stack:o,stackWeight:l=1}}=s,t.push({index:e,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&r+o,stackWeight:l});return t}function Qj(i){const t={};for(const e of i){const{stack:n,pos:s,stackWeight:r}=e;if(!n||!z3.includes(s))continue;const o=t[n]||(t[n]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function Jj(i,t){const e=Qj(i),{vBoxMaxWidth:n,hBoxMaxHeight:s}=t;let r,o,l;for(r=0,o=i.length;r<o;++r){l=i[r];const{fullSize:c}=l.box,f=e[l.stack],g=f&&l.stackWeight/f.weight;l.horizontal?(l.width=g?g*n:c&&t.availableWidth,l.height=s):(l.width=n,l.height=g?g*s:c&&t.availableHeight)}return e}function tB(i){const t=$j(i),e=Oc(t.filter(f=>f.box.fullSize),!0),n=Oc(Ac(t,"left"),!0),s=Oc(Ac(t,"right")),r=Oc(Ac(t,"top"),!0),o=Oc(Ac(t,"bottom")),l=Gw(t,"x"),c=Gw(t,"y");return{fullSize:e,leftAndTop:n.concat(r),rightAndBottom:s.concat(c).concat(o).concat(l),chartArea:Ac(t,"chartArea"),vertical:n.concat(s).concat(c),horizontal:r.concat(o).concat(l)}}function kw(i,t,e,n){return Math.max(i[e],t[e])+Math.max(i[n],t[n])}function G3(i,t){i.top=Math.max(i.top,t.top),i.left=Math.max(i.left,t.left),i.bottom=Math.max(i.bottom,t.bottom),i.right=Math.max(i.right,t.right)}function eB(i,t,e,n){const{pos:s,box:r}=e,o=i.maxPadding;if(!$t(s)){e.size&&(i[s]-=e.size);const m=n[e.stack]||{size:0,count:1};m.size=Math.max(m.size,e.horizontal?r.height:r.width),e.size=m.size/m.count,i[s]+=e.size}r.getPadding&&G3(o,r.getPadding());const l=Math.max(0,t.outerWidth-kw(o,i,"left","right")),c=Math.max(0,t.outerHeight-kw(o,i,"top","bottom")),f=l!==i.w,g=c!==i.h;return i.w=l,i.h=c,e.horizontal?{same:f,other:g}:{same:g,other:f}}function iB(i){const t=i.maxPadding;function e(n){const s=Math.max(t[n]-i[n],0);return i[n]+=s,s}i.y+=e("top"),i.x+=e("left"),e("right"),e("bottom")}function nB(i,t){const e=t.maxPadding;function n(s){const r={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{r[o]=Math.max(t[o],e[o])}),r}return n(i?["left","right"]:["top","bottom"])}function qc(i,t,e,n){const s=[];let r,o,l,c,f,g;for(r=0,o=i.length,f=0;r<o;++r){l=i[r],c=l.box,c.update(l.width||t.w,l.height||t.h,nB(l.horizontal,t));const{same:m,other:p}=eB(t,e,l,n);f|=m&&s.length,g=g||p,c.fullSize||s.push(l)}return f&&qc(s,t,e,n)||g}function Wd(i,t,e,n,s){i.top=e,i.left=t,i.right=t+n,i.bottom=e+s,i.width=n,i.height=s}function Fw(i,t,e,n){const s=e.padding;let{x:r,y:o}=t;for(const l of i){const c=l.box,f=n[l.stack]||{placed:0,weight:1},g=l.stackWeight/f.weight||1;if(l.horizontal){const m=t.w*g,p=f.size||c.height;t0(f.start)&&(o=f.start),c.fullSize?Wd(c,s.left,o,e.outerWidth-s.right-s.left,p):Wd(c,t.left+f.placed,o,m,p),f.start=o,f.placed+=m,o=c.bottom}else{const m=t.h*g,p=f.size||c.width;t0(f.start)&&(r=f.start),c.fullSize?Wd(c,r,s.top,p,e.outerHeight-s.bottom-s.top):Wd(c,r,t.top+f.placed,p,m),f.start=r,f.placed+=m,r=c.right}}t.x=r,t.y=o}var $n={addBox(i,t){i.boxes||(i.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},i.boxes.push(t)},removeBox(i,t){const e=i.boxes?i.boxes.indexOf(t):-1;e!==-1&&i.boxes.splice(e,1)},configure(i,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(i,t,e,n){if(!i)return;const s=is(i.options.layout.padding),r=Math.max(t-s.width,0),o=Math.max(e-s.height,0),l=tB(i.boxes),c=l.vertical,f=l.horizontal;de(i.boxes,E=>{typeof E.beforeLayout=="function"&&E.beforeLayout()});const g=c.reduce((E,b)=>b.box.options&&b.box.options.display===!1?E:E+1,0)||1,m=Object.freeze({outerWidth:t,outerHeight:e,padding:s,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/g,hBoxMaxHeight:o/2}),p=Object.assign({},s);G3(p,is(n));const v=Object.assign({maxPadding:p,w:r,h:o,x:s.left,y:s.top},s),x=Jj(c.concat(f),m);qc(l.fullSize,v,m,x),qc(c,v,m,x),qc(f,v,m,x)&&qc(c,v,m,x),iB(v),Fw(l.leftAndTop,v,m,x),v.x+=v.w,v.y+=v.h,Fw(l.rightAndBottom,v,m,x),i.chartArea={left:v.left,top:v.top,right:v.left+v.w,bottom:v.top+v.h,height:v.h,width:v.w},de(l.chartArea,E=>{const b=E.box;Object.assign(b,i.chartArea),b.update(v.w,v.h,{left:0,top:0,right:0,bottom:0})})}};class k3{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,s){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,s?Math.floor(e/s):n)}}isAttached(t){return!0}updateConfig(t){}}class sB extends k3{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const fg="$chartjs",rB={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},jw=i=>i===null||i==="";function aB(i,t){const e=i.style,n=i.getAttribute("height"),s=i.getAttribute("width");if(i[fg]={initial:{height:n,width:s,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",jw(s)){const r=Aw(i,"width");r!==void 0&&(i.width=r)}if(jw(n))if(i.style.height==="")i.height=i.width/(t||2);else{const r=Aw(i,"height");r!==void 0&&(i.height=r)}return i}const F3=Mj?{passive:!0}:!1;function oB(i,t,e){i&&i.addEventListener(t,e,F3)}function lB(i,t,e){i&&i.canvas&&i.canvas.removeEventListener(t,e,F3)}function uB(i,t){const e=rB[i.type]||i.type,{x:n,y:s}=lo(i,t);return{type:e,chart:t,native:i,x:n!==void 0?n:null,y:s!==void 0?s:null}}function o0(i,t){for(const e of i)if(e===t||e.contains(t))return!0}function cB(i,t,e){const n=i.canvas,s=new MutationObserver(r=>{let o=!1;for(const l of r)o=o||o0(l.addedNodes,n),o=o&&!o0(l.removedNodes,n);o&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}function hB(i,t,e){const n=i.canvas,s=new MutationObserver(r=>{let o=!1;for(const l of r)o=o||o0(l.removedNodes,n),o=o&&!o0(l.addedNodes,n);o&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}const Ph=new Map;let Bw=0;function j3(){const i=window.devicePixelRatio;i!==Bw&&(Bw=i,Ph.forEach((t,e)=>{e.currentDevicePixelRatio!==i&&t()}))}function fB(i,t){Ph.size||window.addEventListener("resize",j3),Ph.set(i,t)}function dB(i){Ph.delete(i),Ph.size||window.removeEventListener("resize",j3)}function gB(i,t,e){const n=i.canvas,s=n&&Zv(n);if(!s)return;const r=b3((l,c)=>{const f=s.clientWidth;e(l,c),f<s.clientWidth&&e()},window),o=new ResizeObserver(l=>{const c=l[0],f=c.contentRect.width,g=c.contentRect.height;f===0&&g===0||r(f,g)});return o.observe(s),fB(i,r),o}function f_(i,t,e){e&&e.disconnect(),t==="resize"&&dB(i)}function mB(i,t,e){const n=i.canvas,s=b3(r=>{i.ctx!==null&&e(uB(r,i))},i);return oB(n,t,s),s}class pB extends k3{acquireContext(t,e){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(aB(t,e),n):null}releaseContext(t){const e=t.canvas;if(!e[fg])return!1;const n=e[fg].initial;["height","width"].forEach(r=>{const o=n[r];Be(o)?e.removeAttribute(r):e.setAttribute(r,o)});const s=n.style||{};return Object.keys(s).forEach(r=>{e.style[r]=s[r]}),e.width=e.width,delete e[fg],!0}addEventListener(t,e,n){this.removeEventListener(t,e);const s=t.$proxies||(t.$proxies={}),o={attach:cB,detach:hB,resize:gB}[e]||mB;s[e]=o(t,e,n)}removeEventListener(t,e){const n=t.$proxies||(t.$proxies={}),s=n[e];if(!s)return;({attach:f_,detach:f_,resize:f_}[e]||lB)(t,e,s),n[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,s){return Sj(t,e,n,s)}isAttached(t){const e=t&&Zv(t);return!!(e&&e.isConnected)}}function yB(i){return!Kv()||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas?sB:pB}class Bo{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return n0(this.x)&&n0(this.y)}getProps(t,e){const n=this.$animations;if(!e||!n)return this;const s={};return t.forEach(r=>{s[r]=n[r]&&n[r].active()?n[r]._to:this[r]}),s}}function _B(i,t){const e=i.options.ticks,n=vB(i),s=Math.min(e.maxTicksLimit||n,n),r=e.major.enabled?bB(t):[],o=r.length,l=r[0],c=r[o-1],f=[];if(o>s)return EB(t,f,r,o/s),f;const g=xB(r,t,s);if(o>0){let m,p;const v=o>1?Math.round((c-l)/(o-1)):null;for(Kd(t,f,g,Be(v)?0:l-v,l),m=0,p=o-1;m<p;m++)Kd(t,f,g,r[m],r[m+1]);return Kd(t,f,g,c,Be(v)?t.length:c+v),f}return Kd(t,f,g),f}function vB(i){const t=i.options.offset,e=i._tickSize(),n=i._length/e+(t?0:1),s=i._maxLength/e;return Math.floor(Math.min(n,s))}function xB(i,t,e){const n=SB(i),s=t.length/e;if(!n)return Math.max(s,1);const r=IF(n);for(let o=0,l=r.length-1;o<l;o++){const c=r[o];if(c>s)return c}return Math.max(s,1)}function bB(i){const t=[];let e,n;for(e=0,n=i.length;e<n;e++)i[e].major&&t.push(e);return t}function EB(i,t,e,n){let s=0,r=e[0],o;for(n=Math.ceil(n),o=0;o<i.length;o++)o===r&&(t.push(i[o]),s++,r=e[s*n])}function Kd(i,t,e,n,s){const r=oe(n,0),o=Math.min(oe(s,i.length),i.length);let l=0,c,f,g;for(e=Math.ceil(e),s&&(c=s-n,e=c/Math.floor(c/e)),g=r;g<0;)l++,g=Math.round(r+l*e);for(f=Math.max(r,0);f<o;f++)f===g&&(t.push(i[f]),l++,g=Math.round(r+l*e))}function SB(i){const t=i.length;let e,n;if(t<2)return!1;for(n=i[0],e=1;e<t;++e)if(i[e]-i[e-1]!==n)return!1;return n}const MB=i=>i==="left"?"right":i==="right"?"left":i,Uw=(i,t,e)=>t==="top"||t==="left"?i[t]+e:i[t]-e,Hw=(i,t)=>Math.min(t||i,i);function qw(i,t){const e=[],n=i.length/t,s=i.length;let r=0;for(;r<s;r+=n)e.push(i[Math.floor(r)]);return e}function wB(i,t,e){const n=i.ticks.length,s=Math.min(t,n-1),r=i._startPixel,o=i._endPixel,l=1e-6;let c=i.getPixelForTick(s),f;if(!(e&&(n===1?f=Math.max(c-r,o-c):t===0?f=(i.getPixelForTick(1)-c)/2:f=(c-i.getPixelForTick(s-1))/2,c+=s<t?f:-f,c<r-l||c>o+l)))return c}function TB(i,t){de(i,e=>{const n=e.gc,s=n.length/2;let r;if(s>t){for(r=0;r<s;++r)delete e.data[n[r]];n.splice(0,s)}})}function Dc(i){return i.drawTicks?i.tickLength:0}function Vw(i,t){if(!i.display)return 0;const e=Ui(i.font,t),n=is(i.padding);return(Ei(i.text)?i.text.length:1)*e.lineHeight+n.height}function CB(i,t){return wu(i,{scale:t,type:"scale"})}function RB(i,t,e){return wu(i,{tick:e,index:t,type:"tick"})}function AB(i,t,e){let n=Bv(i);return(e&&t!=="right"||!e&&t==="right")&&(n=MB(n)),n}function OB(i,t,e,n){const{top:s,left:r,bottom:o,right:l,chart:c}=i,{chartArea:f,scales:g}=c;let m=0,p,v,x;const E=o-s,b=l-r;if(i.isHorizontal()){if(v=zi(n,r,l),$t(e)){const M=Object.keys(e)[0],w=e[M];x=g[M].getPixelForValue(w)+E-t}else e==="center"?x=(f.bottom+f.top)/2+E-t:x=Uw(i,e,t);p=l-r}else{if($t(e)){const M=Object.keys(e)[0],w=e[M];v=g[M].getPixelForValue(w)-b+t}else e==="center"?v=(f.left+f.right)/2-b+t:v=Uw(i,e,t);x=zi(n,o,s),m=e==="left"?-mi:mi}return{titleX:v,titleY:x,maxWidth:p,rotation:m}}class Tu extends Bo{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:s}=this;return t=ws(t,Number.POSITIVE_INFINITY),e=ws(e,Number.NEGATIVE_INFINITY),n=ws(n,Number.POSITIVE_INFINITY),s=ws(s,Number.NEGATIVE_INFINITY),{min:ws(t,n),max:ws(e,s),minDefined:es(t),maxDefined:es(e)}}getMinMax(t){let{min:e,max:n,minDefined:s,maxDefined:r}=this.getUserBounds(),o;if(s&&r)return{min:e,max:n};const l=this.getMatchingVisibleMetas();for(let c=0,f=l.length;c<f;++c)o=l[c].controller.getMinMax(this,t),s||(e=Math.min(e,o.min)),r||(n=Math.max(n,o.max));return e=r&&e>n?n:e,n=s&&e>n?e:n,{min:ws(e,ws(n,e)),max:ws(n,ws(e,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ae(this.options.beforeUpdate,[this])}update(t,e,n){const{beginAtZero:s,grace:r,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=lj(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?qw(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=_B(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,n;this.isHorizontal()?(e=this.left,n=this.right):(e=this.top,n=this.bottom,t=!t),this._startPixel=e,this._endPixel=n,this._reversePixels=t,this._length=n-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ae(this.options.afterUpdate,[this])}beforeSetDimensions(){Ae(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ae(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Ae(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ae(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let n,s,r;for(n=0,s=t.length;n<s;n++)r=t[n],r.label=Ae(e.callback,[r.value,n,t],this)}afterTickToLabelConversion(){Ae(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ae(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,n=Hw(this.ticks.length,t.ticks.maxTicksLimit),s=e.minRotation||0,r=e.maxRotation;let o=s,l,c,f;if(!this._isVisible()||!e.display||s>=r||n<=1||!this.isHorizontal()){this.labelRotation=s;return}const g=this._getLabelSizes(),m=g.widest.width,p=g.highest.height,v=fn(this.chart.width-m,0,this.maxWidth);l=t.offset?this.maxWidth/n:v/(n-1),m+6>l&&(l=v/(n-(t.offset?.5:1)),c=this.maxHeight-Dc(t.grid)-e.padding-Vw(t.title,this.chart.options.font),f=Math.sqrt(m*m+p*p),o=zF(Math.min(Math.asin(fn((g.highest.height+6)/l,-1,1)),Math.asin(fn(c/f,-1,1))-Math.asin(fn(p/f,-1,1)))),o=Math.max(s,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){Ae(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ae(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:n,title:s,grid:r}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const c=Vw(s,e.options.font);if(l?(t.width=this.maxWidth,t.height=Dc(r)+c):(t.height=this.maxHeight,t.width=Dc(r)+c),n.display&&this.ticks.length){const{first:f,last:g,widest:m,highest:p}=this._getLabelSizes(),v=n.padding*2,x=_r(this.labelRotation),E=Math.cos(x),b=Math.sin(x);if(l){const M=n.mirror?0:b*m.width+E*p.height;t.height=Math.min(this.maxHeight,t.height+M+v)}else{const M=n.mirror?0:E*m.width+b*p.height;t.width=Math.min(this.maxWidth,t.width+M+v)}this._calculatePadding(f,g,b,E)}}this._handleMargins(),l?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,s){const{ticks:{align:r,padding:o},position:l}=this.options,c=this.labelRotation!==0,f=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const g=this.getPixelForTick(0)-this.left,m=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,v=0;c?f?(p=s*t.width,v=n*e.height):(p=n*t.height,v=s*e.width):r==="start"?v=e.width:r==="end"?p=t.width:r!=="inner"&&(p=t.width/2,v=e.width/2),this.paddingLeft=Math.max((p-g+o)*this.width/(this.width-g),0),this.paddingRight=Math.max((v-m+o)*this.width/(this.width-m),0)}else{let g=e.height/2,m=t.height/2;r==="start"?(g=0,m=t.height):r==="end"&&(g=e.height,m=0),this.paddingTop=g+o,this.paddingBottom=m+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ae(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,n;for(e=0,n=t.length;e<n;e++)Be(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let n=this.ticks;e<n.length&&(n=qw(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,n){const{ctx:s,_longestTextCache:r}=this,o=[],l=[],c=Math.floor(e/Hw(e,n));let f=0,g=0,m,p,v,x,E,b,M,w,R,A,T;for(m=0;m<e;m+=c){if(x=t[m].label,E=this._resolveTickFontOptions(m),s.font=b=E.string,M=r[b]=r[b]||{data:{},gc:[]},w=E.lineHeight,R=A=0,!Be(x)&&!Ei(x))R=Sw(s,M.data,M.gc,R,x),A=w;else if(Ei(x))for(p=0,v=x.length;p<v;++p)T=x[p],!Be(T)&&!Ei(T)&&(R=Sw(s,M.data,M.gc,R,T),A+=w);o.push(R),l.push(A),f=Math.max(R,f),g=Math.max(A,g)}TB(r,e);const L=o.indexOf(f),I=l.indexOf(g),P=k=>({width:o[k]||0,height:l[k]||0});return{first:P(0),last:P(e-1),widest:P(L),highest:P(I),widths:o,heights:l}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return kF(this._alignToPixels?no(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const n=e[t];return n.$context||(n.$context=RB(this.getContext(),t,n))}return this.$context||(this.$context=CB(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=_r(this.labelRotation),n=Math.abs(Math.cos(e)),s=Math.abs(Math.sin(e)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,l=r?r.widest.width+o:0,c=r?r.highest.height+o:0;return this.isHorizontal()?c*n>l*s?l/n:c/s:c*s<l*n?c/n:l/s}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,n=this.chart,s=this.options,{grid:r,position:o,border:l}=s,c=r.offset,f=this.isHorizontal(),m=this.ticks.length+(c?1:0),p=Dc(r),v=[],x=l.setContext(this.getContext()),E=x.display?x.width:0,b=E/2,M=function(D){return no(n,D,E)};let w,R,A,T,L,I,P,k,Y,F,G,K;if(o==="top")w=M(this.bottom),I=this.bottom-p,k=w-b,F=M(t.top)+b,K=t.bottom;else if(o==="bottom")w=M(this.top),F=t.top,K=M(t.bottom)-b,I=w+b,k=this.top+p;else if(o==="left")w=M(this.right),L=this.right-p,P=w-b,Y=M(t.left)+b,G=t.right;else if(o==="right")w=M(this.left),Y=t.left,G=M(t.right)-b,L=w+b,P=this.left+p;else if(e==="x"){if(o==="center")w=M((t.top+t.bottom)/2+.5);else if($t(o)){const D=Object.keys(o)[0],j=o[D];w=M(this.chart.scales[D].getPixelForValue(j))}F=t.top,K=t.bottom,I=w+b,k=I+p}else if(e==="y"){if(o==="center")w=M((t.left+t.right)/2);else if($t(o)){const D=Object.keys(o)[0],j=o[D];w=M(this.chart.scales[D].getPixelForValue(j))}L=w-b,P=L-p,Y=t.left,G=t.right}const $=oe(s.ticks.maxTicksLimit,m),q=Math.max(1,Math.ceil(m/$));for(R=0;R<m;R+=q){const D=this.getContext(R),j=r.setContext(D),U=l.setContext(D),J=j.lineWidth,st=j.color,O=U.dash||[],N=U.dashOffset,it=j.tickWidth,at=j.tickColor,ct=j.tickBorderDash||[],gt=j.tickBorderDashOffset;A=wB(this,R,c),A!==void 0&&(T=no(n,A,J),f?L=P=Y=G=T:I=k=F=K=T,v.push({tx1:L,ty1:I,tx2:P,ty2:k,x1:Y,y1:F,x2:G,y2:K,width:J,color:st,borderDash:O,borderDashOffset:N,tickWidth:it,tickColor:at,tickBorderDash:ct,tickBorderDashOffset:gt}))}return this._ticksLength=m,this._borderValue=w,v}_computeLabelItems(t){const e=this.axis,n=this.options,{position:s,ticks:r}=n,o=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:f,padding:g,mirror:m}=r,p=Dc(n.grid),v=p+g,x=m?-g:v,E=-_r(this.labelRotation),b=[];let M,w,R,A,T,L,I,P,k,Y,F,G,K="middle";if(s==="top")L=this.bottom-x,I=this._getXAxisLabelAlignment();else if(s==="bottom")L=this.top+x,I=this._getXAxisLabelAlignment();else if(s==="left"){const q=this._getYAxisLabelAlignment(p);I=q.textAlign,T=q.x}else if(s==="right"){const q=this._getYAxisLabelAlignment(p);I=q.textAlign,T=q.x}else if(e==="x"){if(s==="center")L=(t.top+t.bottom)/2+v;else if($t(s)){const q=Object.keys(s)[0],D=s[q];L=this.chart.scales[q].getPixelForValue(D)+v}I=this._getXAxisLabelAlignment()}else if(e==="y"){if(s==="center")T=(t.left+t.right)/2-v;else if($t(s)){const q=Object.keys(s)[0],D=s[q];T=this.chart.scales[q].getPixelForValue(D)}I=this._getYAxisLabelAlignment(p).textAlign}e==="y"&&(c==="start"?K="top":c==="end"&&(K="bottom"));const $=this._getLabelSizes();for(M=0,w=l.length;M<w;++M){R=l[M],A=R.label;const q=r.setContext(this.getContext(M));P=this.getPixelForTick(M)+r.labelOffset,k=this._resolveTickFontOptions(M),Y=k.lineHeight,F=Ei(A)?A.length:1;const D=F/2,j=q.color,U=q.textStrokeColor,J=q.textStrokeWidth;let st=I;o?(T=P,I==="inner"&&(M===w-1?st=this.options.reverse?"left":"right":M===0?st=this.options.reverse?"right":"left":st="center"),s==="top"?f==="near"||E!==0?G=-F*Y+Y/2:f==="center"?G=-$.highest.height/2-D*Y+Y:G=-$.highest.height+Y/2:f==="near"||E!==0?G=Y/2:f==="center"?G=$.highest.height/2-D*Y:G=$.highest.height-F*Y,m&&(G*=-1),E!==0&&!q.showLabelBackdrop&&(T+=Y/2*Math.sin(E))):(L=P,G=(1-F)*Y/2);let O;if(q.showLabelBackdrop){const N=is(q.backdropPadding),it=$.heights[M],at=$.widths[M];let ct=G-N.top,gt=0-N.left;switch(K){case"middle":ct-=it/2;break;case"bottom":ct-=it;break}switch(I){case"center":gt-=at/2;break;case"right":gt-=at;break;case"inner":M===w-1?gt-=at:M>0&&(gt-=at/2);break}O={left:gt,top:ct,width:at+N.width,height:it+N.height,color:q.backdropColor}}b.push({label:A,font:k,textOffset:G,options:{rotation:E,color:j,strokeColor:U,strokeWidth:J,textAlign:st,textBaseline:K,translation:[T,L],backdrop:O}})}return b}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-_r(this.labelRotation))return t==="top"?"left":"right";let s="center";return e.align==="start"?s="left":e.align==="end"?s="right":e.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:n,mirror:s,padding:r}}=this.options,o=this._getLabelSizes(),l=t+r,c=o.widest.width;let f,g;return e==="left"?s?(g=this.right+r,n==="near"?f="left":n==="center"?(f="center",g+=c/2):(f="right",g+=c)):(g=this.right-l,n==="near"?f="right":n==="center"?(f="center",g-=c/2):(f="left",g=this.left)):e==="right"?s?(g=this.left+r,n==="near"?f="right":n==="center"?(f="center",g-=c/2):(f="left",g-=c)):(g=this.left+l,n==="near"?f="left":n==="center"?(f="center",g+=c/2):(f="right",g=this.right)):f="right",{textAlign:f,x:g}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:n,top:s,width:r,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,s,r,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const s=this.ticks.findIndex(r=>r.value===t);return s>=0?e.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){const e=this.options.grid,n=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const l=(c,f,g)=>{!g.width||!g.color||(n.save(),n.lineWidth=g.width,n.strokeStyle=g.color,n.setLineDash(g.borderDash||[]),n.lineDashOffset=g.borderDashOffset,n.beginPath(),n.moveTo(c.x,c.y),n.lineTo(f.x,f.y),n.stroke(),n.restore())};if(e.display)for(r=0,o=s.length;r<o;++r){const c=s[r];e.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),e.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:n,grid:s}}=this,r=n.setContext(this.getContext()),o=n.display?r.width:0;if(!o)return;const l=s.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let f,g,m,p;this.isHorizontal()?(f=no(t,this.left,o)-o/2,g=no(t,this.right,l)+l/2,m=p=c):(m=no(t,this.top,o)-o/2,p=no(t,this.bottom,l)+l/2,f=g=c),e.save(),e.lineWidth=r.width,e.strokeStyle=r.color,e.beginPath(),e.moveTo(f,m),e.lineTo(g,p),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const n=this.ctx,s=this._computeLabelArea();s&&Hv(n,s);const r=this.getLabelItems(t);for(const o of r){const l=o.options,c=o.font,f=o.label,g=o.textOffset;Lh(n,f,0,g,c,l)}s&&qv(n)}drawTitle(){const{ctx:t,options:{position:e,title:n,reverse:s}}=this;if(!n.display)return;const r=Ui(n.font),o=is(n.padding),l=n.align;let c=r.lineHeight/2;e==="bottom"||e==="center"||$t(e)?(c+=o.bottom,Ei(n.text)&&(c+=r.lineHeight*(n.text.length-1))):c+=o.top;const{titleX:f,titleY:g,maxWidth:m,rotation:p}=OB(this,c,e,l);Lh(t,n.text,0,0,r,{color:n.color,maxWidth:m,rotation:p,textAlign:AB(l,e,s),textBaseline:"middle",translation:[f,g]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,n=oe(t.grid&&t.grid.z,-1),s=oe(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Tu.prototype.draw?[{z:e,draw:r=>{this.draw(r)}}]:[{z:n,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:e,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",s=[];let r,o;for(r=0,o=e.length;r<o;++r){const l=e[r];l[n]===this.id&&(!t||l.type===t)&&s.push(l)}return s}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return Ui(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Zd{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let n;LB(e)&&(n=this.register(e));const s=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in s||(s[r]=t,DB(t,o,n),this.override&&ii.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,n=t.id,s=this.scope;n in e&&delete e[n],s&&n in ii[s]&&(delete ii[s][n],this.override&&delete Po[n])}}function DB(i,t,e){const n=Dh(Object.create(null),[e?ii.get(e):{},ii.get(t),i.defaults]);ii.set(t,n),i.defaultRoutes&&IB(t,i.defaultRoutes),i.descriptors&&ii.describe(t,i.descriptors)}function IB(i,t){Object.keys(t).forEach(e=>{const n=e.split("."),s=n.pop(),r=[i].concat(n).join("."),o=t[e].split("."),l=o.pop(),c=o.join(".");ii.route(r,s,c,l)})}function LB(i){return"id"in i&&"defaults"in i}class PB{constructor(){this.controllers=new Zd(N3,"datasets",!0),this.elements=new Zd(Bo,"elements"),this.plugins=new Zd(Object,"plugins"),this.scales=new Zd(Tu,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,n){[...e].forEach(s=>{const r=n||this._getRegistryForType(s);n||r.isForType(s)||r===this.plugins&&s.id?this._exec(t,r,s):de(s,o=>{const l=n||this._getRegistryForType(o);this._exec(t,l,o)})})}_exec(t,e,n){const s=Fv(t);Ae(n["before"+s],[],n),e[t](n),Ae(n["after"+s],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){const s=e.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+n+".");return s}}var Rs=new PB;class NB{constructor(){this._init=void 0}notify(t,e,n,s){if(e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const r=s?this._descriptors(t).filter(s):this._descriptors(t),o=this._notify(r,t,e,n);return e==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),o}_notify(t,e,n,s){s=s||{};for(const r of t){const o=r.plugin,l=o[n],c=[e,s,r.options];if(Ae(l,c,o)===!1&&s.cancelable)return!1}return!0}invalidate(){Be(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const n=t&&t.config,s=oe(n.options&&n.options.plugins,{}),r=zB(n);return s===!1&&!e?[]:kB(t,r,s,e)}_notifyStateChanges(t){const e=this._oldCache||[],n=this._cache,s=(r,o)=>r.filter(l=>!o.some(c=>l.plugin.id===c.plugin.id));this._notify(s(e,n),t,"stop"),this._notify(s(n,e),t,"start")}}function zB(i){const t={},e=[],n=Object.keys(Rs.plugins.items);for(let r=0;r<n.length;r++)e.push(Rs.getPlugin(n[r]));const s=i.plugins||[];for(let r=0;r<s.length;r++){const o=s[r];e.indexOf(o)===-1&&(e.push(o),t[o.id]=!0)}return{plugins:e,localIds:t}}function GB(i,t){return!t&&i===!1?null:i===!0?{}:i}function kB(i,{plugins:t,localIds:e},n,s){const r=[],o=i.getContext();for(const l of t){const c=l.id,f=GB(n[c],s);f!==null&&r.push({plugin:l,options:FB(i.config,{plugin:l,local:e[c]},f,o)})}return r}function FB(i,{plugin:t,local:e},n,s){const r=i.pluginScopeKeys(t),o=i.getOptionScopes(n,r);return e&&t.defaults&&o.push(t.defaults),i.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function l1(i,t){const e=ii.datasets[i]||{};return((t.datasets||{})[i]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function jB(i,t){let e=i;return i==="_index_"?e=t:i==="_value_"&&(e=t==="x"?"y":"x"),e}function BB(i,t){return i===t?"_index_":"_value_"}function Yw(i){if(i==="x"||i==="y"||i==="r")return i}function UB(i){if(i==="top"||i==="bottom")return"x";if(i==="left"||i==="right")return"y"}function u1(i,...t){if(Yw(i))return i;for(const e of t){const n=e.axis||UB(e.position)||i.length>1&&Yw(i[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${i}' axis. Please provide 'axis' or 'position' option.`)}function Xw(i,t,e){if(e[t+"AxisID"]===i)return{axis:t}}function HB(i,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(n=>n.xAxisID===i||n.yAxisID===i);if(e.length)return Xw(i,"x",e[0])||Xw(i,"y",e[0])}return{}}function qB(i,t){const e=Po[i.type]||{scales:{}},n=t.scales||{},s=l1(i.type,t),r=Object.create(null);return Object.keys(n).forEach(o=>{const l=n[o];if(!$t(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=u1(o,l,HB(o,i),ii.scales[l.type]),f=BB(c,s),g=e.scales||{};r[o]=eh(Object.create(null),[{axis:c},l,g[c],g[f]])}),i.data.datasets.forEach(o=>{const l=o.type||i.type,c=o.indexAxis||l1(l,t),g=(Po[l]||{}).scales||{};Object.keys(g).forEach(m=>{const p=jB(m,c),v=o[p+"AxisID"]||p;r[v]=r[v]||Object.create(null),eh(r[v],[{axis:p},n[v],g[m]])})}),Object.keys(r).forEach(o=>{const l=r[o];eh(l,[ii.scales[l.type],ii.scale])}),r}function B3(i){const t=i.options||(i.options={});t.plugins=oe(t.plugins,{}),t.scales=qB(i,t)}function U3(i){return i=i||{},i.datasets=i.datasets||[],i.labels=i.labels||[],i}function VB(i){return i=i||{},i.data=U3(i.data),B3(i),i}const Ww=new Map,H3=new Set;function $d(i,t){let e=Ww.get(i);return e||(e=t(),Ww.set(i,e),H3.add(e)),e}const Ic=(i,t,e)=>{const n=Ih(t,e);n!==void 0&&i.add(n)};class YB{constructor(t){this._config=VB(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=U3(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),B3(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return $d(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return $d(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return $d(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,n=this.type;return $d(`${n}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const n=this._scopeCache;let s=n.get(t);return(!s||e)&&(s=new Map,n.set(t,s)),s}getOptionScopes(t,e,n){const{options:s,type:r}=this,o=this._cachedScopes(t,n),l=o.get(e);if(l)return l;const c=new Set;e.forEach(g=>{t&&(c.add(t),g.forEach(m=>Ic(c,t,m))),g.forEach(m=>Ic(c,s,m)),g.forEach(m=>Ic(c,Po[r]||{},m)),g.forEach(m=>Ic(c,ii,m)),g.forEach(m=>Ic(c,o1,m))});const f=Array.from(c);return f.length===0&&f.push(Object.create(null)),H3.has(e)&&o.set(e,f),f}chartOptionScopes(){const{options:t,type:e}=this;return[t,Po[e]||{},ii.datasets[e]||{},{type:e},ii,o1]}resolveNamedOptions(t,e,n,s=[""]){const r={$shared:!0},{resolver:o,subPrefixes:l}=Kw(this._resolverCache,t,s);let c=o;if(WB(o,e)){r.$shared=!1,n=Oa(n)?n():n;const f=this.createResolver(t,n,l);c=pu(o,n,f)}for(const f of e)r[f]=c[f];return r}createResolver(t,e,n=[""],s){const{resolver:r}=Kw(this._resolverCache,t,n);return $t(e)?pu(r,e,void 0,s):r}}function Kw(i,t,e){let n=i.get(t);n||(n=new Map,i.set(t,n));const s=e.join();let r=n.get(s);return r||(r={resolver:Yv(t,e),subPrefixes:e.filter(l=>!l.toLowerCase().includes("hover"))},n.set(s,r)),r}const XB=i=>$t(i)&&Object.getOwnPropertyNames(i).some(t=>Oa(i[t]));function WB(i,t){const{isScriptable:e,isIndexable:n}=C3(i);for(const s of t){const r=e(s),o=n(s),l=(o||r)&&i[s];if(r&&(Oa(l)||XB(l))||o&&Ei(l))return!0}return!1}var KB="4.5.1";const ZB=["top","bottom","left","right","chartArea"];function Zw(i,t){return i==="top"||i==="bottom"||ZB.indexOf(i)===-1&&t==="x"}function $w(i,t){return function(e,n){return e[i]===n[i]?e[t]-n[t]:e[i]-n[i]}}function Qw(i){const t=i.chart,e=t.options.animation;t.notifyPlugins("afterRender"),Ae(e&&e.onComplete,[i],t)}function $B(i){const t=i.chart,e=t.options.animation;Ae(e&&e.onProgress,[i],t)}function q3(i){return Kv()&&typeof i=="string"?i=document.getElementById(i):i&&i.length&&(i=i[0]),i&&i.canvas&&(i=i.canvas),i}const dg={},Jw=i=>{const t=q3(i);return Object.values(dg).filter(e=>e.canvas===t).pop()};function QB(i,t,e){const n=Object.keys(i);for(const s of n){const r=+s;if(r>=t){const o=i[s];delete i[s],(e>0||r>t)&&(i[r+e]=o)}}}function JB(i,t,e,n){return!e||i.type==="mouseout"?null:n?t:i}let Z0=class{static defaults=ii;static instances=dg;static overrides=Po;static registry=Rs;static version=KB;static getChart=Jw;static register(...t){Rs.add(...t),t4()}static unregister(...t){Rs.remove(...t),t4()}constructor(t,e){const n=this.config=new YB(e),s=q3(t),r=Jw(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||yB(s)),this.platform.updateConfig(n);const l=this.platform.acquireContext(s,o.aspectRatio),c=l&&l.canvas,f=c&&c.height,g=c&&c.width;if(this.id=MF(),this.ctx=l,this.canvas=c,this.width=g,this.height=f,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new NB,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=HF(m=>this.update(m),o.resizeDelay||0),this._dataChanges=[],dg[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}fr.listen(this,"complete",Qw),fr.listen(this,"progress",$B),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:n,height:s,_aspectRatio:r}=this;return Be(t)?e&&r?r:s?n/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Rs}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Rw(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Mw(this.canvas,this.ctx),this}stop(){return fr.stop(this),this}resize(t,e){fr.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const n=this.options,s=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,t,e,r),l=n.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Rw(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),Ae(n.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};de(e,(n,s)=>{n.id=s})}buildOrUpdateScales(){const t=this.options,e=t.scales,n=this.scales,s=Object.keys(n).reduce((o,l)=>(o[l]=!1,o),{});let r=[];e&&(r=r.concat(Object.keys(e).map(o=>{const l=e[o],c=u1(o,l),f=c==="r",g=c==="x";return{options:l,dposition:f?"chartArea":g?"bottom":"left",dtype:f?"radialLinear":g?"category":"linear"}}))),de(r,o=>{const l=o.options,c=l.id,f=u1(c,l),g=oe(l.type,o.dtype);(l.position===void 0||Zw(l.position,f)!==Zw(o.dposition))&&(l.position=o.dposition),s[c]=!0;let m=null;if(c in n&&n[c].type===g)m=n[c];else{const p=Rs.getScale(g);m=new p({id:c,type:g,ctx:this.ctx,chart:this}),n[m.id]=m}m.init(l,t)}),de(s,(o,l)=>{o||delete n[l]}),de(n,o=>{$n.configure(this,o,o.options),$n.addBox(this,o)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,n=t.length;if(t.sort((s,r)=>s.index-r.index),n>e){for(let s=e;s<n;++s)this._destroyDatasetMeta(s);t.splice(e,n-e)}this._sortedMetasets=t.slice(0).sort($w("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((n,s)=>{e.filter(r=>r===n._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let n,s;for(this._removeUnreferencedMetasets(),n=0,s=e.length;n<s;n++){const r=e[n];let o=this.getDatasetMeta(n);const l=r.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(n),o=this.getDatasetMeta(n)),o.type=l,o.indexAxis=r.indexAxis||l1(l,this.options),o.order=r.order||0,o.index=n,o.label=""+r.label,o.visible=this.isDatasetVisible(n),o.controller)o.controller.updateIndex(n),o.controller.linkScales();else{const c=Rs.getController(l),{datasetElementType:f,dataElementType:g}=ii.datasets[l];Object.assign(c,{dataElementType:Rs.getElement(g),datasetElementType:f&&Rs.getElement(f)}),o.controller=new c(this,n),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){de(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const n=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let f=0,g=this.data.datasets.length;f<g;f++){const{controller:m}=this.getDatasetMeta(f),p=!s&&r.indexOf(m)===-1;m.buildOrUpdateElements(p),o=Math.max(+m.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),s||de(r,f=>{f.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort($w("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){de(this.scales,t=>{$n.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),n=new Set(t.events);(!gw(e,n)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:n,start:s,count:r}of e){const o=n==="_removeElements"?-r:r;QB(t,s,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,n=r=>new Set(t.filter(o=>o[0]===r).map((o,l)=>l+","+o.splice(1).join(","))),s=n(0);for(let r=1;r<e;r++)if(!gw(s,n(r)))return;return Array.from(s).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;$n.update(this,this.width,this.height,t);const e=this.chartArea,n=e.width<=0||e.height<=0;this._layers=[],de(this.boxes,s=>{n&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,r)=>{s._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,n=this.data.datasets.length;e<n;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,n=this.data.datasets.length;e<n;++e)this._updateDataset(e,Oa(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const n=this.getDatasetMeta(t),s={meta:n,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(n.controller._update(e),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(fr.has(this)?this.attached&&!fr.running(this)&&fr.start(this):(this.draw(),Qw({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:n,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,n=[];let s,r;for(s=0,r=e.length;s<r;++s){const o=e[s];(!t||o.visible)&&n.push(o)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,n={meta:t,index:t.index,cancelable:!0},s=Rj(this,t);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(s&&Hv(e,s),t.controller.draw(),s&&qv(e),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(t){return w3(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,n,s){const r=Zj.modes[e];return typeof r=="function"?r(this,t,n,s):[]}getDatasetMeta(t){const e=this.data.datasets[t],n=this._metasets;let s=n.filter(r=>r&&r._dataset===e).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(s)),s}getContext(){return this.$context||(this.$context=wu(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const n=this.getDatasetMeta(t);return typeof n.hidden=="boolean"?!n.hidden:!e.hidden}setDatasetVisibility(t,e){const n=this.getDatasetMeta(t);n.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,n){const s=n?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,s);t0(e)?(r.data[e].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),o.update(r,{visible:n}),this.update(l=>l.datasetIndex===t?s:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),fr.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Mw(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete dg[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,n=(r,o)=>{e.addEventListener(this,r,o),t[r]=o},s=(r,o,l)=>{r.offsetX=o,r.offsetY=l,this._eventHandler(r)};de(this.options.events,r=>n(r,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,n=(c,f)=>{e.addEventListener(this,c,f),t[c]=f},s=(c,f)=>{t[c]&&(e.removeEventListener(this,c,f),delete t[c])},r=(c,f)=>{this.canvas&&this.resize(c,f)};let o;const l=()=>{s("attach",l),this.attached=!0,this.resize(),n("resize",r),n("detach",o)};o=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),n("attach",l)},e.isAttached(this.canvas)?l():o()}unbindEvents(){de(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},de(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,n){const s=n?"set":"remove";let r,o,l,c;for(e==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),l=0,c=t.length;l<c;++l){o=t[l];const f=o&&this.getDatasetMeta(o.datasetIndex).controller;f&&f[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],n=t.map(({datasetIndex:r,index:o})=>{const l=this.getDatasetMeta(r);if(!l)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:l.data[o],index:o}});!Qg(n,e)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,e))}notifyPlugins(t,e,n){return this._plugins.notify(this,t,e,n)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,n){const s=this.options.hover,r=(c,f)=>c.filter(g=>!f.some(m=>g.datasetIndex===m.datasetIndex&&g.index===m.index)),o=r(e,t),l=n?t:r(t,e);o.length&&this.updateHoverStyle(o,s.mode,!1),l.length&&s.mode&&this.updateHoverStyle(l,s.mode,!0)}_eventHandler(t,e){const n={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},s=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",n,s)===!1)return;const r=this._handleEvent(t,e,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,s),(r||n.changed)&&this.render(),this}_handleEvent(t,e,n){const{_active:s=[],options:r}=this,o=e,l=this._getActiveElements(t,s,n,o),c=OF(t),f=JB(t,this._lastEvent,n,c);n&&(this._lastEvent=null,Ae(r.onHover,[t,l,this],this),c&&Ae(r.onClick,[t,l,this],this));const g=!Qg(l,s);return(g||e)&&(this._active=l,this._updateHoverStyles(l,s,e)),this._lastEvent=f,g}_getActiveElements(t,e,n,s){if(t.type==="mouseout")return[];if(!n)return e;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,s)}};function t4(){return de(Z0.instances,i=>i._plugins.invalidate())}function tU(i,t,e){const{startAngle:n,x:s,y:r,outerRadius:o,innerRadius:l,options:c}=t,{borderWidth:f,borderJoinStyle:g}=c,m=Math.min(f/o,As(n-e));if(i.beginPath(),i.arc(s,r,o-f/2,n+m/2,e-m/2),l>0){const p=Math.min(f/l,As(n-e));i.arc(s,r,l+f/2,e-p/2,n+p/2,!0)}else{const p=Math.min(f/2,o*As(n-e));if(g==="round")i.arc(s,r,p,e-be/2,n+be/2,!0);else if(g==="bevel"){const v=2*p*p,x=-v*Math.cos(e+be/2)+s,E=-v*Math.sin(e+be/2)+r,b=v*Math.cos(n+be/2)+s,M=v*Math.sin(n+be/2)+r;i.lineTo(x,E),i.lineTo(b,M)}}i.closePath(),i.moveTo(0,0),i.rect(0,0,i.canvas.width,i.canvas.height),i.clip("evenodd")}function eU(i,t,e){const{startAngle:n,pixelMargin:s,x:r,y:o,outerRadius:l,innerRadius:c}=t;let f=s/l;i.beginPath(),i.arc(r,o,l,n-f,e+f),c>s?(f=s/c,i.arc(r,o,c,e+f,n-f,!0)):i.arc(r,o,s,e+mi,n-mi),i.closePath(),i.clip()}function iU(i){return Vv(i,["outerStart","outerEnd","innerStart","innerEnd"])}function nU(i,t,e,n){const s=iU(i.options.borderRadius),r=(e-t)/2,o=Math.min(r,n*t/2),l=c=>{const f=(e-Math.min(r,c))*n/2;return fn(c,0,Math.min(r,f))};return{outerStart:l(s.outerStart),outerEnd:l(s.outerEnd),innerStart:fn(s.innerStart,0,o),innerEnd:fn(s.innerEnd,0,o)}}function zl(i,t,e,n){return{x:e+i*Math.cos(t),y:n+i*Math.sin(t)}}function l0(i,t,e,n,s,r){const{x:o,y:l,startAngle:c,pixelMargin:f,innerRadius:g}=t,m=Math.max(t.outerRadius+n+e-f,0),p=g>0?g+n+e+f:0;let v=0;const x=s-c;if(n){const q=g>0?g-n:0,D=m>0?m-n:0,j=(q+D)/2,U=j!==0?x*j/(j+n):x;v=(x-U)/2}const E=Math.max(.001,x*m-e/be)/m,b=(x-E)/2,M=c+b+v,w=s-b-v,{outerStart:R,outerEnd:A,innerStart:T,innerEnd:L}=nU(t,p,m,w-M),I=m-R,P=m-A,k=M+R/I,Y=w-A/P,F=p+T,G=p+L,K=M+T/F,$=w-L/G;if(i.beginPath(),r){const q=(k+Y)/2;if(i.arc(o,l,m,k,q),i.arc(o,l,m,q,Y),A>0){const J=zl(P,Y,o,l);i.arc(J.x,J.y,A,Y,w+mi)}const D=zl(G,w,o,l);if(i.lineTo(D.x,D.y),L>0){const J=zl(G,$,o,l);i.arc(J.x,J.y,L,w+mi,$+Math.PI)}const j=(w-L/p+(M+T/p))/2;if(i.arc(o,l,p,w-L/p,j,!0),i.arc(o,l,p,j,M+T/p,!0),T>0){const J=zl(F,K,o,l);i.arc(J.x,J.y,T,K+Math.PI,M-mi)}const U=zl(I,M,o,l);if(i.lineTo(U.x,U.y),R>0){const J=zl(I,k,o,l);i.arc(J.x,J.y,R,M-mi,k)}}else{i.moveTo(o,l);const q=Math.cos(k)*m+o,D=Math.sin(k)*m+l;i.lineTo(q,D);const j=Math.cos(Y)*m+o,U=Math.sin(Y)*m+l;i.lineTo(j,U)}i.closePath()}function sU(i,t,e,n,s){const{fullCircles:r,startAngle:o,circumference:l}=t;let c=t.endAngle;if(r){l0(i,t,e,n,c,s);for(let f=0;f<r;++f)i.fill();isNaN(l)||(c=o+(l%ci||ci))}return l0(i,t,e,n,c,s),i.fill(),c}function rU(i,t,e,n,s){const{fullCircles:r,startAngle:o,circumference:l,options:c}=t,{borderWidth:f,borderJoinStyle:g,borderDash:m,borderDashOffset:p,borderRadius:v}=c,x=c.borderAlign==="inner";if(!f)return;i.setLineDash(m||[]),i.lineDashOffset=p,x?(i.lineWidth=f*2,i.lineJoin=g||"round"):(i.lineWidth=f,i.lineJoin=g||"bevel");let E=t.endAngle;if(r){l0(i,t,e,n,E,s);for(let b=0;b<r;++b)i.stroke();isNaN(l)||(E=o+(l%ci||ci))}x&&eU(i,t,E),c.selfJoin&&E-o>=be&&v===0&&g!=="miter"&&tU(i,t,E),r||(l0(i,t,e,n,E,s),i.stroke())}class aU extends Bo{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,n){const s=this.getProps(["x","y"],n),{angle:r,distance:o}=_3(s,{x:t,y:e}),{startAngle:l,endAngle:c,innerRadius:f,outerRadius:g,circumference:m}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),p=(this.options.spacing+this.options.borderWidth)/2,v=oe(m,c-l),x=s0(r,l,c)&&l!==c,E=v>=ci||x,b=yo(o,f+p,g+p);return E&&b}getCenterPoint(t){const{x:e,y:n,startAngle:s,endAngle:r,innerRadius:o,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:c,spacing:f}=this.options,g=(s+r)/2,m=(o+l+f+c)/2;return{x:e+Math.cos(g)*m,y:n+Math.sin(g)*m}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:n}=this,s=(e.offset||0)/4,r=(e.spacing||0)/2,o=e.circular;if(this.pixelMargin=e.borderAlign==="inner"?.33:0,this.fullCircles=n>ci?Math.floor(n/ci):0,n===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const l=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(l)*s,Math.sin(l)*s);const c=1-Math.sin(Math.min(be,n||0)),f=s*c;t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,sU(t,this,f,r,o),rU(t,this,f,r,o),t.restore()}}function V3(i,t){const{x:e,y:n,base:s,width:r,height:o}=i.getProps(["x","y","base","width","height"],t);let l,c,f,g,m;return i.horizontal?(m=o/2,l=Math.min(e,s),c=Math.max(e,s),f=n-m,g=n+m):(m=r/2,l=e-m,c=e+m,f=Math.min(n,s),g=Math.max(n,s)),{left:l,top:f,right:c,bottom:g}}function ba(i,t,e,n){return i?0:fn(t,e,n)}function oU(i,t,e){const n=i.options.borderWidth,s=i.borderSkipped,r=T3(n);return{t:ba(s.top,r.top,0,e),r:ba(s.right,r.right,0,t),b:ba(s.bottom,r.bottom,0,e),l:ba(s.left,r.left,0,t)}}function lU(i,t,e){const{enableBorderRadius:n}=i.getProps(["enableBorderRadius"]),s=i.options.borderRadius,r=su(s),o=Math.min(t,e),l=i.borderSkipped,c=n||$t(s);return{topLeft:ba(!c||l.top||l.left,r.topLeft,0,o),topRight:ba(!c||l.top||l.right,r.topRight,0,o),bottomLeft:ba(!c||l.bottom||l.left,r.bottomLeft,0,o),bottomRight:ba(!c||l.bottom||l.right,r.bottomRight,0,o)}}function uU(i){const t=V3(i),e=t.right-t.left,n=t.bottom-t.top,s=oU(i,e/2,n/2),r=lU(i,e/2,n/2);return{outer:{x:t.left,y:t.top,w:e,h:n,radius:r},inner:{x:t.left+s.l,y:t.top+s.t,w:e-s.l-s.r,h:n-s.t-s.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,r.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(s.b,s.r))}}}}function d_(i,t,e,n){const s=t===null,r=e===null,l=i&&!(s&&r)&&V3(i,n);return l&&(s||yo(t,l.left,l.right))&&(r||yo(e,l.top,l.bottom))}function cU(i){return i.topLeft||i.topRight||i.bottomLeft||i.bottomRight}function hU(i,t){i.rect(t.x,t.y,t.w,t.h)}function g_(i,t,e={}){const n=i.x!==e.x?-t:0,s=i.y!==e.y?-t:0,r=(i.x+i.w!==e.x+e.w?t:0)-n,o=(i.y+i.h!==e.y+e.h?t:0)-s;return{x:i.x+n,y:i.y+s,w:i.w+r,h:i.h+o,radius:i.radius}}class fU extends Bo{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:n,backgroundColor:s}}=this,{inner:r,outer:o}=uU(this),l=cU(o.radius)?r0:hU;t.save(),(o.w!==r.w||o.h!==r.h)&&(t.beginPath(),l(t,g_(o,e,r)),t.clip(),l(t,g_(r,-e,o)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),l(t,g_(r,e)),t.fillStyle=s,t.fill(),t.restore()}inRange(t,e,n){return d_(this,t,e,n)}inXRange(t,e){return d_(this,t,null,e)}inYRange(t,e){return d_(this,null,t,e)}getCenterPoint(t){const{x:e,y:n,base:s,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(e+s)/2:e,y:r?n:(n+s)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}const e4=(i,t)=>{let{boxHeight:e=t,boxWidth:n=t}=i;return i.usePointStyle&&(e=Math.min(e,t),n=i.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:e,itemHeight:Math.max(t,e)}},dU=(i,t)=>i!==null&&t!==null&&i.datasetIndex===t.datasetIndex&&i.index===t.index;class i4 extends Bo{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=Ae(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(n=>t.filter(n,this.chart.data))),t.sort&&(e=e.sort((n,s)=>t.sort(n,s,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const n=t.labels,s=Ui(n.font),r=s.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=e4(n,r);let f,g;e.font=s.string,this.isHorizontal()?(f=this.maxWidth,g=this._fitRows(o,r,l,c)+10):(g=this.maxHeight,f=this._fitCols(o,s,l,c)+10),this.width=Math.min(f,t.maxWidth||this.maxWidth),this.height=Math.min(g,t.maxHeight||this.maxHeight)}_fitRows(t,e,n,s){const{ctx:r,maxWidth:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],f=this.lineWidths=[0],g=s+l;let m=t;r.textAlign="left",r.textBaseline="middle";let p=-1,v=-g;return this.legendItems.forEach((x,E)=>{const b=n+e/2+r.measureText(x.text).width;(E===0||f[f.length-1]+b+2*l>o)&&(m+=g,f[f.length-(E>0?0:1)]=0,v+=g,p++),c[E]={left:0,top:v,row:p,width:b,height:s},f[f.length-1]+=b+l}),m}_fitCols(t,e,n,s){const{ctx:r,maxHeight:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],f=this.columnSizes=[],g=o-t;let m=l,p=0,v=0,x=0,E=0;return this.legendItems.forEach((b,M)=>{const{itemWidth:w,itemHeight:R}=gU(n,e,r,b,s);M>0&&v+R+2*l>g&&(m+=p+l,f.push({width:p,height:v}),x+=p+l,E++,p=v=0),c[M]={left:x,top:v,col:E,width:w,height:R},p=Math.max(p,w),v+=R+l}),m+=p,f.push({width:p,height:v}),m}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:n,labels:{padding:s},rtl:r}}=this,o=ru(r,this.left,this.width);if(this.isHorizontal()){let l=0,c=zi(n,this.left+s,this.right-this.lineWidths[l]);for(const f of e)l!==f.row&&(l=f.row,c=zi(n,this.left+s,this.right-this.lineWidths[l])),f.top+=this.top+t+s,f.left=o.leftForLtr(o.x(c),f.width),c+=f.width+s}else{let l=0,c=zi(n,this.top+t+s,this.bottom-this.columnSizes[l].height);for(const f of e)f.col!==l&&(l=f.col,c=zi(n,this.top+t+s,this.bottom-this.columnSizes[l].height)),f.top=c,f.left+=this.left+s,f.left=o.leftForLtr(o.x(f.left),f.width),c+=f.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Hv(t,this),this._draw(),qv(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:n,ctx:s}=this,{align:r,labels:o}=t,l=ii.color,c=ru(t.rtl,this.left,this.width),f=Ui(o.font),{padding:g}=o,m=f.size,p=m/2;let v;this.drawTitle(),s.textAlign=c.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=f.string;const{boxWidth:x,boxHeight:E,itemHeight:b}=e4(o,m),M=function(L,I,P){if(isNaN(x)||x<=0||isNaN(E)||E<0)return;s.save();const k=oe(P.lineWidth,1);if(s.fillStyle=oe(P.fillStyle,l),s.lineCap=oe(P.lineCap,"butt"),s.lineDashOffset=oe(P.lineDashOffset,0),s.lineJoin=oe(P.lineJoin,"miter"),s.lineWidth=k,s.strokeStyle=oe(P.strokeStyle,l),s.setLineDash(oe(P.lineDash,[])),o.usePointStyle){const Y={radius:E*Math.SQRT2/2,pointStyle:P.pointStyle,rotation:P.rotation,borderWidth:k},F=c.xPlus(L,x/2),G=I+p;M3(s,Y,F,G,o.pointStyleWidth&&x)}else{const Y=I+Math.max((m-E)/2,0),F=c.leftForLtr(L,x),G=su(P.borderRadius);s.beginPath(),Object.values(G).some(K=>K!==0)?r0(s,{x:F,y:Y,w:x,h:E,radius:G}):s.rect(F,Y,x,E),s.fill(),k!==0&&s.stroke()}s.restore()},w=function(L,I,P){Lh(s,P.text,L,I+b/2,f,{strikethrough:P.hidden,textAlign:c.textAlign(P.textAlign)})},R=this.isHorizontal(),A=this._computeTitleHeight();R?v={x:zi(r,this.left+g,this.right-n[0]),y:this.top+g+A,line:0}:v={x:this.left+g,y:zi(r,this.top+A+g,this.bottom-e[0].height),line:0},D3(this.ctx,t.textDirection);const T=b+g;this.legendItems.forEach((L,I)=>{s.strokeStyle=L.fontColor,s.fillStyle=L.fontColor;const P=s.measureText(L.text).width,k=c.textAlign(L.textAlign||(L.textAlign=o.textAlign)),Y=x+p+P;let F=v.x,G=v.y;c.setWidth(this.width),R?I>0&&F+Y+g>this.right&&(G=v.y+=T,v.line++,F=v.x=zi(r,this.left+g,this.right-n[v.line])):I>0&&G+T>this.bottom&&(F=v.x=F+e[v.line].width+g,v.line++,G=v.y=zi(r,this.top+A+g,this.bottom-e[v.line].height));const K=c.x(F);if(M(K,G,L),F=qF(k,F+x+p,R?F+Y:this.right,t.rtl),w(c.x(F),G,L),R)v.x+=Y+g;else if(typeof L.text!="string"){const $=f.lineHeight;v.y+=Y3(L,$)+g}else v.y+=T}),I3(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,n=Ui(e.font),s=is(e.padding);if(!e.display)return;const r=ru(t.rtl,this.left,this.width),o=this.ctx,l=e.position,c=n.size/2,f=s.top+c;let g,m=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),g=this.top+f,m=zi(t.align,m,this.right-p);else{const x=this.columnSizes.reduce((E,b)=>Math.max(E,b.height),0);g=f+zi(t.align,this.top,this.bottom-x-t.labels.padding-this._computeTitleHeight())}const v=zi(l,m,m+p);o.textAlign=r.textAlign(Bv(l)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=n.string,Lh(o,e.text,v,g,n)}_computeTitleHeight(){const t=this.options.title,e=Ui(t.font),n=is(t.padding);return t.display?e.lineHeight+n.height:0}_getLegendItemAt(t,e){let n,s,r;if(yo(t,this.left,this.right)&&yo(e,this.top,this.bottom)){for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(s=r[n],yo(t,s.left,s.left+s.width)&&yo(e,s.top,s.top+s.height))return this.legendItems[n]}return null}handleEvent(t){const e=this.options;if(!yU(t.type,e))return;const n=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const s=this._hoveredItem,r=dU(s,n);s&&!r&&Ae(e.onLeave,[t,s,this],this),this._hoveredItem=n,n&&!r&&Ae(e.onHover,[t,n,this],this)}else n&&Ae(e.onClick,[t,n,this],this)}}function gU(i,t,e,n,s){const r=mU(n,i,t,e),o=pU(s,n,t.lineHeight);return{itemWidth:r,itemHeight:o}}function mU(i,t,e,n){let s=i.text;return s&&typeof s!="string"&&(s=s.reduce((r,o)=>r.length>o.length?r:o)),t+e.size/2+n.measureText(s).width}function pU(i,t,e){let n=i;return typeof t.text!="string"&&(n=Y3(t,e)),n}function Y3(i,t){const e=i.text?i.text.length:0;return t*e}function yU(i,t){return!!((i==="mousemove"||i==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(i==="click"||i==="mouseup"))}var _U={id:"legend",_element:i4,start(i,t,e){const n=i.legend=new i4({ctx:i.ctx,options:e,chart:i});$n.configure(i,n,e),$n.addBox(i,n)},stop(i){$n.removeBox(i,i.legend),delete i.legend},beforeUpdate(i,t,e){const n=i.legend;$n.configure(i,n,e),n.options=e},afterUpdate(i){const t=i.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(i,t){t.replay||i.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(i,t,e){const n=t.datasetIndex,s=e.chart;s.isDatasetVisible(n)?(s.hide(n),t.hidden=!0):(s.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:i=>i.chart.options.color,boxWidth:40,padding:10,generateLabels(i){const t=i.data.datasets,{labels:{usePointStyle:e,pointStyle:n,textAlign:s,color:r,useBorderRadius:o,borderRadius:l}}=i.legend.options;return i._getSortedDatasetMetas().map(c=>{const f=c.controller.getStyle(e?0:void 0),g=is(f.borderWidth);return{text:t[c.index].label,fillStyle:f.backgroundColor,fontColor:r,hidden:!c.visible,lineCap:f.borderCapStyle,lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:(g.width+g.height)/4,strokeStyle:f.borderColor,pointStyle:n||f.pointStyle,rotation:f.rotation,textAlign:s||f.textAlign,borderRadius:o&&(l||f.borderRadius),datasetIndex:c.index}},this)}},title:{color:i=>i.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:i=>!i.startsWith("on"),labels:{_scriptable:i=>!["generateLabels","filter","sort"].includes(i)}}};class X3 extends Bo{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const s=Ei(n.text)?n.text.length:1;this._padding=is(n.padding);const r=s*Ui(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:n,bottom:s,right:r,options:o}=this,l=o.align;let c=0,f,g,m;return this.isHorizontal()?(g=zi(l,n,r),m=e+t,f=r-n):(o.position==="left"?(g=n+t,m=zi(l,s,e),c=be*-.5):(g=r-t,m=zi(l,e,s),c=be*.5),f=s-e),{titleX:g,titleY:m,maxWidth:f,rotation:c}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const n=Ui(e.font),r=n.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:c,rotation:f}=this._drawArgs(r);Lh(t,e.text,0,0,n,{color:e.color,maxWidth:c,rotation:f,textAlign:Bv(e.align),textBaseline:"middle",translation:[o,l]})}}function vU(i,t){const e=new X3({ctx:i.ctx,options:t,chart:i});$n.configure(i,e,t),$n.addBox(i,e),i.titleBlock=e}var xU={id:"title",_element:X3,start(i,t,e){vU(i,e)},stop(i){const t=i.titleBlock;$n.removeBox(i,t),delete i.titleBlock},beforeUpdate(i,t,e){const n=i.titleBlock;$n.configure(i,n,e),n.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Vc={average(i){if(!i.length)return!1;let t,e,n=new Set,s=0,r=0;for(t=0,e=i.length;t<e;++t){const l=i[t].element;if(l&&l.hasValue()){const c=l.tooltipPosition();n.add(c.x),s+=c.y,++r}}return r===0||n.size===0?!1:{x:[...n].reduce((l,c)=>l+c)/n.size,y:s/r}},nearest(i,t){if(!i.length)return!1;let e=t.x,n=t.y,s=Number.POSITIVE_INFINITY,r,o,l;for(r=0,o=i.length;r<o;++r){const c=i[r].element;if(c&&c.hasValue()){const f=c.getCenterPoint(),g=GF(t,f);g<s&&(s=g,l=c)}}if(l){const c=l.tooltipPosition();e=c.x,n=c.y}return{x:e,y:n}}};function Cs(i,t){return t&&(Ei(t)?Array.prototype.push.apply(i,t):i.push(t)),i}function dr(i){return(typeof i=="string"||i instanceof String)&&i.indexOf(`
`)>-1?i.split(`
`):i}function bU(i,t){const{element:e,datasetIndex:n,index:s}=t,r=i.getDatasetMeta(n).controller,{label:o,value:l}=r.getLabelAndValue(s);return{chart:i,label:o,parsed:r.getParsed(s),raw:i.data.datasets[n].data[s],formattedValue:l,dataset:r.getDataset(),dataIndex:s,datasetIndex:n,element:e}}function n4(i,t){const e=i.chart.ctx,{body:n,footer:s,title:r}=i,{boxWidth:o,boxHeight:l}=t,c=Ui(t.bodyFont),f=Ui(t.titleFont),g=Ui(t.footerFont),m=r.length,p=s.length,v=n.length,x=is(t.padding);let E=x.height,b=0,M=n.reduce((A,T)=>A+T.before.length+T.lines.length+T.after.length,0);if(M+=i.beforeBody.length+i.afterBody.length,m&&(E+=m*f.lineHeight+(m-1)*t.titleSpacing+t.titleMarginBottom),M){const A=t.displayColors?Math.max(l,c.lineHeight):c.lineHeight;E+=v*A+(M-v)*c.lineHeight+(M-1)*t.bodySpacing}p&&(E+=t.footerMarginTop+p*g.lineHeight+(p-1)*t.footerSpacing);let w=0;const R=function(A){b=Math.max(b,e.measureText(A).width+w)};return e.save(),e.font=f.string,de(i.title,R),e.font=c.string,de(i.beforeBody.concat(i.afterBody),R),w=t.displayColors?o+2+t.boxPadding:0,de(n,A=>{de(A.before,R),de(A.lines,R),de(A.after,R)}),w=0,e.font=g.string,de(i.footer,R),e.restore(),b+=x.width,{width:b,height:E}}function EU(i,t){const{y:e,height:n}=t;return e<n/2?"top":e>i.height-n/2?"bottom":"center"}function SU(i,t,e,n){const{x:s,width:r}=n,o=e.caretSize+e.caretPadding;if(i==="left"&&s+r+o>t.width||i==="right"&&s-r-o<0)return!0}function MU(i,t,e,n){const{x:s,width:r}=e,{width:o,chartArea:{left:l,right:c}}=i;let f="center";return n==="center"?f=s<=(l+c)/2?"left":"right":s<=r/2?f="left":s>=o-r/2&&(f="right"),SU(f,i,t,e)&&(f="center"),f}function s4(i,t,e){const n=e.yAlign||t.yAlign||EU(i,e);return{xAlign:e.xAlign||t.xAlign||MU(i,t,e,n),yAlign:n}}function wU(i,t){let{x:e,width:n}=i;return t==="right"?e-=n:t==="center"&&(e-=n/2),e}function TU(i,t,e){let{y:n,height:s}=i;return t==="top"?n+=e:t==="bottom"?n-=s+e:n-=s/2,n}function r4(i,t,e,n){const{caretSize:s,caretPadding:r,cornerRadius:o}=i,{xAlign:l,yAlign:c}=e,f=s+r,{topLeft:g,topRight:m,bottomLeft:p,bottomRight:v}=su(o);let x=wU(t,l);const E=TU(t,c,f);return c==="center"?l==="left"?x+=f:l==="right"&&(x-=f):l==="left"?x-=Math.max(g,p)+s:l==="right"&&(x+=Math.max(m,v)+s),{x:fn(x,0,n.width-t.width),y:fn(E,0,n.height-t.height)}}function Qd(i,t,e){const n=is(e.padding);return t==="center"?i.x+i.width/2:t==="right"?i.x+i.width-n.right:i.x+n.left}function a4(i){return Cs([],dr(i))}function CU(i,t,e){return wu(i,{tooltip:t,tooltipItems:e,type:"tooltip"})}function o4(i,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?i.override(e):i}const W3={beforeTitle:cr,title(i){if(i.length>0){const t=i[0],e=t.chart.data.labels,n=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return e[t.dataIndex]}return""},afterTitle:cr,beforeBody:cr,beforeLabel:cr,label(i){if(this&&this.options&&this.options.mode==="dataset")return i.label+": "+i.formattedValue||i.formattedValue;let t=i.dataset.label||"";t&&(t+=": ");const e=i.formattedValue;return Be(e)||(t+=e),t},labelColor(i){const e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(i){const e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:cr,afterBody:cr,beforeFooter:cr,footer:cr,afterFooter:cr};function nn(i,t,e,n){const s=i[t].call(e,n);return typeof s>"u"?W3[t].call(e,n):s}class l4 extends Bo{static positioners=Vc;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,n=this.options.setContext(this.getContext()),s=n.enabled&&e.options.animation&&n.animations,r=new L3(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=CU(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:n}=e,s=nn(n,"beforeTitle",this,t),r=nn(n,"title",this,t),o=nn(n,"afterTitle",this,t);let l=[];return l=Cs(l,dr(s)),l=Cs(l,dr(r)),l=Cs(l,dr(o)),l}getBeforeBody(t,e){return a4(nn(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:n}=e,s=[];return de(t,r=>{const o={before:[],lines:[],after:[]},l=o4(n,r);Cs(o.before,dr(nn(l,"beforeLabel",this,r))),Cs(o.lines,nn(l,"label",this,r)),Cs(o.after,dr(nn(l,"afterLabel",this,r))),s.push(o)}),s}getAfterBody(t,e){return a4(nn(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:n}=e,s=nn(n,"beforeFooter",this,t),r=nn(n,"footer",this,t),o=nn(n,"afterFooter",this,t);let l=[];return l=Cs(l,dr(s)),l=Cs(l,dr(r)),l=Cs(l,dr(o)),l}_createItems(t){const e=this._active,n=this.chart.data,s=[],r=[],o=[];let l=[],c,f;for(c=0,f=e.length;c<f;++c)l.push(bU(this.chart,e[c]));return t.filter&&(l=l.filter((g,m,p)=>t.filter(g,m,p,n))),t.itemSort&&(l=l.sort((g,m)=>t.itemSort(g,m,n))),de(l,g=>{const m=o4(t.callbacks,g);s.push(nn(m,"labelColor",this,g)),r.push(nn(m,"labelPointStyle",this,g)),o.push(nn(m,"labelTextColor",this,g))}),this.labelColors=s,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=l,l}update(t,e){const n=this.options.setContext(this.getContext()),s=this._active;let r,o=[];if(!s.length)this.opacity!==0&&(r={opacity:0});else{const l=Vc[n.position].call(this,s,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);const c=this._size=n4(this,n),f=Object.assign({},l,c),g=s4(this.chart,n,f),m=r4(n,f,g,this.chart);this.xAlign=g.xAlign,this.yAlign=g.yAlign,r={opacity:1,x:m.x,y:m.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,n,s){const r=this.getCaretPosition(t,n,s);e.lineTo(r.x1,r.y1),e.lineTo(r.x2,r.y2),e.lineTo(r.x3,r.y3)}getCaretPosition(t,e,n){const{xAlign:s,yAlign:r}=this,{caretSize:o,cornerRadius:l}=n,{topLeft:c,topRight:f,bottomLeft:g,bottomRight:m}=su(l),{x:p,y:v}=t,{width:x,height:E}=e;let b,M,w,R,A,T;return r==="center"?(A=v+E/2,s==="left"?(b=p,M=b-o,R=A+o,T=A-o):(b=p+x,M=b+o,R=A-o,T=A+o),w=b):(s==="left"?M=p+Math.max(c,g)+o:s==="right"?M=p+x-Math.max(f,m)-o:M=this.caretX,r==="top"?(R=v,A=R-o,b=M-o,w=M+o):(R=v+E,A=R+o,b=M+o,w=M-o),T=R),{x1:b,x2:M,x3:w,y1:R,y2:A,y3:T}}drawTitle(t,e,n){const s=this.title,r=s.length;let o,l,c;if(r){const f=ru(n.rtl,this.x,this.width);for(t.x=Qd(this,n.titleAlign,n),e.textAlign=f.textAlign(n.titleAlign),e.textBaseline="middle",o=Ui(n.titleFont),l=n.titleSpacing,e.fillStyle=n.titleColor,e.font=o.string,c=0;c<r;++c)e.fillText(s[c],f.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+l,c+1===r&&(t.y+=n.titleMarginBottom-l)}}_drawColorBox(t,e,n,s,r){const o=this.labelColors[n],l=this.labelPointStyles[n],{boxHeight:c,boxWidth:f}=r,g=Ui(r.bodyFont),m=Qd(this,"left",r),p=s.x(m),v=c<g.lineHeight?(g.lineHeight-c)/2:0,x=e.y+v;if(r.usePointStyle){const E={radius:Math.min(f,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},b=s.leftForLtr(p,f)+f/2,M=x+c/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,ww(t,E,b,M),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,ww(t,E,b,M)}else{t.lineWidth=$t(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const E=s.leftForLtr(p,f),b=s.leftForLtr(s.xPlus(p,1),f-2),M=su(o.borderRadius);Object.values(M).some(w=>w!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,r0(t,{x:E,y:x,w:f,h:c,radius:M}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),r0(t,{x:b,y:x+1,w:f-2,h:c-2,radius:M}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(E,x,f,c),t.strokeRect(E,x,f,c),t.fillStyle=o.backgroundColor,t.fillRect(b,x+1,f-2,c-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,e,n){const{body:s}=this,{bodySpacing:r,bodyAlign:o,displayColors:l,boxHeight:c,boxWidth:f,boxPadding:g}=n,m=Ui(n.bodyFont);let p=m.lineHeight,v=0;const x=ru(n.rtl,this.x,this.width),E=function(P){e.fillText(P,x.x(t.x+v),t.y+p/2),t.y+=p+r},b=x.textAlign(o);let M,w,R,A,T,L,I;for(e.textAlign=o,e.textBaseline="middle",e.font=m.string,t.x=Qd(this,b,n),e.fillStyle=n.bodyColor,de(this.beforeBody,E),v=l&&b!=="right"?o==="center"?f/2+g:f+2+g:0,A=0,L=s.length;A<L;++A){for(M=s[A],w=this.labelTextColors[A],e.fillStyle=w,de(M.before,E),R=M.lines,l&&R.length&&(this._drawColorBox(e,t,A,x,n),p=Math.max(m.lineHeight,c)),T=0,I=R.length;T<I;++T)E(R[T]),p=m.lineHeight;de(M.after,E)}v=0,p=m.lineHeight,de(this.afterBody,E),t.y-=r}drawFooter(t,e,n){const s=this.footer,r=s.length;let o,l;if(r){const c=ru(n.rtl,this.x,this.width);for(t.x=Qd(this,n.footerAlign,n),t.y+=n.footerMarginTop,e.textAlign=c.textAlign(n.footerAlign),e.textBaseline="middle",o=Ui(n.footerFont),e.fillStyle=n.footerColor,e.font=o.string,l=0;l<r;++l)e.fillText(s[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+n.footerSpacing}}drawBackground(t,e,n,s){const{xAlign:r,yAlign:o}=this,{x:l,y:c}=t,{width:f,height:g}=n,{topLeft:m,topRight:p,bottomLeft:v,bottomRight:x}=su(s.cornerRadius);e.fillStyle=s.backgroundColor,e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.beginPath(),e.moveTo(l+m,c),o==="top"&&this.drawCaret(t,e,n,s),e.lineTo(l+f-p,c),e.quadraticCurveTo(l+f,c,l+f,c+p),o==="center"&&r==="right"&&this.drawCaret(t,e,n,s),e.lineTo(l+f,c+g-x),e.quadraticCurveTo(l+f,c+g,l+f-x,c+g),o==="bottom"&&this.drawCaret(t,e,n,s),e.lineTo(l+v,c+g),e.quadraticCurveTo(l,c+g,l,c+g-v),o==="center"&&r==="left"&&this.drawCaret(t,e,n,s),e.lineTo(l,c+m),e.quadraticCurveTo(l,c,l+m,c),e.closePath(),e.fill(),s.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,n=this.$animations,s=n&&n.x,r=n&&n.y;if(s||r){const o=Vc[t.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=n4(this,t),c=Object.assign({},o,this._size),f=s4(e,t,c),g=r4(t,c,f,e);(s._to!==g.x||r._to!==g.y)&&(this.xAlign=f.xAlign,this.yAlign=f.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,g))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(e);const s={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const o=is(e.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&l&&(t.save(),t.globalAlpha=n,this.drawBackground(r,t,s,e),D3(t,e.textDirection),r.y+=o.top,this.drawTitle(r,t,e),this.drawBody(r,t,e),this.drawFooter(r,t,e),I3(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const n=this._active,s=t.map(({datasetIndex:l,index:c})=>{const f=this.chart.getDatasetMeta(l);if(!f)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:f.data[c],index:c}}),r=!Qg(n,s),o=this._positionChanged(s,e);(r||o)&&(this._active=s,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,n=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,r=this._active||[],o=this._getActiveElements(t,r,e,n),l=this._positionChanged(o,t),c=e||!Qg(o,r)||l;return c&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),c}_getActiveElements(t,e,n,s){const r=this.options;if(t.type==="mouseout")return[];if(!s)return e.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,r.mode,r,n);return r.reverse&&o.reverse(),o}_positionChanged(t,e){const{caretX:n,caretY:s,options:r}=this,o=Vc[r.position].call(this,t,e);return o!==!1&&(n!==o.x||s!==o.y)}}var RU={id:"tooltip",_element:l4,positioners:Vc,afterInit(i,t,e){e&&(i.tooltip=new l4({chart:i,options:e}))},beforeUpdate(i,t,e){i.tooltip&&i.tooltip.initialize(e)},reset(i,t,e){i.tooltip&&i.tooltip.initialize(e)},afterDraw(i){const t=i.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(i.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(i.ctx),i.notifyPlugins("afterTooltipDraw",e)}},afterEvent(i,t){if(i.tooltip){const e=t.replay;i.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(i,t)=>t.bodyFont.size,boxWidth:(i,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:W3},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:i=>i!=="filter"&&i!=="itemSort"&&i!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const AU=(i,t,e,n)=>(typeof t=="string"?(e=i.push(t)-1,n.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function OU(i,t,e,n){const s=i.indexOf(t);if(s===-1)return AU(i,t,e,n);const r=i.lastIndexOf(t);return s!==r?e:s}const DU=(i,t)=>i===null?null:fn(Math.round(i),0,t);function u4(i){const t=this.getLabels();return i>=0&&i<t.length?t[i]:i}class IU extends Tu{static id="category";static defaults={ticks:{callback:u4}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const n=this.getLabels();for(const{index:s,label:r}of e)n[s]===r&&n.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(Be(t))return null;const n=this.getLabels();return e=isFinite(e)&&n[e]===t?e:OU(n,t,oe(e,t),this._addedLabels),DU(e,n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:n,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(n=0),e||(s=this.getLabels().length-1)),this.min=n,this.max=s}buildTicks(){const t=this.min,e=this.max,n=this.options.offset,s=[];let r=this.getLabels();r=t===0&&e===r.length-1?r:r.slice(t,e+1),this._valueRange=Math.max(r.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let o=t;o<=e;o++)s.push({value:o});return s}getLabelForValue(t){return u4.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function LU(i,t){const e=[],{bounds:s,step:r,min:o,max:l,precision:c,count:f,maxTicks:g,maxDigits:m,includeBounds:p}=i,v=r||1,x=g-1,{min:E,max:b}=t,M=!Be(o),w=!Be(l),R=!Be(f),A=(b-E)/(m+1);let T=pw((b-E)/x/v)*v,L,I,P,k;if(T<1e-14&&!M&&!w)return[{value:E},{value:b}];k=Math.ceil(b/T)-Math.floor(E/T),k>x&&(T=pw(k*T/x/v)*v),Be(c)||(L=Math.pow(10,c),T=Math.ceil(T*L)/L),s==="ticks"?(I=Math.floor(E/T)*T,P=Math.ceil(b/T)*T):(I=E,P=b),M&&w&&r&&PF((l-o)/r,T/1e3)?(k=Math.round(Math.min((l-o)/T,g)),T=(l-o)/k,I=o,P=l):R?(I=M?o:I,P=w?l:P,k=f-1,T=(P-I)/k):(k=(P-I)/T,hg(k,Math.round(k),T/1e3)?k=Math.round(k):k=Math.ceil(k));const Y=Math.max(yw(T),yw(I));L=Math.pow(10,Be(c)?Y:c),I=Math.round(I*L)/L,P=Math.round(P*L)/L;let F=0;for(M&&(p&&I!==o?(e.push({value:o}),I<o&&F++,hg(Math.round((I+F*T)*L)/L,o,c4(o,A,i))&&F++):I<o&&F++);F<k;++F){const G=Math.round((I+F*T)*L)/L;if(w&&G>l)break;e.push({value:G})}return w&&p&&P!==l?e.length&&hg(e[e.length-1].value,l,c4(l,A,i))?e[e.length-1].value=l:e.push({value:l}):(!w||P===l)&&e.push({value:P}),e}function c4(i,t,{horizontal:e,minRotation:n}){const s=_r(n),r=(e?Math.sin(s):Math.cos(s))||.001,o=.75*t*(""+i).length;return Math.min(t/r,o)}class PU extends Tu{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return Be(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:s,max:r}=this;const o=c=>s=e?s:c,l=c=>r=n?r:c;if(t){const c=i0(s),f=i0(r);c<0&&f<0?l(0):c>0&&f>0&&o(0)}if(s===r){let c=r===0?1:Math.abs(r*.05);l(r+c),t||o(s-c)}this.min=s,this.max=r}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:n}=t,s;return n?(s=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),e=e||11),e&&(s=Math.min(e,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const s={maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},r=this._range||this,o=LU(s,r);return t.bounds==="ticks"&&NF(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const s=(n-e)/Math.max(t.length-1,1)/2;e-=s,n+=s}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return Uv(t,this.chart.options.locale,this.options.ticks.format)}}class NU extends PU{static id="linear";static defaults={ticks:{callback:S3.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=es(t)?t:0,this.max=es(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,n=_r(this.options.ticks.minRotation),s=(t?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,r.lineHeight/s))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const $0={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},cn=Object.keys($0);function h4(i,t){return i-t}function f4(i,t){if(Be(t))return null;const e=i._adapter,{parser:n,round:s,isoWeekday:r}=i._parseOpts;let o=t;return typeof n=="function"&&(o=n(o)),es(o)||(o=typeof n=="string"?e.parse(o,n):e.parse(o)),o===null?null:(s&&(o=s==="week"&&(n0(r)||r===!0)?e.startOf(o,"isoWeek",r):e.startOf(o,s)),+o)}function d4(i,t,e,n){const s=cn.length;for(let r=cn.indexOf(i);r<s-1;++r){const o=$0[cn[r]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((e-t)/(l*o.size))<=n)return cn[r]}return cn[s-1]}function zU(i,t,e,n,s){for(let r=cn.length-1;r>=cn.indexOf(e);r--){const o=cn[r];if($0[o].common&&i._adapter.diff(s,n,o)>=t-1)return o}return cn[e?cn.indexOf(e):0]}function GU(i){for(let t=cn.indexOf(i)+1,e=cn.length;t<e;++t)if($0[cn[t]].common)return cn[t]}function g4(i,t,e){if(!e)i[t]=!0;else if(e.length){const{lo:n,hi:s}=jv(e,t),r=e[n]>=t?e[n]:e[s];i[r]=!0}}function kU(i,t,e,n){const s=i._adapter,r=+s.startOf(t[0].value,n),o=t[t.length-1].value;let l,c;for(l=r;l<=o;l=+s.add(l,1,n))c=e[l],c>=0&&(t[c].major=!0);return t}function m4(i,t,e){const n=[],s={},r=t.length;let o,l;for(o=0;o<r;++o)l=t[o],s[l]=o,n.push({value:l,major:!1});return r===0||!e?n:kU(i,n,s,e)}class p4 extends Tu{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const n=t.time||(t.time={}),s=this._adapter=new Vj._date(t.adapters.date);s.init(e),eh(n.displayFormats,s.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:f4(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,n=t.time.unit||"day";let{min:s,max:r,minDefined:o,maxDefined:l}=this.getUserBounds();function c(f){!o&&!isNaN(f.min)&&(s=Math.min(s,f.min)),!l&&!isNaN(f.max)&&(r=Math.max(r,f.max))}(!o||!l)&&(c(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&c(this.getMinMax(!1))),s=es(s)&&!isNaN(s)?s:+e.startOf(Date.now(),n),r=es(r)&&!isNaN(r)?r:+e.endOf(Date.now(),n)+1,this.min=Math.min(s,r-1),this.max=Math.max(s+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],n=t[t.length-1]),{min:e,max:n}}buildTicks(){const t=this.options,e=t.time,n=t.ticks,s=n.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const r=this.min,o=this.max,l=jF(s,r,o);return this._unit=e.unit||(n.autoSkip?d4(e.minUnit,this.min,this.max,this._getLabelCapacity(r)):zU(this,l.length,e.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:GU(this._unit),this.initOffsets(s),t.reverse&&l.reverse(),m4(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,n=0,s,r;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?e=1-s:e=(this.getDecimalForValue(t[1])-s)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?n=r:n=(r-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;e=fn(e,0,o),n=fn(n,0,o),this._offsets={start:e,end:n,factor:1/(e+1+n)}}_generate(){const t=this._adapter,e=this.min,n=this.max,s=this.options,r=s.time,o=r.unit||d4(r.minUnit,e,n,this._getLabelCapacity(e)),l=oe(s.ticks.stepSize,1),c=o==="week"?r.isoWeekday:!1,f=n0(c)||c===!0,g={};let m=e,p,v;if(f&&(m=+t.startOf(m,"isoWeek",c)),m=+t.startOf(m,f?"day":o),t.diff(n,e,o)>1e5*l)throw new Error(e+" and "+n+" are too far apart with stepSize of "+l+" "+o);const x=s.ticks.source==="data"&&this.getDataTimestamps();for(p=m,v=0;p<n;p=+t.add(p,l,o),v++)g4(g,p,x);return(p===n||s.bounds==="ticks"||v===1)&&g4(g,p,x),Object.keys(g).sort(h4).map(E=>+E)}getLabelForValue(t){const e=this._adapter,n=this.options.time;return n.tooltipFormat?e.format(t,n.tooltipFormat):e.format(t,n.displayFormats.datetime)}format(t,e){const s=this.options.time.displayFormats,r=this._unit,o=e||s[r];return this._adapter.format(t,o)}_tickFormatFunction(t,e,n,s){const r=this.options,o=r.ticks.callback;if(o)return Ae(o,[t,e,n],this);const l=r.time.displayFormats,c=this._unit,f=this._majorUnit,g=c&&l[c],m=f&&l[f],p=n[e],v=f&&m&&p&&p.major;return this._adapter.format(t,s||(v?m:g))}generateTickLabels(t){let e,n,s;for(e=0,n=t.length;e<n;++e)s=t[e],s.label=this._tickFormatFunction(s.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+n)*e.factor)}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,n=this.ctx.measureText(t).width,s=_r(this.isHorizontal()?e.maxRotation:e.minRotation),r=Math.cos(s),o=Math.sin(s),l=this._resolveTickFontOptions(0).size;return{w:n*r+l*o,h:n*o+l*r}}_getLabelCapacity(t){const e=this.options.time,n=e.displayFormats,s=n[e.unit]||n.millisecond,r=this._tickFormatFunction(t,0,m4(this,[t],this._majorUnit),s),o=this._getLabelSize(r),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let t=this._cache.data||[],e,n;if(t.length)return t;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(e=0,n=s.length;e<n;++e)t=t.concat(s[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,n;if(t.length)return t;const s=this.getLabels();for(e=0,n=s.length;e<n;++e)t.push(f4(this,s[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return UF(t.sort(h4))}}function Jd(i,t,e){let n=0,s=i.length-1,r,o,l,c;e?(t>=i[n].pos&&t<=i[s].pos&&({lo:n,hi:s}=a1(i,"pos",t)),{pos:r,time:l}=i[n],{pos:o,time:c}=i[s]):(t>=i[n].time&&t<=i[s].time&&({lo:n,hi:s}=a1(i,"time",t)),{time:r,pos:l}=i[n],{time:o,pos:c}=i[s]);const f=o-r;return f?l+(c-l)*(t-r)/f:l}class cH extends p4{static id="timeseries";static defaults=p4.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Jd(e,this.min),this._tableRange=Jd(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:n}=this,s=[],r=[];let o,l,c,f,g;for(o=0,l=t.length;o<l;++o)f=t[o],f>=e&&f<=n&&s.push(f);if(s.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(o=0,l=s.length;o<l;++o)g=s[o+1],c=s[o-1],f=s[o],Math.round((g+c)/2)!==f&&r.push({time:f,pos:o/(l-1)});return r}_generate(){const t=this.min,e=this.max;let n=super.getDataTimestamps();return(!n.includes(t)||!n.length)&&n.splice(0,0,t),(!n.includes(e)||n.length===1)&&n.push(e),n.sort((s,r)=>s-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),n=this.getLabelTimestamps();return e.length&&n.length?t=this.normalize(e.concat(n)):t=e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(Jd(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return Jd(this._table,n*this._tableRange+this._minPos,!0)}}const K3="label";function y4(i,t){typeof i=="function"?i(t):i&&(i.current=t)}function FU(i,t){const e=i.options;e&&t&&Object.assign(e,t)}function Z3(i,t){i.labels=t}function $3(i,t,e=K3){const n=[];i.datasets=t.map(s=>{const r=i.datasets.find(o=>o[e]===s[e]);return!r||!s.data||n.includes(r)?{...s}:(n.push(r),Object.assign(r,s),r)})}function jU(i,t=K3){const e={labels:[],datasets:[]};return Z3(e,i.labels),$3(e,i.datasets,t),e}function BU(i,t){const{height:e=150,width:n=300,redraw:s=!1,datasetIdKey:r,type:o,data:l,options:c,plugins:f=[],fallbackContent:g,updateMode:m,...p}=i,v=ge.useRef(null),x=ge.useRef(null),E=()=>{v.current&&(x.current=new Z0(v.current,{type:o,data:jU(l,r),options:c&&{...c},plugins:f}),y4(t,x.current))},b=()=>{y4(t,null),x.current&&(x.current.destroy(),x.current=null)};return ge.useEffect(()=>{!s&&x.current&&c&&FU(x.current,c)},[s,c]),ge.useEffect(()=>{!s&&x.current&&Z3(x.current.config.data,l.labels)},[s,l.labels]),ge.useEffect(()=>{!s&&x.current&&l.datasets&&$3(x.current.config.data,l.datasets,r)},[s,l.datasets]),ge.useEffect(()=>{x.current&&(s?(b(),setTimeout(E)):x.current.update(m))},[s,c,l.labels,l.datasets,m]),ge.useEffect(()=>{x.current&&(b(),setTimeout(E))},[o]),ge.useEffect(()=>(E(),()=>b()),[]),ot.jsx("canvas",{ref:v,role:"img",height:e,width:n,...p,children:g})}const UU=ge.forwardRef(BU);function HU(i,t){return Z0.register(t),ge.forwardRef((e,n)=>ot.jsx(UU,{...e,ref:n,type:i}))}const qU=HU("doughnut",qj),VU=({selectProperties:i,setSelectProperties:t})=>{Z0.register(aU,RU,IU,NU,fU,xU,_U);const{name:e,type:n,region:s,pop_t_cens:r,pop_u_cens:o,pop_r_cens:l,urb:c,pop_density:f,area_km2:g}=i,m=ge.useMemo(()=>({labels:[" "," "],datasets:[{data:[i.pop_u_cens,i.pop_r_cens],backgroundColor:["#ff6200ff","#b3ff00ff"],borderColor:"#ffffffff"}]}),[i]),p=ge.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{enabled:!0,callbacks:{label:function(v){const x=v.raw||0,b=v.dataset.data.reduce((w,R)=>w+R,0);return`${Math.round(x/b*100)}%`}}}}}),[]);return ot.jsxs("div",{className:"infoPanel",children:[ot.jsxs("div",{className:"munName",children:[ot.jsxs("div",{children:[n," ",e]}),ot.jsx("div",{children:s})]}),ot.jsx("div",{className:"backButton",onClick:()=>t(null),children:""}),ot.jsxs("div",{className:"statColumn",children:[ot.jsx("div",{style:{fontSize:"1.4rem",fontWeight:"bold"},children:" "}),ot.jsx("div",{className:"densityPanel",children:ot.jsxs("div",{style:{display:"flex",flexDirection:"row",fontSize:"1.4rem",fontWeight:"bold",gap:10},children:[ot.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:5},children:[ot.jsx("div",{children:""}),ot.jsx("div",{style:{width:140,height:3,backgroundColor:"black"}}),ot.jsx("div",{children:""})]}),ot.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:ot.jsx("div",{children:"="})}),ot.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:5},children:[ot.jsxs("div",{children:[r," ."]}),ot.jsx("div",{style:{width:120,height:3,backgroundColor:"black"}}),ot.jsxs("div",{children:[g.toFixed()," "]})]}),ot.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:ot.jsxs("div",{children:["= ",f.toFixed(1)," ./"]})})]})}),ot.jsx("div",{style:{fontSize:"1.4rem",fontWeight:"bold"},children:" "}),ot.jsxs("div",{className:"urbPanel",children:[ot.jsxs("div",{style:{position:"relative",width:"160px",height:"160px"},children:[ot.jsx(qU,{id:"doughnut",options:p,data:m}),ot.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center"},children:ot.jsxs("div",{style:{fontSize:"24px",fontWeight:"bold",borderRadius:"100%",height:"60px",width:"60px",alignContent:"center"},children:[(c*100).toFixed(),"%"]})})]}),ot.jsxs("div",{className:"donutPanel",children:[ot.jsxs("div",{className:"donutPanelNum",children:[o," ."]}),ot.jsx("div",{className:"donutPanelLabel",children:" "}),ot.jsxs("div",{className:"donutPanelNum",children:[l," ."]}),ot.jsx("div",{className:"donutPanelLabel",children:" "})]})]})]})]})},YU=({items:i,setSelectProperties:t,itemsPerPage:e=10})=>{const[n,s]=ge.useState("fid"),[r,o]=ge.useState("asc"),[l,c]=ge.useState(1),f=ge.useCallback(b=>{c(Number(b.target.value))},[]),{totalPages:g,currentItems:m}=ge.useMemo(()=>{const b=[...i].sort((T,L)=>{const I=T.properties[n],P=L.properties[n];return I<P?r==="asc"?-1:1:I>P?r==="asc"?1:-1:0}),M=Math.ceil(b.length/e),w=(l-1)*e,R=w+e,A=b.slice(w,R);return{sortedItems:b,totalPages:M,currentItems:A}},[i,n,r,l,e]),p=b=>{b===n?o(r==="asc"?"desc":"asc"):(s(b),o("asc")),c(1)},v=b=>{c(b)},x=b=>b!==n?null:r==="asc"?" ":" ",E=()=>{const b=[];let w=Math.max(1,l-Math.floor(2.5));const R=Math.min(g,w+5-1);R-w+1<5&&(w=Math.max(1,R-5+1));for(let A=w;A<=R;A++)b.push(A);return b};return ot.jsxs("div",{className:"sortable-paginated-list",children:[ot.jsx("div",{className:"table-title",children:"  "}),ot.jsxs("div",{className:"list-table",children:[ot.jsxs("div",{className:"table-row table-header",children:[ot.jsxs("div",{onClick:()=>p("name"),children:["",x("name")]}),ot.jsxs("div",{onClick:()=>p("type"),children:["",x("type")]}),ot.jsxs("div",{onClick:()=>p("region"),children:[" ",x("region")]}),ot.jsxs("div",{onClick:()=>p("pop_t_cens"),children:[", .",x("pop_t_cens")]}),ot.jsxs("div",{onClick:()=>p("urb"),children:[", %",x("urb")]}),ot.jsxs("div",{onClick:()=>p("pop_density"),children:[" , ./2",x("pop_density")]}),ot.jsxs("div",{onClick:()=>p("area_km2"),children:[", 2",x("area_km2")]})]}),ot.jsx("div",{className:"item-rows",children:m.map(b=>ot.jsxs("div",{className:"table-row",onClick:()=>{t(b.properties)},children:[ot.jsx("div",{children:b.properties.name}),ot.jsx("div",{children:b.properties.type}),ot.jsx("div",{children:b.properties.region}),ot.jsx("div",{children:b.properties.pop_t_cens}),ot.jsx("div",{children:(b.properties.urb*100).toFixed()}),ot.jsx("div",{children:b.properties.pop_density.toFixed(1)}),ot.jsx("div",{children:b.properties.area_km2.toFixed()})]},b.properties.fid))})]}),g>1&&ot.jsxs("div",{className:"pagination",children:[ot.jsx("button",{onClick:()=>v(1),disabled:l===1,className:"pagination-button",children:""}),E().map(b=>ot.jsx("button",{onClick:()=>v(b),className:`pagination-button ${l===b?"active":""}`,children:b},b)),ot.jsx("button",{onClick:()=>v(g),disabled:l===g,className:"pagination-button",children:""})]}),ot.jsxs("div",{className:"page-info",children:[" ",ot.jsx("input",{type:"number",value:l,max:g,min:1,onInput:f,className:"page-input"}),"  ",g]})]})};var Ts={exports:{}};const tg=h5(Q9),XU="17.2.3",WU={version:XU};var _4;function KU(){if(_4)return Ts.exports;_4=1;var i={};const t=tg,e=tg,n=tg,s=tg,o=WU.version,l=[" encrypt with Dotenvx: https://dotenvx.com"," prevent committing .env to code: https://dotenvx.com/precommit"," prevent building .env in docker: https://dotenvx.com/prebuild"," add observability to secrets: https://dotenvx.com/ops"," sync secrets across teammates & machines: https://dotenvx.com/ops"," backup and recover secrets: https://dotenvx.com/ops"," audit secrets and track compliance: https://dotenvx.com/ops"," add secrets lifecycle management: https://dotenvx.com/ops"," add access controls to secrets: https://dotenvx.com/ops","  run anywhere with `dotenvx run -- yourcommand`","  specify custom .env file path with { path: '/custom/path/.env' }","  enable debug logging with { debug: true }","  override existing env vars with { override: true }","  suppress all logs with { quiet: true }","  write to custom object with { processEnv: myObject }","  load multiple .env files with { path: ['.env.local', '.env'] }"];function c(){return l[Math.floor(Math.random()*l.length)]}function f(G){return typeof G=="string"?!["false","0","no","off",""].includes(G.toLowerCase()):!!G}function g(){return process.stdout.isTTY}function m(G){return g()?`\x1B[2m${G}\x1B[0m`:G}const p=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function v(G){const K={};let $=G.toString();$=$.replace(/\r\n?/mg,`
`);let q;for(;(q=p.exec($))!=null;){const D=q[1];let j=q[2]||"";j=j.trim();const U=j[0];j=j.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),U==='"'&&(j=j.replace(/\\n/g,`
`),j=j.replace(/\\r/g,"\r")),K[D]=j}return K}function x(G){G=G||{};const K=A(G);G.path=K;const $=F.configDotenv(G);if(!$.parsed){const U=new Error(`MISSING_DATA: Cannot parse ${K} for an unknown reason`);throw U.code="MISSING_DATA",U}const q=w(G).split(","),D=q.length;let j;for(let U=0;U<D;U++)try{const J=q[U].trim(),st=R($,J);j=F.decrypt(st.ciphertext,st.key);break}catch(J){if(U+1>=D)throw J}return F.parse(j)}function E(G){console.error(`[dotenv@${o}][WARN] ${G}`)}function b(G){console.log(`[dotenv@${o}][DEBUG] ${G}`)}function M(G){console.log(`[dotenv@${o}] ${G}`)}function w(G){return G&&G.DOTENV_KEY&&G.DOTENV_KEY.length>0?G.DOTENV_KEY:i.DOTENV_KEY&&i.DOTENV_KEY.length>0?i.DOTENV_KEY:""}function R(G,K){let $;try{$=new URL(K)}catch(J){if(J.code==="ERR_INVALID_URL"){const st=new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");throw st.code="INVALID_DOTENV_KEY",st}throw J}const q=$.password;if(!q){const J=new Error("INVALID_DOTENV_KEY: Missing key part");throw J.code="INVALID_DOTENV_KEY",J}const D=$.searchParams.get("environment");if(!D){const J=new Error("INVALID_DOTENV_KEY: Missing environment part");throw J.code="INVALID_DOTENV_KEY",J}const j=`DOTENV_VAULT_${D.toUpperCase()}`,U=G.parsed[j];if(!U){const J=new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${j} in your .env.vault file.`);throw J.code="NOT_FOUND_DOTENV_ENVIRONMENT",J}return{ciphertext:U,key:q}}function A(G){let K=null;if(G&&G.path&&G.path.length>0)if(Array.isArray(G.path))for(const $ of G.path)t.existsSync($)&&(K=$.endsWith(".vault")?$:`${$}.vault`);else K=G.path.endsWith(".vault")?G.path:`${G.path}.vault`;else K=e.resolve(process.cwd(),".env.vault");return t.existsSync(K)?K:null}function T(G){return G[0]==="~"?e.join(n.homedir(),G.slice(1)):G}function L(G){const K=f(i.DOTENV_CONFIG_DEBUG||G&&G.debug),$=f(i.DOTENV_CONFIG_QUIET||G&&G.quiet);(K||!$)&&M("Loading env from encrypted .env.vault");const q=F._parseVault(G);let D=i;return G&&G.processEnv!=null&&(D=G.processEnv),F.populate(D,q,G),{parsed:q}}function I(G){const K=e.resolve(process.cwd(),".env");let $="utf8",q=i;G&&G.processEnv!=null&&(q=G.processEnv);let D=f(q.DOTENV_CONFIG_DEBUG||G&&G.debug),j=f(q.DOTENV_CONFIG_QUIET||G&&G.quiet);G&&G.encoding?$=G.encoding:D&&b("No encoding is specified. UTF-8 is used by default");let U=[K];if(G&&G.path)if(!Array.isArray(G.path))U=[T(G.path)];else{U=[];for(const N of G.path)U.push(T(N))}let J;const st={};for(const N of U)try{const it=F.parse(t.readFileSync(N,{encoding:$}));F.populate(st,it,G)}catch(it){D&&b(`Failed to load ${N} ${it.message}`),J=it}const O=F.populate(q,st,G);if(D=f(q.DOTENV_CONFIG_DEBUG||D),j=f(q.DOTENV_CONFIG_QUIET||j),D||!j){const N=Object.keys(O).length,it=[];for(const at of U)try{const ct=e.relative(process.cwd(),at);it.push(ct)}catch(ct){D&&b(`Failed to load ${at} ${ct.message}`),J=ct}M(`injecting env (${N}) from ${it.join(",")} ${m(`-- tip: ${c()}`)}`)}return J?{parsed:st,error:J}:{parsed:st}}function P(G){if(w(G).length===0)return F.configDotenv(G);const K=A(G);return K?F._configVault(G):(E(`You set DOTENV_KEY but you are missing a .env.vault file at ${K}. Did you forget to build it?`),F.configDotenv(G))}function k(G,K){const $=Buffer.from(K.slice(-64),"hex");let q=Buffer.from(G,"base64");const D=q.subarray(0,12),j=q.subarray(-16);q=q.subarray(12,-16);try{const U=s.createDecipheriv("aes-256-gcm",$,D);return U.setAuthTag(j),`${U.update(q)}${U.final()}`}catch(U){const J=U instanceof RangeError,st=U.message==="Invalid key length",O=U.message==="Unsupported state or unable to authenticate data";if(J||st){const N=new Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");throw N.code="INVALID_DOTENV_KEY",N}else if(O){const N=new Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw N.code="DECRYPTION_FAILED",N}else throw U}}function Y(G,K,$={}){const q=!!($&&$.debug),D=!!($&&$.override),j={};if(typeof K!="object"){const U=new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");throw U.code="OBJECT_REQUIRED",U}for(const U of Object.keys(K))Object.prototype.hasOwnProperty.call(G,U)?(D===!0&&(G[U]=K[U],j[U]=K[U]),q&&b(D===!0?`"${U}" is already defined and WAS overwritten`:`"${U}" is already defined and was NOT overwritten`)):(G[U]=K[U],j[U]=K[U]);return j}const F={configDotenv:I,_configVault:L,_parseVault:x,config:P,decrypt:k,parse:v,populate:Y};return Ts.exports.configDotenv=F.configDotenv,Ts.exports._configVault=F._configVault,Ts.exports._parseVault=F._parseVault,Ts.exports.config=F.config,Ts.exports.decrypt=F.decrypt,Ts.exports.parse=F.parse,Ts.exports.populate=F.populate,Ts.exports=F,Ts.exports}KU();const ZU=({selectProperties:i})=>{const t=ge.useMemo(()=>{if(!i)return"x";const e=i.pop_density;if(e<1)return"1";if(1<=e&&e<5)return"2";if(5<=e&&e<10)return"3";if(10<=e&&e<25)return"4";if(25<=e&&e<100)return"5";if(100<=e&&e<2500)return"6"},[i]);return ot.jsxs("div",{className:"scale-container",children:[ot.jsxs("div",{className:"scale-wrapper",children:[ot.jsxs("div",{className:"scale-colors",children:[ot.jsx("div",{style:{backgroundColor:"rgba(0, 139, 113, 0.8)",border:t==="1"?"3px solid #000284ff":"1px solid white"}}),ot.jsx("div",{style:{backgroundColor:"rgba(148, 255, 61, 0.8)",border:t==="2"?"3px solid #000284ff":"1px solid white"}}),ot.jsx("div",{style:{backgroundColor:"rgba(230, 254, 76, 0.8)",border:t==="3"?"3px solid #000284ff":"1px solid white"}}),ot.jsx("div",{style:{backgroundColor:"rgba(255, 196, 0, 0.8)",border:t==="4"?"3px solid #000284ff":"1px solid white"}}),ot.jsx("div",{style:{backgroundColor:"rgba(224, 101, 0, 0.8)",border:t==="5"?"3px solid #000284ff":"1px solid white"}}),ot.jsx("div",{style:{backgroundColor:"rgba(168, 0, 0, 0.8)",border:t==="6"?"3px solid #000284ff":"1px solid white"}})]}),ot.jsxs("div",{className:"scale-tab",children:[ot.jsx("div",{children:"2500"}),ot.jsx("div",{children:"100"}),ot.jsx("div",{children:"25"}),ot.jsx("div",{children:"10"}),ot.jsx("div",{children:"5"}),ot.jsx("div",{children:"1"}),ot.jsx("div",{children:"0"})]})]}),ot.jsx("div",{children:"/"})]})},v4="5UXjcwcX8UyLW6zNAxsl";No.defs("UFO_CASSINI","+proj=cass +lat_0=0 +lon_0=70 +x_0=0 +y_0=0 +ellps=WGS84 +units=m +no_defs");dL(No);const $U=No("EPSG:4326","UFO_CASSINI",[70,90]),QU=No("EPSG:4326","UFO_CASSINI",[70,-90]),Q3=No("EPSG:4326","UFO_CASSINI",[-180,0]),J3=No("EPSG:4326","UFO_CASSINI",[180,0]),JU=Math.min(Q3[0],J3[0],-1e7),tH=Math.min(QU[1],-1e7),eH=Math.max(Q3[0],J3[0],1e7),iH=Math.max($U[1],1e7),ro=new vu({code:"UFO_CASSINI",units:"m",extent:[JU,tH,eH,iH],worldExtent:[0,0,180,90]}),nH=new URL("/ural_pop_map/assets/umun4326_simple-ySvddoaj.geojson",import.meta.url).href,sH=()=>{const i=ge.useRef(null),[t,e]=ge.useState(null),[n,s]=ge.useState(null),[r,o]=ge.useState(null),[l,c]=ge.useState(null),f=ge.useMemo(()=>{if(n){const g=n.features;return console.log("list: ",g),g}},[n]);return ge.useEffect(()=>{(async()=>{const m=await fetch(nH).then(p=>p.json());s(m)})()},[]),ge.useEffect(()=>{if(!i.current)return;ro&&(console.log(ro),console.log("regged"));const g=new Tr({zIndex:0}),m=new Tr({zIndex:15}),p=new Eh({target:i.current,layers:[g,m],controls:gT().extend([new EL]),view:new hs({center:Cg([70,64],ro),zoom:4.5,projection:ro,minZoom:4.5,maxZoom:9,extent:[-12e5,2e6,12e5,9e6]})});return ow(g,`https://api.maptiler.com/maps/019ac165-0d6f-77f4-8114-e7886839c598/style.json?key=${v4}`),ow(m,`https://api.maptiler.com/maps/019ac16c-4029-7a3d-8c18-20f61ef54c9c/style.json?key=${v4}`),e(p),p.on("pointermove",v=>{o(p0(v.coordinate,ro,"EPSG:4326"))}),p.on("click",function(v){p.forEachFeatureAtPixel(v.pixel,function(x){if(x instanceof Wh){console.log("cl: ",x);const E=x.getProperties();c(E)}},{hitTolerance:1})}),()=>{p.setTarget(void 0)}},[]),ge.useEffect(()=>{if(!n)return;const g=new Bg().readFeatures(n,{dataProjection:"EPSG:4326",featureProjection:ro}),m=[{min:.05,max:1,color:"rgba(0, 139, 113, 0.8)"},{min:1,max:5,color:"rgba(148, 255, 61, 0.8)"},{min:5,max:10,color:"rgba(230, 254, 76, 0.8)"},{min:10,max:25,color:"rgba(255, 196, 0, 0.8)"},{min:25,max:100,color:"rgba(224, 101, 0, 0.8)"},{min:100,max:2500,color:"rgba(168, 0, 0, 0.8)"}],p=E=>{const b=E.get("pop_density"),M=m.find(w=>b>=w.min&&b<w.max);return new qi({fill:new Zn({color:M?M.color:"#848484ff"})})},v=new Jl({features:g}),x=new bh({source:v,style:p});x.setZIndex(5),t?.addLayer(x)},[t,n]),ge.useEffect(()=>{if(!n||!l)return;console.log("select: ",l);const m=n.features.find(b=>{if(b.properties.fid===l.fid)return b}),p={...n,features:m?[m]:[]},v=new Bg().readFeatures(p,{dataProjection:"EPSG:4326",featureProjection:ro}),x=new Jl({features:v}),E=new bh({source:x,properties:{name:"selectLayer"},style:new qi({fill:new Zn({color:"rgba(0, 86, 166, 0.7)"}),stroke:new yr({color:"#000284ff",width:1})}),zIndex:10});t?.getLayers().forEach(b=>{b.get("name")&&b.get("name")=="selectLayer"&&t.removeLayer(b)}),t?.addLayer(E),console.log(t?.getLayers())},[l,n,t]),ot.jsxs("div",{style:{display:"flex",flexDirection:"row"},children:[ot.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",width:"50dvw",position:"relative"},children:[ot.jsxs("div",{className:"titleBox",children:[ot.jsx("div",{className:"mapTitle",children:"    "}),ot.jsx("div",{className:"mapSubtitle",children:"   2022 "})]}),f&&!l&&ot.jsx(YU,{items:f,setSelectProperties:c}),l&&ot.jsx(VU,{selectProperties:l,setSelectProperties:c})]}),ot.jsxs("div",{ref:i,style:{width:"50dvw",height:"100dvh",position:"relative"},children:[ot.jsx(ZU,{selectProperties:l}),r&&ot.jsxs("div",{className:"coord-box",children:[ot.jsxs("span",{children:[r[1].toFixed(2),".."]})," ",ot.jsxs("span",{children:[r[0].toFixed(2),".."]})]})]})]})};b5.createRoot(document.getElementById("root")).render(ot.jsx(ge.StrictMode,{children:ot.jsx(sH,{})}));
